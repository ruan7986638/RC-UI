
<ui>
	<css name="$TextNano">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextSecondary">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextSecondaryNoFilter">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextSecondaryBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextDefault">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextDefaultBold">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextHeaderBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextHeader">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextHeaderWhite">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextHeaderHugeWhite">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="30"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextHeaderBigDefault">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextHeaderBigTeamKiller">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF96CA"/>
	</css>
	<css name="$TextHeaderBigNegative">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF6600"/>
	</css>
	<css name="$TextHeaderBigWhite">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextAccent">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextAccentBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextAccentSecond">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="60"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextHeaderUnready">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF9933"/>
	</css>
	<css name="$TextDefaultWhite">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultWhiteBold">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextSmallCompareNegative">
		<fontFamily value="$WWSDefaultFont"/>
		<textColor value="0xFF6600"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$TextSmallWhite">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextSmallGold">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextDefaultExpSmall">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextSmallNegative">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF6600"/>
	</css>
	<css name="$TextTurquoiseQuests">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x00cccc"/>
	</css>
	<css name="$TextLargeHeader">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextLargeHeaderBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextLargeHeaderBlack">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="21"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextThumbelina">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="7"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextAccentWhite">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultTech">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$TextHeaderBigDefaultTech">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$BlackLabel">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$ZurichCondensedBold"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextHeaderWhiteBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$ResultsReward">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="60"/>
		<letterSpacing value="-3"/>
		<marginRight value="2px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextAccentGreyBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<textColor value="0xDDDDDD"/>
		<fontSize value="60"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$TextAccentBoldAccountLevel">
		<fontFamily value="$WWSDefaultFontBold"/>
		<textColor value="0xFFFFFF"/>
		<fontSize value="50"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$TextAccentBoldAccountLevel1">
		<fontFamily value="$WWSDefaultFontBold"/>
		<textColor value="0xFFFFFF"/>
		<fontSize value="36"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$TextAccentBoldAccountLevel2">
		<fontFamily value="$WWSDefaultFontBold"/>
		<textColor value="0xFFFFFF"/>
		<fontSize value="30"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$Fullsize">
		<width value="100%"/>
		<height value="100%"/>
	</css>
	<css name="$FullsizeAbsolute">
		<width value="100%"/>
		<position value="absolute"/>
		<height value="100%"/>
	</css>
	<css name="$FullWidth">
		<width value="100%"/>
	</css>
	<css name="$MiddleAligned">
		<marginLeft value="-50%"/>
		<left value="50%"/>
	</css>
	<css name="$MiddleAlignedAbsolutely">
		<position value="absolute"/>
		<marginLeft value="-50%"/>
		<left value="50%"/>
	</css>
	<css name="$MiddleVAligned">
		<top value="50%"/>
		<marginTop value="-50%"/>
	</css>
	<css name="$EyeLevelVAligned">
		<top value="720:360,2160:900ah"/>
		<marginTop value="-50%"/>
	</css>
	<css name="$MiddleVAlignedAbsolutely">
		<position value="absolute"/>
		<top value="50%"/>
		<marginTop value="-50%"/>
	</css>
	<css name="$MiddleVHAbsolutely">
		<position value="absolute"/>
		<top value="50%"/>
		<marginLeft value="-50%"/>
		<marginTop value="-50%"/>
		<left value="50%"/>
	</css>
	<css name="$AlignRight">
		<position value="absolute"/>
		<right value="0"/>
	</css>
	<css name="$MouseDisable">
		<hitTest value="false"/>
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
	</css>
	<css name="$InfoLineBoundaries">
		<marginTop value="6px"/>
		<marginBottom value="6px"/>
	</css>
	<css name="$InfoBlockHorizontalIndent">
		<width value="100%"/>
		<marginLeft value="12px"/>
		<marginRight value="12px"/>
	</css>
	<css name="$InfoBlockIndent">
		<width value="100%"/>
		<marginTop value="9px"/>
		<marginLeft value="12px"/>
		<marginBottom value="9px"/>
		<marginRight value="12px"/>
	</css>
	<css name="$InfoBlockHorizontalIndentNoWidth">
		<marginLeft value="12px"/>
		<marginRight value="12px"/>
	</css>
	<css name="$DockPanelMargins">
		<marginLeft value="13px"/>
		<marginRight value="13px"/>
	</css>
	<css name="$InfoBlockIndentNoWidth">
		<marginBottom value="9px"/>
		<marginTop value="9px"/>
		<marginLeft value="12px"/>
		<marginRight value="12px"/>
	</css>
	<css name="$TextInputEnterButton">
		<right value="2px"/>
		<top value="50%"/>
		<height value="25px"/>
		<width value="52px"/>
		<position value="absolute"/>
		<marginTop value="-11px"/>
	</css>
	<css name="$TextAreaEnterButton">
		<position value="absolute"/>
		<height value="25px"/>
		<right value="2px"/>
		<width value="52px"/>
		<bottom value="0px"/>
	</css>
	<css name="$DefaultScrollBar">
		<wheelScrollSpeed value="15"/>
		<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
		<scrollArea value="ModernScrollArea"/>
		<scrollbar value="ModernScrollBar"/>
		<scrollbarTrackMode value="scrollToCursor"/>
	</css>
	<css name="$None"/>
	<css name="$PxHorizontalCorrection">
		<marginLeft value="1px"/>
		<marginRight value="1px"/>
	</css>
	<css name="$PxIndent">
		<marginTop value="1px"/>
		<marginBottom value="1px"/>
		<marginLeft value="1px"/>
		<marginRight value="1px"/>
	</css>
	<css name="$BottomMenu">
		<position value="absolute"/>
		<bottom value="0px"/>
		<width value="100%"/>
		<height value="30px"/>
	</css>
	<block className="HorizontalDivider">
		<styleClass value="$PxHorizontalCorrection"/>
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
		<block className="divider_h" type="native">
			<styleClass value="$Fullsize"/>
		</block>
	</block>
	<css name="$ModernizationAndConsumScrollBar">
		<wheelScrollSpeed value="15"/>
		<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
		<scrollArea value="ModernScrollArea"/>
		<scrollbar value="ModernScrollBarSimple"/>
		<scrollbarTrackMode value="scrollToCursor"/>
	</css>
	<block className="VerticalDivider">
		<style>
			<height value="100%"/>
			<width value="3px"/>
		</style>
		<block className="divider_v" type="native">
			<styleClass value="$Fullsize"/>
		</block>
	</block>
	<block className="TableDivider">
		<style>
			<backgroundImage value="symbol:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.1"/>
		</style>
	</block>
	<block className="Underline">
		<bind name="style" value="'backgroundColor'; (rollOver &amp;&amp; !mouseDown) ? '0xFFFFFFFF' : '0x00856933'"/>
		<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) == true; 0.3; {scaleX : 0, alpha : 0}; {scaleX : 1, alpha :1}"/>
		<style>
			<backgroundColor value="0xFFFFFFFF"/>
			<position value="absolute"/>
			<height value="1px"/>
			<width value="100%"/>
			<bottom value="0px"/>
			<marginLeft value="2px"/>
			<marginRight value="2px"/>
		</style>
	</block>
	<block className="BlurMap">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="visible" value="optionData.blurEnabled"/>
		<style>
			<hitTest value="false"/>
		</style>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="mc_blurmap_medium" type="native">
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="blurMap" value="0"/>
		</block>
		<block className="inner_panel" type="native">
			<style>
				<alpha value="0.5"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
	</block>
	<block className="BlurMapLow">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="visible" value="optionData.blurEnabled"/>
		<style>
			<hitTest value="false"/>
		</style>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="mc_blurmap5" type="native">
			<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
			<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="blurMap" value="0"/>
		</block>
		<block className="inner_panel" type="native">
			<style>
				<alpha value="0.2"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
	</block>
	<block className="BlurMapNotifications">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="visible" value="optionData.blurEnabled"/>
		<style>
			<position value="absolute"/>
			<width value="100%"/>
			<height value="100%"/>
		</style>
		<block className="mc_blurmap5_feather" type="native">
			<bind name="fade" value="_start; 0.3; {alpha: 0, top: 10}; {alpha: 1, top:0 }; {alpha: 0, top: -20}; 1; 0.15"/>
			<style>
				<width value="100%"/>
				<height value="100%"/>
			</style>
			<bind name="blurMap" value="0"/>
		</block>
	</block>
	<block className="DeclareBlurLayer">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="visible" value="optionData.blurEnabled"/>
		<block className="transparentPixel" type="native">
			<bind name="blurLayer" value="0"/>
		</block>
		<style>
			<position value="absolute"/>
		</style>
	</block>
	<css name="$ContextMenuListItem">
		<width value="100%"/>
		<height value="29px"/>
	</css>
	<css name="$ContextMenuListItemContent">
		<width value="198px"/>
		<marginLeft value="6px"/>
		<marginRight value="6px"/>
	</css>
	<css name="$ContextMenuDimentions">
		<width value="210px"/>
	</css>
	<block className="DropShadow">
		<styleClass value="$FullsizeAbsolute"/>
		<styleClass value="$MouseDisable"/>
		<block className="drop_shadow" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="-2px"/>
				<marginRight value="-6px"/>
				<marginBottom value="-10px"/>
				<marginLeft value="-6px"/>
			</style>
		</block>
	</block>
	<block className="EmptyItem">
		<bind name="visible" value="false"/>
	</block>
	<block className="DottedLine">
		<style>
			<backgroundImage value="symbol:dotted_line"/>
			<backgroundRepeatX value="true"/>
			<width value="100%"/>
			<height value="1px"/>
			<alpha value="0.5"/>
		</style>
	</block>
	<css name="$ContentIndents">
		<marginBottom value="12"/>
		<marginTop value="12"/>
		<marginLeft value="12"/>
		<marginRight value="12"/>
	</css>
	<css name="$DragScrollerStyleVertical">
		<scrollbarController value="lesta.unbound.style.UbScrollingControllerDrag"/>
		<wheelScrollSpeed value="100"/>
		<flow value="vertical"/>
		<height value="100%f"/>
		<mouseEnabledWhileScroll value="false"/>
		<scrollbar value="ModernScrollBar"/>
		<overflow value="scroll"/>
	</css>
	<css name="$DragScrollerStyleHorizonal">
		<scrollbarController value="lesta.unbound.style.UbScrollingControllerDrag"/>
		<wheelScrollSpeed value="0"/>
		<flow value="horizontal"/>
		<width value="100%f"/>
		<mouseEnabledWhileScroll value="true"/>
		<overflow value="scroll"/>
	</css>
	<css name="$titleBackgroundSize">
		<width value="640px"/>
		<height value="28px"/>
	</css>
	<css name="$TeamBgOrdinary">
		<width value="636px"/>
		<height value="25px"/>
	</css>
	<css name="$TeambgTitle">
		<width value="1280px"/>
		<height value="29px"/>
	</css>
	<block className="UIListTeamResult">
		<bind name="watch" value="'battleType'; 	(game_data.battle_mode_id == 1)	? BattleTypes.TRAINING_BATTLE :
								(game_data.battle_mode_id == 2) ? BattleTypes.COOPERATIVE_BATTLE :
								(game_data.battle_mode_id == 4) ? BattleTypes.RANKED_BATTLE :
								(game_data.battle_mode_id == 5) ? BattleTypes.CLUB_BATTLE :
								(game_data.battle_mode_id == 6) ? BattleTypes.PVE_BATTLE :
								(game_data.battle_mode_id == 8) ? BattleTypes.CLAN_BATTLE :
								(game_data.battle_mode_id == 9) ? BattleTypes.EVENT_BATTLE
																: BattleTypes.RANDOM_BATTLE"/>
		<bind name="var" value="{complaintsAvailable: true}"/>
		<bind name="catch" value="'disableComplaints'; {complaintsAvailable: false}"/>
		<bind name="countdown" value="game_data.keep_until_time; 'countdownText'; 'mm:ss'; 'timeoutPostBattleComplaints'"/>
		<bind name="dispatch" value="'timeoutPostBattleComplaints'; 'disableComplaints'"/>
		<styleClass value="$MiddleAligned"/>
		<block>
			<style>
				<marginTop value="-1px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block className="UIListTeamResultLeft">
				<bind name="instance" value="'UIlistBaseLeft'; { team_results: team_results, uiListData: team_results.listAllied, sortingColumnId: 'exp', 
										sortingDirection:'descending', sortingNumeric: 'true', game_data: game_data, personal: personal, 
										complaintsAvailable: complaintsAvailable, _battleType: battleType }"/>
				<bind name="name" value="'table_AllyTeam'"/>
			</block>
			<block>
				<bind name="visible" value="game_data.game_mode != GameMode.PVE"/>
				<block className="UIListTeamResultRight">
					<bind name="instance" value="'UIlistBaseRight'; { 	team_results: team_results, game_data: game_data, personal: personal,
											complaintsAvailable: complaintsAvailable, _battleType: battleType }"/>
					<bind name="name" value="'table_EnemyTeam'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="UIListTeamResultLeft">
		<bind name="instance" value="'UIlistBaseLeft'; { team_results: team_results, uiListData: team_results.listAllied, sortingColumnId: 'exp', 
										sortingDirection:'descending', sortingNumeric: 'true', game_data: game_data, personal: personal, 
										complaintsAvailable: complaintsAvailable, _battleType: battleType }"/>
		<bind name="name" value="'table_AllyTeam'"/>
	</block>
	<block className="UIListTeamResultRight">
		<bind name="instance" value="'UIlistBaseRight'; { 	team_results: team_results, game_data: game_data, personal: personal,
											complaintsAvailable: complaintsAvailable, _battleType: battleType }"/>
		<bind name="name" value="'table_EnemyTeam'"/>
	</block>
	<block className="UIlistBaseLeft">
		<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="watch" value="'allyClanTag'; team_results.listAllied[0].player.clan_tag"/>
		<bind name="watch" value="'allyRealm'; team_results.listAllied[0].player.realm"/>
		<bind name="watch" value="'allySquadId'; team_results.listAllied[0].player.squadId"/>
		<bind name="event" value="'changeSortDirection'; onChangeSortDirection; _sortingFieldName; true"/>
		<bind name="dispatch" value="'onSortSelected'; 'changeSortDirection'; {}; false; 0.05"/>
		<bind name="catch" value="'onSortSelected'"/>
		<bind name="watch" value="'isResourcesEnabled'; game_data.game_mode == GameMode.ESCAPE_TO_PORTAL ? true : false"/>
		<bind name="style" value="'width'; isResourcesEnabled ? '572px' : '606px'"/>
		<block className="cell_background" type="native">
			<style>
				<width value="100%"/>
				<position value="absolute"/>
			</style>
			<bind name="gotoAndStop!" value="1"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<block>
					<bind name="instance" value="'UIlistTeamStructureHeaderLeft'; { 	_width: '437px', _battleType: _battleType,
																	_allyClanTag: allyClanTag, _allyRealm: allyRealm, _allySquadId: allySquadId }"/>
				</block>
				<block>
					<bind name="visible" value="isResourcesEnabled"/>
					<style>
						<position value="absolute"/>
						<left value="-26"/>
						<top value="6"/>
						<width value="21px"/>
						<height value="21px"/>
						<backgroundSize value="cover"/>
						<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<block>
					<bind name="instance" value="'UIListHeaderCell'; {_sortingEnabled: true, _width: '34px', _png: 'Kills', _sortingFieldName: 'ships_killed', _tooltipText: 'IDS_BY_KILLS', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
				</block>
				<block>
					<bind name="instance" value="'UIListHeaderCell'; isResourcesEnabled ? null : {_sortingEnabled: true, _width: '34px', _png: 'KilledPlanes', _sortingFieldName: 'killed_planes', _tooltipText: 'IDS_BY_DESTOYED_PLANES', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
				</block>
				<block>
					<bind name="instance" value="'UIListHeaderCell'; {_sortingEnabled: true, _width: '66px', _png: 'Exp', _sortingFieldName: 'exp', _tooltipText: 'IDS_BY_EXPIRIENCE', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
				</block>
				<block>
					<bind name="instance" value="'UIListHeaderCell'; {_sortingEnabled: true, _width: '35px', _png: 'Rewards', _sortingFieldName: 'totalAchievements', _tooltipText: 'IDS_BY_REWARDS', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="sortedUiListData; 'SimpleUIListTeamResultRowRendererLeft'; {	_players: sortedUiListData, _rankId: rankedBattlesStats.rank, 
																					game_data: game_data, personal: personal, _isResourcesEnabled: isResourcesEnabled,
																					complaintsAvailable: complaintsAvailable }"/>
		</block>
	</block>
	<block className="UIlistBaseRight">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="watch" value="'enemyClanTag'; team_results.listEnemies[0].player.clan_tag"/>
		<bind name="watch" value="'enemyRealm'; team_results.listEnemies[0].player.realm"/>
		<bind name="watch" value="'enemySquadId'; team_results.listEnemies[0].player.squadId"/>
		<bind name="dispatch" value="'onSortSelected'; 'changeSortDirection'; {_sortingFieldName: _sortingFieldName}; SC.Common.UBSCOPE_EVENT_DIRECTIONS.DOWN; 0.05"/>
		<bind name="catch" value="'onSortSelected'"/>
		<bind name="watch" value="'isResourcesEnabled'; game_data.game_mode == GameMode.ESCAPE_TO_PORTAL ? true : false"/>
		<bind name="style" value="'width'; isResourcesEnabled ? '575px' : '609px'"/>
		<block>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<block className="cell_background" type="native">
					<style>
						<width value="100%"/>
						<position value="absolute"/>
					</style>
					<bind name="gotoAndStop!" value="2"/>
				</block>
				<block>
					<block>
						<bind name="instance" value="'UIListHeaderCell'; {_width: '35px', _png: 'Rewards', _sortingFieldName: 'totalAchievements', _tooltipText: 'IDS_BY_REWARDS', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
					</block>
					<block>
						<bind name="instance" value="'UIListHeaderCell'; {_width: '66px', _png: 'Exp', _sortingFieldName: 'exp', _tooltipText: 'IDS_BY_EXPIRIENCE', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
					</block>
					<block>
						<bind name="instance" value="'UIListHeaderCell'; isResourcesEnabled ? null : {_width: '34px', _png: 'KilledPlanes', _sortingFieldName: 'killed_planes', _tooltipText: 'IDS_BY_DESTOYED_PLANES', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
					</block>
					<block>
						<bind name="instance" value="'UIListHeaderCell'; {_width: '34px', _png: 'Kills', _sortingFieldName: 'ships_killed', _tooltipText: 'IDS_BY_KILLS', _sortingColumnId: sortingColumnId, _onChangeSortDirection: onChangeSortDirection}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<block>
						<bind name="visible" value="isResourcesEnabled"/>
						<style>
							<position value="absolute"/>
							<right value="-26"/>
							<top value="6"/>
							<width value="21px"/>
							<height value="21px"/>
							<backgroundSize value="cover"/>
							<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
						</style>
					</block>
					<bind name="instance" value="'UIlistTeamStructureHeaderRight'; { _width: '437px', _battleType: _battleType,
																		_enemyClanTag: enemyClanTag, _enemyRealm: enemyRealm, _enemySquadId: enemySquadId }"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="team_results.enemiesByTeam.keys; 'SimpleUIListTeamResultRowRendererRightRepeater';	{ _rankId: rankedBattlesStats.rank,
																				game_data: game_data, personal: personal, _isResourcesEnabled: isResourcesEnabled, enemiesByTeam: team_results.enemiesByTeam,
																				complaintsAvailable: complaintsAvailable }"/>
		</block>
	</block>
	<block className="SimpleUIListTeamResultRowRendererRightRepeater">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginTop'; $index == 0 ? '0' : '16'"/>
		<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
		<bind name="watch" value="'uiListData'; enemiesByTeam[$value]"/>
		<bind name="var" value="{sortingColumnId: 'exp', sortingDirection:'descending', sortingNumeric: 'true',}"/>
		<bind name="catch" value="'changeSortDirection'"/>
		<bind name="dispatch" value="'changeSortDirection'; 'delayedChangeSortDirection'; {}; false; 0.05"/>
		<bind name="event" value="'delayedChangeSortDirection'; onChangeSortDirection; _sortingFieldName; true"/>
		<block className="VerticalDivider">
			<style>
				<height value="100%"/>
				<width value="3px"/>
			</style>
			<block className="divider_v" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; $index == 0 ? '0' : '-1px'"/>
			<bind name="repeat" value="sortedUiListData; 'SimpleUIListTeamResultRowRendererRight'; { _players: sortedUiListData, _rankId: _rankId,
																					game_data: game_data, personal: personal, _isResourcesEnabled: _isResourcesEnabled,
																					complaintsAvailable: complaintsAvailable }"/>
		</block>
	</block>
	<block className="UIListHeaderCell">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="dispatch" value="'click'; 'onSortSelected'; {_sortingFieldName: _sortingFieldName}"/>
		<block>
			<block className="title_backgrounds" type="native">
				<bind name="gotoAndStop!" value="1"/>
				<bind name="style" value="'width'; _width"/>
				<bind name="transition" value="rollOver || _sortingColumnId == _sortingFieldName; 0.15; {alpha: 0}; {alpha: 1}"/>
				<style>
					<height value="33px"/>
					<position value="absolute"/>
					<marginTop value="-1px"/>
				</style>
			</block>
			<block>
				<bind name="style" value="'width'; _width"/>
				<style>
					<height value="28px"/>
					<marginTop value="2px"/>
					<hitTest value="false"/>
				</style>
				<block className="icons_team_result_section" type="native">
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="gotoAndStop!" value="_png"/>
				</block>
			</block>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: _tooltipText}"/>
		</block>
	</block>
	<block className="SimpleUIListTeamResultRowRendererLeft">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks';  _rankId; 'rankInfo'"/>
		<bind name="appear" value="'startShow'; 0.15; 0.75 + 0.075 * $index; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="watch" value="'starEarnCondition'; player.is_self ? personal.starsGained &gt; 0 : (place &lt;= rankInfo.starEarnPlace) &amp;&amp; (battleResult == 1)"/>
		<bind name="watch" value="'starLossCondition'; !(rankInfo.isStarSafe) &amp;&amp; (place &gt;= rankInfo.starLossPlace) &amp;&amp; (battleResult &lt;= 0)"/>
		<bind name="watch" value="'thisPlayer'; _players[$index].player"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; player.dbId"/>
		<bind name="watchDH" value="'pureName'; 		['playerEntity.accountName.evChanged']; playerEntity.accountName.name"/>
		<bind name="watchDH" value="'isSuspended'; 	['playerEntity.accountSimple.evSuspendedChanged']; playerEntity.accountSimple.suspended"/>
		<style>
			<marginTop value="1px"/>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="personal.seasonId != 0 &amp;&amp; game_data.battle_mode_id == 4"/>
			<style>
				<position value="absolute"/>
				<height value="28px"/>
				<marginTop value="1px"/>
				<left value="-30px"/>
			</style>
			<bind name="instance" value="'StarEarnOrLoss'; starEarnCondition ||  starLossCondition ? {starEarnCondition: starEarnCondition, starLossCondition: starLossCondition} : null"/>
		</block>
		<block>
			<bind name="visible" value="_isResourcesEnabled &amp;&amp; player.personalResources &gt; 0"/>
			<style>
				<position value="absolute"/>
				<top value="10px"/>
				<left value="-52px"/>
			</style>
			<block type="text">
				<style>
					<width value="50px"/>
					<textAlign value="right"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="player.is_self	? '$TextDefaultBoldNM' : '$TextDefaultNM'"/>
				<bind name="class" value="player.is_self	? '$FontColorGolden' : '$None'"/>
				<bind name="text" value="player.personalResources"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<right value="0px"/>
			</style>
			<block>
				<bind name="style" value="'backgroundColor'; $index % 2 == 0 ? '0x15000000' : '0x25000000'"/>
				<style>
					<backgroundColor value="0x15000000"/>
					<position value="absolute"/>
					<height value="28px"/>
					<width value="100%"/>
				</style>
				<bind name="watch" value="'battleType'; 	(game_data.battle_mode_id == 1)	? BattleTypes.TRAINING_BATTLE :
										(game_data.battle_mode_id == 2) ? BattleTypes.COOPERATIVE_BATTLE :
										(game_data.battle_mode_id == 4) ? BattleTypes.RANKED_BATTLE :
										(game_data.battle_mode_id == 5) ? BattleTypes.CLUB_BATTLE :
										(game_data.battle_mode_id == 6) ? BattleTypes.PVE_BATTLE :
										(game_data.battle_mode_id == 8) ? BattleTypes.CLAN_BATTLE
																		: BattleTypes.RANDOM_BATTLE"/>
				<bind name="watch" value="'isContextMenuAvailable'; (!(player.is_self) &amp;&amp; !(isBot))"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="tooltip" value="'BattlePlayerTooltip'; !(isSuspended) ? {	_playerDbId: player.dbId, _clanTagColor: clanColor, _clanTag: clanTag, 
																			_isInBattle: false,	_isInPostBattle: true, _player: thisPlayer, _battleType: battleType, _isBot: isBot} : null"/>
					<bind name="menu" value="'UIListPlayerContextMenu'; isContextMenuAvailable	? {	_player: thisPlayer, _playerDbId: player.dbId, _arenaId: game_data.arena_id, _battleType: battleType,
																					_isInPBS: true, _complaintsAvailable: complaintsAvailable, _isInSameDivisionOnStart: isInSameDivisionOnStart, _isBot: isBot}
																				: null; null; 'contextMenuVisible'"/>
					<bind name="selected" value="contextMenuVisible"/>
					<bind name="dispatch" value="'buttonClick'; 'Tooltip.Close'; {}"/>
					<bind name="name" value="'contextMenuVisible_' + !!(contextMenuVisible) + '_' + player.name"/>
				</block>
			</block>
			<block>
				<style>
					<height value="28px"/>
				</style>
				<block>
					<style>
						<width value="30px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<bind name="visible" value="divisionIndex &gt; 0"/>
						<style>
							<marginTop value="1px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block className="division_item" type="native">
							<bind name="gotoAndStop!" value="isInSameDivision ? divisionSign + 1 : (divisionSign + 1 + 10)"/>
						</block>
					</block>
				</block>
				<block>
					<style>
						<width value="140px"/>
						<hitTest value="false"/>
					</style>
					<block>
						<style>
							<marginTop value="1px"/>
						</style>
						<bind name="instance" value="'IconRankSmall'; {_rankId: player.rank, _seasonId:player.rankSeasonId}"/>
					</block>
					<block>
						<bind name="name" value="'player_tab_stat_' + player.name"/>
						<style>
							<width value="100%"/>
							<top value="8px"/>
						</style>
						<bind name="instance" value="'PlayerNameAndClanTag'; { 	_isSelf: player.is_self, _isDead: !is_alive, _fontSize: 17,
																_tkStatus: player.tkStatus, _ttkStatus: player.ttkStatus, _isInSameDivision: isInSameDivision,
																_playerName: pureName, _clanTag: clanTag, _clanTagColor: clanColor }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="122px"/>
						<height value="100%"/>
						<hitTest value="false"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
							<marginLeft value="0px"/>
						</style>
						<bind name="style" value="'backgroundImage'; !is_alive 	? ('url:' + player.ship_dead_img_url)
																: player.is_self ? ('url:' + player.ship_own_img_url) : ('url:' + player.ship_img_url)"/>
					</block>
				</block>
				<block>
					<style>
						<width value="30px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="	player.is_self	? '$FontColorGolden' :
									!is_alive		? '$FontColorAlmostBlack'
													: '$None'"/>
						<bind name="class" value="player.is_self	? '$Bold' : '$None'"/>
						<bind name="class" value="!is_alive &amp;&amp; !(player.is_self) ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="player.levelRome"/>
					</block>
				</block>
				<block>
					<style>
						<width value="115px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="left"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="'$LetterSpacingSmall'"/>
						<bind name="class" value="player.is_self	? '$FontColorGolden' :
								!is_alive		? '$FontColorAlmostBlack'
												: '$None'"/>
						<bind name="class" value="player.is_self	? '$Bold' : '$None'"/>
						<bind name="class" value="!is_alive &amp;&amp; !(player.is_self) ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="toUpperCase(tr(player.ids_ship_name))"/>
					</block>
				</block>
				<block>
					<style>
						<width value="34px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<bind name="visible" value="ships_killed != 0"/>
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="ships_killed"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!_isResourcesEnabled"/>
					<style>
						<width value="34px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<bind name="visible" value="killed_planes != 0"/>
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="killed_planes"/>
					</block>
				</block>
				<block>
					<style>
						<width value="66px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="format(exp, -1)"/>
					</block>
				</block>
				<block>
					<style>
						<width value="35px"/>
					</style>
					<block>
						<style>
							<marginLeft value="9px"/>
							<marginTop value="4px"/>
						</style>
						<bind name="instance" value="'EarnedAchievementsByPlayer'; (totalAchievements &gt; 0) ? {_achievements: achievements, _isSelfPlayer: player.is_self} : null"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="SimpleUIListTeamResultRowRendererRight">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks';  _rankId; 'rankInfo'"/>
		<bind name="appear" value="'startShow'; 0.15; 0.75 + 0.075 * $index; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="watch" value="'starEarnCondition'; (place &lt;= rankInfo.starEarnPlace &amp;&amp; battleResult == 1)"/>
		<bind name="watch" value="'starLossCondition'; place &gt;= rankInfo.starLossPlace &amp;&amp; (battleResult &lt;= 0)"/>
		<bind name="watch" value="'thisPlayer'; _players[$index].player"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; player.dbId"/>
		<bind name="watchDH" value="'pureName'; 		['playerEntity.accountName.evChanged']; playerEntity.accountName.name"/>
		<style>
			<width value="100%"/>
			<marginTop value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="style" value="'backgroundColor'; $index % 2 == 0 ? '0x15000000' : '0x25000000'"/>
				<style>
					<backgroundColor value="0x15000000"/>
					<position value="absolute"/>
					<height value="28px"/>
					<width value="100%"/>
				</style>
				<bind name="watch" value="'battleType'; 	(game_data.battle_mode_id == 1)	? BattleTypes.TRAINING_BATTLE :
										(game_data.battle_mode_id == 2) ? BattleTypes.COOPERATIVE_BATTLE :
										(game_data.battle_mode_id == 4) ? BattleTypes.RANKED_BATTLE :
										(game_data.battle_mode_id == 5) ? BattleTypes.CLUB_BATTLE	:
										(game_data.battle_mode_id == 6) ? BattleTypes.PVE_BATTLE :
										(game_data.battle_mode_id == 8) ? BattleTypes.CLAN_BATTLE
																		: BattleTypes.RANDOM_BATTLE"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="tooltip" value="'BattlePlayerTooltip'; {	_playerDbId: player.dbId, _clanTagColor: clanColor, _playerClanTag: clanTag, 
														_isInBattle: false,	_isInPostBattle: true, _player: thisPlayer, _battleType: battleType, _isBot: isBot}"/>
					<bind name="menu" value="'UIListPlayerContextMenu'; !(isBot) ? {	_player: thisPlayer, _playerDbId: player.dbId, _arenaId: game_data.arena_id, _battleType: battleType,
														 			_isInPBS: true, _complaintsAvailable: complaintsAvailable, _isBot: isBot} : null; null; 'contextMenuVisible'"/>
					<bind name="selected" value="contextMenuVisible"/>
					<bind name="dispatch" value="'buttonClick'; 'Tooltip.Close'; {}"/>
					<bind name="name" value="'contextMenuVisible_' + !!(contextMenuVisible) + '_' + player.name"/>
				</block>
			</block>
			<block>
				<style>
					<height value="28px"/>
				</style>
				<block>
					<style>
						<width value="35px"/>
					</style>
					<block>
						<style>
							<marginLeft value="9px"/>
							<marginTop value="4px"/>
						</style>
						<bind name="instance" value="'EarnedAchievementsByPlayer'; (totalAchievements &gt; 0) ? {_achievements: achievements, _isSelfPlayer: player.is_self} : null"/>
					</block>
				</block>
				<block>
					<style>
						<width value="66px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="format(exp, -1)"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!_isResourcesEnabled"/>
					<style>
						<width value="34px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<bind name="visible" value="killed_planes != 0"/>
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="killed_planes"/>
					</block>
				</block>
				<block>
					<style>
						<width value="34px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<bind name="visible" value="ships_killed != 0"/>
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="text" value="ships_killed"/>
					</block>
				</block>
				<block>
					<style>
						<width value="115px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="right"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="'$LetterSpacingSmall'"/>
						<bind name="class" value="!is_alive ? '$FontColorAlmostBlack' : '$None'"/>
						<bind name="class" value="!is_alive ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="toUpperCase(tr(player.ids_ship_name))"/>
					</block>
				</block>
				<block>
					<style>
						<width value="30px"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<block type="text">
						<style>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextHeaderBigDefault"/>
						<bind name="class" value="!is_alive ? '$FontColorAlmostBlack' : '$None'"/>
						<bind name="class" value="!is_alive ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="player.levelRome"/>
					</block>
				</block>
				<block>
					<style>
						<width value="122px"/>
						<height value="100%"/>
						<hitTest value="false"/>
					</style>
					<block>
						<style>
							<marginLeft value="122px"/>
							<width value="100%"/>
						</style>
						<bind name="scaleX" value="-1"/>
						<bind name="style" value="'backgroundImage'; !is_alive 	? ('url:' + player.ship_dead_img_url) : ('url:' + player.ship_img_url)"/>
					</block>
				</block>
				<block>
					<style>
						<hitTest value="false"/>
						<width value="140px"/>
						<align value="right"/>
					</style>
					<block>
						<bind name="name" value="'player_tab_stat_' + player.name"/>
						<style>
							<width value="100%f"/>
							<top value="8px"/>
						</style>
						<bind name="instance" value="'PlayerNameAndClanTag'; { 	_isDead: !is_alive, _isBattleStats: true, _fontSize: 17,
																_playerName: pureName, _clanTag: clanTag, _clanTagColor: clanColor}"/>
					</block>
					<block>
						<style>
							<marginTop value="1px"/>
						</style>
						<bind name="instance" value="'IconRankSmall'; {_rankId: player.rank, _seasonId:player.rankSeasonId}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="divisionIndex &gt; 0"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="30px"/>
						<hitTest value="false"/>
					</style>
					<block className="division_item" type="native">
						<styleClass value="$MiddleAligned"/>
						<style>
							<marginTop value="5px"/>
						</style>
						<bind name="gotoAndStop!" value="divisionSign + 1 + 10"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="personal.seasonId != 0 &amp;&amp; game_data.battle_mode_id == 4"/>
			<style>
				<right value="-30px"/>
				<position value="absolute"/>
				<height value="28px"/>
				<marginTop value="1px"/>
			</style>
			<bind name="instance" value="'StarEarnOrLoss'; (starEarnCondition ||  starLossCondition) ? {starEarnCondition: starEarnCondition, starLossCondition: starLossCondition} : null"/>
		</block>
		<block>
			<bind name="visible" value="_isResourcesEnabled &amp;&amp; player.personalResources &gt; 0"/>
			<style>
				<position value="absolute"/>
				<right value="-52px"/>
				<top value="10px"/>
			</style>
			<block type="text">
				<style>
					<width value="50px"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="player.is_self	? '$TextDefaultBoldNM' : '$TextDefaultNM'"/>
				<bind name="class" value="player.is_self	? '$FontColorGolden' : '$None'"/>
				<bind name="text" value="player.personalResources"/>
			</block>
		</block>
	</block>
	<block className="StarEarnOrLoss">
		<style>
			<width value="26px"/>
			<height value="26px"/>
		</style>
		<block className="icon_star_earn_condition_small" type="native">
			<styleClass value="$MiddleVAligned"/>
			<bind name="gotoAndStop!" value=" starEarnCondition	? 1 
												: starLossCondition ? 2 
																	: null"/>
		</block>
	</block>
	<css name="$ConfirmationWindowWidth">
		<width value="472px"/>
	</css>
	<css name="$ModalWindowDefaultWidth">
		<width value="472px"/>
	</css>
	<css name="$ModalWindowLargeCostMargins">
		<marginLeft value="5px"/>
		<marginRight value="4px"/>
	</css>
	<css name="$SelectTypeListItem">
		<width value="100%"/>
		<height value="74px"/>
	</css>
	<css name="$SelectTypeListItemIndent">
		<marginBottom value="15px"/>
		<marginTop value="15px"/>
		<marginLeft value="21px"/>
		<marginRight value="21px"/>
	</css>
	<block className="ModalWindowOkCancelRequest">
		<style>
			<flow value="horizontal"/>
			<marginTop value="15px"/>
		</style>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.60; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.45; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<styleClass value="$InfoLineBoundaries"/>
			<style>
				<width value="129px"/>
				<marginRight value="20px"/>
			</style>
			<bind name="instance" value="'DefaultButton'; {	_width: '129px', _request: _request, _requestParams: _requestParams, _enabled: true, _isTransactionBtn: true,
											_containerName: ('Modal_window_action_Button' + _okLabel), _label: _okLabel,
											_focusIndex: 1, _defaultFocused: true,
											_name: 'btn_ok'}"/>
		</block>
		<block>
			<style>
				<width value="129px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.15; 0.45; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'startHide'; 0.15; 0.45; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
			<block className="DefaultButtonModal">
				<styleClass value="$InfoLineBoundaries"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="name" value="'Modal_window_action_Button' + _cancelLabel"/>
				<block className="button_default" type="native">
					<style>
						<width value="100%"/>
					</style>
					<bind name="label" value="_cancelLabel"/>
					<params>
						<param name="name" value="btn_cancel"/>
					</params>
					<bind name="input"/>
					<bind name="focus" value="2;false"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowUniversalHeader">
		<style>
			<marginBottom value="720:32,1080:64ah"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '100%'"/>
		<block>
			<bind name="visible" value="_header != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<marginTop value="12px"/>
				</style>
				<styleClass value="$TextDefaultBold21NM"/>
				<bind name="text" value="toUpperCase(tr(_header))"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="720:9,1080:11ah"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_hideBackButton"/>
			<style>
				<position value="absolute"/>
				<top value="7px"/>
			</style>
			<bind name="instance" value="'BackButton'; {_text: 'IDS_RETURN_TO_DOCK', _action: 'btn_cancel'}"/>
		</block>
		<block>
			<bind name="visible" value="!_hideCloseButton"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'right'; _innerCloseButton ? '60px' : '8px'"/>
			<block className="ModalWindowCloseIcon">
				<style>
					<position value="absolute"/>
					<right value="0px"/>
					<top value="13px"/>
					<flow value="horizontal"/>
				</style>
				<bind name="name" value="'btn_cancel'"/>
				<bind name="input"/>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
					<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
					<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
					<block>
						<bind name="soundSet" value="'default_button'"/>
						<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
						<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
						<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
						<style>
							<alpha value="0.8"/>
						</style>
						<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
						<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
					</block>
					<block>
						<style>
							<marginTop value="3px"/>
						</style>
						<block className="button_close" type="native">
							<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
							<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
							<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
							<params>
								<param name="focusable" value="false"/>
							</params>
							<bind name="gotoAndPlay!" value="CrossButtonStates"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeader">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="class" value="_isAlignLeft ? '$None' : '$MiddleAligned'"/>
				<bind name="text" value="toUpperCase(tr(_header))"/>
			</block>
			<block>
				<styleClass value="$AlignRight"/>
				<bind name="style" value="'right'; _innerCloseButton ? '60px' : '0px'"/>
				<block className="ModalWindowCloseIcon">
					<style>
						<position value="absolute"/>
						<right value="-50px"/>
						<top value="11px"/>
						<flow value="horizontal"/>
					</style>
					<bind name="name" value="'btn_cancel'"/>
					<bind name="input"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
						<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
						<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
						<block>
							<bind name="soundSet" value="'default_button'"/>
							<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
							<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
							<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
							<style>
								<alpha value="0.8"/>
							</style>
							<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
							<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
						</block>
						<block>
							<style>
								<marginTop value="3px"/>
							</style>
							<block className="button_close" type="native">
								<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
								<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
								<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
								<params>
									<param name="focusable" value="false"/>
								</params>
								<bind name="gotoAndPlay!" value="CrossButtonStates"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_hideDivider != true"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-3"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderConfirmation">
		<style>
			<marginBottom value="3px"/>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="icon_warning_grey_big" type="native">
					<style>
						<marginTop value="6px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<text value="IDS_CONFIRMATION"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="ModalWindowCloseIcon">
				<style>
					<position value="absolute"/>
					<right value="-70px"/>
					<top value="9px"/>
					<flow value="horizontal"/>
				</style>
				<bind name="name" value="'btn_cancel'"/>
				<bind name="input"/>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
					<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
					<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
					<block>
						<bind name="soundSet" value="'default_button'"/>
						<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
						<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
						<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
						<style>
							<alpha value="0.8"/>
						</style>
						<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
						<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
					</block>
					<block>
						<style>
							<marginTop value="3px"/>
						</style>
						<block className="button_close" type="native">
							<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
							<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
							<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
							<params>
								<param name="focusable" value="false"/>
							</params>
							<bind name="gotoAndPlay!" value="CrossButtonStates"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderNoEsc">
		<style>
			<marginBottom value="3px"/>
			<width value="450px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextHeader"/>
				<bind name="class" value="'$FontSizeHeader5'"/>
				<bind name="class" value="'$Bold'"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="toUpperCase(tr(_header))"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderWithIcon">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '450px'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="icons_modal_window_heading" type="native">
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginRight value="3px"/>
					</style>
					<bind name="gotoAndStop!" value="_type"/>
				</block>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr(_header))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_showInnerCloseButton"/>
				<styleClass value="$AlignRight"/>
				<block className="ModalWindowCloseIcon">
					<style>
						<position value="absolute"/>
						<right value="-50px"/>
						<top value="9px"/>
						<flow value="horizontal"/>
					</style>
					<bind name="name" value="'btn_cancel'"/>
					<bind name="input"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
						<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
						<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
						<block>
							<bind name="soundSet" value="'default_button'"/>
							<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
							<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
							<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
							<style>
								<alpha value="0.8"/>
							</style>
							<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
							<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
						</block>
						<block>
							<style>
								<marginTop value="3px"/>
							</style>
							<block className="button_close" type="native">
								<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
								<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
								<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
								<params>
									<param name="focusable" value="false"/>
								</params>
								<bind name="gotoAndPlay!" value="CrossButtonStates"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderOptionalIcon">
		<style>
			<marginBottom value="3px"/>
		</style>
		<bind name="style" value="'width'; _headerWidth ? _headerWidth : '100%'"/>
		<block>
			<style>
				<marginBottom value="9px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<block className="icon_warning_grey_big" type="native">
					<bind name="visible" value="_showIcon"/>
					<style>
						<marginTop value="6px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="toUpperCase(tr(_header))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_showInnerCloseButton"/>
				<styleClass value="$AlignRight"/>
				<block className="ModalWindowCloseIcon">
					<style>
						<position value="absolute"/>
						<right value="-50px"/>
						<top value="9px"/>
						<flow value="horizontal"/>
					</style>
					<bind name="name" value="'btn_cancel'"/>
					<bind name="input"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<backgroundColor value="0x01000000"/>
						</style>
						<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
						<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
						<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
						<block>
							<bind name="soundSet" value="'default_button'"/>
							<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
							<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
							<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
							<style>
								<alpha value="0.8"/>
							</style>
							<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
							<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
						</block>
						<block>
							<style>
								<marginTop value="3px"/>
							</style>
							<block className="button_close" type="native">
								<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
								<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
								<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
								<params>
									<param name="focusable" value="false"/>
								</params>
								<bind name="gotoAndPlay!" value="CrossButtonStates"/>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderFullSize">
		<bind name="style" value="'paddingTop';		_paddingTop		? _paddingTop	:	'720:20,2160:100ah'"/>
		<bind name="style" value="'paddingRight';	_paddingRight	? _paddingRight	:	'1280:20,1920:46aw'"/>
		<bind name="style" value="'paddingLeft'; 	_paddingLeft	? _paddingLeft	:	'1280:20,1920:46aw'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="_hideBackButton != true"/>
			<style>
				<position value="absolute"/>
				<top value="-5px"/>
			</style>
			<bind name="instance" value="'BackButton'; { _text: _backButtonText,
										_event: _event, _eventData: _eventData,
										_action: _action, _actionParams: _actionParams,
										_request: _request, _requestParams: _requestParams }"/>
		</block>
		<block>
			<bind name="visible" value="_windowName != null"/>
			<bind name="class" value="_leftAligned ? '$None' : '$MiddleAligned' "/>
			<block type="text">
				<styleClass value="$TextDefaultBold21NM"/>
				<bind name="text" value="toUpperCase(tr(_windowName))"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_hideCloseIcon != true"/>
			<style>
				<position value="absolute"/>
				<right value="4"/>
				<top value="3px"/>
			</style>
			<block className="ModalWindowCloseIcon">
				<style>
					<position value="absolute"/>
					<right value="0px"/>
					<top value="0px"/>
					<flow value="horizontal"/>
				</style>
				<bind name="name" value="'btn_cancel'"/>
				<bind name="input"/>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
					<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
					<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
					<block>
						<bind name="soundSet" value="'default_button'"/>
						<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
						<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
						<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
						<style>
							<alpha value="0.8"/>
						</style>
						<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
						<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
					</block>
					<block>
						<style>
							<marginTop value="3px"/>
						</style>
						<block className="button_close" type="native">
							<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
							<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
							<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
							<params>
								<param name="focusable" value="false"/>
							</params>
							<bind name="gotoAndPlay!" value="CrossButtonStates"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_hideDivider != true"/>
			<style>
				<width value="100%"/>
				<marginTop value="720:12,1080:16ah"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModalWindowHeaderFullSizeFakeBlock">
		<bind name="style" value="'paddingTop';		_paddingTop		? _paddingTop	:	'720:20,2160:100ah'"/>
		<style>
			<alpha value="0"/>
			<hitTest value="false"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold21NM"/>
			<bind name="text" value="'Fake offset block'"/>
		</block>
		<block>
			<style>
				<width value="10px"/>
				<marginTop value="720:12,1080:16ah"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<css name="$ItemListAchievementMargins">
		<marginBottom value="24px"/>
		<marginLeft value="12px"/>
		<marginRight value="12px"/>
	</css>
	<block className="AchievementAppearAnimation">
		<bind name="appear" value="'addedToStage'; (_animationOn ? 0.15 : 0 ); (_animationOn ? (0.15 * $index + _delay) : 0); {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<style>
				<marginRight value="26px"/>
			</style>
			<bind name="instance" value="'AchievementIcon'; {_id: id, _amount: amount, _size: '56px', _progressWidth: '44px', _showProgress: true}"/>
		</block>
	</block>
	<block className="Achievement">
		<bind name="class" value="_isInItemList ? '$ItemListAchievementMargins' : '$None'"/>
		<block>
			<bind name="instance" value="'AchievementIcon'; {_id: id, _progressWidth: '50px', _amount: amount, _size: _iconSize ? _iconSize : '80px', _isDesaturated: (amount&gt;0 ? false : true), _isEarned:_isEarned, _showProgress: true}"/>
		</block>
	</block>
	<block className="EarnedAchievementsByPlayer">
		<style>
			<width value="100%"/>
		</style>
		<bind name="tooltip" value="'EarnedAchievementsByPlayerTooltip'; {_achievements: _achievements, _isSelfPlayer: _isSelfPlayer}"/>
		<block>
			<style>
				<width value="21px"/>
				<height value="21px"/>
				<position value="absolute"/>
				<marginLeft value="-2px"/>
				<marginTop value="-1px"/>
				<mouseChildren value="false"/>
				<mouseEnabled value="false"/>
				<backgroundStretchX value="true"/>
				<backgroundStretchY value="true"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../achievements/icons/icon_achievement.png'"/>
		</block>
	</block>
	<block className="EarnedAchievementsByPlayerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="3px"/>
			</style>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<style>
					<marginBottom value="7px"/>
				</style>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="_isSelfPlayer ? tr('IDS_YOUR_ACHIEVEMENTS') : tr('IDS_PLAYERS_ACHIEVEMENTS')"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="11px"/>
				</style>
				<bind name="repeat" value="_achievements; 'AchievementIconWithTitle'"/>
			</block>
		</block>
	</block>
	<block className="AchievementIcon">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'achievements'; _id; 'achievement'"/>
		<bind name="style" value="'alpha'; _isDesaturated ? 0.75 : 1"/>
		<bind name="name" value="'AchievementWithCount_'+(_isEarned ? 'Earned_':'') + achievement.name"/>
		<block>
			<bind name="tooltip" value="'AchievementTooltip'; {_id: _id, _progressWidth: _progressWidth}"/>
			<bind name="style" value="'width'; _size ? _size : '80px' "/>
			<bind name="style" value="'height'; _size ? _size : '80px' "/>
			<style>
				<marginRight value="0px"/>
				<marginTop value="0px"/>
				<backgroundStretchX value="true"/>
				<backgroundStretchY value="true"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + (_isDesaturated ? achievement.imageDesURL : achievement.imageURL)"/>
			<block type="text">
				<bind name="visible" value="_amount &gt; 1 &amp;&amp; (achievement.multiple)"/>
				<style>
					<textAlign value="right"/>
					<position value="absolute"/>
					<bottom value="-7px"/>
					<right value="-5px"/>
				</style>
				<bind name="class" value="_isSmall ? '$TextDefaultWhite' : '$TextAccentBold'"/>
				<bind name="class" value="'$Bold'"/>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="'x'+_amount"/>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'SimpleTooltip';{tooltipText: tr('IDS_CURRENT_PROGRESS') + tr('IDS_COLON') + ' ' + format(achievement.condition.currentProgress, 0) + '/' + format(achievement.condition.max, 0)}"/>
			<bind name="visible" value="(achievement.condition.currentProgress &gt; 0) &amp;&amp; (achievement.condition.max &gt; 0) &amp;&amp; (_showProgress == true)"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="style" value="'width'; _progressWidth ? _progressWidth : '30px' "/>
			<style>
				<marginTop value="3px"/>
			</style>
			<block className="indicator_progress_bar" type="native">
				<style>
					<width value="100%"/>
				</style>
				<bind name="value" value="(achievement.condition.progress)*10"/>
			</block>
		</block>
	</block>
	<block className="AchievementTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'achievements'; _id; 'achievement'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
				<marginBottom value="0px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<marginLeft value="12px"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="instance" value="'AchievementIcon'; {_id: _id, _amount: _amount, _progressWidth: _progressWidth}"/>
				</block>
				<block>
					<styleClass value="$InfoBlockHorizontalIndent"/>
					<style>
						<marginLeft value="10px"/>
						<marginTop value="-1px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<style>
							<width value="100%"/>
							<maxWidth value="222"/>
							<textAlign value="left"/>
						</style>
						<bind name="class" value="(achievement.amount &gt; 0) 	? '$FontColorGolden' 
															: '$FontColorWhite'"/>
						<bind name="text" value="achievement.nameIDS"/>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefaultTech"/>
						<style>
							<marginTop value="-3px"/>
							<maxWidth value="220"/>
							<textAlign value="left"/>
						</style>
						<bind name="text" value="achievement.subtypeIDS"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<bottom value="0px"/>
						<position value="absolute"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="((_amount == null) &amp;&amp; (achievement.amount &gt; 0)) &amp;&amp; (achievement.multiple)"/>
				<style>
					<width value="100%"/>
					<marginTop value="8px"/>
					<marginBottom value="8px"/>
				</style>
				<block type="text">
					<bind name="visible" value="(achievement.amount &gt; 1)"/>
					<styleClass value="$TextHeaderBigDefaultTech"/>
					<styleClass value="$InfoBlockHorizontalIndent"/>
					<style>
						<textAlign value="left"/>
					</style>
					<bind name="text" value="(tr('IDS_EARNED') + tr('IDS_COLON') + ' ' + achievement.amount)"/>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderBigDefaultTech"/>
					<style>
						<marginLeft value="12px"/>
						<textAlign value="left"/>
					</style>
					<bind name="style" value="'marginBottom'; (achievement.achieveShip!=null) ? '1px' : '9px'"/>
					<bind name="text" value="((achievement.amount &gt; 1)	? (tr('IDS_LAST_TIME') +' '+ achievement.achieveTime)
														: (tr('IDS_EARNED') + tr('IDS_COLON') + ' ' + achievement.amount))"/>
				</block>
				<block>
					<bind name="visible" value="(achievement.achieveShip != 0)"/>
					<style>
						<width value="100%"/>
						<marginLeft value="12px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderBigDefaultTech"/>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<textAlign value="left"/>
						</style>
						<bind name="text" value="tr('IDS_ON_SHIP')+' '"/>
					</block>
					<block>
						<style>
							<marginTop value="-1px"/>
						</style>
						<bind name="instance" value="'ShipTitleWithIconAndLevel'; {_shipID: achievement.achieveShip}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="((_amount == null) &amp;&amp; (achievement.amount &gt; 0)) &amp;&amp; (achievement.multiple)"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<style>
					<marginTop value="8px"/>
				</style>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<width value="100%"/>
						<textAlign value="left"/>
					</style>
					<bind name="text" value="achievement.condition.description"/>
				</block>
				<block>
					<bind name="visible" value="(achievement.condition.currentProgress &gt; 0) &amp;&amp; (achievement.condition.max &gt; 0)"/>
					<style>
						<marginTop value="18px"/>
						<width value="100%"/>
					</style>
					<block className="indicator_progress_bar" type="native">
						<style>
							<width value="100%"/>
						</style>
						<bind name="value" value="(achievement.condition.progress)*10"/>
					</block>
					<block type="text">
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextHeaderBigDefaultTech"/>
						<style>
							<marginTop value="6px"/>
						</style>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="text" value="tr('IDS_CURRENT_PROGRESS') + tr('IDS_COLON') + ' ' + format(achievement.condition.currentProgress, 0) + '/' + format(achievement.condition.max, 0)"/>
					</block>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="8px"/>
				</style>
				<block type="text">
					<styleClass value="$TextHeaderBigDefaultTech"/>
					<styleClass value="$InfoBlockHorizontalIndent"/>
					<bind name="style" value="'marginBottom'; achievement.hasReward ? '9px' : '12px'"/>
					<style>
						<textAlign value="left"/>
					</style>
					<bind name="text" value="achievement.multipleIDS"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<bottom value="0px"/>
						<position value="absolute"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="achievement.hasReward"/>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
				</style>
				<block className="icon_giftbox_small" type="native">
					<style>
						<marginLeft value="14px"/>
					</style>
				</block>
				<block>
					<styleClass value="$InfoBlockHorizontalIndentNoWidth"/>
					<style>
						<width value="258px"/>
						<marginTop value="-3px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<width value="100%"/>
							<textAlign value="left"/>
						</style>
						<bind name="text" value="achievement.rewardConditionIDS"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="AchievementIconWithTitle">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'achievements'; id; 'achievement'"/>
		<style>
			<width value="100%"/>
			<height value="44px"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
				<marginBottom value="9px"/>
				<marginLeft value="15px"/>
			</style>
			<block>
				<bind name="instance" value="'AchievementIcon'; {_id: id, _amount: amount , _size: '34px', _isSmall: true, _showProgress: _showProgress}"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
					<marginTop value="6px"/>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value=" _class ? _class: '$FontColorGolden'"/>
				<bind name="text" value="achievement.nameIDS"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="AchievementIconWithTitleForFlags">
		<style>
			<width value="100%"/>
		</style>
		<bind name="tooltip" value="'AchievementTooltip'; {_id: $value}"/>
		<bind name="instance" value="'AchievementIconWithTitle'; {id: $value, _class: '$FontColorWhite'}"/>
	</block>
	<block className="AchievementIconWithTitleForRewards">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'AchievementIconWithTitle'; { id: details.achievementId, amount: amount }"/>
	</block>
	<css name="$TabButtonFontUp">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="0 90 0x000000 1 2 2 1"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<block className="MainTabButton">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'tabBarSoundSet'; 'main_tab_' + _actionParams.inset"/>
		<bind name="tooltip" value="'MouseInstructionTooltip'; _tooltipData ? { _isInBattle: _tooltipData.isInBattle,
																_multiParagraphArray: _tooltipData.paragraphText ? [{ _paragraphText: _tooltipData.paragraphText }] : null,
																_mouseInstructions: _tooltipData.mouseInstructions,
																_maxWidth: 250,
																_marginBottom: _tooltipData.marginBottom,
																_leading: _tooltipData.leading,
																_checkedLines: _tooltipData.checkedLines }
															: null"/>
		<style>
			<height value="29px"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '143px'"/>
		<block className="tab_bar_item_no_label" type="native">
			<bind name="name" value="_name"/>
			<bind name="soundSet" value="tabBarSoundSet"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="_selected"/>
			<bind name="enabled" value="_enabled"/>
			<bind name="action" value="'buttonClick'; 	_action 	? _action : null; 	_actionParams 	? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; 	_request 	? _request : null; 	_requestParams 	? _requestParams : {}"/>
			<bind name="dispatch" value="'buttonClick'; 	_dispatch 	? _dispatch : null; _dispatchParams ? _dispatchParams : null"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block type="text">
				<styleClass value="$TabButtonFontUp"/>
				<style>
					<textAlign value="center"/>
					<multiline value="false"/>
					<marginTop value="9px"/>
				</style>
				<bind name="class" value="(mouseDown || (_enabled == false))	? '$FontColorTabButtonDown' :
												rollOver	? '$FontColorWhite' :
												_selected	? '$FontColorDefaultButtonUp'
															: '$FontColorTabButtonUp'"/>
				<bind name="style" value="'alpha'; (_enabled == false) || mouseDown || rollOver || _selected ? 1 : 0.8"/>
				<bind name="text" value="toUpperCase(tr(_label))"/>
			</block>
			<block>
				<bind name="fade" value="((_newContentCounter &gt; 0) &amp;&amp; (_isNewMarker != true)); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<style>
					<position value="absolute"/>
					<right value="-2px"/>
					<top value="1px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
					</style>
					<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: _newContentCounter }"/>
				</block>
			</block>
			<block>
				<bind name="fade" value="_isNewMarker; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
				<style>
					<position value="absolute"/>
					<right value="-38px"/>
					<top value="1px"/>
				</style>
				<bind name="instance" value="'MarkerNewAttention'; { }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MainTabSmallInstance">
		<block className="tab_bar_item_small" type="native">
			<bind name="name" value="'MainTabSmallInstance_' + _name"/>
			<bind name="style" value="'width'; (_width+'px')"/>
			<style>
				<height value="25px"/>
			</style>
			<bind name="selected" value="_selected"/>
			<bind name="dispatch" value="'buttonClick'; _event ? _event : null; _eventParams"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams"/>
			<bind name="label" value="toUpperCase(tr(_label))"/>
		</block>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: _tooltipIDS}"/>
	</block>
	<block className="NavigationProfileButton">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<style>
			<width value="188px"/>
		</style>
		<bind name="watch" value="'isActive'; _actionParams.page == _activePage"/>
		<bind name="name" value="'profile_' + _actionParams.page"/>
		<bind name="var" value="{hasImage : _buttonImage != null}"/>
		<block className="button_navigation_small_no_label" type="native">
			<params>
				<param name="toggle" value="false"/>
			</params>
			<style>
				<width value="100%"/>
				<marginBottom value="1px"/>
			</style>
			<bind name="selected" value="isActive"/>
			<bind name="enabled" value="!isActive"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="event" value="'buttonClick'; _event ? _event : null; _eventParams ? _eventParams : {}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="100%"/>
			</style>
			<block>
				<bind name="visible" value="hasImage"/>
				<style>
					<marginLeft value="12px"/>
					<marginRight value="8px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="transition" value="isActive; 0.3; {alpha: 0.5}; {alpha: 1}"/>
				<bind name="transition" value="rollOver; 0.3; !isActive ? {alpha: 0.5} : {alpha: 1.0}; !isActive ? {alpha: 0.8} : {alpha: 1.0}"/>
				<bind name="instance" value="_buttonImage; hasImage ? _buttonImageParams : null"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<style>
					<multiline value="false"/>
					<marginTop value="13px"/>
				</style>
				<bind name="style" value="'marginLeft'; hasImage ? '0px' : '14px'"/>
				<bind name="class" value=" (isActive) ? '$FontColorAlmostBlack' : ''"/>
				<bind name="class" value=" (isActive) ? '$FontGlowFilterBrightStrong' : '$FontDropShadowFilter1'"/>
				<bind name="text" value="toUpperCase(tr(_label))"/>
			</block>
			<block>
				<style>
					<marginLeft value="2px"/>
					<marginTop value="4px"/>
				</style>
				<block>
					<bind name="fade" value="_isNewMarker; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
					<bind name="instance" value="'MarkerNewAttention'; { }"/>
				</block>
				<block>
					<bind name="fade" value="((_newContentCounter &gt; 0) &amp;&amp; (_isNewMarker != true)); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
					<style>
						<position value="absolute"/>
					</style>
					<bind name="instance" value="'MarkerNewCounter'; { _newContentCounter: _newContentCounter }"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<css name="$QuestBar">
		<backgroundColor value="0xFF009999"/>
	</css>
	<block className="QuestDesc">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontSizeLarge'"/>
			<bind name="text" value="_questdesc"/>
		</block>
	</block>
	<css name="$QuestBlockVMargins">
		<width value="100%"/>
		<marginBottom value="6px"/>
	</css>
	<css name="$SSEDescTextNormal">
		<mouseChildren value="false"/>
		<leading value="-4"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$SSEDescTextSubheader">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$SSEDescTextSubheaderSecondary">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$TextHeaderBigDefaultBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<block className="QuestsSmallItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="name" value="'QuestsSmallItem_' + sseId"/>
		<bind name="watch" value="'activeStepInfo'; steps[activeStep]"/>
		<bind name="watch" value="'isLimitedPerDay'; activeStepInfo.limit&gt;0 &amp;&amp; activeStepInfo.isDaily"/>
		<bind name="watch" value="'isDoneForToday'; (activeStepInfo.limit &gt; 0) &amp;&amp; (activeStepInfo.isDaily) &amp;&amp; (progress == 1) &amp;&amp; (activeStepInfo.limit == activeStepInfo.count)"/>
		<bind name="watch" value="'isChallenge'; type == SSETypes.CHALLENGE"/>
		<bind name="var" value="{bgWidthSmall: (isChallenge || isPrivate ? 524 : 304)}"/>
		<bind name="var" value="{bgHeightSmall: (isChallenge || isPrivate ? 164 : 154)}"/>
		<bind name="style" value="'width'; (bgWidthSmall + 16) + 'px'"/>
		<bind name="style" value="'height'; (bgHeightSmall + 16) + 'px'"/>
		<bind name="request" value="'click'; 'showExtendedQuest'; {selectedIndex: $index, collectionName: isPrivate ? 'privateTasksAndChallenges' : type, sseId: sseId}"/>
		<bind name="soundSet" value="'quest_item'"/>
		<bind name="watch" value="'isQuestHasLimitedAmount'; (activeStepInfo.limit &gt; 1 || isLimitedPerDay) "/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'width'; bgWidthSmall + 'px'"/>
			<bind name="style" value="'height'; bgHeightSmall + 'px'"/>
			<bind name="style" value="'alpha'; isDoneForToday ? 0.6 : 1"/>
			<block className="DropShadow">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$MouseDisable"/>
				<block className="drop_shadow" type="native">
					<styleClass value="$Fullsize"/>
					<style>
						<position value="absolute"/>
						<marginTop value="-2px"/>
						<marginRight value="-6px"/>
						<marginBottom value="-10px"/>
						<marginLeft value="-6px"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: type == SSETypes.CHALLENGE ? 'IDS_HINT_OPEN_CHALLENGE' : 'IDS_HINT_OPEN_TASK' }], _maxWidth: 240 }"/>
				<block className="hint_panel" type="native">
					<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1}"/>
					<styleClass value="$Fullsize"/>
					<style>
						<position value="absolute"/>
						<marginTop value="-1px"/>
						<marginBottom value="-1px"/>
						<marginLeft value="-1px"/>
						<marginRight value="-1px"/>
					</style>
				</block>
				<block>
					<styleClass value="$Fullsize"/>
					<style>
						<position value="absolute"/>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:' + backgroundURL"/>
				</block>
				<block className="shadow_h_zero_edge_fullsize" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$MouseDisable"/>
					<bind name="instance" value="'QuestHeaderWithProgress'; { _isQuestHasLimitedAmount: isQuestHasLimitedAmount, _isDoneForToday: isDoneForToday,
															_numberOfQuestsGeneral: activeStepInfo.limit, titleText: titleText, progress: progress,
															inOneBattle: inOneBattle, peculiarity: peculiarity, isPrivate: isPrivate, type: type}"/>
				</block>
			</block>
			<block type="text">
				<style>
					<marginTop value="40px"/>
					<marginLeft value="9px"/>
				</style>
				<bind name="visible" value="isPrivate"/>
				<styleClass value="$TextHeaderBigDefaultBold"/>
				<bind name="class" value="'$FontColorGold'"/>
				<bind name="text" value="(type == SSETypes.CHALLENGE ? 'IDS_PERSONAL_CHALLENGE' : 'IDS_PERSONAL_BATTLE_TASK')"/>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<top value="4px"/>
					<left value="4px"/>
				</style>
				<block>
					<bind name="visible" value="isQuestHasLimitedAmount == true"/>
					<style>
						<marginBottom value="12px"/>
					</style>
					<bind name="instance" value="'QuestLimitedExecution'; isQuestHasLimitedAmount ? { _numberOfQuestsGeneral: activeStepInfo.limit,
																					_numberOfQuestsDone: activeStepInfo.count, 
																					_isLimitedPerDay: isLimitedPerDay } : null"/>
				</block>
				<block>
					<bind name="visible" value="peculiarity != 'default'"/>
					<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_' + toUpperCase(type) + (peculiarity != 'default' ? '_' + toUpperCase(peculiarity) : '')}"/>
					<bind name="class" value="isQuestHasLimitedAmount ? '$MiddleAligned' : '$None'"/>
					<block className="icon_quest_peculiarity" type="native">
						<bind name="gotoAndStop!" value="peculiarity"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="isChallenge"/>
				<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_HINT_CHALLENGE_LIFETIME'}"/>
				<style>
					<marginLeft value="9px"/>
					<bottom value="3px"/>
				</style>
				<block type="text">
					<styleClass value="$TextHeaderHugeWhite"/>
					<bind name="class" value="'$Bold'"/>
					<bind name="text" value="startDate + '—' + stopDate"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}; 2"/>
			<style>
				<right value="14px"/>
				<bottom value="14px"/>
				<position value="absolute"/>
			</style>
			<bind name="instance" value="'RewardContainer'; {	_rewards: rewards, _rewardsSpecial: rewardsSpecial,
												_tooltipHeader: (isChallenge	? 'IDS_REWARD_FOR_FINISHING_CHALLENGE'
																				: 'IDS_REWARD_FOR_FINISHING_TASK'),
												_scale: 0.5}"/>
		</block>
	</block>
	<block className="QuestsLargeItem">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'; 'dockInitData,dockUpdateData'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsInFormation'; 'shipsInFormation'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerQuests"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="primaryEntityDH" value="'taskEntity'; CC.sseCore; taskId"/>
		<bind name="watchDH" value="'currentProgress';	['taskEntity.sseTask.evChanged'];	taskEntity.sseTask.conditionSet[0].currentProgress"/>
		<bind name="watchDH" value="'maxProgress';	['taskEntity.progress.evChanged'];	taskEntity.sseTask.conditionSet[0].maxProgress"/>
		<bind name="name" value="'QuestsLargeItem_' + sseId"/>
		<style>
			<width value="1px"/>
			<height value="442px"/>
			<marginTop value="1px"/>
			<marginLeft value="1px"/>
			<marginRight value="1px"/>
		</style>
		<bind name="watch" value="'isChallenge'; type == SSETypes.CHALLENGE"/>
		<bind name="watch" value="'activeStepInfo'; steps[activeStep]"/>
		<bind name="watch" value="'isLimitedPerDay'; activeStepInfo.limit &gt; 0 &amp;&amp; activeStepInfo.isDaily"/>
		<bind name="watch" value="'isDoneForToday'; (activeStepInfo.limit &gt; 0) &amp;&amp; (activeStepInfo.isDaily) &amp;&amp; (progress == 1) &amp;&amp; (activeStepInfo.limit == activeStepInfo.count)"/>
		<bind name="style" value="'width'; _itemWidth + 'px'"/>
		<bind name="transition" value="($index == currentSelectedIndex) || rollOver; 0.2; {alpha: 0.8}; {alpha: 1}"/>
		<bind name="dispatch" value="'click'; 'changeSelectedIndex'; {currentSelectedIndex: $index}"/>
		<bind name="soundSet" value="'quest_item'"/>
		<bind name="watch" value="'isQuestHasLimitedAmount'; (activeStepInfo.limit &gt; 1 || isLimitedPerDay) "/>
		<block>
			<bind name="visible" value="!inQuestWindow"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="1px"/>
				<height value="430px"/>
			</style>
			<bind name="style" value="'alpha'; isDoneForToday ? 0.6 : 1"/>
			<bind name="transition" value="($index == currentSelectedIndex); 0.1; {width: (_itemWidth - 16), height: 430}; {width: _itemWidth - 2, height: 440}"/>
			<block className="DropShadow">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$MouseDisable"/>
				<block className="drop_shadow" type="native">
					<styleClass value="$Fullsize"/>
					<style>
						<position value="absolute"/>
						<marginTop value="-2px"/>
						<marginRight value="-6px"/>
						<marginBottom value="-10px"/>
						<marginLeft value="-6px"/>
					</style>
				</block>
			</block>
			<block className="hint_panel" type="native">
				<bind name="transition" value="rollOver || (currentSelectedIndex == $index) ; 0.15; {alpha: 0}; {alpha: 1}"/>
				<styleClass value="$Fullsize"/>
				<style>
					<position value="absolute"/>
					<marginTop value="-1px"/>
					<marginBottom value="-1px"/>
					<marginLeft value="-1px"/>
					<marginRight value="-1px"/>
				</style>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundSize value="cover"/>
					<alpha value="0.9"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + backgroundURL"/>
			</block>
			<block className="quest_thumb_title" type="native">
				<styleClass value="$Fullsize"/>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="128px"/>
				</style>
				<bind name="transition" value="($index == currentSelectedIndex); 0.1; {height: 128}; {height: 150}"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<backgroundSize value="cover"/>
					</style>
					<bind name="style" value="'backgroundImage'; 'url:' + backgroundURL"/>
				</block>
				<block className="shadow_h_zero_edge_fullsize" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<bind name="watch" value="'milestoneProgress'; _isMilestone ? (currentProgress/maxProgress) : 0"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'QuestHeaderWithProgress'; {_isQuestHasLimitedAmount: isQuestHasLimitedAmount, _isDoneForToday: isDoneForToday,
															_numberOfQuestsGeneral: activeStepInfo.limit, titleText: titleText, 
															progress: _isMilestone == true ? milestoneProgress : (_doneThisBattle ? 1 : progress), 
															inOneBattle: inOneBattle, peculiarity: peculiarity, isPrivate: isPrivate, type: type}"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="11px"/>
					</style>
					<bind name="visible" value="isPrivate &amp;&amp; _isMilestone != true"/>
					<styleClass value="$TextHeaderBigDefaultBold"/>
					<bind name="class" value="'$FontColorGold'"/>
					<bind name="text" value="(type == SSETypes.CHALLENGE ? 'IDS_PERSONAL_CHALLENGE' : 'IDS_PERSONAL_BATTLE_TASK')"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="11px"/>
					</style>
					<bind name="visible" value="_isMilestone == true"/>
					<styleClass value="$TextHeaderBigDefaultBold"/>
					<bind name="class" value="'$FontColorGold'"/>
					<bind name="text" value="_epicName"/>
				</block>
				<block>
					<bind name="visible" value="_isMilestone != true"/>
					<style>
						<position value="absolute"/>
						<top value="4px"/>
						<left value="4px"/>
					</style>
					<block>
						<bind name="visible" value="isQuestHasLimitedAmount == true"/>
						<style>
							<marginBottom value="12px"/>
						</style>
						<bind name="instance" value="'QuestLimitedExecution'; isQuestHasLimitedAmount ? { _numberOfQuestsGeneral: activeStepInfo.limit, 
																				_numberOfQuestsDone: activeStepInfo.count, _isLimitedPerDay: isLimitedPerDay } : null"/>
					</block>
					<block>
						<bind name="visible" value="peculiarity != 'default'"/>
						<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_' + toUpperCase(type) + (peculiarity != 'default' ? '_' + toUpperCase(peculiarity) : '')}"/>
						<bind name="class" value="isQuestHasLimitedAmount ? '$MiddleAligned' : '$None'"/>
						<block className="icon_quest_peculiarity" type="native">
							<bind name="gotoAndStop!" value="peculiarity"/>
						</block>
					</block>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="-2px"/>
						<marginLeft value="11px"/>
					</style>
					<bind name="visible" value="isChallenge &amp;&amp; _isMilestone == true"/>
					<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_HINT_CHALLENGE_LIFETIME'}"/>
					<block type="text">
						<styleClass value="$TextHeaderHugeWhite"/>
						<bind name="class" value="'$Bold'"/>
						<bind name="text" value="startDate + '—' + stopDate"/>
					</block>
				</block>
				<block>
					<style>
						<right value="6"/>
						<bottom value="6"/>
						<position value="absolute"/>
					</style>
					<bind name="instance" value="'RewardContainer'; {_rewards: rewards, _rewardsSpecial: rewardsSpecial,
													_tooltipHeader: (isChallenge ?	'IDS_REWARD_FOR_FINISHING_CHALLENGE' :
																					'IDS_REWARD_FOR_FINISHING_TASK'),
													_scale: 0.5}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<style>
					<height value="100%"/>
				</style>
				<block>
					<styleClass value="$QuestBlockVMargins"/>
					<bind name="visible" value="steps.length &gt; 1"/>
					<bind name="watch" value="'stepProgressBarWidthSelected'; (_itemWidth - (24 + (steps.length - 1) * 3)) / steps.length"/>
					<bind name="watch" value="'stepProgressBarWidth'; (_itemWidth -16 - (24 + (steps.length - 1) * 3)) / steps.length"/>
					<block>
						<block type="text">
							<styleClass value="$SSEDescTextSubheader"/>
							<bind name="text" value="tr('IDS_STEP') + ' ' +  (activeStep + 1) + '/' + steps.length"/>
						</block>
						<block>
							<bind name="visible" value="(activeStepInfo.rewards.length + activeStepInfo.rewardsSpecial.length) &gt; 0"/>
							<style>
								<marginLeft value="7px"/>
								<marginTop value="-3px"/>
								<marginBottom value="3px"/>
								<alpha value="0.9"/>
							</style>
							<bind name="instance" value="'RewardContainer'; (activeStepInfo.rewards.length + activeStepInfo.rewardsSpecial.length) &gt; 0 	? {_rewards: activeStepInfo.rewards,
																																			_rewardsSpecial: activeStepInfo.rewardsSpecial,
																																			_tooltipHeader: 'IDS_REWARD_FOR_FINISHING_STEP', _scale: 0.3}
																																		: null"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<style>
							<marginBottom value="-3px"/>
						</style>
						<bind name="repeat" value="steps; 'StepProgressItem'; {	_steps: steps, _selected: ($index == currentSelectedIndex), _stepProgressBarWidth: stepProgressBarWidth, _stepProgressBarWidthSelected: stepProgressBarWidthSelected}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<style>
						<marginBottom value="4px"/>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'QuestStepDescription'; {_step: activeStepInfo, _doneThisBattle: _doneThisBattle, _isDoneForToday: isDoneForToday}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="visible" value="(activeStepInfo.technoIds != '' &amp;&amp; _isMilestone != true) || (activeStepInfo.linkedTasks.length &gt; 0 &amp;&amp; _isMilestone == true)"/>
					<styleClass value="$QuestBlockVMargins"/>
					<bind name="instance" value="'QuestRestrictionsAndLinkedTasks'; {_restrictionsIds: activeStepInfo.technoIds, _linkedTasks: activeStepInfo.linkedTasks}"/>
				</block>
				<block>
					<bind name="visible" value="_isMilestone == true"/>
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$QuestBlockVMargins"/>
					<bind name="instance" value="'MilestoneRestrictions'; {_technoids: _technoids, _addcondIds: _addcondIds, _precondIds: _precondIds,
												_aftercondIds: _aftercondIds, _conditionSet: _conditionSet, _currentProgress: currentProgress, _maxProgress: maxProgress}"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="-3px"/>
						<alpha value="0.9"/>
					</style>
					<bind name="visible" value="!isChallenge"/>
					<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_HINT_BATTLE_TASK_LIFETIME'}"/>
					<block type="text">
						<styleClass value="$SSEDescTextSubheaderSecondary"/>
						<bind name="text" value="tr('IDS_EXPIRE_DATE') + ' ' + stopDate"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<bottom value="-35px"/>
				</style>
				<bind name="visible" value="_isMilestone != true"/>
				<block>
					<bind name="action" value="'click'; 'log'; { event: 'click:sse.ButtonToBattle' }"/>
					<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
					<bind name="fade" value="$index == currentSelectedIndex &amp;&amp; inQuestWindow &amp;&amp; !(isDoneForToday); 0.2; {alpha: 0, top: 15}; {alpha: 1, top: 0}"/>
					<bind name="watch" value="'battleTypeForQuest';	activeStepInfo.battleType																		? activeStepInfo.battleType :
													((dockDefaultValues.battleType == BattleTypes.RANKED_BATTLE) &amp;&amp; rankedBattlesSeason.denyReason)	? BattleTypes.RANDOM_BATTLE
																																					: dockDefaultValues.battleType"/>
					<bind name="primaryEntityDH" value="'battleTypeEntity'; CC.battleType; battleTypeForQuest"/>
					<bind name="watchDH" value="'fightButtonDenyReasons'; ['battleTypeEntity.battleType.evDisableReasonChanged']; battleTypeEntity.battleType.fightButtonReasons"/>
					<bind name="watch" value="'startButtonEnabled';	activeStepInfo.linkedTasksCompleted &amp;&amp; readyToBattle &amp;&amp;
													fightButtonDenyReasons.length == 0 &amp;&amp;
													!(activeStepInfo.battleType == BattleTypes.RANKED_BATTLE &amp;&amp; divisionData.divisionExist)"/>
					<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
					<bind name="watchDH" value="'cbs_primeTimeStartTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeStartTime"/>
					<bind name="watchDH" value="'cbs_primeTimeFinishTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeFinishTime"/>
					<bind name="countdown" value="cbs_primeTimeStartTime; 'startPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
					<bind name="countdown" value="cbs_primeTimeFinishTime; 'finishPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
					<bind name="watch" value="'specialDenyReason';	!(activeStepInfo.linkedTasksCompleted)											? 'IDS_COMPLETE_LINKED_TASKS_FIRST' :
													(!(divisionData.divisionExist) &amp;&amp; activeStepInfo.isInDivision)					? 'IDS_STARTBATTLE_LOCK_REASON_NOT_IN_DIVISION' :
													((activeStepInfo.battleType != BattleTypes.RANKED_BATTLE) &amp;&amp; !(readyToBattle))	? 'IDS_STARTBATTLE_LOCK_REASON_WRONG_SHIP' :
													fightButtonDenyReasons[0] == 'IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN'				? subst('IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN', [], {timeLeft: startPrimeTimeText}) :
													fightButtonDenyReasons.length &gt; 0												? fightButtonDenyReasons[0]
																																	: ''"/>
					<bind name="tooltip" value="'StartBattleTooltip'; ( shipId &gt; 0 ) 	? {	_shipID: shipsInFormation.length &gt; 0	? shipsInFormation[0].shipId : shipId,
																							_battleType: battleTypeForQuest,
																							_instructionType: 'left',
																							_buttonDisabled: !(startButtonEnabled),
																							_specialDenyReason: specialDenyReason
																						}
																						: null"/>
					<bind name="instance" value="'ButtonSpecial'; {	_enabled: startButtonEnabled, 
													_action: (operationsAccountLocked ? null : 'startBattleSSE'), 
													_name: 'StartQuestButton',
													_actionParams: {battleType: battleTypeForQuest},
													_label: (progress &gt; 0 &amp;&amp; !inOneBattle 	? isChallenge 	? toUpperCase(tr('IDS_CONTINUE_QUEST')) 
																											: toUpperCase(tr('IDS_CONTINUE_DAILY_TICKET'))
																							: toUpperCase(tr('IDS_START_BATTLE')))}"/>
				</block>
				<block>
					<bind name="fade" value="($index == currentSelectedIndex &amp;&amp; inQuestWindow &amp;&amp; isDoneForToday); 0.15; {alpha: 0, top: 15}; {alpha: 1, top: 0}; {alpha: 0, top: 15}"/>
					<block type="text">
						<styleClass value="$TextDefaultTech"/>
						<style>
							<maxWidth value="250"/>
							<marginTop value="9px"/>
							<leading value="-3"/>
							<textAlign value="center"/>
						</style>
						<text value="IDS_QUEST_LIMITED_EXECUTION_DONE"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="StepProgressItem">
		<bind name="style" value="'width'; _stepProgressBarWidth+'px'"/>
		<bind name="style" value="'marginLeft'; $index &gt; 0 ? '3px' : '0px'"/>
		<bind name="transition" value="_selected &amp;&amp; _stepProgressBarWidth; 0.1; {width: _stepProgressBarWidth}; {width: _stepProgressBarWidthSelected}"/>
		<block>
			<style>
				<height value="12px"/>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'QuestStepDescriptionTooltip'; 	{_step: _steps[$index], 
														_tooltipStep: $index + 1, _totalSteps: _steps.length, 
														_restrictionsIds: _steps[$index].technoIds, _linkedTasks: _steps[$index].linkedTasks}"/>
			<block className="indicator_progress_bar" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="value" value="_steps[$index].progress * 10"/>
			</block>
		</block>
	</block>
	<block className="QuestStepDescriptionTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$Fullsize"/>
		</block>
		<block>
			<style>
				<width value="320px"/>
			</style>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$SSEDescTextSubheader"/>
				<bind name="text" value="tr('IDS_STEP') + ' ' +  _tooltipStep + '/' + _totalSteps"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'QuestStepDescription'; {_step: _step}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="320px"/>
			</style>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'QuestRestrictionsAndLinkedTasks'; {_restrictionsIds: _restrictionsIds, _linkedTasks: _linkedTasks}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_step.rewards.length &gt; 0 || _step.rewardsSpecial.length &gt; 0"/>
			<style>
				<width value="320px"/>
			</style>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block>
					<block className="icon_giftbox_small" type="native">
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="style" value="'alpha'; _step.progress == 1 ? 0.7 : 1.0"/>
					</block>
					<block>
						<bind name="visible" value="_step.progress == 1"/>
						<style>
							<position value="absolute"/>
							<top value="21px"/>
							<left value="23px"/>
						</style>
						<block className="icon_issued_small" type="native">
							<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
							<bind name="gotoAndStop!" value="'issued'"/>
						</block>
					</block>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderBigDefaultTech"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="100%"/>
						<marginLeft value="12px"/>
					</style>
					<text value="IDS_REWARD_FOR_FINISHING_STEP_GENERAL"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_step.rewards.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="repeat" value="_step.rewards; 'RewardContainerTooltipItem'"/>
			</block>
			<block>
				<bind name="visible" value="_step.rewardsSpecial.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginLeft value="16px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="repeat" value="_step.rewardsSpecial; 'RewardContainerTooltipItem'"/>
			</block>
		</block>
	</block>
	<block className="MilestoneRestrictions">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="_conditionSet != '' || _conditionSet != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_conditionSet[0].ids"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_currentProgress &gt; 0"/>
			<style>
				<width value="100%"/>
				<marginBottom value="3px"/>
			</style>
			<block className="indicator_progress_bar" type="native">
				<style>
					<width value="100%"/>
				</style>
				<bind name="value" value="(_currentProgress / _maxProgress)*10"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$SSEDescTextSubheaderSecondary"/>
			<text value="IDS_QUEST_START_CONDITIONS"/>
		</block>
		<block>
			<bind name="visible" value="_technoids != '' || _technoids != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_technoids"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_addcondIds != '' || _addcondIds != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_addcondIds"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_precondIds != '' || _precondIds != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_precondIds"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_aftercondIds != '' || _aftercondIds != null"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_aftercondIds"/>
			</block>
		</block>
	</block>
	<block className="QuestRestrictionsAndLinkedTasks">
		<style>
			<width value="100%"/>
		</style>
		<bind name="visible" value="_restrictionsIds != ''"/>
		<block type="text">
			<styleClass value="$SSEDescTextSubheaderSecondary"/>
			<text value="IDS_QUEST_START_CONDITIONS"/>
		</block>
		<block>
			<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: (isChallenge ? 'IDS_HINT_CHALLENGE_TECHNO_CONDITION' : 'IDS_HINT_BATTLE_TASK_TECHNO_CONDITION')}"/>
			<style>
				<width value="100%"/>
				<marginLeft value="15px"/>
			</style>
			<block type="text">
				<bind name="visible" value="_restrictionsIds != ''"/>
				<styleClass value="$SSEDescTextNormal"/>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="_restrictionsIds"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="15px"/>
			</style>
			<bind name="repeat" value="_linkedTasks; 'QuestLinkedTaskItem'"/>
		</block>
	</block>
	<block className="QuestStepDescription">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="visible" value="_step.precondIds"/>
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
				<marginBottom value="3px"/>
			</style>
			<bind name="text" value="_step.precondIds"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginLeft'; _step.precondIds ? '15px' : '0px'"/>
			<bind name="repeat" value="_step.conditionSet; 'QuestConditionWithProgressItem'; { _inOneBattle: _step.inOneBattle, _doneThisBattle: _doneThisBattle, _isDoneForToday: _isDoneForToday} "/>
		</block>
		<block>
			<bind name="visible" value="_step.aftercondIds"/>
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_step.aftercondIds; 'QuestAfterConditionItem'; {} "/>
		</block>
		<block type="text">
			<bind name="visible" value="_step.addcondIds"/>
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="text" value="_step.addcondIds"/>
		</block>
	</block>
	<block className="QuestConditionWithProgressItem">
		<style>
			<width value="100%"/>
			<marginBottom value="-2px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="watch" value="'showProgressBar'; maxProgress &amp;&amp; !_inOneBattle &amp;&amp; (currentProgress &gt; 0)"/>
		<bind name="tooltip" value="'SimpleTooltip'; showProgressBar ? {tooltipText: (tr('IDS_CURRENT_PROGRESS') + tr('IDS_COLON') + ' ' + currentProgress + '/' + maxProgress)} : null "/>
		<block type="text">
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; showProgressBar ? '3px' : '0px'"/>
			<bind name="text" value="ids"/>
		</block>
		<block>
			<bind name="visible" value="showProgressBar &amp;&amp; !(_isDoneForToday)"/>
			<style>
				<width value="100%"/>
				<marginBottom value="3px"/>
			</style>
			<block className="indicator_progress_bar" type="native">
				<style>
					<width value="100%"/>
				</style>
				<bind name="value" value="_doneThisBattle ? 10 : (currentProgress/maxProgress)*10"/>
			</block>
		</block>
	</block>
	<block className="QuestAfterConditionItem">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="visible" value="_step.aftercondIds"/>
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="text" value="ids"/>
		</block>
	</block>
	<block className="QuestHeaderWithProgress">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!(inOneBattle) &amp;&amp; !(_isDoneForToday)"/>
			<styleClass value="$QuestBar"/>
			<style>
				<position value="absolute"/>
				<width value="0px"/>
				<height value="100%"/>
			</style>
			<bind name="style" value="'width'; (progress * 100) + '%'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="10px"/>
				<marginBottom value="4px"/>
				<marginTop value="4px"/>
			</style>
			<bind name="style" value="'marginLeft';  peculiarity == null ? '10px' 
									: peculiarity != 'default' ? '38px'
									: ((_isQuestHasLimitedAmount) &amp;&amp; (_numberOfQuestsGeneral &gt; 99)) ? '62px'
									: ((_isQuestHasLimitedAmount) &amp;&amp; (_numberOfQuestsGeneral &gt; 9))	? '52px'
									: (_isQuestHasLimitedAmount) 									? '42px'
									: '10px'"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="text" value="titleText"/>
			</block>
		</block>
	</block>
	<block className="QuestLinkedTaskItem">
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'SSETaskTooltip'; type == SSETypes.TASK || type == SSETypes.CHALLENGE ? { _id: id, _isDone: isDone, _subtype: type, 
																							_isPrivate: isPrivate, _isBarge: false } : null; 0"/>
		<block>
			<bind name="visible" value="isDone"/>
			<style>
				<backgroundImage value="symbol:checkbox_check"/>
				<position value="absolute"/>
				<width value="20px"/>
				<height value="20px"/>
				<left value="-18px"/>
				<top value="4px"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$SSEDescTextNormal"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'alpha'; isDone ? '0.7' : '1'"/>
			<bind name="text" value="ids"/>
		</block>
	</block>
	<block className="QuestLimitedExecution">
		<bind name="watch" value="'tooltipText';   _isLimitedPerDay	?	( _numberOfQuestsDone == _numberOfQuestsGeneral)	? 'IDS_QUEST_LIMITED_EXECUTION_DONE_PER_DAY' :
														( _numberOfQuestsDone &gt; 0)							? subst('IDS_QUEST_LIMITED_EXECUTION_START_PER_DAY',	[], {_numberOfQuestsGeneral: _numberOfQuestsGeneral, _numberOfQuestsDone: _numberOfQuestsDone}, _numberOfQuestsDone) :
														( _numberOfQuestsDone == 0)							? subst('IDS_QUEST_LIMITED_EXECUTION_PER_DAY', 			[], {_numberOfQuestsGeneral: _numberOfQuestsGeneral}, _numberOfQuestsGeneral) 
																											: ''
													:	
														( _numberOfQuestsDone == _numberOfQuestsGeneral)	? 'IDS_QUEST_LIMITED_EXECUTION_DONE' :
														( _numberOfQuestsDone &gt; 0)							? subst('IDS_QUEST_LIMITED_EXECUTION_START',			[], {_numberOfQuestsGeneral: _numberOfQuestsGeneral, _numberOfQuestsDone: _numberOfQuestsDone}, _numberOfQuestsDone) :
														( _numberOfQuestsDone == 0)							? subst('IDS_QUEST_LIMITED_EXECUTION',					[], {_numberOfQuestsGeneral: _numberOfQuestsGeneral}, _numberOfQuestsGeneral)
																											: '' } "/>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tooltipText}"/>
		<block className="icon_quest_challenge" type="native">
			<style>
				<position value="absolute"/>
				<height value="32px"/>
				<width value="100%"/>
			</style>
			<bind name="gotoAndStop!" value="_isLimitedPerDay ? 'daily_limited' : 'private_limited'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultWhite"/>
			<style>
				<marginLeft value="7px"/>
				<marginRight value="7px"/>
				<top value="4px"/>
				<styleSheet value="h3 {
					font-family: $WWSDefaultFontBold;
				}
				"/>
			</style>
			<bind name="text" value="'&lt;body&gt;' + _numberOfQuestsDone + '/' + '&lt;h3&gt;' + _numberOfQuestsGeneral + '&lt;/h3&gt;&lt;/body&gt;'"/>
		</block>
	</block>
	<block className="PostBattleSSEQuestTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'SSECompleted'; 'sseId'; _id; 'questItems'"/>
		<bind name="instance" value="'QuestsLargeItem';	questItems[0] != null ? {
											backgroundURL: questItems[0].backgroundURL,
											titleText: questItems[0].titleText,
											progress: questItems[0].progress,
											inOneBattle: questItems[0].inOneBattle,
											startDate: questItems[0].startDate,
											stopDate: questItems[0].stopDate,
											steps: questItems[0].steps,
											activeStep: questItems[0].currentStep &gt;= 0 ? questItems[0].currentStep : 0,
											peculiarity: questItems[0].peculiarity,
											type: _type,
											_doneThisBattle: _doneThisBattle,
											isPrivate: questItems[0].isPrivate,
											_itemWidth: _type == SSETypes.CHALLENGE ? 416 : 346
										}	:
										_isMilestone == true ? {
											type: _type,
											taskId: _id,
											_epicName: _epicName,
											titleText: _titleText,
											startDate: _startTime,
											stopDate: _stopTime,
											backgroundURL: _backgroundURL,
											_technoids: _technoids,
											_addcondIds: _addcondIds,
											_precondIds: _precondIds,
											_aftercondIds: _aftercondIds,
											_conditionSet: _conditionSet,
											_itemWidth: _type == SSETypes.CHALLENGE ? 416 : 346, 
											_isMilestone: _isMilestone
										} : null"/>
	</block>
	<block className="SSETaskTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 	_isPrivate 	? 'privateTasksAndChallenges' 
																					: _subtype == SSETypes.CHALLENGE ? 'challenges' 
																					: 'tasks'; 
																		'sseId'; 
																		_id;
																		'sseCollection'"/>
		<bind name="instance" value="'QuestsLargeItem'; 	{	backgroundURL: sseCollection[0].backgroundURL,
											titleText: sseCollection[0].titleText,
											progress: sseCollection[0].progress,
											inOneBattle: sseCollection[0].inOneBattle,
											startDate: sseCollection[0].startDate,
											stopDate: sseCollection[0].stopDate,
											steps: sseCollection[0].steps,
											activeStep: sseCollection[0].currentStep &gt;= 0 ? sseCollection[0].currentStep : 0,
											peculiarity: sseCollection[0].peculiarity,
											isPrivate: sseCollection[0].isPrivate,
											_doneThisBattle: _isDone,
											type: _subtype == SSETypes.CHALLENGE ? SSETypes.CHALLENGE : SSETypes.TASK,
											_itemWidth: _subtype == SSETypes.CHALLENGE ? 416 : 346
										}"/>
	</block>
	<block className="DetailedReportSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealDetailedReportSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealDetailedReportSection">
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="primaryEntityDH" value="'battleResultsDH'; CC.battleResultsComponent; game_data.arena_id"/>
		<bind name="stageSize"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginBottom'; 10 + (stageHeight - 720) * 0.04"/>
			<bind name="entityDH" value="'shipsInteractionsEntity'; battleResultsDH.battleResultsStructured.interactions[0]"/>
			<bind name="entityDH" value="'buildingInteractionsEntity'; battleResultsDH.battleResultsStructured.buildingInteractions[0]"/>
			<bind name="instance" value="'BattleStatsInteractionsCarousel'; ((	shipsInteractionsEntity.battleResultsEntry.children.length +
																buildingInteractionsEntity.battleResultsEntry.children.length) &gt; 0)	? {	_shipsInteractionsEntity: shipsInteractionsEntity,
																																		_buildingInteractionsEntity: buildingInteractionsEntity,
																																		_PBSWidth: _PBSWidth}
																																	: null"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<height value="100%"/>
				<width value="100%"/>
				<overflow value="scroll"/>
			</style>
			<block>
				<block>
					<style>
						<width value="1280:357,1920:471aw"/>
					</style>
					<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.causedDamage}"/>
				</block>
				<block>
					<style>
						<marginLeft value="3px"/>
						<marginRight value="3px"/>
						<width value="1280:357,1920:471aw"/>
					</style>
					<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.generalInfo}"/>
				</block>
				<block>
					<style>
						<width value="1280:357,1920:471aw"/>
					</style>
					<bind name="instance" value="'BattleStatsDetailedReportColumn'; {_list: battleResultsDH.battleResultsStructured.takenDamage, _battleResultsDH: battleResultsDH}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsDetailedReportColumn">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_list; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == 2 &amp;&amp; $index == 0		?	'5px'
																									:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == 3 &amp;&amp;
									(($index + 1) == _childrenLength)						? '12px' :
									entity.battleResultsEntry.type == 2 &amp;&amp;
									(($index + 1) == _childrenLength)	&amp;&amp;
									!(entity.battleResultsEntry.children.length)			? '12px'
 																							: '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="child" value="entity.battleResultsEntry.type ? entity.battleResultsEntry.type
													: 'no_item';
													{	_entity: entity,
														_battleResultsDH: _battleResultsDH}; {	0		: 'BattleStatsDetailedReportHeader',
																								1	: 'BattleStatsDetailedReportSubHeader',
																								2			: 'BattleStatsDetailedReportLine',
																								3		: 'BattleStatsDetailedReportSubLine',
																								4			: 'BattleStatsDetailedReportList',
																								12	: 'BattleStatsDetailedReportEmptyLine',
																								5		: 'BattleStatsDetailedReportTotalLine',
																								no_item				: 'EmptyItem'}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsDetailedReportHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
			</style>
			<block className="battle_stats_backgrounds" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="gotoAndStop!" value="_entity.battleResultsEntry.bgColor"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {	_entity :			_entity,																	
																	_labelClass :		'$TextLargeHeaderBold',
																	_valueSizeClass :	'$FontSizeHeader5'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _battleResultsDH: _battleResultsDH}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
			</style>
			<block className="battle_stats_backgrounds" type="native">
				<bind name="visible" value="_entity.battleResultsEntry.bgColor != null"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="gotoAndStop!" value="_entity.battleResultsEntry.bgColor"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity : 			_entity,
																_battleResultsDH :	_battleResultsDH,
																_labelClass : 		'$TextHeaderWhiteBold',
																_valueSizeClass :	'$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<flow value="htile"/>
				<align value="center"/>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportListItem'"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefaultBold', _valueSizeClass: '$FontSizeDefault'}"/>
			</block>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<marginTop value="-3px"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="symbol:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsDetailedReportRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="child" value="entity.battleResultsEntry.type ? entity.battleResultsEntry.type
												: 'no_item'; {	_entity: entity}; {	6		: 'BattleStatsDetailedReportListPlaneItem',
																					7	: 'BattleStatsDetailedReportListModuleItem',
																					8	: 'BattleStatsDetailedReportListModuleItem',
																					no_item				: 'EmptyItem'}"/>
	</block>
	<block className="BattleStatsDetailedReportListModuleItem">
		<bind name="watch" value="'isKilled'; (_entity.battleResultsEntry.type == 8)"/>
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<style>
			<width value="61px"/>
			<height value="60px"/>
		</style>
		<block>
			<style>
				<marginLeft value="4px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSModuleIconWithAmount'; {_isKilled: isKilled, _moduleType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportListPlaneItem">
		<style>
			<width value="61px"/>
			<height value="45px"/>
		</style>
		<bind name="tooltip" value="'ListItemTooltip'; {	_entity: _entity}"/>
		<block>
			<style>
				<marginLeft value="10px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<bind name="instance" value="'PBSPlaneIconWithAmount'; {	_planeType: _entity.battleResultsEntry.values[0].type,
														_amount: _entity.battleResultsEntry.values[0].value}"/>
			</block>
		</block>
	</block>
	<block className="PBSPlaneIconWithAmount">
		<style>
			<width value="25px"/>
			<height value="25px"/>
			<backgroundStretchX value="true"/>
			<backgroundStretchY value="true"/>
		</style>
		<bind name="style" value="'backgroundImage'; ('symbol:icon_stat_' + _planeType)"/>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="4px"/>
				<marginLeft value="24px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="PBSModuleIconWithAmount">
		<block className="lesta.controls.BitmapEx" type="native">
			<bind name="bitmapDataClassName" value="'icon_module_' + _moduleType + (_isKilled ? '_3' : '_2')"/>
		</block>
		<block type="text">
			<style>
				<position value="absolute"/>
				<top value="21px"/>
				<marginLeft value="35px"/>
			</style>
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="text" value="_amount"/>
		</block>
	</block>
	<block className="ListItemTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="322px"/>
		</style>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="64px"/>
				</style>
				<block>
					<style>
						<width value="64px"/>
						<height value="64px"/>
					</style>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$MiddleAligned"/>
						<bind name="watch" value="'isModuleKilled'; (_entity.battleResultsEntry.type == 8)"/>
						<bind name="child" value="_entity.battleResultsEntry.type ? _entity.battleResultsEntry.type
																 : 'no_item'; {	_planeType: _entity.battleResultsEntry.values[0].type,
																				_moduleType: _entity.battleResultsEntry.values[0].type,
																				_amount: _entity.battleResultsEntry.values[0].value,
																				_isKilled: isModuleKilled};		 {	6		: 'PBSPlaneIconWithAmount',
																													7	: 'PBSModuleIconWithAmount',
																													8	: 'PBSModuleIconWithAmount',
																													no_item				: 'EmptyItem'}"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="10px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<marginTop value="-4px"/>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="_entity.battleResultsEntry.title"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
					<style>
						<width value="100%"/>
						<bottom value="0px"/>
						<position value="absolute"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginBottom value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="10px"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _marginLeft: '3px'}"/>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportSubLine">
		<style>
			<width value="100%"/>
			<height value="20px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="2px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="symbol:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsDetailedReportTotalLine">
		<style>
			<height value="48px"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<textAlign value="center"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextHeader"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="_entity.battleResultsEntry.title"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowItem">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'alpha';	_entity.battleResultsEntry.values[0] == null ||
							(	_entity.battleResultsEntry.values[0].value ||
								_entity.battleResultsEntry.values[1].value ||
								_entity.battleResultsEntry.values[2].value)		?	1 : 0.5"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleTooltip'; _entity.battleResultsEntry.hint	? {tooltipText: _entity.battleResultsEntry.hint}: null"/>
			<bind name="tooltip" value="	_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TEAMKILLER			? 'PBSTeamKillerTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_ARTILLERY		? 'TakenArtilleryTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_TORPEDOES		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_BOMBS			? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_ROCKETS		? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_NAVAL_MINES	? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_DEPTH_CHARGES	? 'TakenDamageTooltip'	:
						_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_OTHER			? 'TakenDamageTooltip'
																												: 'EmptyItem' ;
						_entity.battleResultsEntry.tooltipType	? {_entity: _entity, _list: _battleResultsDH.battleResultsStructured.takenArtilleryTooltip,
																	_battleResultsDH: _battleResultsDH}
																: null"/>
		</block>
		<bind name="watch" value="'fontColorClass';	_entity.battleResultsEntry.color == USSConstants.COLOR_PINK ? '$FontColorTeamkiller' :
									_entity.battleResultsEntry.color == USSConstants.COLOR_RED	? '$FontColorCompareNegative'
																								: '$None'"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="class" value="fontColorClass"/>
				<bind name="class" value="_labelClass"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
			<block>
				<style>
					<right value="0px"/>
					<position value="absolute"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsDetailedReportRowValue'; {_fontColorClass: fontColorClass, _fontSizeClass: _valueSizeClass}; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="TakenDamageTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="322px"/>
		</style>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="watch" value="'_list';	_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_TORPEDOES		? _battleResultsDH.battleResultsStructured.takenTorpedoesTooltip	:
							_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_BOMBS			? _battleResultsDH.battleResultsStructured.takenBombsTooltip		:
							_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_ROCKETS		? _battleResultsDH.battleResultsStructured.takenRocketsTooltip	:
							_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_NAVAL_MINES	? _battleResultsDH.battleResultsStructured.takenNavalMinesTooltip	:
							_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_DEPTH_CHARGES	? _battleResultsDH.battleResultsStructured.takenDepthChargesTooltip	:
							_entity.battleResultsEntry.tooltipType == USSConstants.TOOLTIPTYPE_TAKEN_OTHER			? _battleResultsDH.battleResultsStructured.takenOtherTooltip
																													: _battleResultsDH.battleResultsStructured.takenOtherTooltip"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginBottom value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="visible" value="_list.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="2px"/>
					<marginBottom value="10px"/>
				</style>
				<bind name="style" value="'marginBottom'; (_list.length &gt; 1) ? '10px' : '0px'"/>
				<bind name="repeat" value="_list; 'ShipInteractionsTooltipRow'; {_childrenLength: _list.length, _marginLeft: '3px'}"/>
			</block>
		</block>
	</block>
	<block className="TakenArtilleryTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxHeight'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36) - (10 + (stageHeight - 720) * 0.04)-60)"/>
		<bind name="style" value="'height'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36) - (10 + (stageHeight - 720) * 0.04)-60)+'px'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginBottom value="1px"/>
					<marginTop value="1px"/>
				</style>
				<block className="BlurMap">
					<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
					<bind name="visible" value="optionData.blurEnabled"/>
					<style>
						<hitTest value="false"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="mc_blurmap_medium" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="blurMap" value="0"/>
					</block>
					<block className="inner_panel" type="native">
						<style>
							<alpha value="0.5"/>
						</style>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
				</block>
			</block>
			<style>
				<width value="318px"/>
				<height value="100px"/>
			</style>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {width: vTileWidth + 4, height: vTileHeight + 10}; {width: vTileWidth + 4, height: vTileHeight + 10}"/>
			<block className="notification_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_list; 'ShipInteractionsTooltipRow'; {_childrenLength: _list.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight - 50))"/>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight*2 - 50))"/>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowValue">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'hitTest'; hint ? true : false"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleTooltip'; hint ? {tooltipText: hint} : null"/>
			<bind name="child" value="type ? type : 'no_format'; {	_value: value, _fontColorClass: _fontColorClass,
													_fontSizeClass: _fontSizeClass}; {	time		: 'BattleStatsDetailedReportRowTimeValue',
																						period		: 'BattleStatsDetailedReportRowPeriodValue',
																						distance	: 'BattleStatsDetailedReportRowDistanceValue',
																						bold		: 'BattleStatsDetailedReportRowBoldValue',
																						no_value			: 'EmptyItem',
																						no_format			: 'BattleStatsDetailedReportRowDefaultValue'}"/>
		</block>
		<block type="text">
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="(($index &gt; 0) &amp;&amp; (type != 'no_value') ? '/' : '')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowTimeValue">
		<bind name="timeFormat" value="_value; 'hh:mm  dd.MM.yyyy'; 'formattedTime'; true"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowPeriodValue">
		<bind name="timeFormat" value="_value; 'mm:ss'; 'formattedTime'; false"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="formattedTime"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDistanceValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, 2)+' '+tr('IDS_KILOMETER')"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowBoldValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="class" value="'$Bold'"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="BattleStatsDetailedReportRowDefaultValue">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontSizeClass"/>
			<bind name="text" value="format(_value, -1)"/>
		</block>
	</block>
	<block className="PBSTeamKillerTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="watch" value="'abuseStatus';	_entity.battleResultsEntry.color == USSConstants.COLOR_PINK	? 1
																							: 2"/>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="	abuseStatus == 1	? '$FontColorTeamkiller' :
							abuseStatus == 2	? '$FontColorCompareNegative'
																	: '$None'"/>
				<bind name="text" value="abuseStatus == 1	? 'IDS_ABUSE_STATUS_SUSPECT'
																: 'IDS_ABUSE_STATUS_CONFIRMED'"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="5px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<leading value="-2"/>
					<maxWidth value="280"/>
				</style>
				<bind name="text" value="(abuseStatus == 1	? 'IDS_ABUSE_STATUS_SUSPECT_PUNISHMENT'
																: 'IDS_ABUSE_STATUS_CONFIRMED_PUNISHMENT')"/>
			</block>
			<block type="text">
				<bind name="visible" value="(abuseStatus == 1)"/>
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<leading value="-2"/>
					<maxWidth value="280"/>
					<marginTop value="2px"/>
				</style>
				<text value="IDS_ABUSE_STATUS_SUSPECT_INFO"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginBottom value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<marginTop value="6px"/>
					<marginBottom value="10px"/>
				</style>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="(abuseStatus == 1	? 'IDS_ABUSE_SUSPECT_STATUS_CLEAN'
																	: 'IDS_ABUSE_CONFIRMED_STATUS_CLEAN')"/>
				</block>
				<block type="text">
					<styleClass value="$AlignRight"/>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="_entity.battleResultsEntry.values[0].value"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block className="notification_frame_teamkiller" type="native">
			<bind name="visible" value="abuseStatus == 1"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$Fullsize"/>
			<styleClass value="$PxCorrection"/>
		</block>
		<block className="notification_frame" type="native">
			<bind name="visible" value="abuseStatus == 2"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$Fullsize"/>
			<styleClass value="$PxCorrection"/>
		</block>
	</block>
	<block className="EconomicsSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealEconomicsSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealEconomicsSection">
		<bind name="primaryEntityDH" value="'battleResultsDH'; CC.battleResultsComponent; game_data.arena_id"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="instance" value="'BuyPremiumFromBattleResultElement'; battleResultsDH.battleResultsStructured.isPremium 	? null
																												: { _isHistoryPBS: _isHistoryPBS,
																													_battleWithPremium: battleResultsDH.battleResultsStructured.isPremium }"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<style>
				<overflow value="scroll"/>
				<height value="100%"/>
			</style>
			<block>
				<block>
					<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 0.5 : 1"/>
					<style>
						<width value="1280:537,1920:709aw"/>
					</style>
					<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.base_economics,
																_isPremium: battleResultsDH.dataComponent.data.privateData.base_economics.premium_type != 0,
																_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
				</block>
				<block>
					<style>
						<marginLeft value="3px"/>
						<width value="1280:537,1920:709aw"/>
					</style>
					<bind name="style" value="'alpha'; battleResultsDH.battleResultsStructured.isPremium ? 1 : 0.5"/>
					<bind name="instance" value="'BattleStatsEconomicsColumn'; {	list: battleResultsDH.battleResultsStructured.prem_economics,
																_isPremium: battleResultsDH.dataComponent.data.privateData.prem_economics.premium_type != 0,
																_shipId: battleResultsDH.battleResultsStructured.shipId }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsEconomicsColumn">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="list; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _isPremium: _isPremium, _shipId: _shipId}; false; 0"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginTop';	entity.battleResultsEntry.type == 3 &amp;&amp; $index == 0		?	'3px'	:
								entity.battleResultsEntry.type == 3 &amp;&amp; $index &gt; 0		?	'0px'
																									:	'0px'"/>
		<bind name="style" value="'marginBottom';	entity.battleResultsEntry.type == 3 &amp;&amp;
									(($index + 1) == _childrenLength)						? '9px'
 																							: '0px'"/>
		<bind name="child" value="entity.battleResultsEntry.type ? entity.battleResultsEntry.type
                                                : 'no_item'; {	_entity: entity,
                                                                _isPremium: _isPremium,
                                                                _shipId: _shipId}; 	{		0			 	: 'BattleStatsEconomicsHeader',
                                                                                            1			: 'BattleStatsEconomicsSubHeader',
                                                                                            2					: 'BattleStatsEconomicsLine',
                                                                                            3				: 'BattleStatsEconomicsSubLine',
                                                                                            4					: 'BattleStatsEconomicsList',
                                                                                            5				: 'BattleStatsEconomicsTotal',
                                                                                            11	: 'BattleStatsEconomicsExpWithProgress',
                                                                                            13			: 'BattleStatsEconomicsTooltipLine',
																							12			: 'BattleStatsEconomicsEmptyLine',
																							16			: 'BattleStatsEconomicsWarningLine',
                                                                                            no_item						: 'EmptyItem'}"/>
	</block>
	<block className="BattleStatsEconomicsEmptyLine">
		<style>
			<width value="100%"/>
			<height value="3px"/>
		</style>
	</block>
	<block className="BattleStatsEconomicsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<block className="battle_stats_backgrounds" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="gotoAndStop!" value="_entity.battleResultsEntry.bgColor"/>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity, _class: '$TextLargeHeaderBold', _isPremium: _isPremium, _shipId:_shipId}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId}; false"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'groupExpandedPref'; (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName] == null) ? false : (userPrefs.PBSEconomicsExpand[_entity.battleResultsEntry.expandGroupName])"/>
		<bind name="action" value="'expandEconomicsGroup'; 'setUserPref' ; {value : !(groupExpandedPref), name : 'PBSEconomicsExpand', subName: _entity.battleResultsEntry.expandGroupName}"/>
		<block>
			<bind name="tooltip" value="'MouseInstructionTooltip'; _entity.battleResultsEntry.hint	? {	_multiParagraphArray: [{_paragraphText: _entity.battleResultsEntry.hint}],
																						_mouseInstructions: [{_type: 'left', _instructionText: groupExpandedPref ? 'IDS_HINT_COLLAPSE_GROUP' : 'IDS_HINT_EXPAND_GROUP'}],	
																						_maxWidth: 250}: null"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<bind name="instance" value="'BattleStatsExpandElement'; {_entity: _entity, _expandGroupEvent: 'expandEconomicsGroup', _groupExpanded: groupExpandedPref, _stateOver: rollOver}"/>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[1].value &gt; 0 &amp;&amp; (_entity.battleResultsEntry.values[1].type == 'skill_points')"/>
			<style>
				<right value="102px"/>
				<backgroundColor value="0x01000000"/>
				<position value="absolute"/>
			</style>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_HINT_FREE_SKILLPOINTS'}"/>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.values[2].value == true"/>
				<block type="text">
					<style>
						<marginTop value="2px"/>
						<marginRight value="4px"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="class" value="'$FontColorGolden'"/>
					<bind name="text" value="toUpperCase(tr('IDS_HIGHEST_RANK'))"/>
				</block>
			</block>
			<bind name="instance" value="'CrewSkillPointBadge';	_entity.battleResultsEntry.values[1].value != null	? {	_skillPoints: _entity.battleResultsEntry.values[1].value}
																									: null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[0].type  == 'warning_icon'"/>
			<bind name="tooltip" value="'SimpleTooltip';{tooltipText: 'IDS_BATTLE_STATS_WARNING_ICON_HINT'}"/>
			<bind name="instance" value="'BattleStatsEconomicsRowWarningIcon';	_entity.battleResultsEntry.values[0].value == true	? {} : null"/>
			<style>
				<right value="260px"/>
				<position value="absolute"/>
				<marginTop value="2px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="fade" value="groupExpandedPref; 0.15; {scaleY: 0, ubScaleY: 0, alpha: 0}; {scaleY: 1, ubScaleY: 1, alpha: 1}; {scaleY: 0, ubScaleY: 0, alpha: 0}; 2; 0"/>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId}"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTotal">
		<style>
			<width value="100%"/>
			<height value="50px"/>
		</style>
		<block className="battle_stats_backgrounds" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="gotoAndStop!" value="_entity.battleResultsEntry.bgColor"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity, _class: '$TextLargeHeaderBold', _large: true}"/>
		</block>
	</block>
	<block className="BattleStatsExpandElement">
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="_entity.battleResultsEntry.bgColor != null"/>
			<block className="battle_stats_backgrounds" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="gotoAndStop!" value="_entity.battleResultsEntry.bgColor"/>
			</block>
		</block>
		<block className="button_expand" type="native">
			<bind name="visible" value="!(_entity.battleResultsEntry.hideExpand)"/>
			<style>
				<width value="100%"/>
				<marginTop value="3px"/>
				<marginLeft value="9px"/>
				<position value="absolute"/>
			</style>
			<params>
				<param name="toggle" value="true"/>
				<param name="soundSet" value="dropmenu_button"/>
				<param name="focusable" value="false"/>
			</params>
			<bind name="selected" value="_groupExpanded"/>
			<bind name="dispatch" value="'click'; _expandGroupEvent; {}"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="18px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity,  _class: '$TextHeaderWhiteBold', _medium: true, _shipId: _shipId}"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="6px"/>
				<marginBottom value="-6px"/>
				<height value="26px"/>
				<width value="100%"/>
				<alpha value="0.95"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity, _class: '$TextHeaderBold'}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="20px"/>
			</style>
			<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity, _class: '$TextDefault'}"/>
			<block>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<style>
					<bottom value="1"/>
					<position value="absolute"/>
					<alpha value="0.5"/>
				</style>
				<block className="DottedLine">
					<style>
						<backgroundImage value="symbol:dotted_line"/>
						<backgroundRepeatX value="true"/>
						<width value="100%"/>
						<height value="1px"/>
						<alpha value="0.5"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsSubLine">
		<bind name="tooltip" value="'SimpleTooltip'; _entity.battleResultsEntry.hint	? {tooltipText: _entity.battleResultsEntry.hint}: null"/>
		<style>
			<width value="100%"/>
			<height value="20px"/>
			<backgroundColor value="0x01FFFFFF"/>
		</style>
		<bind name="instance" value="'BattleStatsEconomicsRowItem'; {_entity: _entity, _class: '$TextDefault', _shipId: _shipId}"/>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<bottom value="1"/>
				<position value="absolute"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="symbol:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsList">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow' ; {_childrenLength: _entity.battleResultsEntry.children.length, _shipId: _shipId}"/>
	</block>
	<block className="BattleStatsEconomicsExpWithProgress">
		<bind name="primaryEntityDH" value="'crewEntity'; CC.crew; _entity.dataComponent.data"/>
		<bind name="watchDH" value="'crew'; ['crewEntity.crew.evBasketChanged', 'crewEntity.crew.evLevelUp', 'crewEntity.crew.evExpChanged', 'crewEntity.crew.evShipChanged', 'crewEntity.crew.evSkillsChanged', 'crewEntity.crew.evResetCostChanged', 'crewEntity.crew.evAdaptationUpdated', 'crewEntity.crew.evChanged', 'crewEntity.crew.evRecentnessUpdated']; crewEntity.crew"/>
		<bind name="watchDH" value="'crew'+'Retraining'; ['crewEntity.crew.evRetrainingUpdated']; crewEntity.retraining"/>
		<bind name="watch" value="'isCrewExpBlock'; 			_entity.battleResultsEntry.blockName == USSConstants.BLOCK_CREWEXP"/>
		<styleClass value="$InfoBlockIndent"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
					<marginTop value="6px"/>
					<marginLeft value="3px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="tooltip" value="'CrewTooltip'; {	_crewId: _entity.dataComponent.data,
												_checkPenalty: false,
												_inPBS: true}"/>
					<block type="text">
						<style>
							<width value="100%f"/>
							<leading value="-4"/>
						</style>
						<styleClass value="$TextDefaultBold19NM"/>
						<bind name="text" value="_entity.battleResultsEntry.values[0].value"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%f"/>
					</style>
					<bind name="visible" value="isCrewExpBlock &amp;&amp; (_entity.battleResultsEntry.values[5].value == true) &amp;&amp; !_entity.battleResultsEntry.values[3].value"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CONVERTED_TO_ELITE_XP_HINT'}"/>
					<block type="text">
						<style>
							<width value="100%f"/>
							<marginTop value="2px"/>
							<marginLeft value="-3px"/>
						</style>
						<styleClass value="$TextDefault"/>
						<text value="IDS_HIGHEST_RANK"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.values[3].value != 0"/>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_BATTLE_STATS_CREW_EXP_HINT'}"/>
			<style>
				<marginRight value="1px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="child" value="isCrewExpBlock ? _entity.battleResultsEntry.values[6].value == true ? 1 : 0
			 							: 0;
			 				{_entity: _entity}; 'ProgressBarGreen'; 'ProgressBarOrange'"/>
			</block>
			<block>
				<bind name="watch" value="'crewUnderAdaptation'; isCrewExpBlock &amp;&amp; _entity.battleResultsEntry.values[6].value == true"/>
				<style>
					<hitTest value="false"/>
					<marginTop value="-2px"/>
					<marginRight value="-3px"/>
					<right value="-2px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<marginTop value="-2px"/>
						<fontSize value="17"/>
					</style>
					<bind name="style" value="'textColor'; crewUnderAdaptation ? '0xFF6600' : '0xFFFFFF'"/>
					<bind name="text" value="_entity.battleResultsEntry.values[2].value"/>
				</block>
				<block>
					<bind name="watch" value="'pointsToNextLevel'; _entity.battleResultsEntry.values[3].value - _entity.battleResultsEntry.values[2].value"/>
					<style>
						<alpha value="0.5"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<style>
							<marginLeft value="-4px"/>
						</style>
						<bind name="style" value="'textColor'; crewUnderAdaptation ? '0xFF6600' : '0xFFFFFF'"/>
						<bind name="text" value="' / '	+ _entity.battleResultsEntry.values[3].value
										+ (_entity.battleResultsEntry.values[3].value != _entity.battleResultsEntry.values[2].value
											? 	' (' 	+ (subst('IDS_MORE_EXP', [], {expCount:	pointsToNextLevel})) 
												+ ')'
											: 	''
										)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleStatsEconomicsWarningLine">
		<styleClass value="$InfoBlockHorizontalIndent"/>
		<style>
			<flow value="horizontal"/>
			<marginTop value="-5px"/>
			<marginBottom value="9px"/>
		</style>
		<block className="icon_warning_orange" type="native">
			<style>
				<marginRight value="4px"/>
				<marginTop value="4px"/>
			</style>
		</block>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<styleClass value="$FontColorUnready"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="text" value="_entity.battleResultsEntry.title"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowItem">
		<bind name="tooltip" value="	(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_ENSIGNS)		? 	'ExteriorPostBattleTooltip' :
					(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_SSE)			? 	'PostBattleSSEQuestTooltip':
					(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_REAMMUNITION)	? 	'PostBattleReammunitionTooltip':
					(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_RECAMO)			? 	'PostBattleRecamoTooltip' :
					(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_RESIGNAL)		? 	'PostBattleResignalTooltip' :
					(_entity.battleResultsEntry.tooltipType	== USSConstants.TOOLTIPTYPE_REEQUIP)		? 	'PostBattleReequipTooltip'
																										:	'EmptyItem';
					{	_entity: 	_entity,
						_id:		_entity.dataComponent.data.id,
						progressCurrent: 1,
						progressMax: 1,
						titleText: _entity.dataComponent.data.name,
						_shipId: _shipId
					}"/>
		<styleClass value="$InfoBlockHorizontalIndent"/>
		<style>
			<height value="100%"/>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; 	_entity.battleResultsEntry.hint	&amp;&amp; 
												(_entity.battleResultsEntry.type == 0 || _entity.battleResultsEntry.type == 5) ? 
												{tooltipText: _entity.battleResultsEntry.hint}: null"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black')	? '$FontColorAlmostBlack'
																				: _class"/>
					<bind name="class" value="	(_entity.battleResultsEntry.color == 'black') 	? '$FontDropShadowWhite'
																				: '$None'"/>
					<bind name="text" value="_entity.battleResultsEntry.title"/>
				</block>
			</block>
			<block>
				<bind name="style" value="'marginTop';  	_medium ? '1px': 
										_large ? '-2px' : '0px'"/>
				<styleClass value="$AlignRight"/>
				<bind name="repeat" value="_entity.battleResultsEntry.values; 'BattleStatsEconomicsRowValue'; {_entity: _entity, _fontStyleClass: _class, _large: _large, _medium: _medium}; true"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'SimpleTooltip';  {tooltipText: _isPremium ? 'IDS_WITH_PREM_HINT' : 'IDS_WITHOUT_PREM_DESC'}"/>
			<style>
				<right value="3"/>
				<position value="absolute"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="_isPremium ? '$FontColorGolden': '$None'"/>
				<bind name="text" value="_entity.battleResultsEntry.subtitle"/>
			</block>
		</block>
	</block>
	<block className="ProgressBarGreen">
		<block className="indicator_progress_bar_lightgreen" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="ProgressBarYellow">
		<block className="indicator_progress_bar_yellow" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="ProgressBarRed">
		<block className="indicator_progress_bar_red" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="ProgressBarOrange">
		<block className="indicator_progress_bar_orange" type="native">
			<style>
				<width value="190px"/>
			</style>
			<bind name="value" value="(_entity.battleResultsEntry.values[2].value / _entity.battleResultsEntry.values[3].value)*10"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowSubtitle">
		<style>
			<right value="0px"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="text" value="toUpperCase(tr(_subtitle))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowValue">
		<bind name="child" value="type ? type : 'no_format'; {	_value: value, _type: type,
												_fontStyleClass: _fontStyleClass,
												_large: _large, _medium: _medium, 
												_entity: _entity}; 					{	credits					: 'BattleStatsEconomicsRowCredits',
																						gold						: 'BattleStatsEconomicsRowGold',
																						credits_applied			: 'BattleStatsEconomicsRowCreditsApplied',
																						credits_applied_show_zero 	: 'BattleStatsEconomicsRowCreditsAppliedShowZero',
																						gold_applied				: 'BattleStatsEconomicsRowGoldApplied',
																						gold_right					: 'BattleStatsEconomicsRowGoldRight',
																						credits_zero_hide			: 'BattleStatsEconomicsRowCreditsHideZero',
																						exp						: 'BattleStatsEconomicsRowExp',
																						freexp					: 'BattleStatsEconomicsRowFreeXP',
																						freexp_right				: 'BattleStatsEconomicsRowFreeXPRight',
																						percents					: 'BattleStatsEconomicsRowPercents',
																						skill_points				: 'EmptyItem',
																						subtitle					: 'BattleStatsEconomicsRowSubtitle',
																						AOGAS						: 'BattleStatsEconomicsRowAOGAS',
																						tooltip_percents			: 'BattleStatsEconomicsRowTooltipPercents',
																						elite_xp					: 'BattleStatsEconomicsRowEliteXP',
																						warning_icon				: 'EmptyItem',
																						no_value							: 'EmptyItem',
																						no_format							: 'BattleStatsDetailedEconomicsRowDefaultValue'}"/>
	</block>
	<block className="BattleStatsDetailedEconomicsRowDefaultValue">
		<block type="text">
			<bind name="class" value="_fontColorClass"/>
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="_value"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowCredits">
		<bind name="tooltip" value="'SimpleTooltip'; _entity.battleResultsEntry.type == 5 ? {tooltipText: 'IDS_BATTLE_STATS_TOTAL_CREDITS_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'credits'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsApplied">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="visible" value="_value.value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: 'credits'},
													_large: _large, _medium: _medium, _deficit: !(_value.applied)}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsAppliedShowZero">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: 'credits'},
													_large: _large, _medium: _medium, _deficit: !(_value.applied)}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGold">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="tooltip" value="'SimpleTooltip'; _entity.battleResultsEntry.type == 5 ? {tooltipText: 'IDS_BATTLE_STATS_TOTAL_GOLD_COUNT_HINT'}: null"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'gold'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldApplied">
		<bind name="visible" value="_value.value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
			<flow value="horizontal"/>
			<hitTest value="false"/>
		</style>
		<block>
			<style>
				<marginRight value="3px"/>
			</style>
			<bind name="visible" value=" !(_value.applied)"/>
			<block className="IconWarningSmall">
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="5px"/>
					</style>
				</block>
			</block>
		</block>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value.value,
																 currency: 'gold'},
													_large: _large, _medium: _medium, _deficit: !(_value.applied)}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowGoldRight">
		<style>
			<position value="absolute"/>
			<right value="0"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: 'gold'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowCreditsHideZero">
		<bind name="visible" value="_value != 0"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != 0	? {	priceInfo: { finalPrice: _value,
																 currency: 'credits'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowExp">
		<bind name="tooltip" value="'SimpleTooltip'; _entity.battleResultsEntry.type == 5 ? {tooltipText: 'IDS_BATTLE_STATS_TOTAL_EXP_COUNT_HINT'}: null"/>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'exp'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXP">
		<bind name="tooltip" value="'PostBattleFreeExpTooltip'; {_entity: _entity}"/>
		<style>
			<position value="absolute"/>
			<right value="130"/>
		</style>
		<bind name="visible" value="_value != 0"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'freexp'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowFreeXPRight">
		<style>
			<position value="absolute"/>
			<hitTest value="false"/>
		</style>
		<bind name="style" value="'right';	_medium	? '0px' :
							_large	? '0px'
									: '11px'"/>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'freexp'},
													_large: _large, _medium: _medium}
												: null"/>
	</block>
	<block className="BattleStatsEconomicsRowAOGAS">
		<bind name="visible" value="(_value != null) ? true : false"/>
		<style>
			<position value="absolute"/>
			<right value="270"/>
		</style>
		<bind name="tooltip" value="'AOGASPostBattleTooltip'; _value ? {_value: _value} : null"/>
		<block className="icon_warning_orange_big" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowWarningIcon">
		<style>
			<alpha value="0.9"/>
		</style>
		<block className="icon_warning_orange_big" type="native"/>
	</block>
	<block className="BattleStatsEconomicsRowPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="210"/>
			<hitTest value="false"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowTooltipPercents">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="74"/>
		</style>
		<block type="text">
			<bind name="class" value="_fontStyleClass"/>
			<bind name="text" value="((_value &gt; 0) 	? ('+' + (_value) + '%')
									: ((_value) + '%'))"/>
		</block>
	</block>
	<block className="BattleStatsEconomicsRowEliteXP">
		<bind name="visible" value="_value != 0"/>
		<style>
			<position value="absolute"/>
			<right value="0"/>
			<top value="-2px"/>
			<marginRight value="3px"/>
		</style>
		<bind name="instance" value="'PriceTag';_value != null	? {	priceInfo: { finalPrice: _value,
																 currency: 'eliteXP'},
													_medium: true}
												: null"/>
	</block>
	<block className="IconWarningSmall">
		<block className="icon_warning_orange" type="native">
			<style>
				<marginTop value="5px"/>
			</style>
		</block>
	</block>
	<block className="BuyPremiumFromBattleResultElement">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isSyncedWithWallet'; ['resourceEntity.accountResource.evChangedIsSyncedWithWallet']; resourceEntity.accountResource.isSyncedWithWallet"/>
		<bind name="watchDH" value="'walletAvailable'; ['resourceEntity.accountResource.evChangedWalletStatus']; resourceEntity.accountResource.walletStatus"/>
		<bind name="watch" value="'showWGWalletWarning'; ((isSyncedWithWallet == false) || (walletAvailable == false))"/>
		<bind name="watchDH" value="'activePremiumType'; ['resourceEntity.accountResource.evChangedPrem']; resourceEntity.accountResource.activePremiumType"/>
		<bind name="watchDH" value="'isPremium'; ['resourceEntity.accountResource.evChangedPrem']; resourceEntity.accountResource.isPremium"/>
		<bind name="watch" value="'isWowsPremActive'; activePremiumType == 2 &amp;&amp; isPremium"/>
		<bind name="firstEntityDH" value="'windowManagerEntity'; CC.windowManager"/>
		<bind name="watchDH" value="'windowQueue'; ['windowManagerEntity.windowManager.evChanged']; windowManagerEntity.windowManager.windowQueue"/>
		<bind name="watch" value="'isResultScreenTop'; (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN) || (windowQueue[windowQueue.length - 1] == SC.Ui_windows.MODAL.RESULT_SCREEN_PORT)"/>
		<bind name="handleEventDH" value="'resourceEntity.accountResource.evChangedPrem'; 'evWowsPremBoughtYet'"/>
		<bind name="catch" value="'evWowsPremBoughtYet'; { wowsPremBoughtYet: true }"/>
		<bind name="watch" value="'isShowPremiumPurchaseAnimation'; isResultScreenTop &amp;&amp; wowsPremBoughtYet &amp;&amp; !isSwitchFinished"/>
		<bind name="changeDispatch" value="isShowPremiumPurchaseAnimation; 'evSwitchStart'; {}; 2; true"/>
		<bind name="dispatch" value="'evSwitchStart'; 'evSwitchFinished'; {}; 0; 1.15"/>
		<bind name="catch" value="'evSwitchFinished'; { isSwitchFinished: true }"/>
		<bind name="var" value="{wowsPremBoughtYet: 	false,
				isSwitchFinished: 	false }"/>
		<bind name="watch" value="'isShowStatusLine'; isSwitchFinished || (isWowsPremActive &amp;&amp; !wowsPremBoughtYet)"/>
		<style>
			<width value="100%"/>
			<height value="24px"/>
		</style>
		<block>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}; {alpha: 0, top: 10}; 0; 1"/>
			<style>
				<position value="absolute"/>
				<right value="-2px"/>
			</style>
			<block>
				<bind name="style" value="'hitTest'; isShowStatusLine || showWGWalletWarning ? false : true"/>
				<bind name="style" value="'alpha'; 	isShowStatusLine 	? 0 :
									showWGWalletWarning ? 0.5
														: 1"/>
				<bind name="instance" value="'ButtonBuyPremiumPBS'; { _isHistoryPBS: _isHistoryPBS }"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'WGWalletServiceStatus'; showWGWalletWarning &amp;&amp; !isShowStatusLine ? { _walletAvailable: walletAvailable, _isSyncedWithWallet: isSyncedWithWallet } : null"/>
			</block>
		</block>
		<block>
			<bind name="watch" value="'topMarginStatusLine'; isShowPremiumPurchaseAnimation ? -10 : 0"/>
			<bind name="transition" value="isShowPremiumPurchaseAnimation; 0.15; {alpha: 0, top: topMarginStatusLine}; {alpha: 1, top: 0}; {alpha: 1, top: 0}; 0; 1"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'alpha'; isShowStatusLine ? 1 : 0"/>
			<bind name="instance" value="'StatusLine'; {	_unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.CHECK,
										_text: 'IDS_SYS_MESSAGE_HEADER_MS_ACC_BUY_WOWS_PREM',
										_textClass: '$TextDefault17NM',
										_leading: -3 }"/>
		</block>
	</block>
	<block className="ButtonBuyPremiumPBS">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold'; ['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="primaryEntityDH" value="'premiumItemEntity'; CC.premiumItem; 'PREM_001_WOWS'"/>
		<bind name="watchDH" value="'smallestGoldPrice'; ['premiumItemEntity.premiumItem.evChangedGold']; premiumItemEntity.premiumItem.gold"/>
		<bind name="watch" value="'showModalWindowBuyPrem'; accountGold &gt;= smallestGoldPrice"/>
		<bind name="watch" value="'requestBuyPremiumPBS'; _isHistoryPBS ?	showModalWindowBuyPrem	?	'buttonShowPremiumPeriods' :
																						'webBrowser' :
															showModalWindowBuyPrem 	?	'buyPremiumBattleResult'
																					:	'buyPremiumBattleResultWebBrowser'"/>
		<bind name="watch" value="'requestParamsBuyPremiumPBS'; showModalWindowBuyPrem 	? { isFromPBS: true }
																		: { url: URL.BUY_GOLD_AND_PREMIUM_IN_GAME }"/>
		<bind name="request" value="'click'; requestBuyPremiumPBS; requestParamsBuyPremiumPBS"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; null; 'ct_'"/>
		<bind name="var" value="{ 
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; (ct_mouseDown)	? ctMouseDown :
							true &amp;&amp; (ct_rollOver)	? ctRollOver
														: {}"/>
		<bind name="tooltip" value="'BuyPremResultScreenButtonTooltip'; {}"/>
		<style>
			<height value="24px"/>
		</style>
		<block className="button_buy_wows_premium" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorGold'"/>
			<style>
				<marginLeft value="16px"/>
				<marginTop value="6px"/>
				<marginRight value="16px"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_BUY_PREMIUM_ACCOUNT'))"/>
		</block>
	</block>
	<block className="PersonalResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="instance" value="'RealPersonalResultSection'; _data"/>
	</block>
	<block className="RealPersonalResultSection">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
		<bind name="watch" value="'numRibbons'; personal.ribbons.length"/>
		<bind name="watch" value="'numBonusTags'; personal.bonus_tags.length"/>
		<bind name="watch" value="'numCampaginTasks'; personal.campaignTasksResults.length"/>
		<bind name="watch" value="'numQuests'; personal.tasksResults.length"/>
		<bind name="watch" value="'delay'; 1.6"/>
		<bind name="watch" value="'achievementDelay'; 2.3"/>
		<bind name="watch" value="'ribbonsDelay'; 	achievementDelay + (personal.achievements.length * 0.15) + 0.2"/>
		<bind name="watch" value="'bonusTagDelay'; 	ribbonsDelay + numRibbons * 0.2"/>
		<bind name="watch" value="'campTaskDelay'; 	bonusTagDelay + numBonusTags * 0.2"/>
		<bind name="watch" value="'questsDelay'; 	campTaskDelay + numCampaginTasks * 0.2"/>
		<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.05; {alpha: 0, top: 10}; {alpha: 0.9, top: 0}"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<block className="wows_logo_pb" type="native">
				<bind name="gotoAndStop!" value="realmConstants.wowsLogo"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<maxWidth value="1280"/>
				<width value="78sw"/>
				<height value="70sh"/>
				<top value="43%"/>
				<marginTop value="-50%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="appear" value="'startShow'; 0.15; delay; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<bind name="class" value="(game_data.battle_result == 1) || (game_data.battle_result == 3) ? '$FontColorGolden' : '$FontColorBlueish'"/>
						<styleClass value="$TextDefaultBold"/>
						<style>
							<fontSize value="75"/>
						</style>
						<bind name="name" value="'BattleResultText'"/>
						<bind name="text" value="resultText"/>
					</block>
					<block type="text">
						<bind name="appear" value="'startShow'; 0.15; delay + 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$ResultsHeader"/>
						<style>
							<marginTop value="-9px"/>
						</style>
						<bind name="name" value="'BattleResultSubText'"/>
						<bind name="text" value="commentText"/>
					</block>
					<block>
						<bind name="appear" value="'startShow'; 0.15; delay + 0.2; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block>
							<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: personal.player.shipId, _name: personal.player.name, _isEnemy: false, _fontSizeClass: '$FontSizeLarge',
																_isTeamKiller: personal.player.tkStatus, _isSelf: true, _isInMyDivision: false, _noWidth: true}"/>
						</block>
						<block>
							<bind name="instance" value="'PersonalResultKiller'; personal.killed ? { _killer: personal.killer, _deathReason: personal.death_reason_id,
																					_relation: personal.killer.relation, _killerIsBuilding: personal.killerIsBuilding,
																					_killerBuildingName: personal.killerBuilding.ids_name,
																					_killerBuildingType: personal.killerBuilding.type} : null"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="appear" value="'startShow'; 0.15; delay + 0.25; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$AlignRight"/>
						<style>
							<top value="36px"/>
						</style>
						<block type="text">
							<styleClass value="$TextHeaderBigDefault"/>
							<bind name="class" value="'$FontColorBlueish'"/>
							<bind name="name" value="'BattleResultMapAndType'"/>
							<style>
								<right value="0"/>
							</style>
							<bind name="text" value="tr(game_data.map_name) + '—' + tr(game_data.battle_mode)"/>
						</block>
						<block type="text">
							<styleClass value="$TextHeaderBigDefault"/>
							<bind name="class" value="'$FontColorBlueish'"/>
							<style>
								<right value="0"/>
							</style>
							<bind name="text" value="tr('IDS_BATTLE_START_TIME') + ': ' + game_data.battle_date"/>
						</block>
					</block>
				</block>
				<block>
					<style>
						<marginTop value="2sh"/>
					</style>
					<block type="text">
						<bind name="visible" value="game_data.battle_mode_id != 3"/>
						<bind name="appear" value="'startShow'; 0.15; delay + 0.3; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$ResultsHeader"/>
						<text value="IDS_BATTLE_STATS_TAKEN_TILL_BATTLE"/>
					</block>
					<block>
						<bind name="visible" value="game_data.battle_mode_id != 3"/>
						<style>
							<marginTop value="-2px"/>
						</style>
						<block>
							<bind name="appear" value="'startShow'; 0.15; delay + 0.4; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
							<block type="text">
								<styleClass value="$ResultsReward"/>
								<bind name="name" value="'BattleResultCreditsGain'"/>
								<bind name="text" value="format(credits_experience.result.gui_main_credits, -1)"/>
							</block>
							<block className="icon_credit_big" type="native">
								<styleClass value="$MiddleVAligned"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="appear" value="'startShow'; 0.15; delay + 0.5; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
							<style>
								<marginLeft value="24px"/>
							</style>
							<block type="text">
								<styleClass value="$ResultsReward"/>
								<bind name="name" value="'BattleResultExperienceGain'"/>
								<bind name="text" value="format(credits_experience.result.gui_main_exp, -1)"/>
							</block>
							<block className="icon_exp_big" type="native">
								<styleClass value="$MiddleVAligned"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="feature" value="5; ''"/>
							<bind name="visible" value="feature_5 != 'locked'"/>
							<bind name="appear" value="'startShow'; 0.15; delay + 0.6; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
							<style>
								<marginLeft value="24px"/>
							</style>
							<block type="text">
								<styleClass value="$ResultsReward"/>
								<bind name="name" value="'BattleResultFreeExperienceGain'"/>
								<bind name="text" value="format(credits_experience.result.gui_main_free_exp, -1)"/>
							</block>
							<block className="icon_exp_free_big" type="native">
								<styleClass value="$MiddleVAligned"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="name" value="'BattleResultAchievements'"/>
							<style>
								<marginLeft value="26px"/>
								<marginTop value="12px"/>
							</style>
							<bind name="var" value="{animationOn: true}"/>
							<bind name="dispatch" value="'startShow'; 'switchAnimationOff'; null; false; 0.1"/>
							<bind name="catch" value="'switchAnimationOff'; {animationOn: false}"/>
							<bind name="repeat" value="personal.achievements; 'AchievementAppearAnimation'; {_delay: achievementDelay, _animationOn: animationOn}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="appear" value="'startShow'; 0.15; delay + 0.6; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<block>
							<bind name="visible" value="credits_experience.result.credits_penalty != 0 || credits_experience.result.exp_penalty != 0"/>
							<style>
								<marginRight value="12px"/>
							</style>
							<block type="text">
								<styleClass value="$TextHeaderBigDefault"/>
								<bind name="class" value="'$FontColorCompareNegative'"/>
								<bind name="text" value="tr('IDS_BATTLE_STATS_FINE_OF_DAMAGE') + ': '"/>
							</block>
							<block>
								<bind name="visible" value="credits_experience.result.credits_penalty != 0"/>
								<block type="text">
									<styleClass value="$TextHeaderBigDefault"/>
									<bind name="class" value="'$Bold'"/>
									<bind name="name" value="'BattleResultCreditsPenalty'"/>
									<bind name="text" value="format(credits_experience.result.credits_penalty, -1)"/>
								</block>
								<block className="icon_credit_small" type="native">
									<style>
										<marginTop value="6px"/>
									</style>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block type="text">
								<bind name="visible" value="credits_experience.result.credits_penalty != 0 &amp;&amp; credits_experience.result.exp_penalty != 0"/>
								<style>
									<marginLeft value="2px"/>
									<marginRight value="2px"/>
								</style>
								<styleClass value="$TextHeaderBigDefault"/>
								<bind name="class" value="'$FontColorBlueish'"/>
								<text value="IDS_AND"/>
							</block>
							<block>
								<bind name="visible" value="credits_experience.result.exp_penalty != 0"/>
								<block type="text">
									<styleClass value="$TextHeaderBigDefault"/>
									<bind name="class" value="'$Bold'"/>
									<bind name="name" value="'BattleResultExperiencePenalty'"/>
									<bind name="text" value="format(credits_experience.result.exp_penalty, -1)"/>
								</block>
								<block className="icon_exp_small" type="native">
									<style>
										<marginTop value="6px"/>
									</style>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="credits_experience.result.compensation_for_allied_damage != 0"/>
							<block type="text">
								<styleClass value="$TextHeaderBigDefault"/>
								<bind name="class" value="'$FontColorBlueish'"/>
								<bind name="text" value="tr('IDS_BATTLE_STATS_FINE_FOR_DAMAGE') + ': '"/>
							</block>
							<block>
								<block type="text">
									<styleClass value="$TextHeaderBigDefault"/>
									<bind name="class" value="'$Bold'"/>
									<bind name="name" value="'BattleResultCreditsCompensation'"/>
									<bind name="text" value="format(credits_experience.result.compensation_for_allied_damage, -1)"/>
								</block>
								<block className="icon_credit_small" type="native">
									<style>
										<marginTop value="6px"/>
									</style>
								</block>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="primaryEntityDH" value="'battleResultsDH'; CC.battleResultsComponent; game_data.arena_id"/>
					<bind name="entityDH" value="'causedDamageEntity'; battleResultsDH.battleResultsStructured.causedDamage[0]"/>
					<style>
						<marginTop value="1.5sh"/>
						<width value="100%"/>
					</style>
					<block type="text">
						<bind name="appear" value="'startShow'; 0.15; ribbonsDelay-0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$ResultsHeader"/>
						<style>
							<marginBottom value="9px"/>
						</style>
						<text value="IDS_BATTLE_EFFICIENCY"/>
					</block>
					<block type="text">
						<bind name="visible" value="(numRibbons == 0 &amp;&amp; causedDamageEntity.battleResultsEntry.values[0].value == 0)"/>
						<bind name="appear" value="'startShow'; 0.15; ribbonsDelay; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$ResultsWarning"/>
						<style>
							<marginTop value="-4px"/>
							<marginBottom value="32px"/>
						</style>
						<text value="IDS_YOU_DIDNT_SHOW_RESULTS"/>
					</block>
					<block>
						<bind name="visible" value="(numRibbons &gt; 0 || causedDamageEntity.battleResultsEntry.values[0].value &gt; 0)"/>
						<style>
							<marginTop value="4px"/>
							<width value="100%"/>
						</style>
						<block>
							<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
							<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
							<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
							<style>
								<width value="100%"/>
							</style>
							<block>
								<style>
									<flow value="htile"/>
									<width value="100%"/>
								</style>
								<block>
									<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: 'IDS_RIBBON_TOTAL_DAMAGE'}"/>
									<bind name="appear" value="'startShow'; 0.15; ribbonsDelay + 0.15; {top: 10, alpha: 0}; {top: 0, alpha: 1}"/>
									<style>
										<marginTop value="-13px"/>
										<marginRight value="10px"/>
									</style>
									<block type="text">
										<style>
											<minWidth value="129"/>
											<fontSize value="53"/>
											<textAlign value="center"/>
										</style>
										<styleClass value="$ResultsReward"/>
										<bind name="text" value="format(causedDamageEntity.battleResultsEntry.values[0].value, -1)"/>
									</block>
									<block type="text">
										<style>
											<marginTop value="-10px"/>
										</style>
										<styleClass value="$MiddleAligned"/>
										<styleClass value="$TextDefault"/>
										<bind name="class" value="'$FontColorBlueish'"/>
										<bind name="text" value="'IDS_TOTAL_DAMAGE'"/>
									</block>
								</block>
								<bind name="repeat" value="personal.ribbons; 'RibbonItem'; {_delay: ribbonsDelay + 0.30, _animationOn: animationOn}"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="numQuests || numCampaginTasks || numBonusTags"/>
					<style>
						<marginTop value="2sh"/>
					</style>
					<block type="text">
						<bind name="appear" value="'startShow'; 0.15; bonusTagDelay-0.05; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
						<styleClass value="$ResultsHeader"/>
						<text value="IDS_TASKS"/>
					</block>
					<block>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="appear" value="'startShow'; 0.15; bonusTagDelay; {alpha: 0}; {alpha: 1}"/>
						<block>
							<bind name="name" value="'BattleResultQuestContainer'"/>
							<bind name="watch" value="'taskCount'; Number(numQuests - tasksResultsLength)"/>
							<bind name="watch" value="'tasksResultsLength'; (numBonusTags + numQuests + numCampaginTasks) &gt; 8 ? (7 - numBonusTags - numCampaginTasks) : numQuests"/>
							<bind name="appear" value="'startShow'; 0.01; bonusTagDelay; {alpha: 0, scaleY: 0}; {alpha: 1, scaleY: 1} "/>
							<styleClass value="$FullsizeAbsolute"/>
							<block>
								<bind name="repeat" value="personal.bonus_tags; 'PostBattleBonusTagItem'; { _delay: bonusTagDelay }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="personal.campaignTasksResults; 'PostBattleCampaignTasksItem'; { _delay: campTaskDelay }"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="repeat" value="tasksResultsLength; 'PostBattleMainQuestsElement'; {_delay: questsDelay, _data: personal.tasksResults, _tooltip: false}"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
							<block>
								<bind name="visible" value="numQuests &gt; tasksResultsLength"/>
								<bind name="instance" value="'MoreSseButton'; {	_delay: questsDelay, 
																_data: personal.tasksResults, 
																_tasksResultsLength: tasksResultsLength, 
																_taskCount: taskCount}"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="MoreSseButton">
		<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_CLICK_TO_CHOOSE_ACTION'}], _maxWidth: 250}"/>
		<bind name="tooltip" value="'MoreSseInfotip'; {_data: _data, _tasksResultsLength: _tasksResultsLength, _taskCount: _taskCount}; TooltipBehaviour.infotip"/>
		<bind name="dispatch" value="'mouseOver'; 'overTaskCounter'; {taskCounterOverAlpha: 1}"/>
		<bind name="dispatch" value="'mouseOut'; 'upTaskCounter'; {taskCounterOverAlpha: 0.8}"/>
		<style>
			<width value="100px"/>
			<alpha value="0.8"/>
			<marginTop value="8"/>
		</style>
		<block>
			<bind name="appear" value="'startShow'; 0.15; _delay ? (7*0.25) + _delay : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="catch" value="'overTaskCounter'"/>
			<bind name="catch" value="'upTaskCounter'"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'alpha'; taskCounterOverAlpha"/>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<leading value="-12"/>
				</style>
				<style>
					<styleSheet value="h3{font-size: 68; color: #FFFFFF; font-family: $WWSDefaultFontBold}"/>
				</style>
				<bind name="text" value="subst('IDS_PL_TASKS', [], {taskCount: _taskCount}, _taskCount)"/>
			</block>
		</block>
	</block>
	<block className="MoreSseInfotip">
		<bind name="stageSize"/>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<style>
			<width value="452px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-8px"/>
				<marginRight value="-13px"/>
				<marginLeft value="-13px"/>
				<marginBottom value="-16px"/>
			</style>
		</block>
		<block>
			<style>
				<marginLeft value="16"/>
				<marginTop value="16"/>
			</style>
			<block>
				<style>
					<width value="80px"/>
					<height value="80"/>
					<backgroundSize value="cover"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../accountLevel/unlocks/icon_9.png'"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
					<marginLeft value="16"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold19NM"/>
					<bind name="text" value="'IDS_BATTLE_TASKS'"/>
				</block>
				<block type="text">
					<style>
						<maxWidth value="324"/>
						<marginTop value="8"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="'IDS_BATTLE_TASKS_ACTIVE_THIS_BATTLE_DESCRIPTION'"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<flow value="htile"/>
				<align value="left"/>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<bind name="repeat" value="_data; 'PostBattleMainQuestsElement'; {_data: _data, _tooltip: true, _tasksResultsLength: _tasksResultsLength}"/>
		</block>
		<block className="dock_panel_pin_h" type="native">
			<style>
				<position value="absolute"/>
				<marginTop value="-8px"/>
			</style>
			<bind name="gotoAndStop!" value="'left'"/>
			<params>
				<param name="name" value="pinLeft"/>
			</params>
		</block>
		<block className="dock_panel_pin_h" type="native">
			<style>
				<position value="absolute"/>
				<marginTop value="-8px"/>
				<right value="-8px"/>
			</style>
			<bind name="gotoAndStop!" value="'right'"/>
			<params>
				<param name="name" value="pinRight"/>
			</params>
		</block>
	</block>
	<block className="PostBattleMainQuestsElement">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'SSECompleted'; 'sseId'; _id; 'questItems'"/>
		<bind name="watch" value="'isDone'; _data[$index].progressCurrent == _data[$index].targetValue"/>
		<bind name="tooltip" value="'PostBattleSSEQuestTooltip'; {_type: _data[$index].type, 
												_id: _data[$index].id, 
												_doneThisBattle: _data[$index].progressCurrent == _data[$index].targetValue, 
												_titleText: _data[$index].titleText, 
												_epicName: _data[$index].epicName, 
												_milestones: true,
												_epicName: _data[$index].epicName, 
												_startTime: _data[$index].startTime, 
												_stopTime: _data[$index].stopTime, 
												_backgroundURL: _data[$index].backgroundURL, 
												_technoids: _data[$index].technoids, 
												_addcondIds: _data[$index].addcondIds, 
												_precondIds: _data[$index].precondIds, 
												_aftercondIds: _data[$index].aftercondIds, 
												_conditionSet: _data[$index].conditionSet, 
												_isMilestone: _data[$index].isMilestone
												 }; 0"/>
		<bind name="visible" value="_tooltip == false || (_tooltip == true &amp;&amp; ($index &gt;= _tasksResultsLength))"/>
		<style>
			<height value="120px"/>
			<width value="140px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; _delay ? ($index*0.25) + _delay : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextDefault"/>
			<style>
				<width value="140px"/>
				<textAlign value="center"/>
				<multiline value="false"/>
			</style>
			<bind name="class" value="'$FontColorDefault'"/>
			<bind name="text" value="_data[$index].titleText"/>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.07 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block className="icon_sse" type="native">
				<bind name="gotoAndStop!" value="_data[$index].isPrivate ? 'personalTasks' : _data[$index].type"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isDone"/>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.15 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="name" value="'SSE_complete_' + _data[$index].taskName"/>
			<style>
				<position value="absolute"/>
				<right value="16px"/>
				<top value="21px"/>
			</style>
			<block className="done_icon" type="native"/>
		</block>
		<block>
			<bind name="visible" value="_data[$index].progressCurrent &lt; _data[$index].targetValue"/>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.22 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block className="indicator_progress_bar" type="native">
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="12px"/>
					<width value="80px"/>
				</style>
				<bind name="name" value="'SSE_progress_' + _data[$index].taskName"/>
				<bind name="value" value="(_data[$index].progressCurrent / _data[$index].targetValue) * 10"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isDone"/>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.22 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<styleClass value="$FontSizeLarge"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<textAlign value="center"/>
					<marginTop value="6px"/>
				</style>
				<text value="IDS_DONE"/>
			</block>
		</block>
	</block>
	<block className="PostBattleCampaignTasksItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; id"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaing'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'number';[]; campaignTaskEntity.campaignTaskParams.number"/>
		<bind name="watchDH" value="'campaignName';[]; campaing.campaignParams.name"/>
		<bind name="watchDH" value="'uiNumber';[]; mission.campaignMissionParams.uiNumber"/>
		<style>
			<height value="120px"/>
			<width value="120px"/>
		</style>
		<block>
			<bind name="tooltip" value="'TaskItemTooltip'; {	_taskID: id, _isInPostbattle: true}"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextDefault"/>
				<style>
					<width value="120px"/>
					<textAlign value="center"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="'$FontColorDefault'"/>
				<bind name="text" value="(tr('IDS_CAMPAIGN_TASK') + ' ' +  number)"/>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.07 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<style>
					<width value="70px"/>
					<height value="70px"/>
					<backgroundSize value="cover"/>
					<marginTop value="-5px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				<block type="text">
					<style>
						<alpha value="0.8"/>
						<position value="absolute"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextAccentBold"/>
					<bind name="text" value="uiNumber"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.22 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="visible" value="!isDone"/>
				<styleClass value="$MiddleAligned"/>
				<block className="indicator_progress_bar" type="native">
					<style>
						<width value="80px"/>
						<marginTop value="1px"/>
					</style>
					<bind name="value" value="(progress/total) * 10"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.15 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="visible" value="isDone"/>
			<style>
				<position value="absolute"/>
				<top value="25px"/>
				<right value="25px"/>
			</style>
			<block className="done_icon" type="native"/>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; ($index*0.25) + 0.22 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_TAKE_REWARD_IN_TASK_WINDOW'}"/>
			<bind name="visible" value="isDone"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<styleClass value="$FontSizeLarge"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<textAlign value="center"/>
					<marginTop value="-5px"/>
				</style>
				<text value="IDS_DONE"/>
			</block>
		</block>
	</block>
	<block className="PersonalResultKiller">
		<block>
			<bind name="visible" value="!_killerIsBuilding"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + _deathReason)"/>
			</block>
			<block>
				<bind name="instance" value="'PBSPlayerWithShip'; _killer.shipId ? {	_shipId: _killer.shipId, _name: _killer.name, _isEnemy: (_killer.relation == 2), _fontSizeClass: '$FontSizeLarge',
																	_isTeamKiller: _killer.tkStatus, _isSelf: (_killer.relation == 0), _isInMyDivision: _killer.isInSameDivision, _noWidth: true}
																: null"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_killerIsBuilding"/>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<text value="IDS_BATTLE_STATS_DAMAGED_BY_FORT"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType != 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="11px"/>
					<height value="15px"/>
					<marginTop value="6px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'symbol:icon_ground_artillery_type_1_enemy'"/>
			</block>
			<block>
				<bind name="visible" value="_killerBuildingType == 'AirBase'"/>
				<style>
					<backgroundSize value="cover"/>
					<width value="17px"/>
					<height value="17px"/>
					<marginTop value="4px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'symbol:icon_ground_airbase_enemy'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
				</style>
				<styleClass value="$TextHeaderBigDefaultBold"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<bind name="text" value="toUpperCase(_killerBuildingName)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RibbonItem">
		<bind name="name" value="'ribbon_' + ribbonId"/>
		<bind name="appear" value="'addedToStage'; (_animationOn ? 0.15 : 0 ); (_animationOn ? (0.15 * $index + _delay) : 0); {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="tooltip" value="'RibbonItemTooltip'; {_ribbonId: ribbonId, _ribbonIds: ids, _amount: amount, _iconName: iconName, _subRibbons: subRibbons }"/>
		<block>
			<style>
				<marginRight value="10px"/>
			</style>
			<bind name="instance" value="'RibbonIcon'; { _amount: amount, _iconName: iconName}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<style>
					<marginRight value="10px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="tr('IDS_RIBBON_' + ids)"/>
			</block>
		</block>
	</block>
	<block className="RibbonItemTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="20px"/>
				<marginLeft value="20px"/>
				<marginBottom value="20px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RibbonIcon'; {_amount: _amount, _iconName: _iconName}"/>
			</block>
			<block>
				<style>
					<marginTop value="10px"/>
					<marginLeft value="150px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="170"/>
					</style>
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="tr('IDS_RIBBON_' + (_ribbonIds))"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="'IDS_RIBBON_DESCRIPTION_' + (_ribbonIds)"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(_subRibbons.length &gt; 1)"/>
			<styleClass value="$InfoBlockIndent"/>
			<style>
				<marginBottom value="0px"/>
			</style>
			<bind name="repeat" value="_subRibbons; 'RibbonIconExtended'; {}"/>
		</block>
	</block>
	<block className="RibbonIconExtended">
		<style>
			<flow value="horizontal"/>
			<marginBottom value="10px"/>
		</style>
		<bind name="visible" value="count != 0"/>
		<block>
			<style>
				<width value="51px"/>
				<height value="51px"/>
			</style>
			<bind name="style" value="'backgroundImage'; ('symbol:' + iconName)"/>
			<block type="text">
				<style>
					<marginTop value="30px"/>
					<right value="-11px"/>
				</style>
				<styleClass value="$TextHeaderBold"/>
				<bind name="text" value="'x' + count"/>
			</block>
		</block>
		<block type="text">
			<style>
				<marginLeft value="20px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextHeaderWhite"/>
			<bind name="text" value="tr('IDS_RIBBON_' + ids)"/>
		</block>
	</block>
	<block className="RibbonIcon">
		<block>
			<style>
				<height value="51px"/>
				<width value="133px"/>
			</style>
			<bind name="style" value="'backgroundImage'; ('symbol:' + _iconName)"/>
			<block type="text">
				<style>
					<marginTop value="22px"/>
					<right value="2px"/>
				</style>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="text" value="'x' + _amount"/>
			</block>
		</block>
	</block>
	<block className="PostBattleBonusTagItem">
		<bind name="entityDH" value="'bonusTagEntity'; $value"/>
		<bind name="watch" value="'bonusTagType'; bonusTagEntity.bonusTag.type"/>
		<bind name="tooltip" value="'BonusTagsTooltip'; {_bonusTagId: $value}"/>
		<style>
			<height value="120px"/>
			<width value="120px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; _delay ? $index*0.25 + _delay : 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefault"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<multiline value="false"/>
			</style>
			<bind name="text" value="tr(toUpperCase('IDS_BONUSTAG_' + bonusTagType + '_HEADER'))"/>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; $index*0.25 + 0.07 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="54px"/>
				<height value="54px"/>
				<backgroundStretchX value="true"/>
				<backgroundStretchY value="true"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_' + bonusTagType + '_big.png'"/>
		</block>
		<block className="done_icon" type="native">
			<bind name="appear" value="'startShow'; 0.15; $index*0.25 + 0.15 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<right value="16px"/>
				<top value="21px"/>
			</style>
		</block>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; $index*0.25 + 0.22 + _delay; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold"/>
			<styleClass value="$FontSizeLarge"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginTop value="6px"/>
			</style>
			<text value="IDS_RECEIVED"/>
		</block>
	</block>
	<block className="TeamResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block type="text">
			<bind name="visible" value="_data.game_data.isSpectator"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginTop value="8sh"/>
				<marginBottom value="2sh"/>
				<alpha value="0"/>
			</style>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.1; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold60NM"/>
			<bind name="text" value="_data.game_data.winner_team_id == -1 ? 'IDS_DRAW' : ('IDS_THE_WINNER_TEAM_IS_' + _data.game_data.winner_team_id)"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'RealTeamResultSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealTeamResultSection">
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="1280px"/>
			<alpha value="0"/>
			<marginTop value="3sh"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<bind name="instance" value="'UIListTeamResult'; {team_results: team_results, game_data: game_data, personal: personal, _isHistoryPBS: _isHistoryPBS}"/>
	</block>
	<block className="VoiceChatOutgoingIcon">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
		<bind name="transition" value="VoiceChatState.outgoing; 0.15; {alpha: 0}; {alpha: 1}"/>
		<bind name="tooltip" value="'MouseInstructionTooltip'; VoiceChatState.outgoing ?	{	_multiParagraphArray:  [{_paragraphText: 'IDS_VOICE_CHAT_OUTGOING_STATE_HINT'}],
													_maxWidth: 250, _isInBattle: _isInBattle} : null"/>
		<block>
			<bind name="transition" value="_isSpeaking; 0.15; {alpha: 0.6}; {alpha: 1}"/>
			<block className="icon_voice_chat" type="native"/>
		</block>
	</block>
	<block className="ScenarioResultSection">
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="dispatch" value="'addedToStage'; startShow ? null : 'showEv'; {}; false; 0.17"/>
		<bind name="catch" value="'showEv'; {startShow: true}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'RealScenarioResultSection'; startShow ? _data : null"/>
		</block>
		<block type="text">
			<bind name="appear" value="startShow ? 'nullEvent' : 'addedToStage'; 0.15; 0.02; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="appear" value="'statsLoaded'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
	</block>
	<block className="RealScenarioResultSection">
		<bind name="dispatch" value="'addedToStage'; loaded ? 'showFast' : null; {}; false"/>
		<bind name="dispatch" value="'addedToStage'; loaded ? null : 'statsLoaded'; {}; false; 0"/>
		<bind name="catch" value="'statsLoaded'; {loaded: true}"/>
		<bind name="appear" value="'showFast'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="appear" value="'statsLoaded'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<height value="720:630,1080:738ah"/>
			<alpha value="0"/>
		</style>
		<styleClass value="$MiddleAligned"/>
	</block>
	<block className="TempTestTask">
		<style>
			<width value="100%"/>
		</style>
	</block>
	<css name="$TextMouseDisable">
		<mouseChildren value="false"/>
		<selectable value="false"/>
		<mouseEnabled value="false"/>
	</css>
	<css name="$MouseEnable">
		<hitTest value="true"/>
		<mouseChildren value="true"/>
		<mouseEnabled value="true"/>
	</css>
	<css name="$FontFamilyDefault">
		<fontFamily value="$WWSDefaultFont"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$FontFamilyDefaultBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$FontFamilyDefaultBoldTabs">
		<fontFamily value="$WWSDefaultFontBold"/>
		<dropShadowFilter value="0 90 0x000000 1 2 2 1"/>
	</css>
	<css name="$Bold">
		<fontFamily value="$WWSDefaultFontBold"/>
	</css>
	<css name="$FontColorDefault">
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$FontColorGrey">
		<textColor value="0xDDDDDD"/>
	</css>
	<css name="$FontColorStrongGrey">
		<textColor value="0x636363"/>
	</css>
	<css name="$FontColorWhite">
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$FontColorBlueish">
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$FontColorStrongBlueish">
		<textColor value="0x758b8b"/>
	</css>
	<css name="$FontColorDarkBlueish">
		<textColor value="0x2B393A"/>
	</css>
	<css name="$FontColorSpecialButton">
		<textColor value="0xFFE8D3"/>
	</css>
	<css name="$FontColorTurquoise">
		<textColor value="0x00cccc"/>
	</css>
	<css name="$FontColorBuoyancy">
		<textColor value="0x13C9F7"/>
	</css>
	<css name="$FontColorHealth">
		<textColor value="0x4ce8aa"/>
	</css>
	<css name="$FontColorGolden">
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$FontColorGold">
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$FontColorFreeExp">
		<textColor value="0xCCFF99"/>
	</css>
	<css name="$FontColorExp">
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$FontColorUnready">
		<textColor value="0xFF9933"/>
	</css>
	<css name="$FontColorAlmostBlack">
		<textColor value="0x08222a"/>
	</css>
	<css name="$FontColorTeamkiller">
		<textColor value="0xFF96CA"/>
	</css>
	<css name="$FontColorTTK">
		<textColor value="0xc8751c"/>
	</css>
	<css name="$FontColorParty">
		<textColor value="0x00cccc"/>
	</css>
	<css name="$FontColorDefaultButtonUp">
		<textColor value="0xc7e2e2"/>
	</css>
	<css name="$FontColorTabButtonDown">
		<textColor value="0x999999"/>
	</css>
	<css name="$FontColorTabButtonSelectedUp">
		<textColor value="0xAABFBF"/>
	</css>
	<css name="$FontColorComparePositive">
		<textColor value="0x4CE8AA"/>
	</css>
	<css name="$FontColorCompareNegative">
		<textColor value="0xFF6600"/>
	</css>
	<css name="$FontColorMercenaries">
		<textColor value="0x4ce8aa"/>
	</css>
	<css name="$FontSizeThumbelina">
		<fontSize value="7"/>
	</css>
	<css name="$FontSizeNano">
		<fontSize value="11"/>
	</css>
	<css name="$FontSizeSmall">
		<fontSize value="13"/>
	</css>
	<css name="$FontSizeDefault">
		<fontSize value="15"/>
	</css>
	<css name="$FontSizeLarge">
		<fontSize value="17"/>
	</css>
	<css name="$FontSizeHeader6">
		<fontSize value="19"/>
	</css>
	<css name="$FontSizeHeader5">
		<fontSize value="21"/>
	</css>
	<css name="$FontSizeHeader4">
		<fontSize value="23"/>
	</css>
	<css name="$FontSizeHeader3">
		<fontSize value="25"/>
	</css>
	<css name="$FontSizeHeader2">
		<fontSize value="30"/>
	</css>
	<css name="$FontSizeHeader1">
		<fontSize value="36"/>
	</css>
	<css name="$FontAccentSize2">
		<fontSize value="50"/>
	</css>
	<css name="$FontAccentSize1">
		<fontSize value="60"/>
	</css>
	<css name="$LetterSpacingSmall">
		<letterSpacing value="0"/>
	</css>
	<css name="$InvertedTextEffect">
		<dropShadowFilter value="0 90 0xffffff 1.0 3.0 3.0 0.3"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$FontGlowFilterBright">
		<dropShadowFilter value="1 90 0xffffff 0.3 5.0 3.0 0.9 2"/>
	</css>
	<css name="$BlockGlowFilterBright">
		<dropShadowFilter value="1 90 0xffffff 0.3 4.0 3.0 0.2 2"/>
	</css>
	<css name="$GlowDisabler">
		<dropShadowFilter value="0 0 0x000000 0 0 0 0 0"/>
	</css>
	<css name="$DropShadowDisabler">
		<dropShadowFilter value="0 0 0x000000 0 0 0 0 0"/>
	</css>
	<css name="$FontDropShadowFilter1">
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
	</css>
	<css name="$FontDropShadowWhite">
		<dropShadowFilter value="0 90 0xffffff 1.0 3.0 3.0 0.3"/>
	</css>
	<css name="$BlockDropShadowTabText">
		<dropShadowFilter value="0 90 0x000000 1 2 2 1"/>
	</css>
	<css name="$ComplaintMenuListItemBattleMargins">
		<marginLeft value="2px"/>
		<marginRight value="2px"/>
	</css>
	<css name="$ComplaintMenuListItemPostbattleMargins">
		<marginLeft value="1px"/>
		<marginRight value="1px"/>
	</css>
	<block className="UIListPlayerContextMenu">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'dynamicDivisionsData'; 'id'; _selfPlayer.divisionId; 'selfPlayerDivisionData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; _player.name; 'playerInvitationData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'evaluationLimits'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
		<bind name="primaryEntityDH" value="'entityAccountBattle'; CC.avatar; _player.id"/>
		<bind name="watchDH" value="'entityAccountBattleDbId'; [];  entityAccountBattle.accountSimple.dbId"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId ? _playerDbId : entityAccountBattleDbId"/>
		<bind name="watchDH" value="'isSuspended'; ['playerEntity.accountSimple.evSuspendedChanged']; playerEntity.accountSimple.suspended"/>
		<bind name="watchDH" value="'isPlayerMessagesMuted'; ['playerEntity.avatar.evMuteChanged']; playerEntity.avatar.mute"/>
		<bind name="watchDH" value="'isBotAvatar'; []; playerEntity.avatar.isBot"/>
		<bind name="watchDH" value="'accountDbId'; [];  playerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['playerEntity.elementInGroups.evGroupsChanged']; playerEntity.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['playerEntity.contact.evIsIgnoredChanged']; !!playerEntity.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['playerEntity.elementInGroups.evCanAddGroupEntitiesChanged', 'dataHub.chat.ref.chat.evRosterChanged']; (playerEntity.elementInGroups) ? playerEntity.elementInGroups.canAddGroupEntitiesId : chat.canAddGroupEntitiesId"/>
		<bind name="watchDH" value="'playerEntityId'; []; playerEntity.id"/>
		<bind name="watch" value="'isInSameDivisionOnStart'; _isInPBS ? _isInSameDivisionOnStart : _player.isInSameDivisionOnStart"/>
		<bind name="watch" value="'isBot'; _isInPBS ? _isBot  : isBotAvatar"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="timeFormat" value="(_player.inviteCooldown - serverTime); 'mm:ss'; 'cooldownTimeText'"/>
		<bind name="watch" value="'isEnemyPlayer'; (_player.relation == 2)"/>
		<bind name="watch" value="'isFreePlacesInDivision'; ((selfPlayerDivisionData[0].staff.length + selfPlayerDivisionData[0].inPortParticipantsCount) &lt; 3)"/>
		<bind name="watch" value="'isBattletypeWithDynamicDivisions';	(battleType == BattleTypes.COOPERATIVE_BATTLE)	||
														(battleType == BattleTypes.RANDOM_BATTLE)		||
														(battleType == BattleTypes.EVENT_BATTLE)"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled'; isBattletypeWithDynamicDivisions &amp;&amp; slimClientData.isFull"/>
		<bind name="watch" value="'invitationDisableReason'; (_player.isLeaver)						? 'IDS_INVITATION_DISABLE_REASON_PLAYER_IS_OUT_OF_BATTLE':
											(_player.division != 0)					? 'IDS_INVITATION_DISABLE_REASON_ALREADY_IN_DIVISION' :
											!(_selfPlayer.isAlive)					? 'IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED' :
											!(_player.isAlive)						? 'IDS_INVITATION_DISABLE_REASON_DESTROYED' :
											!(isFreePlacesInDivision)				? 'IDS_INVITATION_DISABLE_REASON_NO_FREE_PLACES' :
											!(_player.invitationsEnabled)			? 'IDS_INVITATION_DISABLE_REASON_INVITATIONS_DISABLED' :
											(_player.inviteCooldown &gt; serverTime)	? (tr('IDS_WAIT_TIMEOUT_TO_INVITE_TO_DIVISION')+' '+cooldownTimeText)
																					: 'no_reason'"/>
		<bind name="watch" value="'isDivisionControlsEnable';	isDynamicDivisionsEnabled &amp;&amp;
												(_isInPBS != true) &amp;&amp;
												!(isEnemyPlayer) &amp;&amp;
												!(isBot) &amp;&amp;
												((_selfPlayer.isDivisionCommander) || (_selfPlayer.divisionId == 0)) &amp;&amp;
												!(isSuspended)"/>
		<bind name="watch" value="'canBeInChat';	((_battleType == BattleTypes.CLAN_BATTLE) &amp;&amp; VoiceChatState.enabled &amp;&amp; !(isEnemyPlayer)) ||
								((_player.isInSameDivision &amp;&amp; VoiceChatState.enabled) &amp;&amp; ((_battleType == BattleTypes.RANDOM_BATTLE) ||
																						 (_battleType == BattleTypes.COOPERATIVE_BATTLE) ||
																						 (_battleType == BattleTypes.PVE_BATTLE)))"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {_isInBattle: _isBattleStats}"/>
		</block>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="class" value="_isBattleStats ? '$ComplaintMenuListItemBattleMargins' : '$ComplaintMenuListItemPostbattleMargins'"/>
			<block>
				<bind name="visible" value="isDivisionControlsEnable"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="_selfPlayer.isDivisionCommander &amp;&amp; _player.isInSameDivision"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="style" value="'alpha'; (_selfPlayer.isAlive) ? 1 : 0.5"/>
					<block>
						<styleClass value="$ContextMenuListItem"/>
						<block className="MenuItem">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_APPOINT_PLAYER_TO_COMMANDER'"/>
							</block>
						</block>
						<bind name="action" value="'click'; 'changeCommander'; {playerId: _player.id, teamId:playerEntity.preBattlePlayerSimple.teamId}"/>
					</block>
					<block>
						<styleClass value="$ContextMenuListItem"/>
						<block className="MenuItem">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'"/>
							</block>
						</block>
						<bind name="action" value="'click'; 'kickPlayerFromDivision'; {playerId: _player.id}"/>
					</block>
					<block>
						<bind name="visible" value="!(_selfPlayer.isAlive)"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundColor value="0x0100000"/>
						</style>
						<bind name="tooltip" value="'SimpleWarningTooltip'; !(_selfPlayer.isAlive) ? {_text: tr('IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED'), _isInBattle: _isBattleStats} : null"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!(_player.isInSameDivision)"/>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<bind name="visible" value="(!(_player.isInSameDivision) &amp;&amp; !(playerInvitationData))"/>
						<bind name="style" value="'alpha'; (invitationDisableReason == 'no_reason') ? 1 : 0.5"/>
						<bind name="tooltip" value="'SimpleWarningTooltip'; (invitationDisableReason != 'no_reason') ? {_text: invitationDisableReason, _isInBattle: _isBattleStats} : null"/>
						<style>
							<backgroundColor value="0x01000000"/>
						</style>
						<styleClass value="$ContextMenuListItem"/>
						<block>
							<styleClass value="$Fullsize"/>
							<bind name="style" value="'hitTest';  (invitationDisableReason == 'no_reason') ? true : false"/>
							<block className="MenuItem">
								<styleClass value="$Fullsize"/>
								<block className="dock_submenu_item" type="native">
									<styleClass value="$FullsizeAbsolute"/>
								</block>
								<block type="text">
									<styleClass value="$TextDefault"/>
									<styleClass value="$MiddleVAligned"/>
									<styleClass value="$ContextMenuListItemContent"/>
									<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
								</block>
							</block>
						</block>
						<bind name="action" value="'click'; (invitationDisableReason == 'no_reason') ? 'inviteToDivision' : ''; {playerId: _player.id, playerName: _player.name, inviteType: InviteType.COMMON}"/>
					</block>
					<block>
						<bind name="visible" value="!!(playerInvitationData)"/>
						<styleClass value="$ContextMenuListItem"/>
						<block className="MenuItem">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_RECALL_INVITATION'"/>
							</block>
						</block>
						<bind name="action" value="'click'; 'revokeInvitationToDivision'; {id: playerInvitationData.id}"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="3px"/>
						<marginBottom value="2px"/>
						<marginLeft value="-2px"/>
						<marginRight value="-2px"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="!(_isBattleLoading) &amp;&amp; !(isBot) &amp;&amp; !(isSuspended)"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="name" value="'id_complain'"/>
					<bind name="instance" value="'PlayerMenuItemExpanded'; 	{ 	_text: 'IDS_COMPLAIN', _battleType: _battleType, _isInBattle: _isBattleStats,
																_wantPraisePlayer: false, _evaluationLimitsComplain: evaluationLimits.complain,
																_player: _player, _isInPBS: _isInPBS, _playerDbId: _playerDbId ? _playerDbId : entityAccountBattleDbId, _arenaId: _arenaId, _isInSameDivisionOnStart: isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable,
																_sortedBy: isEnemyPlayer ? 'team.enemy.complaint.sorted' : 'team.ally.complaint.sorted', 
															 }"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="name" value="'id_praise'"/>
					<bind name="instance" value="'PlayerMenuItemExpanded'; 	{ 	_text: 'IDS_PRAISE', _battleType: _battleType, _isInBattle: _isBattleStats, 
																_wantPraisePlayer: true, _evaluationLimitsPraise: evaluationLimits.praise,
																_player: _player, _isInPBS: _isInPBS, _playerDbId: _playerDbId ? _playerDbId : entityAccountBattleDbId, _arenaId: _arenaId, _isInSameDivisionOnStart: isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable,
																_sortedBy: isEnemyPlayer ? 'team.enemy.praise.sorted' : 'team.ally.praise.sorted'
															 }"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(_isBattleStats == true) &amp;&amp; !(isBot) &amp;&amp; !(isSuspended) &amp;&amp; (!isIgnored)"/>
				<bind name="watch" value="'playerMuteIdses'; isPlayerMessagesMuted 	? 'IDS_UNMUTE_PLAYER_CHAT'
																	: 'IDS_MUTE_PLAYER_CHAT'"/>
				<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [{_paragraphText: playerMuteIdses + '_HINT'}],
														_maxWidth: 300,
														_isInBattle: _isBattleStats}"/>
				<bind name="name" value="'id_mute'"/>
				<style>
					<width value="100%"/>
				</style>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="action" value="'buttonClick'; isPlayerMessagesMuted ? 'unmuteUser' : 'muteUser'; {id: _player.id}"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginLeft value="7px"/>
						<marginBottom value="3px"/>
						<marginRight value="4px"/>
						<leading value="-3"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="text" value="playerMuteIdses"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="(canBeInChat &amp;&amp; !(_isInPBS) &amp;&amp; !(isBot) &amp;&amp; !(isSuspended))"/>
				<bind name="name" value="'id_mute_voice'"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="watch" value="'voiceChatMenuText'; 	!(_player.isInVoiceChat) 	? 'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT' :
												_player.isMuted				? 'IDS_UNMUTE_PLAYER_VOICE_CHAT'
																			: 'IDS_MUTE_PLAYER_VOICE_CHAT'"/>
				<bind name="watch" value="'state'; 	!(_player.isInVoiceChat)	? 'disabled' :
									_player.isMuted				? 'muted'
																: 'speak'"/>
				<bind name="style" value="'alpha'; !(_player.isInVoiceChat)	? 0.9 : 1"/>
				<bind name="style" value="'hitTest'; !(_player.isInVoiceChat)	? false : true"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="action" value="'buttonClick'; 'toggleVoice'; {playerName: _player.pureName, nickName: _player.name}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="7px"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<style>
							<width value="100%"/>
							<marginBottom value="3px"/>
							<hitTest value="false"/>
							<marginRight value="4px"/>
							<leading value="-3"/>
						</style>
						<styleClass value="$TextDefault"/>
						<bind name="class" value="	!(_player.isInVoiceChat)	? '$FontColorUnready' :
									_player.isMuted				? '$FontColorUnready'
																: '$FontColorWhite'"/>
						<bind name="text" value="voiceChatMenuText"/>
					</block>
					<block className="icon_voice_chat_small" type="native">
						<style>
							<marginTop value="6px"/>
							<marginRight value="4px"/>
						</style>
						<bind name="gotoAndStop!" value="state"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<bind name="visible" value="!(isSuspended) &amp;&amp; !(isBot) &amp;&amp; ((canBeInChat &amp;&amp; _isBattleLoading) || !_isBattleLoading)"/>
				<style>
					<width value="100%"/>
					<marginTop value="3px"/>
					<marginBottom value="2px"/>
					<marginLeft value="-2px"/>
					<marginRight value="-2px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<bind name="dataRefDH" value="'contactsGroups'; 'dataHub.chat.ref.chat.contactsGroups.ref.items'"/>
			<bind name="dataRefDH" value="'chat'; 'dataHub.chat.ref.chat'"/>
			<bind name="var" value="{isChatServerAvailable: false}"/>
			<bind name="watchDH" value="'isChatServerAvailable'; ['chat.evConnected', 'chat.evDisConnected']; chat.isConnected"/>
			<block>
				<bind name="visible" value="!(isBot) &amp;&amp; !(isSuspended)"/>
				<style>
					<backgroundColor value="0x01000000"/>
					<width value="100%"/>
				</style>
				<bind name="style" value="'alpha'; isChatServerAvailable ? 1 : 0.5"/>
				<bind name="tooltip" value="'SimpleWarningTooltip'; !(isChatServerAvailable) ? {_text: tr('IDS_CONTACT_DISABLE_REASON_SERVER_CHAT_DISABLED'), _isInBattle: _isBattleStats} : null"/>
				<block>
					<styleClass value="$ContextMenuListItem"/>
					<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !(isIgnored))"/>
					<bind name="style" value="'hitTest';  isChatServerAvailable ? true : false"/>
					<block className="MenuItem">
						<styleClass value="$Fullsize"/>
						<block className="dock_submenu_item" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$ContextMenuListItemContent"/>
							<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
						</block>
					</block>
					<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
				</block>
				<block>
					<styleClass value="$ContextMenuListItem"/>
					<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !(isIgnored))"/>
					<bind name="style" value="'hitTest';  isChatServerAvailable ? true : false"/>
					<block className="MenuItemWithAction">
						<styleClass value="$Fullsize"/>
						<block className="dock_submenu_item" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$ContextMenuListItemContent"/>
							<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
						</block>
						<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroups.length &gt; 1))"/>
					<bind name="style" value="'hitTest'; isChatServerAvailable ? true : false"/>
					<styleClass value="$ContextMenuListItem"/>
					<block className="MenuItem">
						<styleClass value="$Fullsize"/>
						<block className="dock_submenu_item" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$ContextMenuListItemContent"/>
							<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
						</block>
					</block>
					<block className="button_expand_h" type="native">
						<style>
							<position value="absolute"/>
							<right value="6px"/>
						</style>
						<styleClass value="$MouseDisable"/>
						<styleClass value="$MiddleVAligned"/>
					</block>
					<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: playerEntityId, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: false, _isInBattle: _isBattleStats}; 7"/>
				</block>
				<block>
					<bind name="watch" value="'ignoreIdses'; (!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
					<bind name="tooltip" value="'MouseInstructionTooltip'; isChatServerAvailable ? {	_multiParagraphArray: [{_paragraphText: ignoreIdses + '_HINT'}],
																					_maxWidth: 300,
																					_isInBattle: _isBattleStats}
																				: null"/>
					<styleClass value="$ContextMenuListItem"/>
					<bind name="style" value="'hitTest'; isChatServerAvailable ? true : false"/>
					<block className="MenuItem">
						<styleClass value="$Fullsize"/>
						<block className="dock_submenu_item" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$ContextMenuListItemContent"/>
							<bind name="text" value="ignoreIdses"/>
						</block>
					</block>
					<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
				</block>
				<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
				<bind name="watchDH" value="'clanId'; 	['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
				<bind name="watchDH" value="'role'; 		['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
				<bind name="watchDH" value="'isFull'; 	['clanEntity.clanExtended.evIsFullChanged']; clanEntity.clanExtended.isFull"/>
				<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
				<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
				<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
				<bind name="watch" value="'haveOwnClan'; 			clanEntity != null"/>
				<bind name="watch" value="'canInvite'; 				(role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander')"/>
				<bind name="watch" value="'alreadyInYourClan'; 		(playerEntity.clanman != null) &amp;&amp; (playerEntity.clanman.clanId == selfPlayerEntity.clanman.clanId)"/>
				<bind name="watch" value="'alreadyInAnotherClan'; 	(playerEntity.clanman != null) &amp;&amp; (playerEntity.clanman.clanId != selfPlayerEntity.clanman.clanId)"/>
				<bind name="watch" value="'noFreePlacesInClan'; 		isFull"/>
				<block>
					<bind name="visible" value="(haveOwnClan &amp;&amp; canInvite &amp;&amp; !alreadyInYourClan)"/>
					<bind name="action" value="'click'; 'ClanProxy.sendInvite'; { playerDBID: accountDbId }"/>
					<bind name="style" value="'alpha'; (alreadyInAnotherClan || noFreePlacesInClan) ? 0.5 : 1"/>
					<bind name="tooltip" value="'SimpleWarningTooltip'; (alreadyInAnotherClan || noFreePlacesInClan) ? { _text: 	noFreePlacesInClan 		? 'IDS_CLAN_INVITATION_DENY_REASON_CLAN_IS_FULL':
																												alreadyInAnotherClan 	? 'IDS_CLAN_INVITATION_DENY_REASON_PLAYER_ALREADY_IN_CLAN'
																																		: '', 
																										_isInBattle: _isBattleStats} 
																									: null"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<styleClass value="$ContextMenuListItem"/>
					<block>
						<styleClass value="$Fullsize"/>
						<block className="MenuItem">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_INVITATION_TO_CLAN'"/>
							</block>
						</block>
						<bind name="style" value="'hitTest'; (alreadyInAnotherClan || noFreePlacesInClan) ? false : true"/>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="id_profile"/>
					</params>
					<bind name="visible" value="realmConstants.showProfileInBrowser &amp;&amp; _isInPBS"/>
					<styleClass value="$ContextMenuListItem"/>
					<block className="MenuItem">
						<styleClass value="$Fullsize"/>
						<block className="dock_submenu_item" type="native">
							<styleClass value="$FullsizeAbsolute"/>
						</block>
						<block type="text">
							<styleClass value="$TextDefault"/>
							<styleClass value="$MiddleVAligned"/>
							<styleClass value="$ContextMenuListItemContent"/>
							<bind name="text" value="'IDS_PROFILE'"/>
						</block>
					</block>
					<bind name="request" value="'click'; 'showPlayerStats'; { playerId: accountDbId + '',  url: 'playerStats' }"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(isBot == true) || isSuspended"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginLeft value="7px"/>
					<marginBottom value="3px"/>
					<hitTest value="false"/>
					<marginRight value="4px"/>
					<leading value="-3"/>
					<alpha value="0.7"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="'IDS_NO_AVAILABLE_ACTIONS'"/>
			</block>
		</block>
	</block>
	<block className="PlayerMenuItemExpanded">
		<styleClass value="$ContextMenuListItem"/>
		<block className="MenuItem">
			<styleClass value="$Fullsize"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="text" value="_text"/>
			</block>
		</block>
		<block className="button_expand_h" type="native">
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MouseDisable"/>
		</block>
		<bind name="tooltip" value="'PlayerSubMenu'; {	_battleType: _battleType, _isInBattle: _isInBattle, _sortedBy: _sortedBy, _player: _player,
										_isInPBS: _isInPBS, _playerDbId: _playerDbId, _arenaId: _arenaId, _wantPraisePlayer: _wantPraisePlayer,
										_evaluationLimitsComplain: _evaluationLimitsComplain, _evaluationLimitsPraise: _evaluationLimitsPraise,
										_isInSameDivisionOnStart: _isInSameDivisionOnStart, _complaintsAvailable: _complaintsAvailable};
										TooltipBehaviour.submenu"/>
	</block>
	<block className="PlayerSubMenu">
		<bind name="watch" value="'isEvaluationDisabledReason';	(_battleType == BattleTypes.CLAN_BATTLE) 		? _wantPraisePlayer		? 'IDS_PRAISE_DISABLED_FOR_CLAN_BATTLES' 
																														: 'IDS_COMPLAIN_DISABLED_FOR_CLAN_BATTLES' 
																								: 
												(_battleType == BattleTypes.TRAINING_BATTLE)							? 'IDS_CUSTOM_ROOM' :
												(_evaluationLimitsComplain == 0) || (_evaluationLimitsPraise == 0)		? 'IDS_DAY_LIMIT_IS_OFF' :
												_isInSameDivisionOnStart						? _wantPraisePlayer 	? 'IDS_PRAISE_DISABLED_FOR_DIVISION_MEMBERS'
																														: 'IDS_COMPLAIN_DISABLED_FOR_DIVISION_MEMBERS' :
												!(_complaintsAvailable)							? _wantPraisePlayer		? 'IDS_PRAISE_TIMEOUT'
																														: 'IDS_COMPLAIN_TIMEOUT'
																								: false"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="270px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<bind name="collectionRepeatDH" value="CC.playerEvaluationInfo; 'PlayerSubMenuItem'; _sortedBy; 
									{ 	_isEvaluationDisabledReason: isEvaluationDisabledReason, _isInPBS: _isInPBS,
									 	_playerDbId: _playerDbId, _arenaId: _arenaId, _player: _player}"/>
		</block>
		<block>
			<bind name="instance" value="'WarningsAndDisableReasons'; { 	_evaluationLimitsComplain: _evaluationLimitsComplain, 
														_evaluationLimitsPraise: _evaluationLimitsPraise, 
														_isEvaluationDisabledReason: isEvaluationDisabledReason }"/>
		</block>
	</block>
	<block className="PlayerSubMenuItem">
		<bind name="dataRefDH" value="'infoEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'evaluationType'; 	[]; infoEntity.playerEvaluationInfo.evaluationType"/>
		<bind name="watchDH" value="'evaluationTopic'; 	[]; infoEntity.playerEvaluationInfo.evaluationTopic"/>
		<bind name="watchDH" value="'messageIDS'; 		[]; infoEntity.playerEvaluationInfo.messageIDS"/>
		<style>
			<width value="270px"/>
		</style>
		<styleClass value="$ContextMenuListItem"/>
		<bind name="name" value="'id_' + messageIDS"/>
		<bind name="style" value="'alpha'; _isEvaluationDisabledReason ? 0.5 : 1"/>
		<bind name="action" value="'buttonClick'; 'sendEvaluation'; _isInPBS ? {type: evaluationType, topic: evaluationTopic, accountDBID: _playerDbId, arenaId: _arenaId}
															: {type: evaluationType, topic: evaluationTopic, nickname: _player.name, arenaId: _arenaId}"/>
		<block className="dock_submenu_item" type="native">
			<bind name="style" value="'hitTest'; _isEvaluationDisabledReason ? false : true"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<maxWidth value="252"/>
				<marginLeft value="6px"/>
			</style>
			<bind name="text" value="messageIDS"/>
		</block>
	</block>
	<block className="WarningsAndDisableReasons">
		<bind name="watch" value="'isEvaluationDisabledReason'; 	_isEvaluationDisabledReason "/>
		<bind name="watch" value="'disableReasonComplain'; 		(_evaluationLimitsComplain &gt; 0) &amp;&amp; !(_isEvaluationDisabledReason)"/>
		<bind name="watch" value="'disableReasonPraise'; 		(_evaluationLimitsPraise &gt; 0) &amp;&amp; !(_isEvaluationDisabledReason) "/>
		<bind name="watch" value="'warningTextClass'; 	(disableReasonComplain || disableReasonPraise) 	? '$FontColorUnready' : 
										isEvaluationDisabledReason 						? '$FontColorCompareNegative'
																						: '$None'"/>
		<bind name="watch" value="'warningText'; 		disableReasonComplain 							? (tr('IDS_DAY_LIMIT') + ' ' + _evaluationLimitsComplain) :
										disableReasonPraise 							? (tr('IDS_DAY_LIMIT') + ' ' + _evaluationLimitsPraise) :
										isEvaluationDisabledReason 						? isEvaluationDisabledReason
																						: ''"/>
		<style>
			<marginLeft value="9px"/>
			<marginBottom value="6px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="disableReasonComplain || disableReasonPraise"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="4px"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="isEvaluationDisabledReason"/>
			<block className="icon_warning_red" type="native">
				<style>
					<marginTop value="4px"/>
				</style>
			</block>
		</block>
		<block type="text">
			<params>
				<param name="name" value="warningsAndDisableReasons"/>
			</params>
			<style>
				<maxWidth value="240"/>
				<marginLeft value="1px"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="warningTextClass"/>
			<bind name="text" value="warningText"/>
		</block>
	</block>
	<block className="UIListVoiceTextChatIcons">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.avatar; _playerId"/>
		<bind name="watchDH" value="'pureName';			[]; playerEntity.avatar.pureName"/>
		<bind name="watchDH" value="'isPlayerMessagesMuted'; ['playerEntity.avatar.evMuteChanged']; playerEntity.avatar.mute"/>
		<bind name="watchDH" value="'relation'; 			['playerEntity.relation.evChanged']; playerEntity.relation.value"/>
		<bind name="watch" value="'isSelf'; (relation == 0)"/>
		<bind name="watchDH" value="'isIgnored';['playerEntity.contact.evIsIgnoredChanged']; !!playerEntity.contact.isIgnored"/>
		<bind name="watch" value="'playerCanBeInChat';	((_battleType == BattleTypes.CLAN_BATTLE) &amp;&amp; VoiceChatState.enabled) ||
										((_isInSameDivision &amp;&amp; VoiceChatState.enabled) &amp;&amp;	((_battleType == BattleTypes.RANDOM_BATTLE) ||
																							(_battleType == BattleTypes.COOPERATIVE_BATTLE) ||
																							(_battleType == BattleTypes.PVE_BATTLE)))"/>
		<bind name="watch" value="'selfCanBeInChat';	((_battleType == BattleTypes.CLAN_BATTLE) &amp;&amp; isSelf) ||
									((isSelf &amp;&amp; _selfPlayerDivisionId) &amp;&amp;  ((_battleType == BattleTypes.RANDOM_BATTLE) ||
																			(_battleType == BattleTypes.COOPERATIVE_BATTLE) ||
																			(_battleType == BattleTypes.PVE_BATTLE)))"/>
		<bind name="watch" value="'canBeInChat'; (playerCanBeInChat || selfCanBeInChat)"/>
		<bind name="name" value="isPlayerMessagesMuted ? 'mute_' + pureName
								: 'not_mute_' + pureName"/>
		<block>
			<bind name="visible" value="canBeInChat"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="canBeInChat &amp;&amp; (isPlayerMessagesMuted || isIgnored) &amp;&amp; (_isSpeaking || _isVoiceChatMuted || !(_isInVoiceChat)); 0.15; {alpha: 1, top: 9}; {alpha: 1, top: 3}; {alpha: 1, top: 9}; 1"/>
			<bind name="watch" value="'state';	!(_isInVoiceChat)	? 'disabled' :
								_isVoiceChatMuted	? 'muted' :
								_isSpeaking			? 'speak'
													: null"/>
			<block>
				<bind name="transition" value="state; 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1"/>
				<block className="icon_voice_chat_small" type="native">
					<bind name="gotoAndStop!" value="state"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="transition" value="canBeInChat &amp;&amp; (isPlayerMessagesMuted || isIgnored) &amp;&amp; (_isSpeaking || _isVoiceChatMuted || !(_isInVoiceChat)); 0.15; {alpha: 1, top: 8}; {alpha: 1, top: 14}; {alpha: 1, top: 8}; 1"/>
			<block>
				<bind name="transition" value="(isPlayerMessagesMuted || isIgnored); 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1"/>
				<block className="icon_text_chat_small" type="native">
					<bind name="gotoAndStop!" value="'muted')"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ClubInfoTooltip">
		<bind name="entityDH" value="'entityClub'; _clubEntityId"/>
		<bind name="watchDH" value="'name';['entityClub.club.evNameChanged']; entityClub.club.name"/>
		<bind name="watchDH" value="'league';['entityClub.club.evRatingChanged']; entityClub.club.league"/>
		<bind name="watchDH" value="'creationTimeStamp';['entityClub.club.evRatingChanged']; entityClub.club.creatingTime"/>
		<bind name="watchDH" value="'battlesCount';['entityClub.club.evRatingChanged']; entityClub.club.battlesCount"/>
		<bind name="watchDH" value="'winCount';['entityClub.club.evRatingChanged']; entityClub.club.winCount"/>
		<bind name="watchDH" value="'drawCount';['entityClub.club.evRatingChanged']; entityClub.club.drawCount"/>
		<bind name="watchDH" value="'loseCount';['entityClub.club.evRatingChanged']; entityClub.club.loseCount"/>
		<bind name="watchDH" value="'lastBattleTimeStamp';['entityClub.club.evRatingChanged']; entityClub.club.lastBattleTime"/>
		<bind name="watchDH" value="'winRate';['entityClub.club.evRatingChanged']; entityClub.club.winRate"/>
		<bind name="watch" value="'drawRate'; drawCount / battlesCount * 100"/>
		<bind name="watch" value="'loseRate'; loseCount / battlesCount * 100"/>
		<bind name="watch" value="'stats'; [	{label: 'IDS_CLUB_BATTLES_COUNT', rate: 'no_rate',	count: battlesCount},
							{label: 'IDS_VICTORIES'			, rate: winRate,	count: winCount},
							{label: 'IDS_DRAWS'				, rate: drawRate,	count: drawCount},
							{label: 'IDS_DEFEATS'			, rate: loseRate,	count: loseCount}]"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextAccentBold"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="name"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<width value="100%"/>
					<alpha value="0.7"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="text" value="tr('IDS_LEAGUE_'+league)"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="tr('IDS_CLUB_CREATOR')+tr('IDS_COLON')"/>
				</block>
				<block>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="instance" value="'PlayerContactItem'; {_entityAccountId: entityClub.club.creatorEntityId, _isOfflineAlpha: true}"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="timeFormat" value="creationTimeStamp; 'dd.MM.yyyy'; 'creationTime'; false"/>
				<bind name="text" value="tr('IDS_CREATION_DATE')+tr('IDS_COLON') + ' ' + creationTime"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="battlesCount &gt; 0"/>
			<bind name="timeFormat" value="lastBattleTimeStamp; 'dd.MM.yyyy'; 'lastBattleDate'; false"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="tr('IDS_LAST_BATTLE')+tr('IDS_COLON') + ' ' + lastBattleDate"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="repeat" value="stats; 'ClubTooltipStatRow'"/>
			</block>
		</block>
	</block>
	<block className="ClubTooltipStatRow">
		<style>
			<width value="100%"/>
		</style>
		<bind name="style" value="'marginBottom'; (rate == 'no_rate') ? '4px' : '0px'"/>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="label"/>
		</block>
		<block type="text">
			<bind name="visible" value="rate != 'no_rate'"/>
			<style>
				<alpha value="0.7"/>
				<position value="absolute"/>
				<right value="70"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="format((rate ? rate : 0), 0) +'%'"/>
		</block>
		<block type="text">
			<styleClass value="$AlignRight"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="count"/>
		</block>
	</block>
	<block className="ClubLeagueIconSmall">
		<style>
			<width value="60px"/>
			<height value="60px"/>
		</style>
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'symbol:club_icon_league_' + ((_league != null)	? ((_league &gt; 2)	? '2'
																										: _league)
																					: '-1')"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<bind name="child" value="_state ? _state : 'Rating'; { _rating: _rating, _isPartyMember: _isPartyMember, _isCommander: _isCommander}; {	Rating: 'ClubIconRatingSmall',
																																	InBattle: 'ClubIconInBattleSmall',
																																	Party: 'ClubIconPartySmall'}"/>
		</block>
	</block>
	<block className="ClubIconRatingSmall">
		<block type="text">
			<style>
				<marginBottom value="1px"/>
			</style>
			<styleClass value="$TextDefaultBold"/>
			<bind name="text" value="format(_rating, -1)"/>
		</block>
	</block>
	<block className="ClubIconInBattleSmall">
		<block>
			<style>
				<width value="32px"/>
				<height value="29px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _isPartyMember	? 'symbol:icon_club_status_in_battle_member_small'
														: 'symbol:icon_club_status_in_battle_small'"/>
		</block>
	</block>
	<block className="ClubIconPartySmall">
		<block>
			<style>
				<marginTop value="1px"/>
				<width value="32px"/>
				<height value="29px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _isCommander	? 'symbol:icon_club_status_party_commander_small' :
										_isPartyMember 	? 'symbol:icon_club_status_party_member_small'
														: 'symbol:icon_club_status_party_small'"/>
		</block>
	</block>
	<block className="ClubLeagueIconSmallSimple">
		<bind name="tooltip" value="'ClubInfoTooltipSimple'; {_teamName: _teamName, _rating: _rating, _league: _league, _isInBattle: _isInBattle}"/>
		<block className="ClubLeagueIconSmall">
			<style>
				<width value="60px"/>
				<height value="60px"/>
			</style>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'symbol:club_icon_league_' + ((_league != null)	? ((_league &gt; 2)	? '2'
																										: _league)
																					: '-1')"/>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<bind name="child" value="_state ? _state : 'Rating'; { _rating: _rating, _isPartyMember: _isPartyMember, _isCommander: _isCommander}; {	Rating: 'ClubIconRatingSmall',
																																	InBattle: 'ClubIconInBattleSmall',
																																	Party: 'ClubIconPartySmall'}"/>
			</block>
		</block>
	</block>
	<block className="ClubInfoTooltipSimple">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="240px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextAccentBold"/>
				<style>
					<width value="100%"/>
					<marginTop value="-4px"/>
				</style>
				<bind name="text" value="_teamName"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="text" value="tr('IDS_RATING')+tr('IDS_COLON') + ' ' + format(_rating, -1) +', ' + tr('IDS_LEAGUE_'+ _league)"/>
			</block>
		</block>
	</block>
	<block className="ClubHeaderIcon">
		<bind name="entityDH" value="'entityClub'; _clubEntityId"/>
		<bind name="watchDH" value="'league';['entityClub.club.evRatingChanged']; entityClub.club.league"/>
		<bind name="watch" value="'curLeague';	_fakeLeague		? ((_fakeLeague &gt; 2) ? '2'
																	 : _fakeLeague) :
								league != null	? ((league &gt; 2) ? '2'
																: league)
												: '-1'"/>
		<style>
			<width value="260px"/>
			<height value="330px"/>
		</style>
		<block>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="watch" value="'clubHeaderBgrSymbol'; 'symbol:club_header_bgr_league_' + curLeague"/>
			<bind name="style" value="'backgroundImage'; clubHeaderBgrSymbol"/>
			<bind name="transition" value="_isActiveClubIcon; 0.15; {alpha: 0.65}; {alpha: 1}; {alpha: 0.65}; 0"/>
			<block>
				<bind name="name" value="'clubInfo'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="child" value="_clubIconState ? _clubIconState : 'Party'; {	_clubEntityId: _clubEntityId,
																		_animParams: _animParams,
																		_ratingValue: _ratingValue};

																	{	RatingCounter: 'ClubIconRatingCounter',
																		Rating: 'ClubIconRating',
																		InBattle: 'ClubIconInBattle',
																		Party: 'ClubIconParty'}"/>
			</block>
			<block>
				<style>
					<bottom value="102"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<bind name="appear" value="'CountPoints_0'; 0.2; 0.3; {top: 10, alpha: 0}; {top: 0, alpha: 1}; 1"/>
				<bind name="instance" value="'ClubLeagueLabel'; (curLeague != '-1') ? {	_league: (_fakeLeague	? _fakeLeague : league),
																		_state : (_leagueState ? _leagueState : 'issued')} : null"/>
			</block>
		</block>
		<block>
			<style>
				<backgroundSize value="cover"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="watch" value="'clubLeagueSymbol'; 'symbol:club_header_league_' + curLeague"/>
			<bind name="style" value="'backgroundImage'; clubLeagueSymbol"/>
		</block>
		<block>
			<bind name="visible" value="_isLeader &amp;&amp; (curLeague != '-1')"/>
			<style>
				<marginLeft value="16px"/>
				<marginTop value="26px"/>
				<position value="absolute"/>
			</style>
			<block className="icon_club_leader_big" type="native"/>
			<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [	{_paragraphText: 'IDS_YOU_ARE_CLUB_LEADER'},
																			{_paragraphText: 'IDS_CLUB_LEADER_DESCRIPTION_0'},
																			{_paragraphText: 'IDS_CLUB_LEADER_DESCRIPTION_1'},
																			{_paragraphText: 'IDS_CLUB_LEADER_DESCRIPTION_2'}],
													_marginBottom: '4px'}"/>
		</block>
	</block>
	<block className="ClubIconRating">
		<bind name="entityDH" value="'entityClub'; _clubEntityId"/>
		<bind name="watchDH" value="'lastBattleRatingDelta';['entityClub.club.evRatingChanged']; entityClub.club.lastBattleRatingDelta"/>
		<bind name="watchDH" value="'rating';['entityClub.club.evRatingChanged']; entityClub.club.rating"/>
		<bind name="watch" value="'ratingValue'; _clubEntityId ? rating : _ratingValue"/>
		<styleClass value="$Fullsize"/>
		<style>
			<marginTop value="80px"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<bind name="appear" value="'addedToStage'; 0.15; 0.3;	{scaleY: 0.5, scaleX: 0.5, ubScaleY: 0.5, ubScaleX: 0.5, alpha: 0, top: 10};
														{scaleY: 1, scaleX: 1, ubScaleY: 1, ubScaleX: 1, alpha: 1, top: 0}"/>
				<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [{_paragraphText: 'IDS_RATING_HINT_0'}, {_paragraphText: 'IDS_RATING_HINT_1'}]}"/>
				<styleClass value="$TextAccentBoldAccountLevel1"/>
				<bind name="text" value="format(ratingValue, -1)"/>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="appear" value="'addedToStage'; 0.15; 0.42; {scaleY: 0.5, alpha: 0, top: 20}; {scaleY: 1, alpha: 1, top: 0}"/>
			<style>
				<marginTop value="-8px"/>
			</style>
			<block>
				<block>
					<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [{_paragraphText: 'IDS_RATING_HINT_0'}, {_paragraphText: 'IDS_RATING_HINT_1'}]}"/>
					<block type="text">
						<styleClass value="$TextHeader"/>
						<bind name="class" value="'$Bold'"/>
						<bind name="text" value="toLowerCase(tr('IDS_RATING'))"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="(lastBattleRatingDelta &amp;&amp; (lastBattleRatingDelta != 0))"/>
					<block className="icon_value_changed" type="native">
						<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: lastBattleRatingDelta &gt; 0 ? [{_paragraphText: 'IDS_RATING_UP_LB'}]
																												: [{_paragraphText: 'IDS_RATING_DOWN_LB'}]}"/>
						<style>
							<marginTop value="11px"/>
						</style>
						<bind name="gotoAndStop!" value="lastBattleRatingDelta &gt; 0 	? 'up' 
																	: 'down'"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClubIconPartyState">
		<style>
			<width value="34px"/>
			<height value="34px"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0.3; {width: 34, height: 34, alpha: 0, top: 20};
											 {width: 68, height: 68, alpha: 1, top: 0}"/>
		<bind name="var" value="{firstChange: true}"/>
		<bind name="dispatch" value="'addedToStage'; 'changePartyStateEv'; false; 0.5"/>
		<bind name="catch" value="'changePartyStateEv'; {firstChange: false}"/>
		<bind name="watch" value="'change';  _isPartyCommander 	? 2 :
							_isPartyMember 		? 1
												: 0"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="fade" value="change==0; 0.14;	{left: 68, alpha: 0}; {left: 0, alpha: 1}; {left: -68, alpha: 0}; 0;	firstChange	? 0 :
																												change==0	? 0.57
																															: 0.5"/>
			<bind name="style" value="'backgroundImage'; 'symbol:icon_club_status_party'"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="fade" value="change==1; 0.14;	{left: 68, alpha: 0}; {left: 0, alpha: 1}; {left: -68, alpha: 0}; 0;	firstChange	? 0 :
																												change==1	? 0.57
																															: 0.5"/>
			<bind name="style" value="'backgroundImage'; 'symbol:icon_club_status_party_member'"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="fade" value="change==2; 0.14; {left: 68, alpha: 0}; {left: 0, alpha: 1}; {left: -68, alpha: 0}; 0;	firstChange	? 0 :
																											change==2	? 0.57
																														: 0.5"/>
			<bind name="style" value="'backgroundImage'; 'symbol:icon_club_status_party_commander'"/>
		</block>
	</block>
	<block className="ClubIconParty">
		<bind name="entityDH" value="'entityClub'; _clubEntityId"/>
		<bind name="watchDH" value="'partyPlayersCount'; ['entityClub.party.evUpdate']; entityClub.party.playersCount"/>
		<bind name="watchDH" value="'partyPlayersLimit'; ['entityClub.party.evUpdate']; entityClub.party.playersLimit"/>
		<bind name="watchDH" value="'isPartyMember'; ['entityClub.party.evUpdate']; entityClub.party.isMember"/>
		<bind name="watchDH" value="'isPartyCommander'; ['entityClub.party.evUpdate']; entityClub.party.isOwner"/>
		<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: isPartyMember ? [{_paragraphText: 'IDS_PARTY_UP_FOR_BATTLE'}]
																					: [{_paragraphText: 'IDS_PARTY_UP_FOR_BATTLE'}, {_paragraphText: 'IDS_PROFILE_CLUBS_INSTRUCTION_9_1'}]}"/>
		<style>
			<marginTop value="63px"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="68px"/>
			</style>
			<bind name="instance" value="'ClubIconPartyState'; {_isPartyCommander: isPartyCommander, _isPartyMember: isPartyMember}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.42; {scaleY: 0.7, alpha: 0, top: 25}; {scaleY: 1, alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<style>
					<marginTop value="-4px"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="toLowerCase(tr('IDS_GATHERING_TO_BATTLE'))"/>
			</block>
			<block>
				<style>
					<marginTop value="-4px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<block type="text">
					<styleClass value="$TextAccentBold"/>
					<style>
						<marginTop value="-4px"/>
					</style>
					<bind name="text" value="partyPlayersCount"/>
				</block>
				<block type="text">
					<styleClass value="$TextAccentBold"/>
					<style>
						<alpha value="0.9"/>
						<marginTop value="-4px"/>
						<marginRight value="-1px"/>
						<marginLeft value="-3px"/>
					</style>
					<text value="/"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontSizeHeader5'"/>
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="text" value="partyPlayersLimit"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClubIconBattleState">
		<style>
			<width value="34px"/>
			<height value="34px"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0.3; {width: 34, height: 34, alpha: 0, top: 20};
											 {width: 68, height: 68, alpha: 1, top: 0}"/>
		<bind name="var" value="{firstChange: true}"/>
		<bind name="dispatch" value="'addedToStage'; 'changeBattleStateEv'; false; 0.5"/>
		<bind name="catch" value="'changeBattleStateEv'; {firstChange: false}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="fade" value="!(_isPartyMember); 0.14;	{left: 68, alpha: 0}; {left: 0, alpha: 1}; {left: -68, alpha: 0}; 0;	firstChange			? 0 :
																														!(_isPartyMember)	? 0.57
																																			: 0.5"/>
			<bind name="style" value="'backgroundImage'; 'symbol:icon_club_status_in_battle'"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="fade" value="_isPartyMember; 0.14;	{left: 68, alpha: 0}; {left: 0, alpha: 1}; {left: -68, alpha: 0}; 0;	firstChange			? 0 :
																													_isPartyMember		? 0.57
																																		: 0.5"/>
			<bind name="style" value="'backgroundImage'; 'symbol:icon_club_status_in_battle_member'"/>
		</block>
	</block>
	<block className="ClubIconInBattle">
		<bind name="entityDH" value="'entityClub'; _clubEntityId"/>
		<bind name="watchDH" value="'isPartyMember'; ['entityClub.party.evUpdate']; entityClub.party.isMember"/>
		<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [{_paragraphText: 'IDS_PARTY_IN_BATTLE'}]}"/>
		<style>
			<marginTop value="75px"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="68px"/>
			</style>
			<bind name="instance" value="'ClubIconBattleState'; {_isPartyMember: isPartyMember}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="appear" value="'addedToStage'; 0.15; 0.42; {scaleY: 0.5, alpha: 0, top: 20}; {scaleY: 1, alpha: 1, top: 0}"/>
			<block type="text">
				<style>
					<marginTop value="-8px"/>
					<alpha value="0.9"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="toLowerCase(tr('IDS_IN_BATTLE'))"/>
			</block>
		</block>
	</block>
	<block className="ClubLeagueLabel">
		<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray: [{_paragraphText: 'IDS_CURRENT_LEAGUE_' + _league}]}"/>
		<bind name="watch" value="'label'; toUpperCase(tr('IDS_LEAGUE_'+_league))"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
				</style>
				<block className="icon_issued" type="native">
					<bind name="name" value="'league'"/>
					<innerBind elementName="item.item" name="text" value="label"/>
					<bind name="gotoAndPlay!" value="_state"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ClubLeagueIconTiny">
		<style>
			<width value="35px"/>
			<height value="35px"/>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'symbol:club_icon_league_'+(_league != null	? ((_league &gt; 2)	? '2'
																									: _league)
																				: '-1')"/>
	</block>
	<block className="ClubBattleClubsVS">
		<styleClass value="$MiddleAligned"/>
		<block>
			<style>
				<marginBottom value="15px"/>
			</style>
			<block>
				<bind name="visible" value="_alliedClub.clubLeague != null &amp;&amp; _alliedClub.clubLeague == _enemyClub.clubLeague"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<position value="absolute"/>
					<alpha value="0.25"/>
					<bottom value="-6"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'ClubLeagueLabel'; (_alliedClub.clubLeague != '-1') ? {	_league: _alliedClub.clubLeague, _state: 'issued'} : null"/>
			</block>
			<block>
				<bind name="tooltip" value="'ClubInfoTooltipSimple'; {_teamName: _alliedClub.clubName, _rating: format(_alliedClub.clubRating, -1), _league: _alliedClub.clubLeague}"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="105%"/>
				</style>
				<block type="text">
					<styleClass value="$TextAccentBold"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginRight value="6px"/>
						<alpha value="0.85"/>
					</style>
					<bind name="text" value="_alliedClub.clubName"/>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<bind name="visible" value="_alliedClub.clubLeague != _enemyClub.clubLeague"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.25"/>
							<top value="90%"/>
							<left value="10%"/>
							<hitTest value="false"/>
						</style>
						<bind name="instance" value="'ClubLeagueLabel'; (_alliedClub.clubLeague != '-1') ? {	_league: _alliedClub.clubLeague, _state: 'issued'} : null"/>
					</block>
					<block type="text">
						<styleClass value="$TextAccentBold"/>
						<bind name="class" value="'$FontAccentSize2'"/>
						<bind name="text" value="format(_alliedClub.clubRating, -1)"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="30px"/>
					<height value="30px"/>
				</style>
			</block>
			<block>
				<bind name="tooltip" value="'ClubInfoTooltipSimple'; {_teamName: _enemyClub.clubName, _rating: _enemyClub.clubRating, _league: _enemyClub.clubLeague}"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<left value="105%"/>
				</style>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<block>
						<bind name="visible" value="_alliedClub.clubLeague != _enemyClub.clubLeague"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.25"/>
							<top value="90%"/>
							<right value="10%"/>
							<hitTest value="false"/>
						</style>
						<bind name="instance" value="'ClubLeagueLabel'; (_enemyClub.clubLeague != '-1') ? { _league: _enemyClub.clubLeague, _state: 'issued' } : null"/>
					</block>
					<block type="text">
						<styleClass value="$TextAccentBold"/>
						<bind name="class" value="'$FontAccentSize2'"/>
						<bind name="text" value="format(_enemyClub.clubRating, -1)"/>
					</block>
				</block>
				<block type="text">
					<styleClass value="$TextAccentBold"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="6px"/>
						<alpha value="0.85"/>
					</style>
					<bind name="text" value="_enemyClub.clubName"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="IconRankSmall">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="watch" value="'isSeasonSenior'; _seasonId &gt; 0 ? _seasonId &lt; 100 : (rankedBattlesSeason.isJuniorSeason != true)"/>
		<block>
			<style>
				<width value="28px"/>
				<height value="28px"/>
			</style>
			<bind name="style" value="'backgroundImage'; (isSeasonSenior &gt; 0) 	? 'url:../ranks/senior_season/icon_rank_small_' + _rankId + '.png'
																: 'url:../ranks/junior_season/icon_rank_small_' + _rankId + '.png'"/>
		</block>
	</block>
	<block className="RankStars">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks'; _rankId; 'rankInfo'"/>
		<bind name="tooltip" value="'RankStarTooltip'; !(rankInfo.starLossPlace == 0 &amp;&amp; rankInfo.starEarnPlace == 0) ? {_rankId: _rankId} : null"/>
		<style>
			<flow value="htile"/>
			<align value="center"/>
		</style>
		<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
		<bind name="repeat" value="rankInfo.starsToNext; (_size ? 'RankStarIconSmall' : 'RankStarIcon'); {_starState: (rankedBattlesStats.rank &lt; rankInfo.id)	? 'earned'
																																				: (rankedBattlesStats.rank &gt; rankInfo.id)	? 'not_earned'
																																															: 'unknown', _size: _size}"/>
	</block>
	<block className="TotalEarnedStars">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<flow value="htile"/>
				<align value="center"/>
			</style>
			<bind name="repeat" value="_starsCount; 'RankStarIconSmall'; {_starState: 'earned'}"/>
		</block>
	</block>
	<block className="RankStarIcon">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<block className="icon_rank_star" type="native">
			<style>
				<marginLeft value="5px"/>
				<marginRight value="5px"/>
			</style>
			<bind name="gotoAndStop!" value="(_starState != 'unknown')	? _starState
														: ( $index + 1 &lt;= rankedBattlesStats.stars)	? 'earned'
																									: 'not_earned'"/>
		</block>
	</block>
	<block className="RankStarIconSmall">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<block className="icon_rank_star_small" type="native">
			<style>
				<marginLeft value="2px"/>
				<marginRight value="2px"/>
				<marginTop value="1px"/>
				<marginBottom value="1px"/>
			</style>
			<bind name="style" value="'width'; _size == 'small' ? '27px' : 'auto'"/>
			<bind name="style" value="'height'; _size == 'small' ? '27px' : 'auto'"/>
			<bind name="gotoAndStop!" value="(_starState != 'unknown')	? _starState
														: ( $index + 1 &lt;= rankedBattlesStats.stars)	? 'earned'
																									: 'not_earned'"/>
		</block>
	</block>
	<block className="RankStarLostNotice">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks';  _rankId; 'rankInfo'"/>
		<bind name="visible" value="rankInfo.starLossPlace != 0"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'additionalCondition'; rankInfo.starLossPlace == 2 ? 'IDS_RANKED_BATTLE_STAR_LOSS_PLACE_CONDITION' :
										rankInfo.starLossPlace &gt; 2	? subst('IDS_RANKED_BATTLE_STAR_LOSS_PLACE_RANGE_CONDITION', [], {starLossPlace: rankInfo.starLossPlace})
																	: null"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="icon_star_earn_condition_small" type="native">
				<style>
					<marginLeft value="-2px"/>
				</style>
				<bind name="gotoAndStop!" value="2"/>
			</block>
			<block>
				<style>
					<marginLeft value="6px"/>
					<marginTop value="1px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="228"/>
					</style>
					<styleClass value="$TextHeaderBigWhite"/>
					<bind name="text" value="rankInfo.lossCondition"/>
				</block>
				<block type="text">
					<bind name="visible" value="additionalCondition != null"/>
					<style>
						<maxWidth value="228"/>
						<marginTop value="-6px"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="text" value="additionalCondition"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RankStarEarnCondition">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks';  _rankId; 'rankInfo'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="icon_star_earn_condition_small" type="native">
				<style>
					<marginLeft value="-2px"/>
				</style>
				<bind name="gotoAndStop!" value="1"/>
			</block>
			<block>
				<style>
					<marginLeft value="6px"/>
					<marginTop value="1px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="228"/>
					</style>
					<styleClass value="$TextHeaderBigWhite"/>
					<bind name="text" value="rankInfo.earnCondition"/>
				</block>
				<block type="text">
					<bind name="visible" value="rankInfo.starLossPlace == 0"/>
					<style>
						<maxWidth value="228"/>
						<marginTop value="-6px"/>
					</style>
					<styleClass value="$TextDefault"/>
					<text value="IDS_YOU_WILL_NOT_LOSE_STAR"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="RankStarTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="6px"/>
				</style>
				<bind name="instance" value="'RankStarEarnCondition'; {_rankId: _rankId}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'RankStarLostNotice'; {_rankId: _rankId}"/>
			</block>
		</block>
	</block>
	<block className="PlayerRankIcon">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks'; _rankId; 'rankInfo'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="watch" value="'anchorPlateIcon'; 	rankInfo.id == 1 		? 'top' :
										rankInfo.leagueId == 1 	? 'big' :
										rankInfo.leagueId == 2 	? 'medium':
										rankInfo.leagueId == 3 	? 'normal'
																: 'small'"/>
		<block className="icons_rank_outer" type="native">
			<style>
				<width value="70px"/>
				<height value="70px"/>
			</style>
			<bind name="gotoAndStop!" value="anchorPlateIcon"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<width value="28px"/>
				<height value="28px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; (rankedBattlesSeason.isJuniorSeason != true)  	? 'url:../ranks/senior_season/icon_rank_medium_' + (rankInfo.id) + '.png'
																						: 'url:../ranks/junior_season/icon_rank_medium_' + (rankInfo.id) + '.png'"/>
		</block>
	</block>
	<block className="PlayerRankIconBig">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'rankedBattlesRanks';  _rankId; 'rankInfo'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="watch" value="'anchorPlateIcon'; 	rankInfo.id == 1 		? 'top' :
										rankInfo.leagueId == 1 	? 'big' :
										rankInfo.leagueId == 2 	? 'medium':
										rankInfo.leagueId == 3 	? 'normal'
																: 'small'"/>
		<block className="icons_rank_outer_big" type="native">
			<style>
				<width value="146px"/>
				<height value="146px"/>
			</style>
			<bind name="gotoAndStop!" value="anchorPlateIcon"/>
			<block>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<style>
					<top value="45px"/>
					<width value="54px"/>
					<height value="54px"/>
				</style>
				<bind name="style" value="'backgroundImage'; (rankedBattlesSeason.isJuniorSeason != true) 	? 'url:../ranks/senior_season/icon_rank_big_' + (rankInfo.id) + '.png'
																							: 'url:../ranks/junior_season/icon_rank_big_' + (rankInfo.id) + '.png'"/>
			</block>
		</block>
	</block>
	<css name="$TextGoldenBold">
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$BattleLoadingHeader">
		<fontFamily value="$WWSDefaultFontBold"/>
		<marginBottom value="3px"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="23"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$BattleLoadingDescription">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$BattleLoadingDescriptionSmall">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TableHeaderIconSize">
		<width value="30px"/>
		<marginTop value="4px"/>
		<height value="21px"/>
	</css>
	<block className="BattleLoading">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'battleModeInfo'; 'updateBattleTime,battleModeInfo,updateBattleModeInfo'"/>
		<bind name="controller" value="lesta.dialogs.battle_window_controllers.uss_controllers.ControllerBattleStats"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="action" value="'addedToStage'; 'setUserPref' ; battleType == BattleTypes.EVENT_BATTLE ? {value: 0, name: 'battleLoadingTabIndex'} : null"/>
		<bind name="watch" value="'battleLoadingTabIndex';	(userPrefs.battleLoadingTabIndex == null)	? 2 : userPrefs.battleLoadingTabIndex"/>
		<bind name="watch" value="'validTabIndex'; 	teamId == 100									? 1 :
									battleType == BattleTypes.INTRO_MISSION						? 0 :
									!isDynamicDivisionsEnabled &amp;&amp; battleLoadingTabIndex == 3	? 2
																								: battleLoadingTabIndex"/>
		<bind name="watch" value="'isBattletypeWithDynamicDivisions';	(battleType == BattleTypes.COOPERATIVE_BATTLE)	||
														(battleType == BattleTypes.RANDOM_BATTLE)		||
														(battleType == BattleTypes.EVENT_BATTLE)"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled'; isBattletypeWithDynamicDivisions &amp;&amp; slimClientData.isFull"/>
		<bind name="watch" value="'isVoiceChatEnabled';	(battleType == BattleTypes.CLAN_BATTLE) ||
										((selfPlayer.divisionId != 0) &amp;&amp; ((battleType == BattleTypes.RANDOM_BATTLE) ||
																		  (battleType == BattleTypes.COOPERATIVE_BATTLE) ||
																		  (battleType == BattleTypes.PVE_BATTLE)))"/>
		<block className="lesta.utils.resourceLoading.BitmapDataResourceDisplay" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="display!" value="battleModeInfo.bitmapId"/>
		</block>
		<bind name="appear" value="'addedToStage'; 0.15; 0.2; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block type="text">
			<bind name="appear" value="'startShowContent'; 0.15; 0.15; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextAccentBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<top value="33%"/>
				<hitTest value="false"/>
				<position value="absolute"/>
			</style>
			<bind name="text" value="toUpperCase(tr('IDS_WAITING_SCREEN_LOADING_DATA'))"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="dispatch" value="'addedToStage'; 'startShowContent'"/>
			<bind name="appear" value="'startShowContent'; 0.15; 0.35; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="action" value="'addedToStage'; 'BattleHints.refresh'; {}"/>
			<block>
				<style>
					<position value="absolute"/>
					<right value="1280:312,1920:375aw"/>
					<bottom value="67px"/>
				</style>
				<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
				<bind name="collectionDH" value="CC.clanBattleSeason; 'clanBattleSeasonCollection'+'ROOT'"/>
				<bind name="collectionDesign" value="'DES_'+'clanBattleSeasonCollection'+'ROOT'; 'clanBattleSeasonCollection'; {'filter': battleDataEntity.battleInfo.mapId == $entity.clanBattleSeason.mapId }; []"/>
				<bind name="watch" value="'winnerClanId'; clanBattleSeasonCollection[clanBattleSeasonCollection.length-1].clanBattleSeason.winnerClanId"/>
				<bind name="instance" value="'ClanSeasonWinnersClanTag'; (clanBattleSeasonCollection.length &gt; 0) &amp;&amp; winnerClanId ? {_mapName: battleModeInfo.mapName} : null"/>
			</block>
			<block>
				<bind name="visible" value="gameModeId != GameMode.TUTORIAL &amp;&amp; teamId != 100"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<style>
					<top value="40px"/>
				</style>
				<block className="tab_bar_bg" type="native">
					<style>
						<position value="absolute"/>
						<width value="100%"/>
						<marginLeft value="-2px"/>
						<marginRight value="-2px"/>
						<height value="29px"/>
					</style>
				</block>
				<block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_0', 
												_width: '160px', 
												_selected: validTabIndex == 0, 
												_action: 'setUserPref', _actionParams: {value: 0, name: 'battleLoadingTabIndex'}, 
												_label: 'IDS_TEAM_TASKS', 
												_index: 0, 
												_paragraphText: 'IDS_TOOLTIP_TAB_TASKS', _isInBattle: false}"/>
				</block>
				<block>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<top value="2px"/>
						</style>
					</block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_1', 
												_width: '160px', 
												_selected: validTabIndex == 1,
												_action: 'setUserPref', _actionParams: {value: 1, name: 'battleLoadingTabIndex'}, 
												_label: 'IDS_TEAM_STRUCTURE', 
												_index: 1, 
												_paragraphText: 'IDS_TOOLTIP_TAB_TEAM_STRUCTURE', _isInBattle: false}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<top value="2px"/>
						</style>
					</block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_2', 
												_width: '160px', 
												_selected: validTabIndex == 2,
												_action: 'setUserPref', _actionParams: {value: 2, name: 'battleLoadingTabIndex'}, 
												_label: 'IDS_BATTLE_TIPS', 
												_index: 2, 
												_paragraphText: 'IDS_TOOLTIP_BATTLE_TIPS', _isInBattle: false}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="isDynamicDivisionsEnabled"/>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<top value="2px"/>
						</style>
					</block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_3', 
												_width: '160px', 
												_selected: validTabIndex == 3, 
												_action: 'setUserPref', _actionParams: {value: 3, name: 'battleLoadingTabIndex'}, 
												_label: 'IDS_DIVISIONS', 
												_index: 3, 
												_paragraphText: 'IDS_TOOLTIP_TAB_DIVISIONS', _isInBattle: false}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<top value="13sh"/>
				</style>
				<block>
					<styleClass value="$MiddleAligned"/>
					<block>
						<style>
							<maxWidth value="1280"/>
						</style>
						<bind name="style" value="'width'; (validTabIndex == 0) ? '97sw': '843px'"/>
						<bind name="child" value="validTabIndex;
									{	_isBattleLoading: true, battleModeInfo: battleModeInfo,
										selfPlayer: selfPlayer, enemies: enemies, enemiesByTeam: enemiesByTeam, allies: allies, divisions: divisions,
										_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled };
									'Tasks'; 'TeamBattlePage'; 'BattleTipsContent'; 'DynamicDivisions'"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="teamId != 100"/>
					<bind name="stageSize"/>
					<bind name="style" value="'right'; (stageWidth - 1280) / 4"/>
					<style>
						<width value="1280:210,1920:260aw"/>
						<marginRight value="-50%"/>
						<position value="absolute"/>
					</style>
					<bind name="child" value="validTabIndex; {	_selfPlayer: selfPlayer, _battleType: battleType,
												_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled, _isVoiceChatEnabled: isVoiceChatEnabled };
											'EmptyItem'; 'TeamBattleLoadingRightPanel'; 'EmptyItem'; 'DynamicDivisionsRightPanel'"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'startShow'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<bind name="watch" value="'pveDifficultyPostfix'; operationIsHard ? '_hard' : ''"/>
				<bind name="watch" value="'pveIconLabel'; (operationType == 'event' ? 'PVEBattle_event' : 'PVEBattle') + pveDifficultyPostfix"/>
				<style>
					<height value="180px"/>
					<bottom value="40px"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
					<bind name="watchDH" value="'isBrawl'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.isBrawl"/>
					<styleClass value="$MiddleAligned"/>
					<style>
						<width value="72px"/>
						<height value="72px"/>
					</style>
					<block className="indicator_busy_battletype" type="native">
						<style>
							<position value="absolute"/>
						</style>
						<bind name="gotoAndStop!" value="(battleType == BattleTypes.RANKED_BATTLE) &amp;&amp; (rankedBattlesSeason.isJuniorSeason == true) 	? 'RankedBattle_junior':
										(battleType == BattleTypes.CLAN_BATTLE) &amp;&amp; (isBrawl)									 	? 'ClanBrawl':
										(gameModeId == GameMode.TUTORIAL)															? 'TutorialBattle' :
										(gameModeId == GameMode.PVE) &amp;&amp; (operationType == 'event')					? 'PVEBattle_event' :
										(gameModeId == GameMode.PVE)																? pveIconLabel
																																			: battleType"/>
					</block>
				</block>
				<block>
					<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
					<bind name="watchDH" value="'chosenOperationId'; ['']; pveStateEntity.pveState.chosenOperation"/>
					<bind name="watchDH" value="'chosenDifficulty';	['']; pveStateEntity.pveState.chosenDifficulty"/>
					<bind name="watchDH" value="'activeOperationId'; ['']; pveStateEntity.pveState.activeOperation"/>
					<bind name="watch" value="'isChosenOperationOfTheWeek'; ((chosenOperationId == activeOperationId) &amp;&amp; (chosenDifficulty == 'normal'))"/>
					<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
					<bind name="watchDH" value="'operationType';	['operationEntity.operation.evStatusChanged']; operationEntity.operation.type"/>
					<bind name="watchDH" value="'operationIsHard'; []; operationEntity.operation.isHard"/>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<bind name="name" value="'mapName'"/>
						<bind name="class" value="'$FontSizeLargeHeader'"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextAccentBold"/>
						<bind name="text" value="(gameModeId == GameMode.PVE	? tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_NAME') : toUpperCase(tr(battleModeInfo.mapName)))"/>
					</block>
					<block type="text">
						<bind name="name" value="'battleType'"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextHeader"/>
						<style>
							<marginTop value="-6px"/>
							<alpha value="0.85"/>
						</style>
						<bind name="text" value="gameModeId == GameMode.PVE	? tr('IDS_PVE_BATTLE_WITH_DOT') + ' ' + (isChosenOperationOfTheWeek == true		? tr('IDS_OPERATION_OF_THE_WEEK_OPERATION_TITLE') :
																											(!(operationIsHard)						? tr('IDS_OPERATION_NORMAL_DIFFICULTY_TITLE') 
																																					: tr('IDS_OPERATION_HARD_DIFFICULTY_TITLE')))
																	: (toUpperCase(tr('IDS_')) + gameMode + toUpperCase(tr('_TITLE')))"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="fade" value="battleModeInfo.loadingProgress &lt; 1; 0.15; {alpha: 0, top: 10}; {alpha: 1, top:0 }; {alpha: 0, top: -10}; 1; 0.15"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<block className="indicator_progress_bar" type="native">
							<bind name="name" value="'indicator_progress_bar'"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<marginTop value="12px"/>
							</style>
							<bind name="value" value="(battleModeInfo.loadingProgress)*10"/>
						</block>
						<block>
							<style>
								<width value="100%"/>
							</style>
							<block type="text">
								<styleClass value="$MiddleAligned"/>
								<styleClass value="$BattleLoadingDescription"/>
								<style>
									<marginTop value="12px"/>
									<maxWidth value="1100"/>
									<textAlign value="center"/>
								</style>
								<bind name="substitute" value="5; null; battleModeInfo.helpText"/>
							</block>
						</block>
					</block>
				</block>
				<block>
					<bind name="fade" value="battleModeInfo.loadingProgress == 1; 0.15; {alpha: 0, top: 10}; {alpha: 1, top:0 }; {alpha: 0, top: -10}; 1; 0.15"/>
					<styleClass value="$MiddleAligned"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<block>
							<styleClass value="$MiddleAligned"/>
							<bind name="visible" value="battleModeInfo.battleState == 1"/>
							<block type="text">
								<bind name="name" value="'loadingPreBattleTimer'"/>
								<style>
									<marginTop value="6px"/>
								</style>
								<bind name="class" value="'$FontSizeLargeHeader'"/>
								<styleClass value="$TextAccentBold"/>
								<bind name="text" value="battleModeInfo.battleTimeLeftText"/>
							</block>
						</block>
						<block>
							<bind name="visible" value="battleModeInfo.readyToBattle &amp;&amp; (battleModeInfo.battleState != 0)"/>
							<style>
								<width value="150px"/>
								<marginTop value="9px"/>
							</style>
							<block className="button_default" type="native">
								<style>
									<width value="100%"/>
								</style>
								<bind name="focus" value="0; true"/>
								<bind name="name" value="'btnStartBattle'"/>
								<bind name="label" value="toUpperCase(tr('IDS_STARTTRAININGBATTLEBUTTON'))"/>
								<bind name="request" value="'buttonClick'; 'showBattle'; {}"/>
								<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_STARTTRAININGBATTLEBUTTON'}; 0"/>
							</block>
						</block>
						<block>
							<bind name="visible" value="!(battleModeInfo.readyToBattle) &amp;&amp; (battleModeInfo.battleState != 0)"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<marginTop value="9px"/>
							</style>
							<block type="text">
								<styleClass value="$TextHeaderBigDefault"/>
								<text value="IDS_WAITING_PLAYERS"/>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$BottomMenu"/>
				<block>
					<style>
						<marginLeft value="10px"/>
						<marginTop value="4px"/>
						<width value="19px"/>
						<height value="17px"/>
					</style>
					<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayer.isSpeaking}"/>
				</block>
			</block>
			<block>
				<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'invitationsToDivision'; 'InvitationsToDivision'"/>
				<bind name="watch" value="'invitationBottomOffset'; 17+(stageHeight-720)/3"/>
				<bind name="style" value="'bottom'; invitationBottomOffset"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="repeat" value="InvitationsToDivision; 'BattleDivisionInvitationItem'; {_isBattleLoading: true}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ClanSeasonWinnersClanTag">
		<style>
			<width value="80px"/>
			<height value="80px"/>
			<backgroundStretchX value="true"/>
			<backgroundStretchY value="true"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../achievements/icons/icon_achievement_WINNER_CLAN_SEASON_' + seasonId + '.png'"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="collectionDH" value="CC.clanBattleSeason; 'clanBattleSeasonCollection'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'clanBattleSeasonCollection'+'ROOT'; 'clanBattleSeasonCollection'; {'filter': battleDataEntity.battleInfo.mapId == $entity.clanBattleSeason.mapId }; []"/>
		<bind name="watch" value="'winnerClanId'; clanBattleSeasonCollection[clanBattleSeasonCollection.length-1].clanBattleSeason.winnerClanId"/>
		<bind name="watch" value="'seasonId'; clanBattleSeasonCollection[clanBattleSeasonCollection.length-1].clanBattleSeason.id"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; winnerClanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; winnerClanId"/>
		<bind name="watchDH" value="'clanTag'; ['']; clanEntity.clan.tag"/>
		<bind name="tooltip" value="'ClanSeasonWinnersClanTagTooltip'; {_mapName: _mapName, seasonId: seasonId}"/>
		<block>
			<style>
				<position value="absolute"/>
				<width value="300px"/>
				<left value="93px"/>
				<top value="2px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="style" value="'fontSize';winnersClanTagStr[realmConstants.currentRealm].length &gt; 2 ? 24 : 24"/>
				<styleClass value="$TextDefaultBoldNM"/>
				<bind name="text" value="'[' + clanTag + ']'"/>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="subst('IDS_CLAN_BATTLES_SEASON_WINNER', [], { mapName: tr(_mapName)})"/>
			</block>
		</block>
	</block>
	<block className="ClanSeasonWinnersClanTagTooltip">
		<style>
			<width value="330px"/>
			<hitTest value="false"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="collectionDH" value="CC.clanBattleSeason; 'clanBattleSeasonCollection'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'clanBattleSeasonCollection'+'ROOT'; 'clanBattleSeasonCollection'; {'filter': battleDataEntity.battleInfo.mapId == $entity.clanBattleSeason.mapId }; []"/>
		<bind name="watch" value="'winnerClanId'; clanBattleSeasonCollection[clanBattleSeasonCollection.length-1].clanBattleSeason.winnerClanId"/>
		<bind name="watch" value="'seasonId'; clanBattleSeasonCollection[clanBattleSeasonCollection.length-1].clanBattleSeason.id"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; winnerClanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; winnerClanId"/>
		<bind name="watchDH" value="'clanTag'; ['']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['']; clanExtendedEntity.clanExtended.name"/>
		<block>
			<style>
				<width value="100%"/>
				<paddingLeft value="16px"/>
				<paddingRight value="16px"/>
				<paddingTop value="16px"/>
				<paddingBottom value="16px"/>
			</style>
			<block>
				<style>
					<width value="80px"/>
					<height value="80px"/>
					<backgroundStretchX value="true"/>
					<backgroundStretchY value="true"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../achievements/icons/icon_achievement_WINNER_CLAN_SEASON_' + seasonId + '.png'"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginLeft value="16px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginBottom value="8px"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="toUpperCase('[' + clanTag + ']' + ' ' + clanName )"/>
				</block>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<alpha value="0.85"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="subst('IDS_CLAN_BATTLES_SEASON_WINNER', [], {mapName: tr(_mapName)})"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="Tasks">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType'; battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId'; battleDataEntity.battleInfo.gameModeId"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<bind name="appear" value="'addedToStage'; 0.15; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<style>
				<width value="860px"/>
				<position value="absolute"/>
			</style>
			<bind name="child" value="(gameModeId != null ? (gameModeId == GameMode.PVE	? 1
																		: 2)
										 : 0); {	_battleModeInfo: battleModeInfo,
													_selfPlayer: selfPlayer };	'EmptyItem';
																				'BattleLoadingPVETasks';
																				'BattleLoadingStandartTasks'"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="4px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="instance" value="'BattleLoadingMinimap';	{	_battleModeInfo		:	battleModeInfo,
													_allies				:	allies
												}"/>
		</block>
	</block>
	<block className="BattleLoadingStandartTasks">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'gameModeDescription';	battleDataEntity.battleInfo.gameModeDescription"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$TextDefaultBold23NM"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="text" value="gameModeId == GameMode.TUTORIAL ? tr('IDS_YOUR_GOAL') : tr('IDS_TEAM_GOALS')"/>
		</block>
		<block type="text">
			<bind name="appear" value="'startShow'; 0.15; 0.47; {alpha: 0, top: 10}; {alpha: 0.85, top: 0}"/>
			<style>
				<width value="100%"/>
				<marginBottom value="24px"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="gameModeDescription"/>
		</block>
		<block>
			<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="visible" value="_battleModeInfo.holdRewards.length &gt; 0 "/>
			<style>
				<width value="100%"/>
				<marginTop value="14px"/>
				<marginBottom value="24px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextDefaultBold23NM"/>
					<style>
						<width value="100%"/>
						<marginBottom value="12px"/>
					</style>
					<bind name="text" value="tr('IDS_CHARGING_POINTS')"/>
				</block>
				<block>
					<style>
						<marginTop value="9px"/>
					</style>
					<bind name="instance" value="'PointsCharge'; {_battleModeInfo: _battleModeInfo}"/>
				</block>
			</block>
		</block>
		<bind name="watch" value="'bulletsCount';	gameModeId == GameMode.ANTI_STANDARD		? 2:
									gameModeId == GameMode.ATTACK_DEFENSE		? 5:
									gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 5
																				: null "/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="bulletsCount"/>
			<bind name="instance" value="'GameModeRulesDescription'; bulletsCount ? {_bulletsCount: bulletsCount, _gameMode: gameMode} : null"/>
		</block>
		<block>
			<bind name="visible" value="gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
			<style>
				<marginTop value="16"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<marginBottom value="16"/>
				</style>
				<styleClass value="$TextDefaultBold23NM"/>
				<bind name="text" value="'IDS_GAMEMODE_TEAM_BATTLE_ROYALE_RULES_HEADER'"/>
			</block>
			<bind name="repeat" value="3; 'GameModeRulesDescriptionWithIcons'; gameModeId == GameMode.ESCAPE_TO_PORTAL ? {} : null"/>
		</block>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity ? {} : null"/>
		</block>
		<block type="text">
			<bind name="visible" value="battleDataEntity.battleInfo.gameModeSubtype == 1"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<leading value="-3"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="substitute" value="6; null; tr('IDS_POWERUPS_CHECK_PARAMS_TIP'); '_bg'"/>
		</block>
		<block>
			<bind name="visible" value="gameModeId == GameMode.FORTS"/>
			<bind name="appear" value="'startShow'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<marginTop value="14px"/>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="text" value="tr('IDS_GAMEMODE_FORTS_GOAL_TITLE')"/>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="substitute" value="5; {	'[icon_1]' : 'icon_ground_artillery_type_1_ally',
										'[icon_2]' : 'icon_ground_radar_ally',
										'[icon_3]' : 'icon_ground_artillery_type_1_enemy',
										'[icon_4]' : 'icon_ground_radar_enemy'};
										tr('IDS_GAMEMODE_FORTS_GOAL_DESCRIPTION')"/>
			</block>
		</block>
	</block>
	<block className="GameModeRulesDescription">
		<style>
			<width value="100%"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_' + toUpperCase(_gameMode) + '_RULES_HEADER'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
				<alpha value="0.85"/>
			</style>
			<bind name="repeat" value="_bulletsCount; 'ListWithBulletsElement'; {_marginBottom: '12px', _textClass: '$TextDefault19NM', _text: ('IDS_' + toUpperCase(_gameMode) + '_RULES_BULLET_'), _bulletIndex: true}"/>
		</block>
	</block>
	<block className="GameModeRulesDescriptionWithIcons">
		<style>
			<width value="100%"/>
			<marginBottom value="24px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<block>
			<style>
				<marginRight value="8"/>
				<width value="32px"/>
				<height value="32px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../events/halloween19/icon_rules_' + $index + '.png'"/>
		</block>
		<block>
			<style>
				<width value="100%px"/>
			</style>
			<block type="text">
				<style>
					<marginBottom value="8"/>
				</style>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="text" value="'IDS_GAMEMODE_' + toUpperCase(gameMode) + '_RULES_DESCRIPTION_TITLE_' + $index"/>
			</block>
			<block type="text">
				<style>
					<width value="100%px"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<bind name="text" value="'IDS_GAMEMODE_' + toUpperCase(gameMode) + '_RULES_DESCRIPTION_TEXT_' + $index"/>
			</block>
		</block>
	</block>
	<block className="TeamBattlePage">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<style>
			<width value="843px"/>
			<height value="380px"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="name" value="_isBattleStats ? 'TeamBattleStatsID' : 'TeamBattleLoading'"/>
			<block className="UIlistTeamStructureLeft">
				<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="instance" value="'BlurMap'; _isBattleLoading ? {} : null"/>
				</block>
				<block>
					<bind name="visible" value="_isBattleStats == true &amp;&amp; gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
					<style>
						<position value="absolute"/>
						<left value="-24"/>
						<top value="6px"/>
						<width value="21px"/>
						<height value="21px"/>
						<backgroundSize value="cover"/>
						<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
					</style>
				</block>
				<block>
					<bind name="instance" value="'UIlistTeamStructureHeaderLeft'; { 	_width: '421px', _isBattleStats: _isBattleStats, _allyPlayerEntityId: allies[0].id, 
															_battleType: battleType }"/>
				</block>
				<block>
					<style>
						<right value="0px"/>
					</style>
					<bind name="appear" value="'startShow'; 0.15; 0.75; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
					<bind name="repeat" value="allies; 'SimpleUIListTeamStructureLeft'; { _isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats,
																_selfPlayer: selfPlayer, _isDynamicDivisionsEnabled: _isDynamicDivisionsEnabled }"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="gameModeId != GameMode.PVE"/>
				<block className="UIlistTeamStructureRight">
					<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
					<block>
						<bind name="visible" value="_isBattleStats == true &amp;&amp; gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
						<style>
							<position value="absolute"/>
							<right value="-24"/>
							<top value="6px"/>
							<width value="21px"/>
							<height value="21px"/>
							<backgroundSize value="cover"/>
							<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
						</style>
					</block>
					<block>
						<block className="VerticalDivider">
							<style>
								<height value="100%"/>
								<width value="3px"/>
							</style>
							<block className="divider_v" type="native">
								<styleClass value="$Fullsize"/>
							</block>
						</block>
						<bind name="instance" value="'UIlistTeamStructureHeaderRight'; { _width: '421px', _isBattleStats: _isBattleStats, _enemyPlayerEntityId: enemies[0].id, 
															_battleType: battleType }"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<bind name="watch" value="'enemyTeamsArray'; enemiesByTeam['keys']"/>
					<block>
						<bind name="repeat" value="enemyTeamsArray; 'UIlistTeamStructureRightTeamsRepeater'; {_isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats, enemiesByTeam: enemiesByTeam, _selfPlayer: selfPlayer}"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BattleTipsContent">
		<params>
			<param name="name" value="BattleTipsContent"/>
		</params>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="firstEntityDH" value="'battleHintsEntity'; CC.battleHints"/>
		<bind name="watchDH" value="'hints'; ['battleHintsEntity.battleHints.refreshData']; battleHintsEntity.battleHints.hints"/>
		<bind name="watchDH" value="'currentImageIdx'; ['battleHintsEntity.battleHints.refreshData']; battleHintsEntity.battleHints.currentImageIdx"/>
		<style>
			<marginTop value="720:0,1080:37ah"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<bind name="instance" value="'GalleryViewer';	{ 	
											_galleryItemRenderer: 'BattleGalleryItem', 
											_galleryItemRendererParams: hints, 
											_galleryItemRendererImageIndicator: 'SelectedImageIndicator', 
											_galleryImageWidth: 900,
											_galleryImageHeight: 382, 
											_autoSwitchDelay: 8,
											_currentImageIdx: (currentImageIdx + 1),
											_fakeHitboxWidth: 200
										}"/>
	</block>
	<block className="TeamBattleLoadingRightPanel">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RightPanelInfo'; {_headerText: 'IDS_SHIPS_COMPARISON', _infoText: 'IDS_SHIP_COMPARISON_HINT'}"/>
		</block>
		<block>
			<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
			<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
			<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
			<bind name="appear" value="'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<marginTop value="6px"/>
				<marginLeft value="2px"/>
				<marginTop value="20px"/>
			</style>
			<bind name="watch" value=" 'showOwnShip'; (userPrefs.showOwnShipInCompare == null) ? false : userPrefs.showOwnShipInCompare"/>
			<bind name="catch" value="'switchOwnShipInCompare'; { showOwnShip: !showOwnShip }; 'saveShowOwnShip'"/>
			<bind name="action" value="'saveShowOwnShip' ; 'setUserPref' ; {value: showOwnShip, name: 'showOwnShipInCompare'}"/>
			<bind name="dispatch" value="'click'; 'switchOwnShipInCompare'"/>
			<bind name="tooltip" value="'MouseInstructionTooltip';	{	_multiParagraphArray: [{_paragraphText: 'IDS_SHOW_OWN_SHIP_IN_COMPARE_HINT'}],	_maxWidth: 270}"/>
			<bind name="instance" value="'CheckBox'; { switchProperty: showOwnShip, label: 'IDS_SHOW_OWN_SHIP_IN_COMPARE'}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'VoiceChatRightPanelControl'; _isVoiceChatEnabled ? {_battleType: _battleType} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'InvitationsToDivisionRightPanelControl'; _isDynamicDivisionsEnabled ? {_selfPlayer: _selfPlayer} : null"/>
		</block>
	</block>
	<block className="DynamicDivisionsRightPanel">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'RightPanelInfo'; {_headerText: 'IDS_DIVISIONS_IN_BATTLE_HEADER', _infoText: 'IDS_DYNAMIC_DIVISIONS_INFO'}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'VoiceChatRightPanelControl'; _isVoiceChatEnabled ? {_battleType: _battleType} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="2px"/>
			</style>
			<bind name="instance" value="'InvitationsToDivisionRightPanelControl'; _isDynamicDivisionsEnabled ? {_selfPlayer: _selfPlayer} : null"/>
		</block>
	</block>
	<block className="VoiceChatRightPanelControl">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
		<bind name="appear" value="_isBattleStats ?	null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<marginTop value="16px"/>
		</style>
		<bind name="instance" value="'CheckBox'; {switchProperty: VoiceChatState.enabled, label: 'IDS_ENABLE_VOICE_CHAT', _maxTfWidth: 180}"/>
		<bind name="action" value="'click'; 'setVoiceChatEnabled'; {enabled: !(VoiceChatState.enabled)}"/>
		<bind name="tooltip" value="'MouseInstructionTooltip';	{	_multiParagraphArray: ((_battleType == BattleTypes.CLAN_BATTLE)	? [{_paragraphText: 'IDS_ENABLE_VOICE_CHAT_IN_CLUB_BATTLE_HINT'}]
																													: [{_paragraphText: 'IDS_ENABLE_VOICE_CHAT_IN_BATTLE_HINT'}]),
													_maxWidth: 270, _isInBattle: _isBattleStats}"/>
	</block>
	<block className="InvitationsToDivisionRightPanelControl">
		<bind name="appear" value="_isBattleStats ?	null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
			<marginTop value="16px"/>
		</style>
		<bind name="instance" value="'CheckBox'; {switchProperty: _selfPlayer.invitationsEnabled, label: 'IDS_ENABLE_INVITATIONS_TO_DIVISION', _maxTfWidth: 180}"/>
		<bind name="action" value="'click'; 'toggleInvitationsEnabled'"/>
		<bind name="tooltip" value="'MouseInstructionTooltip';	{	_multiParagraphArray: [{_paragraphText: 'IDS_ENABLE_INVITATIONS_TO_DIVISION_IN_BATTLE_HINT'}],
													_maxWidth: 270, _isInBattle: _isBattleStats}"/>
	</block>
	<block className="UIlistTeamStructureRight">
		<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
		<block>
			<bind name="visible" value="_isBattleStats == true &amp;&amp; gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
			<style>
				<position value="absolute"/>
				<right value="-24"/>
				<top value="6px"/>
				<width value="21px"/>
				<height value="21px"/>
				<backgroundSize value="cover"/>
				<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
			</style>
		</block>
		<block>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<bind name="instance" value="'UIlistTeamStructureHeaderRight'; { _width: '421px', _isBattleStats: _isBattleStats, _enemyPlayerEntityId: enemies[0].id, 
															_battleType: battleType }"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<bind name="watch" value="'enemyTeamsArray'; enemiesByTeam['keys']"/>
		<block>
			<bind name="repeat" value="enemyTeamsArray; 'UIlistTeamStructureRightTeamsRepeater'; {_isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats, enemiesByTeam: enemiesByTeam, _selfPlayer: selfPlayer}"/>
		</block>
	</block>
	<block className="UIlistTeamStructureRightTeamsRepeater">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'teamList';    enemiesByTeam[$value]"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BlurMap'; _isBattleLoading ? {} : null"/>
		</block>
		<block className="VerticalDivider">
			<style>
				<height value="100%"/>
				<width value="3px"/>
			</style>
			<block className="divider_v" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<bind name="style" value="'marginTop'; $index == 0 ? 0 : '16'"/>
		<bind name="appear" value="'startShow'; 0.15; 0.75; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<bind name="repeat" value="teamList; 'SimpleUIListTeamStructureRight'; {	_isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats, _selfPlayer: _selfPlayer }"/>
		</block>
	</block>
	<block className="UIlistTeamStructureLeft">
		<bind name="controller" value="lesta.controls.ui_list.UIListController"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'BlurMap'; _isBattleLoading ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="_isBattleStats == true &amp;&amp; gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
			<style>
				<position value="absolute"/>
				<left value="-24"/>
				<top value="6px"/>
				<width value="21px"/>
				<height value="21px"/>
				<backgroundSize value="cover"/>
				<backgroundImage value="url:../events/halloween19/icon_stat_filth.png"/>
			</style>
		</block>
		<block>
			<bind name="instance" value="'UIlistTeamStructureHeaderLeft'; { 	_width: '421px', _isBattleStats: _isBattleStats, _allyPlayerEntityId: allies[0].id, 
															_battleType: battleType }"/>
		</block>
		<block>
			<style>
				<right value="0px"/>
			</style>
			<bind name="appear" value="'startShow'; 0.15; 0.75; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<bind name="repeat" value="allies; 'SimpleUIListTeamStructureLeft'; { _isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats,
																_selfPlayer: selfPlayer, _isDynamicDivisionsEnabled: _isDynamicDivisionsEnabled }"/>
		</block>
	</block>
	<block className="SimpleUIListTeamStructureLeft">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'playersInvitationsDataCollection'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'name'; name; 'playerInvitationDataCollection'"/>
		<bind name="watch" value="'playerInvitationData'; playerInvitationDataCollection[0]"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'players in battle'; 'name'; name; 'playerInCollection'"/>
		<bind name="watch" value="'player'; playerInCollection[0]"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.resource; 'byOwnerId.' + playerEntity.id"/>
		<bind name="watchDH" value="'resourceValue'; ['resourceEntity.progress.evChanged']; resourceEntity.progress.value"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.avatar; id"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'pureName'; 		[]; playerEntity.avatar.pureName"/>
		<bind name="watchDH" value="'clanId'; 		['playerEntity.clanman.evClanIdChanged']; playerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'hidden'; 		[]; playerEntity.avatar.hidden"/>
		<bind name="watchDH" value="'isBot'; 		[]; playerEntity.avatar.isBot"/>
		<bind name="watchDH" value="'clanTag'; 		['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="visible" value="!(hidden)"/>
		<style>
			<marginTop value="1px"/>
		</style>
		<bind name="watch" value="'isSelf'; (relation == 0)"/>
		<bind name="appear" value="'startShow'; 0.15; 0.75 + 0.075 * $index; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<bind name="style" value="'backgroundColor'; $index % 2 == 0 ? '0x15000000' : '0x25000000'"/>
			<style>
				<backgroundColor value="0x15000000"/>
				<position value="absolute"/>
				<height value="28px"/>
				<width value="100%"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="player.isInSameDivision"/>
			<style>
				<backgroundColor value="0x40ffdc84"/>
				<position value="absolute"/>
				<height value="28px"/>
				<width value="100%"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_isBattleStats == true &amp;&amp; resourceValue &gt; 0"/>
			<style>
				<position value="absolute"/>
				<left value="-52px"/>
				<top value="10px"/>
			</style>
			<block type="text">
				<style>
					<width value="50px"/>
					<textAlign value="right"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="player.is_self	? '$TextDefaultBoldNM' : '$TextDefaultNM'"/>
				<bind name="class" value="player.is_self	? '$FontColorGolden' : '$None'"/>
				<bind name="text" value="resourceValue"/>
			</block>
		</block>
		<block>
			<style>
				<right value="0px"/>
			</style>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="transition" value="(mouseDown || contextMenuVisible || rollOver) &amp;&amp; !(shipCompareTooltipVisible) &amp;&amp; !(isSelf); 0.1; {alpha: 0}; {alpha: 1}"/>
				<block className="dock_submenu_item_bg" type="native">
					<bind name="transition" value="contextMenuVisible; 0.1; {alpha: 1}; {alpha: 0.7}"/>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<bind name="tooltip" value="'BattlePlayerTooltip'; {	_isInBattle: _isBattleStats, _isBot: isBot,
													_player: player, _selfPlayer: _selfPlayer,
													_battleType: battleType}"/>
				<bind name="menu" value="'UIListPlayerContextMenu'; (!(isSelf) &amp;&amp; !(isBot))	?	{	_player: player, _selfPlayer: _selfPlayer, _battleType: battleType,
																					_complaintsAvailable: true, _isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats}
																			: null; null; 'contextMenuVisible'"/>
			</block>
			<block>
				<style>
					<height value="28px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<marginLeft value="1px"/>
						<hitTest value="false"/>
					</style>
					<bind name="instance" value="'UIListVoiceTextChatIcons'; {	_playerId: id, _selfPlayerDivisionId: _selfPlayer.divisionId,
																_isInSameDivision: isInSameDivision, _battleType: battleType,
																_isSpeaking: isSpeaking, _isVoiceChatMuted: isMuted, _isInVoiceChat: isInVoiceChat}"/>
				</block>
				<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'dynamicDivisionsData'; 'id'; _selfPlayer.divisionId; 'selfPlayerDivisionData'"/>
				<bind name="watch" value="'isFreePlacesInDivision'; ((selfPlayerDivisionData[0].staff.length + selfPlayerDivisionData[0].inPortParticipantsCount) &lt; 3)"/>
				<bind name="watch" value="'invitationDisableReason'; !(slimClientData.isFull)											? 'YourClientIsTooSlim' :
													isSelf																? 'YouCantInviteYourself' :
													!(isAlive)															? 'IDS_INVITATION_DISABLE_REASON_DESTROYED' :
													!(_selfPlayer.isAlive)												? 'IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED' :
													player.isLeaver														? 'IDS_INVITATION_DISABLE_REASON_PLAYER_IS_OUT_OF_BATTLE':
													(division != 0)														? 'IDS_INVITATION_DISABLE_REASON_ALREADY_IN_DIVISION' :
													(playerInvitationData != null)										? 'PlayerIsAlreadyInvited' :
													isInSameDivision													? 'PlayerIsAlreadyInYourDivision' :
													(_selfPlayer.division != 0) &amp;&amp; !(_selfPlayer.isDivisionCommander)	? 'IDS_INVITATION_DISABLE_REASON_NOT_COMMANDER' :
													!(isFreePlacesInDivision)											? 'IDS_INVITATION_DISABLE_REASON_NO_FREE_PLACES' :
													!(invitationsEnabled)												? 'IDS_INVITATION_DISABLE_REASON_INVITATIONS_DISABLED' :
													player.inviteCooldownEnabled										? 'IDS_WAIT_TIMEOUT_TO_INVITE_TO_DIVISION'
																														: 'no_reason'"/>
				<block>
					<style>
						<width value="25px"/>
						<height value="100%"/>
					</style>
					<block>
						<bind name="visible" value="(player.division &gt; 0) &amp;&amp; !(player.divisionHidden)"/>
						<style>
							<top value="6px"/>
							<marginLeft value="12px"/>
							<position value="absolute"/>
						</style>
						<block className="division_item" type="native">
							<bind name="gotoAndStop!" value="player.isInSameDivision ? player.divisionSign + 1 : player.divisionSign + 1 + 10"/>
						</block>
					</block>
					<block>
						<bind name="visible" value="_isDynamicDivisionsEnabled"/>
						<styleClass value="$Fullsize"/>
						<block>
							<bind name="visible" value="(playerInvitationData != null)"/>
							<bind name="transition" value="rollOver; 0.15; {alpha: 1}; {alpha: 0}; {alpha: 1}; 1; 0.05"/>
							<style>
								<top value="6px"/>
								<marginLeft value="8px"/>
								<position value="absolute"/>
							</style>
							<block className="formation_player_status" type="native">
								<bind name="gotoAndStop!" value="'empty_slot_division'"/>
							</block>
						</block>
						<block>
							<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1.0}; {alpha: 0}; 1; 0.05"/>
							<block>
								<bind name="visible" value="(invitationDisableReason == 'no_reason')"/>
								<style>
									<marginLeft value="4px"/>
									<top value="3px"/>
									<position value="absolute"/>
								</style>
								<block className="button_division_invite" type="native">
									<bind name="action" value="'buttonClick'; 'inviteToDivision'; {playerId: id, playerName: name, inviteType: InviteType.COMMON}"/>
								</block>
								<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'no_icon', _instructionText: 'IDS_INVITE_IN_DIVISION'}], _maxWidth: 250, _isInBattle: _isBattleStats}"/>
							</block>
							<block>
								<bind name="visible" value="(_selfPlayer.isDivisionCommander &amp;&amp; (playerInvitationData != null))"/>
								<style>
									<marginLeft value="2px"/>
									<top value="2px"/>
									<position value="absolute"/>
								</style>
								<block className="button_cross" type="native">
									<bind name="action" value="'buttonClick'; 'revokeInvitationToDivision'; {id: playerInvitationData.id}"/>
								</block>
								<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'no_icon', _instructionText: 'IDS_RECALL_INVITATION'}], _maxWidth: 250, _isInBattle: _isBattleStats}"/>
							</block>
						</block>
					</block>
				</block>
				<block>
					<style>
						<width value="137px"/>
						<marginTop value="10px"/>
					</style>
					<bind name="style" value="'alpha'; (isReady || _isBattleStats ? 1 : 0.75)"/>
					<bind name="name" value="'player_tab_name_' + name"/>
					<bind name="instance" value="'PlayerNameAndClanTag'; { 	_isSelf: isSelf, _isDead: !isAlive, _ttkStatus: ttkStatus, _tkStatus: tkStatus,
															_isInSameDivision: isInSameDivision, _playerName: pureName, _clanTag: clanTag}"/>
				</block>
				<block>
					<style>
						<height value="100%"/>
						<width value="122px"/>
						<marginBottom value="-2px"/>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="style" value="'hitTest'; _isBattleLoading ? true : false"/>
					<bind name="tooltip" value="'ShipSideCompareTooltip';	_isBattleLoading	? { _shipId: shipId, _selfPlayerShipId: _selfPlayer.shipId,
																					_nonPlayerShipParams: shipParams, _isSelf: isSelf, _nickname: name}
																				: null; TooltipBehaviour.simple; null; 'shipCompareTooltipVisible'"/>
					<bind name="name" value="'player_tab_icon_' + name"/>
					<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
					<block>
						<style>
							<width value="100%"/>
							<height value="100%"/>
							<hitTest value="false"/>
						</style>
						<bind name="style" value="'backgroundImage'; !isAlive 	? ('url:' + pathDeadShipIcon)
																: isSelf ? ('url:' + pathOwnShipTinyIcon) : ('url:' + pathShipTinyIcon)"/>
					</block>
				</block>
				<block>
					<style>
						<width value="25px"/>
					</style>
					<block type="text">
						<style>
							<marginTop value="10px"/>
							<width value="100%"/>
							<textAlign value="center"/>
							<multiline value="false"/>
							<hitTest value="false"/>
						</style>
						<bind name="class" value="	isSelf		? '$FontColorGolden' :
									!isAlive	? '$FontColorAlmostBlack'
												: '$None'"/>
						<styleClass value="$TextDefaultNM"/>
						<bind name="class" value="isSelf ? '$Bold' : '$None'"/>
						<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
						<bind name="class" value="(!(isAlive) &amp;&amp; !(isSelf)) ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="shipRlevel"/>
					</block>
				</block>
				<block>
					<style>
						<width value="90px"/>
					</style>
					<block type="text">
						<bind name="name" value="'player_tab_ship_' + name"/>
						<style>
							<width value="100%"/>
							<marginTop value="10px"/>
							<textAlign value="left"/>
							<multiline value="false"/>
							<hitTest value="false"/>
						</style>
						<bind name="class" value="	isSelf		? '$FontColorGolden' :
									!isAlive 	? '$FontColorAlmostBlack'
										 		: '$None'"/>
						<styleClass value="$TextDefaultNM"/>
						<bind name="class" value="isSelf ? '$Bold' : '$None'"/>
						<bind name="class" value="'$LetterSpacingSmall'"/>
						<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
						<bind name="class" value="(!(isAlive) &amp;&amp; !(isSelf)) ? '$FontDropShadowWhite' : '$None'"/>
						<bind name="text" value="toUpperCase(tr(shipIDS))"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<bind name="name" value="'player_tab_state_' + name"/>
					<style>
						<width value="22px"/>
						<hitTest value="false"/>
					</style>
					<block>
						<bind name="visible" value="_isBattleLoading ? true : false"/>
						<style>
							<width value="100%"/>
						</style>
						<block className="icon_player_status" type="native">
							<bind name="gotoAndStop!" value="isReady ? 'ready' : 'not_ready'"/>
							<styleClass value="$MiddleAligned"/>
							<styleClass value="$MiddleVAligned"/>
						</block>
					</block>
					<block>
						<bind name="visible" value="_isBattleStats &amp;&amp; fragsCount != 0"/>
						<style>
							<width value="100%"/>
						</style>
						<block type="text">
							<styleClass value="$TextHeaderBigDefault"/>
							<style>
								<textAlign value="center"/>
								<width value="100%"/>
								<multiline value="false"/>
							</style>
							<bind name="text" value="fragsCount"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="SimpleUIListTeamStructureRight">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'players in battle'; 'name'; name; 'playerInCollection'"/>
		<bind name="watch" value="'player'; playerInCollection[0]"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.avatar; id"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'pureName'; 		[]; playerEntity.avatar.pureName"/>
		<bind name="watchDH" value="'clanId'; 		['playerEntity.clanman.evClanIdChanged']; playerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'isBot'; 		[]; playerEntity.avatar.isBot"/>
		<bind name="watchDH" value="'clanTag'; 		['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'hidden'; 		[]; playerEntity.avatar.hidden"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.resource; 'byOwnerId.' + playerEntity.id"/>
		<bind name="watchDH" value="'resourceValue'; ['resourceEntity.progress.evChanged']; resourceEntity.progress.value"/>
		<bind name="visible" value="!(hidden)"/>
		<style>
			<marginTop value="1px"/>
		</style>
		<bind name="appear" value="'startShow'; 0.15; 0.75 + 0.075 * $index; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<block>
			<bind name="style" value="'backgroundColor'; $index % 2 == 0 ? '0x15000000' : '0x25000000'"/>
			<style>
				<backgroundColor value="0x15000000"/>
				<position value="absolute"/>
				<height value="28px"/>
				<width value="100%"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="transition" value="(mouseDown || contextMenuVisible || rollOver) &amp;&amp; !(shipCompareTooltipVisible); 0.1; {alpha: 0}; {alpha: 1}"/>
			<block className="dock_submenu_item_bg" type="native">
				<bind name="transition" value="contextMenuVisible; 0.1; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<bind name="tooltip" value="'BattlePlayerTooltip'; {	_isInBattle: _isBattleStats, _isBot: isBot,
												_player: player, _selfPlayer: _selfPlayer,
												_battleType: battleType}"/>
			<bind name="menu" value="'UIListPlayerContextMenu';	!(isBot)	? {	_player: player, _selfPlayer: _selfPlayer, _battleType: battleType,
																_complaintsAvailable: true, _isBattleLoading: _isBattleLoading, _isBattleStats: _isBattleStats}
															: null; null; 'contextMenuVisible'"/>
		</block>
		<block>
			<bind name="visible" value="_isBattleStats == true &amp;&amp; resourceValue &gt; 0"/>
			<style>
				<position value="absolute"/>
				<right value="-52px"/>
				<top value="10px"/>
			</style>
			<block type="text">
				<style>
					<width value="50px"/>
					<multiline value="false"/>
				</style>
				<bind name="class" value="player.is_self	? '$TextDefaultBoldNM' : '$TextDefaultNM'"/>
				<bind name="class" value="player.is_self	? '$FontColorGolden' : '$None'"/>
				<bind name="text" value="resourceValue"/>
			</block>
		</block>
		<block>
			<style>
				<height value="28px"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="name" value="'player_tab_state_' + name"/>
				<style>
					<width value="22px"/>
					<hitTest value="false"/>
				</style>
				<block>
					<bind name="visible" value="_isBattleLoading ? true : false"/>
					<style>
						<width value="100%"/>
					</style>
					<block className="icon_player_status" type="native">
						<bind name="gotoAndStop!" value="isReady ? 'ready' : 'not_ready'"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="_isBattleStats &amp;&amp; fragsCount != 0"/>
					<style>
						<width value="100%"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<textAlign value="center"/>
							<width value="100%"/>
							<multiline value="false"/>
						</style>
						<bind name="text" value="fragsCount"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="90px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<marginTop value="10px"/>
						<width value="100%"/>
						<textAlign value="right"/>
						<multiline value="false"/>
						<hitTest value="false"/>
					</style>
					<bind name="name" value="'player_tab_ship_' + name"/>
					<bind name="class" value="!isAlive ? '$FontColorAlmostBlack' : '$None'"/>
					<bind name="class" value="!isAlive ? '$FontDropShadowWhite' : '$None'"/>
					<bind name="class" value="'$LetterSpacingSmall'"/>
					<bind name="text" value="toUpperCase(tr(shipIDS))"/>
					<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
				</block>
			</block>
			<block>
				<style>
					<width value="25px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<style>
						<marginTop value="10px"/>
						<width value="100%"/>
						<textAlign value="center"/>
						<multiline value="false"/>
						<hitTest value="false"/>
					</style>
					<bind name="class" value="!isAlive ? '$FontColorAlmostBlack' : '$None'"/>
					<bind name="class" value="!isAlive ? '$FontDropShadowWhite' : '$None'"/>
					<bind name="text" value="shipRlevel"/>
					<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
				</block>
			</block>
			<block>
				<bind name="name" value="'player_tab_icon_' + name"/>
				<style>
					<height value="100%"/>
					<width value="122px"/>
					<marginBottom value="-2px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="style" value="'hitTest'; _isBattleLoading ? true : false"/>
				<bind name="tooltip" value="'ShipSideCompareTooltip';	_isBattleLoading	? { _shipId: shipId, _selfPlayerShipId: _selfPlayer.shipId,
																				_nonPlayerShipParams: shipParams, _isSelf: false, _nickname: name}
																			: null; TooltipBehaviour.simple; null; 'shipCompareTooltipVisible'"/>
				<block>
					<style>
						<width value="100%"/>
						<height value="100%"/>
						<marginLeft value="122px"/>
						<hitTest value="false"/>
					</style>
					<bind name="scaleX" value="-1"/>
					<bind name="style" value="'backgroundImage'; !isAlive ? ('url:' + pathDeadShipIcon) : ('url:' + pathShipTinyIcon)"/>
				</block>
				<bind name="style" value="'alpha'; (isReady || _isBattleStats) ? 1 : 0.7"/>
			</block>
			<block>
				<style>
					<width value="137px"/>
					<marginTop value="10px"/>
				</style>
				<bind name="style" value="'alpha'; (isReady || _isBattleStats ? 1 : 0.75)"/>
				<bind name="name" value="'player_tab_name_' + name"/>
				<block>
					<style>
						<width value="100%f"/>
						<right value="3px"/>
						<position value="absolute"/>
					</style>
					<bind name="instance" value="'PlayerNameAndClanTag'; { 	_isDead: !isAlive, _ttkStatus: ttkStatus, 
															_playerName: pureName, _clanTag: clanTag}"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="25px"/>
					<hitTest value="false"/>
				</style>
				<block>
					<bind name="visible" value="(division &gt; 0) &amp;&amp; !(divisionHidden)"/>
					<style>
						<marginTop value="1px"/>
					</style>
					<block className="division_item" type="native">
						<bind name="gotoAndStop!" value="isInSameDivision ? divisionSign + 1 : divisionSign + 1 + 10"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<right value="12"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'UIListVoiceTextChatIcons'; {	_playerId: id, _isInSameDivision: false,
															_isSpeaking: isSpeaking, _selfPlayerDivisionId: _selfPlayer.divisionId,
															_isVoiceChatMuted: isMuted, _isInVoiceChat: isInVoiceChat}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BattleDivisionInvitationItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="appear" value="'addedToStage'; 0.3; 0.35; {alpha: 0}; {alpha: 1}; 2"/>
		<style>
			<marginLeft value="5px"/>
			<width value="260px"/>
			<height value="123px"/>
			<marginRight value="10px"/>
			<marginBottom value="6px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<bind name="visible" value="(_isBattleStats != true) &amp;&amp; optionData.blurEnabled"/>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap5_feather" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(_isBattleLoading == true) || !(optionData.blurEnabled) || optionData.contrast"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="26px"/>
				<backgroundColor value="0x01000000"/>
				<marginBottom value="4px"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="1px"/>
					<marginLeft value="1px"/>
					<marginTop value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="appear" value="'addedToStage'; 0.3; 0.3; {alpha: 0.5, width: 0}; {alpha: 1, width: 260}; 2"/>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.3; 0; {alpha: 0, top: 30}; {alpha: 1, top: 0}"/>
				<style>
					<left value="3px"/>
					<top value="-4"/>
					<position value="absolute"/>
				</style>
				<block className="icon_formation" type="native">
					<bind name="gotoAndStop!" value="'seeker_division'"/>
				</block>
			</block>
			<block>
				<bind name="appear" value="'addedToStage'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'BattlePlayerContactItemSimple'; {_level: senderLevel, _rank: senderRank, _playerName: playerName, _tkStatus: tkStatus}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="button_close" type="native">
			<bind name="appear" value="'addedToStage'; 0.15; 0.45; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<style>
				<right value="8"/>
				<top value="7"/>
				<position value="absolute"/>
			</style>
			<bind name="action" value="'buttonClick'; 'rejectDivisionInvitation'; {id: id}"/>
			<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'no_icon', _instructionText: 'IDS_REJECT'}], _maxWidth: 250, _isInBattle: _isBattleStats}"/>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.48; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextHeader"/>
				<style>
					<maxWidth value="260"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="'IDS_INVITES_YOU_TO_JOIN_DIVISION'"/>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.51; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="-3px"/>
				<marginBottom value="3px"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeader"/>
				<bind name="class" value="'$FontSizeHeader4'"/>
				<bind name="countdown" value="expirationTime; 'countdownText'; 'mm:ss'"/>
				<bind name="pureText" value="'-' + countdownText"/>
			</block>
		</block>
		<block>
			<style>
				<width value="1px"/>
			</style>
			<bind name="appear" value="'addedToStage'; 0.3; 0.3; {alpha: 0, width: 0}; {alpha: 1, width: 260}; 2"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="appear" value="'addedToStage'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="110px"/>
				<marginTop value="6px"/>
			</style>
			<block className="button_default_small" type="native">
				<style>
					<width value="100%"/>
				</style>
				<bind name="label" value="'IDS_ACCEPT'"/>
				<bind name="action" value="'buttonClick'; 'acceptDivisionInvitation'; {id: id}"/>
			</block>
		</block>
	</block>
	<block className="BattlePlayerContactItemSimple">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="visible" value="_rank == 0"/>
			<styleClass value="$TextSecondary"/>
			<bind name="text" value="_level"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="2px"/>
			</style>
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="_tkStatus ? '$FontColorTeamkiller' : '$None'"/>
			<bind name="text" value="_playerName"/>
		</block>
	</block>
	<block className="BattlePlayerTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'name'; _player.name; 'playerInvitationDataCollection'"/>
		<bind name="watch" value="'playerInvitationData'; playerInvitationDataCollection[0]"/>
		<bind name="primaryEntityDH" value="'entityAccountBattle'; CC.avatar; _player.id"/>
		<bind name="watchDH" value="'entityAccountBattleDbId'; [];  entityAccountBattle.accountSimple.dbId"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId ? _playerDbId : entityAccountBattleDbId"/>
		<bind name="watchDH" value="'isSelf';		[]; playerEntity.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'relation'; 	['playerEntity.relation.evChanged']; playerEntity.relation.value"/>
		<bind name="watchDH" value="'playerEntityDbId'; [];  playerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'ttkStatus'; 			['playerEntity.avatar.evTTKStatusChanged']; playerEntity.avatar.ttkStatus"/>
		<bind name="watchDH" value="'tkStatus'; 			['playerEntity.avatar.evTeamkillStatusChanged']; playerEntity.avatar.tkStatus"/>
		<bind name="watch" value="'isEnemyPlayer';	(relation == 2)"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="320px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="8px"/>
			</style>
			<bind name="instance" value="'PlayerStereotypeDogTag'; {	_player: _player,
													_playerDbId: playerEntityDbId,
													_noClanTagColor: !_isInPostBattle,
													_noRank: !_isInPostBattle,
													_noLevel: true,
													_isBot: _isBot,
													_tkStatus: tkStatus,
													_ttkStatus: ttkStatus }"/>
		</block>
		<block>
			<bind name="visible" value="_player.isInSameDivision == true"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="-4px"/>
					<marginLeft value="5px"/>
					<marginRight value="5px"/>
				</style>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: false, isCommander: _player.isDivisionCommander, isReady: true,
														isInBattle: false, _formationType: 'division'}"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorGolden'"/>
					<bind name="watch" value="'playerRoleStr'; 	_player.isDivisionCommander	? tr('IDS_DIVISION_COMMANDER_C')
																			: tr('IDS_IN_DIVISION')"/>
					<bind name="text" value="playerRoleStr"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BattlePlayerInfoTooltipVoiceChatStatus';	(!(isEnemyPlayer) &amp;&amp;
																	(_player.isInSameDivision || (_battleType == BattleTypes.CLAN_BATTLE)))	? { _isSelf: isSelf,
																																				_player: _player}
																																			: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'PlayerTooltipInvitationCountdown'; playerInvitationData.expirationTime != null	? { _expirationTime: playerInvitationData.expirationTime,
																											_formationType: 'division',
																											_text: 'IDS_INVITED_IN_DIVISION'}
																										: null"/>
		</block>
		<block>
			<bind name="visible" value="!(isSelf) &amp;&amp; !(_isBot)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'MouseInstruction'; {_type: 'right', _instructionText: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU', _maxWidth: 220}"/>
			</block>
		</block>
	</block>
	<block className="BattlePlayerInfoTooltipVoiceChatStatus">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'VoiceChatState'"/>
		<bind name="watch" value="'voiceChatStatusText';	_isSelf						?	VoiceChatState.enabled	? 	'IDS_VOICE_CHAT_ENABLED'
																								:	'IDS_VOICE_CHAT_DISABLED' :
										!(_player.isInVoiceChat)	?	'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT'	:
										_player.isMuted				?	'IDS_PLAYER_IS_MUTED_IN_VOICE_CHAT'
																	:	'IDS_PLAYER_IS_AVAILABLE_IN_VOICE_CHAT'"/>
		<bind name="watch" value="'state';	_isSelf 					? !(VoiceChatState.enabled)	? 'disabled'
																					: 'speak' :
							!(_player.isInVoiceChat) 	? 'disabled' :
							_player.isMuted				? 'muted'
														: 'speak'"/>
		<bind name="visible" value="(_isSelf || VoiceChatState.enabled)"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="10px"/>
				<marginRight value="8px"/>
				<marginTop value="4px"/>
				<marginBottom value="5px"/>
			</style>
			<block className="icon_voice_chat_small" type="native">
				<style>
					<top value="6px"/>
					<marginRight value="4px"/>
				</style>
				<bind name="gotoAndStop!" value="state"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="(state == 'speak' ? '$FontColorWhite' : '$FontColorUnready')"/>
				<style>
					<maxWidth value="210"/>
				</style>
				<bind name="text" value="voiceChatStatusText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PlayerTooltipInvitationCooldown">
		<bind name="countdown" value="_expirationTime; 'countdownText'; 'mm:ss'"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginLeft value="7px"/>
				<marginRight value="4px"/>
				<marginBottom value="3px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginRight value="6px"/>
				</style>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true, _formationType: _formationType}"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
						<maxWidth value="158"/>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorWhite'"/>
					<bind name="text" value="_text"/>
				</block>
				<block type="text">
					<style>
						<top value="-4px"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<styleClass value="$AlignRight"/>
					<bind name="class" value="'$FontSizeHeader6'"/>
					<bind name="pureText" value="'-' + countdownText"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="UIlistTeamStructureHeaderLeft">
		<bind name="primaryEntityDH" value="'allyPlayerEntity'; CC.avatar; _allyPlayerEntityId"/>
		<bind name="primaryEntityDH" value="'allyClanEntity'; CC.clan; allyPlayerEntity.clanman.clanId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'allyClanTag'; 	['allyClanEntity.clan.evTagChanged']; _allyClanTag	? _allyClanTag	: allyClanEntity.clan.tag"/>
		<bind name="watchDH" value="'allyRealm'; 	[];	_allyRealm	 ? _allyRealm	: allyPlayerEntity.accountRealm.realm"/>
		<bind name="watchDH" value="'allySquadId'; 	[];	_allySquadId ? _allySquadId	: allyPlayerEntity.accountClanSquad.id"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'isBrawl'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.isBrawl"/>
		<bind name="watch" value="'allySquadIds'; isBrawl 			? '' :
								 (allySquadId == 1) ? 'IDS_CLAN_SQUAD_1'
								 					: 'IDS_CLAN_SQUAD_2'"/>
		<bind name="appear" value="'startShow'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="style" value="'width'; _width"/>
		<block className="cell_background" type="native">
			<style>
				<width value="100%"/>
			</style>
			<bind name="gotoAndStop!" value="1"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="visible" value="_battleType != 'ClanBattle'"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<marginLeft value="16px"/>
						<marginTop value="2px"/>
						<marginBottom value="2px"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="teamId == 100 ? 'IDS_DIVISION_0' : 'IDS_ALLY_TEAM'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_battleType == 'ClanBattle'"/>
				<style>
					<width value="100%"/>
					<marginLeft value="16px"/>
					<marginTop value="8px"/>
					<position value="absolute"/>
				</style>
				<block type="text">
					<style>
						<alpha value="0.7"/>
						<marginTop value="1px"/>
					</style>
					<styleClass value="$TextDefaultBold21NM"/>
					<bind name="text" value="tr(toUpperCase(allyRealm))"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="16px"/>
					</style>
					<styleClass value="$TextDefaultBold21NM"/>
					<bind name="text" value="tr('[' + allyClanTag + ']') + ' ' + tr(allySquadIds)"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="_isBattleStats ? true : false"/>
				<style>
					<position value="absolute"/>
					<right value="0px"/>
				</style>
				<styleClass value="$TableHeaderIconSize"/>
				<block className="sorting" type="native">
					<styleClass value="$MiddleAligned"/>
					<bind name="gotoAndStop!" value="'frags'"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="UIlistTeamStructureHeaderRight">
		<bind name="primaryEntityDH" value="'enemyPlayerEntity'; CC.avatar; _enemyPlayerEntityId"/>
		<bind name="primaryEntityDH" value="'enemyClanEntity'; CC.clan; enemyPlayerEntity.clanman.clanId"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'enemyClanTag'; 	['enemyClanEntity.clan.evTagChanged']; 	_enemyClanTag 	? _enemyClanTag	: enemyClanEntity.clan.tag"/>
		<bind name="watchDH" value="'enemyRealm'; 	[];	_enemyRealm 	? _enemyRealm	: enemyPlayerEntity.accountRealm.realm"/>
		<bind name="watchDH" value="'enemySquadId'; 	[];	_enemySquadId 	? _enemySquadId	: enemyPlayerEntity.accountClanSquad.id"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'isBrawl'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.isBrawl"/>
		<bind name="watch" value="'enemySquadIds'; 	isBrawl 			? '' :
									(enemySquadId == 1) ? 'IDS_CLAN_SQUAD_1'
														: 'IDS_CLAN_SQUAD_2'"/>
		<bind name="appear" value="'startShow'; 0.15; 0.6; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="style" value="'width'; _width"/>
		<block className="cell_background" type="native">
			<style>
				<width value="100%"/>
			</style>
			<bind name="gotoAndStop!" value="2"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="visible" value="_isBattleStats ? true : false"/>
				<styleClass value="$TableHeaderIconSize"/>
				<block className="sorting" type="native">
					<styleClass value="$MiddleAligned"/>
					<bind name="gotoAndStop!" value="'frags'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_battleType != 'ClanBattle'"/>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<textAlign value="right"/>
						<marginRight value="16px"/>
						<marginTop value="2px"/>
						<marginBottom value="2px"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="teamId == 100 ? 'IDS_DIVISION_1' : 'IDS_ENEMY_TEAM'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="_battleType == 'ClanBattle'"/>
				<style>
					<marginTop value="8px"/>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<textAlign value="right"/>
						<marginRight value="16px"/>
					</style>
					<styleClass value="$TextDefaultBold21NM"/>
					<bind name="text" value="tr(enemySquadIds) + ' ' + tr('[' + enemyClanTag + ']')"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefaultBold21NM"/>
					<style>
						<alpha value="0.7"/>
						<marginTop value="1px"/>
						<marginRight value="16px"/>
					</style>
					<bind name="text" value="tr(toUpperCase(enemyRealm))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DropdownInfotip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<style>
			<width value="1px"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '100px'"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="-9px"/>
				<marginRight value="-14px"/>
				<marginBottom value="-19px"/>
				<marginLeft value="-14px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="_dropdownContentElement; { _menuScope: _menuScope }"/>
		</block>
	</block>
	<block className="InstructionParagraph">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 220"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="InstructionParagraphNM">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<bind name="class" value="_class ? _class : '$TextDefaultNM'"/>
			<style>
				<width value="100%"/>
				<alpha value="0.7"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 220"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="InstructionMultiParagraph">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block className="icon_instruction" type="native">
			<bind name="gotoAndStop!" value="_type"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-3px"/>
			</style>
			<bind name="repeat" value="_instructionArray; 'InstructionParagraph'"/>
		</block>
	</block>
	<block className="InstructionWarning">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_warning_orange" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-4px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextOrange"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="InstructionRestricion">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_restrict_red" type="native"/>
		<block type="text">
			<style>
				<marginTop value="-3px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<styleClass value="$WarningTextRed"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="InstructionIsOwned">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_check" type="native"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="'$FontColorGolden'"/>
			<style>
				<marginTop value="2px"/>
				<marginLeft value="8px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstruction">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="_type!='no_icon'"/>
			<block className="icon_mouse" type="native">
				<bind name="gotoAndStop!" value="_type"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; (_type=='no_icon') ? '0px' : '4px'"/>
			<style>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="MouseInstructionRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '0px'"/>
		<bind name="instance" value="'MouseInstruction'; _type == 'warning' || _type == 'restriction'	? null
																						: { _type: _type, _instructionText: _instructionText,
																							_maxWidth: _maxWidth, _leading: _leading}"/>
		<bind name="instance" value="'InstructionWarning'; _type == 'warning' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
		<bind name="instance" value="'InstructionRestricion'; _type == 'restriction' ? {_instructionText: _instructionText, _maxWidth: _maxWidth, _leading: _leading} : null"/>
	</block>
	<block className="CheckedLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<block className="icon_check" type="native">
			<style>
				<marginLeft value="2px"/>
				<marginTop value="8px"/>
			</style>
			<bind name="visible" value="!_isCheckMarkHidden"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<width value="288px"/>
				<marginTop value="-2px"/>
				<multiline value="false"/>
			</style>
			<bind name="class" value="'$FontColorGolden'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'marginLeft'; _isCheckMarkHidden ? '0' : '5px'"/>
			<bind name="text" value="_checkedLineText"/>
		</block>
	</block>
	<block className="CheckedLineRepeater">
		<bind name="style" value="'marginBottom'; $index != _lastIndex ? '6px' : '-2px'"/>
		<bind name="instance" value="'CheckedLine'; { _isCheckMarkHidden: _isCheckMarkHidden, _checkedLineText: _checkedLineText, _maxWidth: _maxWidth}"/>
	</block>
	<block className="InstructionBigTech">
		<style>
			<flow value="horizontal"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 500"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<block className="DockTopMenuLinkText">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<block type="text">
			<styleClass value="$TextDockNano"/>
			<bind name="class" value="rollOver &amp;&amp; !(mouseDown) ? '$FontColorDefault' : '$None'"/>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="EmptyStatusParagraph">
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="_sizeClass ? _sizeClass : '$FontSizeLarge'"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 250"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="InvertableTextLine">
		<block type="text">
			<bind name="name" value="_name"/>
			<bind name="class" value="_invert ? _normalClass : _invertedClass"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.35"/>
				<top value="1px"/>
			</style>
			<bind name="style" value="'multiline'; _width ? false : true"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="class" value="_invert ? _normalClass : _invertedClass"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.1"/>
				<top value="-1px"/>
			</style>
			<bind name="style" value="'multiline'; _width ? false : true"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="class" value="_invert ? _normalClass : _invertedClass"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.2"/>
				<left value="1px"/>
			</style>
			<bind name="style" value="'multiline'; _width ? false : true"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="class" value="_invert ? _normalClass : _invertedClass"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.2"/>
				<left value="-1px"/>
			</style>
			<bind name="style" value="'multiline'; _width ? false : true"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
			<bind name="text" value="_text"/>
		</block>
		<block type="text">
			<bind name="class" value="_invert ? _invertedClass : _normalClass"/>
			<bind name="style" value="'multiline'; _width ? false : true"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ResizeFrame">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<bind name="visible" value="!(restrict.up)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_UP'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<top value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_top"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_DOWN'"/>
			<style>
				<position value="absolute"/>
				<width value="100%"/>
				<height value="6px"/>
				<bottom value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_bottom"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.left)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<left value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.right)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="6px"/>
				<height value="100%"/>
				<right value="-3px"/>
				<backgroundColor value="0x01ff0000"/>
			</style>
			<params>
				<param name="name" value="grip_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.left)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_UP_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.up || restrict.right)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_UP_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<top value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_top_right"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.left)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_DOWN_LEFT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<left value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_left"/>
			</params>
		</block>
		<block>
			<bind name="visible" value="!(restrict.down || restrict.right)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; 'HANGAR_DRAGGING_DOWN_RIGHT'"/>
			<style>
				<position value="absolute"/>
				<width value="12px"/>
				<height value="12px"/>
				<bottom value="-5px"/>
				<right value="-5px"/>
				<backgroundColor value="0x0100ff00"/>
			</style>
			<params>
				<param name="name" value="grip_bottom_right"/>
			</params>
		</block>
	</block>
	<css name="$WarningTextRed">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF6600"/>
	</css>
	<css name="$WarningTextOrange">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF9933"/>
	</css>
	<block className="WarningMessage">
		<bind name="appear" value="'addedToStage'; 0.15; _delay; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; 2"/>
		<bind name="var" value="{errorStringsToShowSupportLinkFor: [
		tr('IDS_ACCOUNT_ERROR_ALL_SPA_LOGIN_ALREADY_TAKEN')
	]}"/>
		<block type="text">
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 280"/>
			<bind name="class" value="_highWarning ? '$WarningTextRed' : '$WarningTextOrange'"/>
			<style>
				<textAlign value="center"/>
			</style>
			<bind name="text" value="_text"/>
		</block>
		<block>
			<bind name="visible" value="errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="instance" value="'LinkText'; errorStringsToShowSupportLinkFor.indexOf(_text) &gt; -1 	? {
																								_label: 'IDS_LINK_SUPPORT', 
																								_urlIdent: URL.SUPPORT, 
																								_tooltipText: 'IDS_LINK_SUPPORT_HINT', 
																								_name: 'ButtonSupport'} 
																							: null"/>
		</block>
	</block>
	<block className="WrongTextInputNotification">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: _startTop ? _startTop : 10}; {alpha: 1, top: 0}; 2"/>
		<style>
			<width value="100%"/>
			<marginRight value="-1px"/>
			<marginLeft value="-1px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="1px"/>
				<marginBottom value="0px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="button_close" type="native">
			<bind name="visible" value="_showCloseBtn == true"/>
			<style>
				<right value="8"/>
				<top value="7"/>
				<position value="absolute"/>
			</style>
			<bind name="dispatch" value="'buttonClick'; 'hideWrongMessageEv'; {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="7px"/>
			</style>
			<bind name="instance" value="'WarningMessage'; true	? { _delay: 0.07, _startTop: _startTop, _messageHiglight: _messageHiglight, _maxWidth: _maxWidth, _text: _text}
												: null"/>
		</block>
		<bind name="dispatch" value="'click'; 'hideWrongMessageEv'; {}"/>
	</block>
	<block className="MultiParagraphHelpTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="330px"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '330px'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="GUIContrast">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="watch" value="'iconType'; _iconType ? _iconType : 'question'"/>
			<block className="icon_question_mark" type="native">
				<bind name="visible" value="iconType == 'question'"/>
				<style>
					<marginRight value="6px"/>
					<marginTop value="4px"/>
				</style>
			</block>
			<block className="icon_info_big" type="native">
				<bind name="visible" value="iconType == 'info'"/>
				<style>
					<marginRight value="6px"/>
					<marginTop value="4px"/>
				</style>
			</block>
			<block className="mc_icon_ship" type="native">
				<bind name="visible" value="iconType == 'ship' &amp;&amp; _shipType != 'premiumShip'"/>
				<style>
					<marginRight value="6px"/>
					<marginTop value="10px"/>
				</style>
				<bind name="style" value="'marginLeft'; _shipType == 'Destroyer' ? '-2px' : '2px'"/>
				<bind name="gotoAndStop!" value="_shipType"/>
			</block>
			<block type="text">
				<style>
					<top value="1px"/>
				</style>
				<bind name="style" value="'maxWidth'; _width ? _width - 60 : 270"/>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="class" value="_shipType == 'premiumShip' ? '$FontColorGolden' : '$FontColorWhite'"/>
				<bind name="text" value="_tooltipHeader"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<style>
					<marginLeft value="12px"/>
					<marginRight value="12px"/>
					<marginTop value="9px"/>
					<marginBottom value="3px"/>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_multiParagraphArray; 'RepeatParagraphItem'; {_maxWidth: _width - 24}"/>
			</block>
		</block>
	</block>
	<block className="RepeatParagraphItem">
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '6px'"/>
		<bind name="class" value="_middleAligned ? '$MiddleAligned' : ''"/>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="_class"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 300"/>
			<bind name="substitute" value="_substitute.imageOffset ? _substitute.imageOffset : 0;
						  _substitute.map ? _substitute.map : {};
						  (_toUpperCase ? toUpperCase(tr(_paragraphText)) : _paragraphText)"/>
		</block>
	</block>
	<block className="RepeatParagraphItemNM">
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '16px'"/>
		<bind name="class" value="_middleAligned ? '$MiddleAligned' : ''"/>
		<bind name="watch" value="'textItem'; _isTextInValue ? $value : _paragraphText"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<bind name="class" value="_class"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="style" value="'textAlign'; _textAlign ? _textAlign : 'left'"/>
			<bind name="style" value="'maxWidth'; _maxWidth	? _maxWidth :
									_width	? 3000
											: 300"/>
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="substitute" value="_substitute.imageOffset ? _substitute.imageOffset : 0;
							_substitute.map ? _substitute.map : {}; (_toUpperCase ? toUpperCase(tr(textItem)) : textItem)"/>
		</block>
	</block>
	<block className="GUIContrast">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<styleClass value="$FullsizeAbsolute"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
	</block>
	<block className="CheckBox">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="style" value="'alpha'; isEnabled ? 1 : 0.7"/>
		<block className="checkbox_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="enabled" value="isEnabled"/>
			<bind name="selected" value="isEnabled ? switchProperty : false"/>
		</block>
		<block type="text">
			<bind name="style" value="'alpha'; isEnabled ? 1 : 0.4"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginLeft value="23px"/>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxTfWidth ? _maxTfWidth : 300"/>
			<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) &amp;&amp; isEnabled; 0.07; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; 2"/>
			<bind name="text" value="label"/>
		</block>
	</block>
	<block className="IconSlimClient">
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: _isEventLike ? 'IDS_ENTER_IN_FULL_VERSION_FOR_ANNOUNCE_SHIPS' : 'IDS_ENTER_IN_FULL_VERSION_FOR_SHIPS'}"/>
		<block className="game_downloading" type="native"/>
	</block>
	<block className="BannerButtonInstance">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="transition" value="rollOver; 0.07; {alpha: 0.85}; {alpha: 0.95}"/>
		<style>
			<width value="217px"/>
			<height value="60px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="name" value="_input"/>
		<bind name="input"/>
		<bind name="action" value="'click'; _action ? _action : null"/>
		<bind name="action" value="'click'; 'log'; { event: 'click:banner.' + _logItemName }"/>
		<block className="button_infopanel_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="100%"/>
				<marginRight value="8px"/>
				<marginLeft value="12px"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="37px"/>
					<height value="100%"/>
				</style>
				<block>
					<bind name="style" value="'width'; _iconSize"/>
					<bind name="style" value="'height'; _iconSize"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="style" value="'backgroundImage'; _iconUrl"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<hitTest value="false"/>
						<alpha value="0.85"/>
					</style>
					<styleClass value="$TextDefaultBold17NM"/>
					<bind name="text" value="_label"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipIcon">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<style>
			<width value="27px"/>
			<height value="27px"/>
		</style>
		<block>
			<style>
				<marginTop value="-1px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/ship_classes/icon_' + toLowerCase(shipInfo.subtype) + '_' + (
					shipInfo.uiSpecial	? 'special' :
					shipInfo.isFarming	? 'premium' :
			upgradableShipInfo.isElite	? 'elite'
										: 'standard'
			) + '.png'"/>
		</block>
	</block>
	<block className="ShipStereotype">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<block>
			<bind name="instance" value="'ShipIcon'; {_shipId: _shipId}"/>
		</block>
		<block type="text">
			<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevel">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<style>
			<flow value="horizontal"/>
			<height value="27px"/>
		</style>
		<block>
			<style>
				<marginLeft value="1px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipId: _shipID}"/>
		</block>
		<block>
			<style>
				<marginLeft value="3px"/>
				<marginTop value="-2px"/>
			</style>
			<block type="text">
				<bind name="class" value="_size == 'medium' ? '$TextHeaderBold' : '$TextHeaderWhiteBold'"/>
				<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontColorGolden' : '$None'"/>
				<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
			</block>
		</block>
	</block>
	<block className="ShipTitleWithIconAndSilhouette">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="instance" value="'ShipIcon'; {_shipId: _shipID}"/>
		</block>
		<block>
			<style>
				<marginLeft value="6px"/>
				<marginTop value="-2px"/>
			</style>
			<block type="text">
				<styleClass value="$FontShipnameWhite"/>
				<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontShipnameGolden' : '$FontShipnameWhite'"/>
				<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
			</block>
		</block>
	</block>
	<block className="CharCounter">
		<bind name="transition" value="_string.length &gt; 0; 0.15; {alpha: 0, top:10}; {alpha: 1, top:0}; {alpha: 0, top:10}; 1; 0"/>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CHARS_LEFT'}"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="_string.length &gt; _maxChars ? '$FontColorUnready' : '$FontColorDefault'"/>
			<bind name="style" value="'alpha'; _string.length &gt; _maxChars ? 1 : 0.6"/>
			<bind name="text" value="_maxChars - _string.length"/>
		</block>
	</block>
	<block className="BusyIndicator">
		<bind name="fade" value="_showBusyIndicator; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1; 0.3"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<block className="indicator_busy_small" type="native"/>
		</block>
		<block type="text">
			<bind name="visible" value="_label.length &gt; 0"/>
			<styleClass value="$TextDefaultTech"/>
			<bind name="class" value="'$Bold'"/>
			<style>
				<marginLeft value="6px"/>
				<marginTop value="-2px"/>
			</style>
			<bind name="text" value="toUpperCase(tr(_label))"/>
		</block>
	</block>
	<block className="FormationPlayerIcon">
		<style>
			<width value="15px"/>
		</style>
		<bind name="watch" value="'postfix'; isOtherDivision ? '_other_division' : ''"/>
		<block className="formation_player_status" type="native">
			<style>
				<marginTop value="3px"/>
			</style>
			<bind name="gotoAndStop!" value="_isEmptySlot					?	('empty_slot_' + _formationType) :
							isInBattle						?	('player_in_battle_' + _formationType + postfix) :
							_isWardog &amp;&amp; isReady			?	('player_ready_' + _formationType + '_merc') :
							_isWardog &amp;&amp; !isReady			?	('player_not_ready_' + _formationType + '_merc') :
							isCommander &amp;&amp; isReady			?	('commander_' + _formationType + postfix) :
							isCommander &amp;&amp; !isReady			?	('commander_not_ready_' +_formationType + postfix) :
							!isCommander &amp;&amp; isReady			?	('player_ready_' + _formationType + postfix) :
							!isCommander &amp;&amp; !isReady		?	('player_not_ready_' + _formationType + postfix)
															:	'empty_slot_division'"/>
		</block>
	</block>
	<css name="$TextBackBtn">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="17"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<block className="BackButton">
		<style>
			<height value="30px"/>
		</style>
		<block className="button_dock" type="native">
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: _text}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="dispatch" value="'buttonClick'; _event	 ? _event  : null; _eventData	 ? _eventData : {}"/>
			<bind name="action" value="'buttonClick'; _action	 ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<params>
				<param name="focusable" value="false"/>
			</params>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block className="icon_navigate" type="native">
				<bind name="gotoAndStop!" value="'left'"/>
				<style>
					<marginLeft value="6px"/>
				</style>
			</block>
			<block>
				<bind name="name" value="_name ? _name : '' "/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="2px"/>
					<marginRight value="7px"/>
				</style>
				<block>
					<style>
						<marginTop value="-4px"/>
					</style>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.4"/>
							<top value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.2"/>
							<top value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.2"/>
							<left value="1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorAlmostBlack'"/>
						<style>
							<position value="absolute"/>
							<alpha value="0.2"/>
							<left value="-1px"/>
						</style>
						<bind name="text" value="_text"/>
					</block>
					<block type="text">
						<styleClass value="$TextBackBtn"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="text" value="_text"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PlayerNameAndClanTag">
		<bind name="watch" value="'clanTagColor'; ('0xff' + _clanTagColor)"/>
		<bind name="watch" value="'haveClanTag'; _clanTag != null &amp;&amp;
								_clanTag != ''"/>
		<bind name="watch" value="'isColoredClanTag'; (haveClanTag &amp;&amp; !_noClanTagColor &amp;&amp; _clanTagColor != null)"/>
		<bind name="watch" value="'playerName'; 	isColoredClanTag 	?	_playerName :
								haveClanTag			?	('[' + _clanTag + ']' + _playerName)
													: _playerName"/>
		<bind name="watch" value="'fontColor'; 	_isAccountButton	?	_ctkStatus			? '$FontColorCompareNegative' :
														_tkStatus 			? '$FontColorTeamkiller' :
														_isPremiumAccount	? '$FontColorGold'
																			: '$FontColorBlueish':
								_isSelf 			? 	_ttkStatus 			? '$FontColorTTK' :
														_ctkStatus			? '$FontColorCompareNegative' :
														_tkStatus 			? '$FontColorTeamkiller'
																			: '$FontColorGolden':
								!_isDead 			?  	_ttkStatus 			? '$FontColorTTK' :
														_isInSameDivision 	? '$FontColorGolden' :
														_tkStatus 			? '$FontColorTeamkiller'												
																			: '$FontColorWhite'
													: '$FontColorAlmostBlack'"/>
		<style>
			<hitTest value="false"/>
			<flow value="horizontal"/>
			<width value="100%f"/>
		</style>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
			</style>
			<bind name="visible" value="isColoredClanTag == true"/>
			<style>
				<multiline value="false"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'fontSize'; _fontSize ? _fontSize : 15"/>
			<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
			<bind name="style" value="'textColor'; clanTagColor"/>
			<bind name="text" value="tr('[' + _clanTag + ']')"/>
		</block>
		<block type="text">
			<style>
				<marginLeft value="3px"/>
				<multiline value="false"/>
				<width value="100%f"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'fontSize'; _fontSize ? _fontSize : 15"/>
			<bind name="class" value="_isSelf 	? '$Bold' : '$None'"/>
			<bind name="class" value="(_isDead &amp;&amp; !_isSelf ? '$FontDropShadowWhite' : '$None')"/>
			<bind name="class" value="fontColor"/>
			<bind name="text" value="playerName"/>
		</block>
	</block>
	<block className="HotkeyWithText">
		<bind name="dispatch" value="'click'; _event	? _event  	: null; _eventData	 	? _eventData 	: {}"/>
		<bind name="action" value="'click'; _action	? _action 	: null; _actionParams 	? _actionParams : {}"/>
		<bind name="request" value="'click'; _request 	? _request 	: null; _requestParams 	? _requestParams: {}"/>
		<bind name="tooltip" value="'SimpleTooltip'; _tooltipText ? { tooltipText: _tooltipText } : null; 0"/>
		<block className="hotkey_holder_white_9slice" type="native">
			<block type="text">
				<style>
					<marginLeft value="3px"/>
					<marginRight value="3px"/>
					<marginTop value="-1px"/>
					<marginBottom value="-1px"/>
				</style>
				<styleClass value="$BlackLabel"/>
				<bind name="text" value="_text"/>
			</block>
		</block>
	</block>
	<block className="NavigationButton">
		<style>
			<marginBottom value="1px"/>
		</style>
		<block className="button_navigation_small" type="native">
			<bind name="name" value="_name"/>
			<bind name="label" value="_label"/>
			<bind name="selected" value="_selectedIndex == $index"/>
			<bind name="dispatch" value="'click'; 'evClicked'; { selectedIndex: $index }"/>
		</block>
	</block>
	<block className="RewardItemWithStamp">
		<block>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _backgroundImage"/>
			<bind name="scaleX" value="_scale ? _scale : 1"/>
			<bind name="scaleY" value="_scale ? _scale : 1"/>
			<bind name="ubScaleX" value="_scale ? _scale : 1"/>
			<bind name="ubScaleY" value="_scale ? _scale : 1"/>
		</block>
		<block>
			<bind name="scaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="scaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleX" value="_scale ? (_scale - 0.14) : 0.86"/>
			<bind name="ubScaleY" value="_scale ? (_scale - 0.14) : 0.86"/>
			<style>
				<position value="absolute"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
				<top value="46%"/>
				<left value="42%"/>
			</style>
			<block className="icon_issued" type="native">
				<bind name="gotoAndStop!" value="_issued	? 'issued' : 'not_issued'"/>
				<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
				<bind name="rotation" value="-2"/>
			</block>
		</block>
	</block>
	<block className="GiftBoxIconSmall">
		<block className="icon_giftbox_small" type="native">
			<bind name="scaleX" value="_scale ? _scale : 1"/>
			<bind name="scaleY" value="_scale ? _scale : 1"/>
			<bind name="gotoAndStop!" value="'normal'"/>
		</block>
		<block className="icon_issued_small" type="native">
			<style>
				<position value="absolute"/>
				<top value="55%"/>
				<left value="50%"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
			</style>
			<bind name="scaleX" value="_scale ? (_scale - 0.04) : 0.96"/>
			<bind name="scaleY" value="_scale ? (_scale - 0.04) : 0.96"/>
			<bind name="rotation" value="-2"/>
			<bind name="gotoAndStop!" value="_issued	? 'issued' : 'not_issued'"/>
			<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
		</block>
	</block>
	<block className="GiftBoxIconBig">
		<block className="icon_giftbox" type="native">
			<bind name="scaleX" value="_scale ? _scale : 1"/>
			<bind name="scaleY" value="_scale ? _scale : 1"/>
			<bind name="gotoAndStop!" value="'normal'"/>
		</block>
		<block className="icon_issued" type="native">
			<style>
				<position value="absolute"/>
				<top value="55%"/>
				<left value="50%"/>
				<alpha value="0.9"/>
				<hitTest value="false"/>
			</style>
			<bind name="scaleX" value="_scale ? (_scale - 0.04) : 0.96"/>
			<bind name="scaleY" value="_scale ? (_scale - 0.04) : 0.96"/>
			<bind name="rotation" value="-2"/>
			<bind name="gotoAndStop!" value="_issued	? 'issued' : 'not_issued'"/>
			<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
		</block>
	</block>
	<block className="ColorTransformPicker">
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'redMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'greenMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'blueMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 1, _minimum: 0, _step: 0.01, _value:1, _name:'alphaMultiplier'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'redOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'greenOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'blueOffset'}"/>
		<bind name="instance" value="'ColorTransformSlider'; {_maximum : 255, _minimum: -255, _step: 1, _value:0, _name:'alphaOffset'}"/>
	</block>
	<block className="ColorTransformSlider">
		<style>
			<marginTop value="20px"/>
		</style>
		<block>
			<bind name="dispatch" value="'value'+varChanged; 'colorTransformChanged'; [_name, value]"/>
			<block>
				<style>
					<maxHeight value="500"/>
					<overflow value="scroll"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<styleClass value="$DefaultScrollBar"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<textColor value="0xffffffff"/>
						<maxWidth value="600"/>
						<marginBottom value="3px"/>
					</style>
					<bind name="text" value="'_name: ' + (_name)"/>
				</block>
			</block>
			<block>
				<style>
					<maxHeight value="500"/>
					<overflow value="scroll"/>
					<backgroundColor value="0x80000000"/>
				</style>
				<styleClass value="$DefaultScrollBar"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<textColor value="0xffffffff"/>
						<maxWidth value="600"/>
						<marginBottom value="3px"/>
					</style>
					<bind name="text" value="'value: ' + (value)"/>
				</block>
			</block>
			<block>
				<bind name="mc" value="'slider_default'; ['valueChange']; ['value']; {maximum:_maximum, minimum:_minimum, step:_step, value:_value}"/>
			</block>
		</block>
	</block>
	<block className="AchievementRenderer">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'achievements'; (_id ? _id : $value); 'achievement'"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block>
			<bind name="instance" value="'AchievementIcon'; {_id: (_id ? _id : $value)}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginLeft value="10px"/>
				<marginTop value="-1px"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeaderWhiteBold"/>
				<style>
					<width value="100%"/>
					<maxWidth value="222"/>
					<textAlign value="left"/>
				</style>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="achievement.nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefaultTech"/>
				<style>
					<marginTop value="-3px"/>
					<maxWidth value="220"/>
					<textAlign value="left"/>
				</style>
				<bind name="class" value="'$FontColorWhite'"/>
				<bind name="text" value="achievement.subtypeIDS"/>
			</block>
		</block>
	</block>
	<block className="StatusLine">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK				? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE			? SC.Ui_styles.SERVICE_COLORS.RED	:
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING			? SC.Ui_styles.SERVICE_COLORS.RED	:
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT			? SC.Ui_styles.SERVICE_COLORS.WHITE
																									: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor == SC.Ui_styles.SERVICE_COLORS.ORANGE	? 1 :
									textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? 1 :
									textColor == SC.Ui_styles.SERVICE_COLORS.RED		? 1
																							: 0.9"/>
		<block>
			<style>
				<width value="19px"/>
				<height value="19px"/>
				<marginTop value="-3px"/>
				<marginLeft value="-3px"/>
				<marginBottom value="-7px"/>
				<marginRight value="5px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/unified_status_icons/icon_' + _unifiedStatus + '.png'"/>
		</block>
		<block type="text">
			<bind name="style" value="'width'; _width ? _width : 'auto'"/>
			<bind name="class" value="_textClass ? _textClass : '$TextDefaultNM'"/>
			<bind name="style" value="'leading'; _leading ? _leading : -3"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="DefaultButton">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="name" value="_containerName ? _containerName : null"/>
		<block className="button_default" type="native">
			<bind name="style" value="'width'; _width ? _width : '100%'"/>
			<bind name="label" value="_label"/>
			<bind name="focus" value="_focusIndex; _defaultFocused"/>
			<bind name="focusable" value="_focusIndex ? true : false"/>
			<bind name="enabled" value="_enabled &amp;&amp; (_isTransactionBtn ? !(operationsAccountLocked) : true)"/>
			<bind name="event" value="'buttonClick'; _method ? _method : null"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams"/>
			<bind name="name" value="_name ? _name : null"/>
			<bind name="input"/>
			<block>
				<bind name="visible" value="_isExternal == true"/>
				<style>
					<position value="absolute"/>
					<top value="7px"/>
					<right value="4px"/>
					<hitTest value="false"/>
				</style>
				<block className="icon_out_grey" type="native"/>
			</block>
		</block>
	</block>
	<block className="DefaultButtonBig">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="name" value="_containerName ? _containerName : null"/>
		<block className="button_default_big" type="native">
			<style>
				<width value="100%"/>
			</style>
			<bind name="name" value="_name ? _name : null"/>
			<bind name="input"/>
			<bind name="label" value="_label"/>
			<bind name="enabled" value="_enabled &amp;&amp; (_isTransactionBtn ? !(operationsAccountLocked) : true)"/>
			<bind name="event" value="'buttonClick'; _method ? _method : null"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
		</block>
	</block>
	<css name="$ResizeableButtonLabelWithoutAlignment">
		<marginLeft value="16px"/>
		<marginRight value="16px"/>
	</css>
	<block className="DefaultButtonCostMedium">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="tooltip" value="'DiscountTooltip'; priceInfo.basePrice &amp;&amp; (priceInfo.finalPrice != priceInfo.basePrice) ? { priceInfo: priceInfo, _isExternal: _isExternal } : null"/>
		<style>
			<width value="1px"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'height'; _height ? _height : 'auto'"/>
		<bind name="name" value="_name ? _name : null"/>
		<block className="button_default_no_label" type="native">
			<style>
				<width value="1px"/>
			</style>
			<bind name="style" value="'width'; _width ? _width : '100%'"/>
			<bind name="style" value="'height'; _height ? _height : 'auto'"/>
			<bind name="focus" value="_focusIndex; _defaultFocused"/>
			<bind name="enabled" value="_enabled &amp;&amp; (_isTransactionBtn ? !(operationsAccountLocked) : true)"/>
			<bind name="dispatch" value="'buttonClick'; _dispatchEvent ? _dispatchEvent : null"/>
			<bind name="event" value="'buttonClick'; _method ? _method : null"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="selected" value="_selected"/>
			<block>
				<bind name="class" value="_width ? '$ResizeableButtonLabelWithoutAlignment' : '$MiddleAligned'"/>
				<style>
					<marginTop value="3px"/>
					<marginBottom value="4px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; _enabled ? 1 : 0.55"/>
				<block type="text">
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorDefaultButtonUp'"/>
					<bind name="class" value="_enabled ? '$None' : '$FontColorAlmostBlack'"/>
					<bind name="text" value="_label"/>
				</block>
				<block>
					<bind name="visible" value="priceInfo.finalPrice &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'PriceTag'; priceInfo.finalPrice &gt; 0 ? {priceInfo: priceInfo, _showDiscountTag: _showDiscountTag } : null"/>
				</block>
				<block>
					<bind name="visible" value="_isExternal == true"/>
					<style>
						<marginTop value="2px"/>
						<marginLeft value="8px"/>
					</style>
					<block className="icon_out_grey" type="native"/>
				</block>
				<block>
					<bind name="fade" value="_isNewMarker; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
					<style>
						<position value="absolute"/>
						<right value="-35px"/>
						<top value="-4px"/>
					</style>
					<bind name="instance" value="'MarkerNewAttention'; { }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ButtonCostSpecial">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<style>
			<width value="130px"/>
		</style>
		<block className="button_default_always_hover" type="native">
			<style>
				<width value="100%"/>
			</style>
			<bind name="enabled" value="(_enabled &amp;&amp; !(operationsAccountLocked))"/>
			<bind name="event" value="'buttonClick'; _method ? _method : null"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="input"/>
			<bind name="label" value="_label"/>
		</block>
	</block>
	<block className="DefaultButtonCostSmall">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked';	['resourceEntity.accountResource.evOperationsLockChanged'];	resourceEntity.accountResource.operationsLocked"/>
		<bind name="tooltip" value="'DiscountTooltip'; priceInfo.basePrice &amp;&amp; (priceInfo.finalPrice != priceInfo.basePrice) ? { priceInfo: priceInfo } : null"/>
		<block className="button_default_no_label_small" type="native">
			<bind name="enabled" value="(_enabled &amp;&amp; !(operationsAccountLocked))"/>
			<bind name="event" value="'buttonClick'; _method ? _method : null"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<block>
				<style>
					<marginBottom value="1px"/>
					<marginRight value="18px"/>
					<marginLeft value="18px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; _enabled ? 1 : 0.55"/>
				<block type="text">
					<styleClass value="$TextSecondaryBold"/>
					<bind name="class" value="'$FontColorDefaultButtonUp'"/>
					<bind name="class" value="_enabled ? '$None' : '$FontColorAlmostBlack'"/>
					<bind name="text" value="_label"/>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="2px"/>
					</style>
					<bind name="instance" value="'PriceTag'; priceInfo.finalPrice &gt; 0 ? {priceInfo: priceInfo, _small: true, _showDiscountTag: _showDiscountTag} : null"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ButtonSpecial">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="name" value="_name"/>
		<block className="button_special_no_label" type="native">
			<bind name="soundSet" value="'hard_button'"/>
			<bind name="enabled" value="_enabled"/>
			<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
			<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
			<bind name="style" value="'width'; _width ? _width : '100%f'"/>
			<bind name="focus" value="_focusIndex; _defaultFocused"/>
			<bind name="focusable" value="_focusIndex ? true : false"/>
			<block>
				<bind name="class" value="_width ? '$MiddleAligned' : '$None'"/>
				<style>
					<width value="100%f"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="18px"/>
						<marginLeft value="18px"/>
						<marginTop value="3px"/>
						<marginBottom value="4px"/>
						<hitTest value="false"/>
					</style>
					<bind name="class" value="_enabled 	? '$FontDropShadowFilter1' 	: '$FontDropShadowWhite'"/>
					<bind name="class" value="_enabled 	? rollOver &amp;&amp; !(mouseDown) 	? '$FontColorDefault' 
																	: '$FontColorSpecialButton'
										: '$FontColorAlmostBlack'"/>
					<styleClass value="$TextDefaultBold"/>
					<bind name="text" value="_label"/>
				</block>
			</block>
		</block>
	</block>
	<block className="DockButton">
		<style>
			<width value="100%"/>
		</style>
		<block className="button_dock" type="native">
			<bind name="name" value="_name"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<bind name="enabled" value="_enabled"/>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="3px"/>
					<mouseEnabled value="false"/>
					<mouseChildren value="false"/>
				</style>
				<bind name="style" value="'alpha'; _enabled ? 1 : 0.55"/>
				<bind name="text" value="_label"/>
			</block>
		</block>
	</block>
	<block className="ResizableButtonDock">
		<style>
			<width value="100%f"/>
		</style>
		<bind name="watch" value="'enabled'; _enabled != false"/>
		<bind name="name" value="_name"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; null; 'resizableButtonDock_'"/>
		<bind name="clickSplit"/>
		<bind name="request" value="'left_click'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
		<bind name="action" value="'left_click'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
		<bind name="transition" value="resizableButtonDock_rollOver &amp;&amp; !(resizableButtonDock_mouseDown) &amp;&amp; enabled; 0.1; {alpha: 0.65}; {alpha: 1}; {alpha: 0.65}"/>
		<bind name="soundOn" value="'left_click'; 'press'; 'default_button'"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-10px"/>
				<marginRight value="-10px"/>
				<marginBottom value="-9px"/>
				<marginTop value="-10px"/>
			</style>
			<bind name="style" value="'hitTest'; enabled"/>
			<block className="button_dock_bg" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
		</block>
		<block type="text">
			<style>
				<hitTest value="false"/>
				<mouseEnabled value="false"/>
				<mouseChildren value="false"/>
			</style>
			<bind name="style" value="'alpha'; enabled ? 1 : 0.65"/>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="InfopanelButton">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="request" value="'buttonClick'; _request ? _request : null; _requestParams ? _requestParams : {}"/>
		<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams ? _actionParams : {}"/>
		<bind name="watch" value="'infopanelButtonOverAlpha';	(mouseDown)		? 0.3 :
												(rollOver)		? 1
																: 0.6"/>
		<bind name="tooltip" value="'SimpleTooltip'; _tooltipIDS ? { tooltipText: _tooltipIDS } : null"/>
		<bind name="style" value="'alpha'; infopanelButtonOverAlpha"/>
		<bind name="name" value="_name"/>
		<block className="button_infopanel_no_label" type="native">
			<bind name="style" value="'width'; _width ? _width : '150px'"/>
			<bind name="style" value="'height'; _height ? _height : '40px'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<hitTest value="false"/>
				</style>
				<block>
					<bind name="visible" value="_backgroundImage != null"/>
					<bind name="style" value="'width'; _iconWidth"/>
					<bind name="style" value="'height'; _iconHeight"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="8px"/>
						<backgroundStretchX value="true"/>
						<backgroundStretchY value="true"/>
					</style>
					<bind name="style" value="'backgroundImage'; _backgroundImage"/>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$MiddleAlignedAbsolutely"/>
					<block type="text">
						<styleClass value="$TextDefaultBoldNM"/>
						<bind name="text" value="toUpperCase(tr(_label))"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ImageButton">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="request" value="'click'; _request &amp;&amp; _enabled ? _request : null; _requestParams ? _requestParams : {}"/>
		<bind name="action" value="'click'; _action &amp;&amp; _enabled ? _action : null; _actionParams ? _actionParams : {}"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; null; 'ct_'"/>
		<bind name="var" value="{ 
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	_enabled &amp;&amp; (ct_mouseDown)	? ctMouseDown :
							_enabled &amp;&amp; (ct_rollOver)	? ctRollOver
														: {}"/>
		<bind name="style" value="'width'; _width ? _width : '50px'"/>
		<bind name="style" value="'height'; _height ? _height : '50px'"/>
		<block>
			<bind name="name" value="_name"/>
			<bind name="style" value="'width'; _width ? _width : '50px'"/>
			<bind name="style" value="'height'; _height ? _height : '50px'"/>
			<style>
				<backgroundStretchX value="true"/>
				<backgroundStretchY value="true"/>
			</style>
			<bind name="style" value="'alpha'; _alpha != null ? _alpha : 1.0"/>
			<bind name="style" value="'backgroundImage'; _backgroundImage"/>
		</block>
	</block>
	<css name="$DefaultTooltipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 6,
		bottomOffset: 26
	}"/>
	</css>
	<css name="$DefaultInstantTooltipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.06,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.06,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 6,
		bottomOffset: 26
	}"/>
	</css>
	<css name="$DefaultMenuBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.07,
		appearOffset: 10.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: 10.0,
		tinyOffset: 0,
		rightOffset: 0,
		bottomOffset: 0
	}"/>
	</css>
	<css name="$RightSubMenuBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.15,
		appearOffset: 0.0,
		disappearDelay: 0.35,
		disappearDuration: 0.1,
		disappearOffset: 5.0,
		tinyOffset: 0,
		rightOffset: 0,
		bottomOffset: 0,
		showDirection: 'right'
	}"/>
	</css>
	<css name="$LeftSubMenuBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.15,
		appearOffset: 0.0,
		disappearDelay: 0.35,
		disappearDuration: 0.1,
		disappearOffset: 5.0,
		tinyOffset: 0,
		rightOffset: 0,
		bottomOffset: 0,
		showDirection: 'left'
	}"/>
	</css>
	<css name="$VerticalInfotipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 0,
		bottomOffset: 0
	}"/>
	</css>
	<css name="$VerticalInfotipBehaviourCenter">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: -8,
		bottomOffset: 0,
		screenBottomOffset: 26,
		isTipCenter: true
	}"/>
	</css>
	<css name="$VerticalInfotipBehaviourCenterUpper">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: -8,
		bottomOffset: 0,
		isTipCenter: true,
		fixedDirectionUp: true
	}"/>
	</css>
	<css name="$ReplaysInfotip">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,

		rightOffset: 300,
		bottomOffset: 0,
		isTipCenter: true
	}"/>
	</css>
	<css name="$ReplaysInfotipFilter">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,

		rightOffset: 0,
		bottomOffset: 0,
		isTipCenter: true
	}"/>
	</css>
	<css name="$HorizontalInfotipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.0,
		disappearOffset: -10.0,
		tinyOffset: 0,
		rightOffset: -10,
		bottomOffset: 0,
		isTipCenter: true
	}"/>
	</css>
	<css name="$FightButtonTooltipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.0,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 6,
		bottomOffset: 26
	}"/>
	</css>
	<css name="$WarningTooltipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 6,
		bottomOffset: 26
	}"/>
	</css>
	<css name="$ModuleTreeTooltipBehaviour">
		<userData value="{
		appearDelay: 0.05,
		appearDuration: 0.1,
		appearOffset: 5.0,
		disappearDelay: 0.0,
		disappearDuration: 0.1,
		disappearOffset: -10.0,
		tinyOffset: 2,
		rightOffset: 6,
		bottomOffset: 26
	}"/>
	</css>
	<css name="$SmallListItem">
		<width value="100%"/>
		<height value="18px"/>
	</css>
	<css name="$SmallListItemValue">
		<position value="absolute"/>
		<right value="0px"/>
	</css>
	<css name="$DefaultTooltipWidth">
		<width value="300px"/>
	</css>
	<block className="EmptyLine"/>
	<block className="MouseInstructionTooltip">
		<style>
			<hitTest value="false"/>
		</style>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<bind name="visible" value="_multiParagraphArray.length &gt; 0"/>
			<styleClass value="$InfoBlockHorizontalIndentNoWidth"/>
			<style>
				<marginTop value="9px"/>
			</style>
			<bind name="style" value="'marginBottom'; _marginBottomParagraphs 												? _marginBottomParagraphs :
									(_multiParagraphArray.length &gt; 0) &amp;&amp; (_mouseInstructions.length &gt; 0)	? '0px'
																											: '5px'"/>
			<bind name="repeat" value="_multiParagraphArray; 'RepeatParagraphItem'; {_maxWidth: _maxWidth, _marginBottom: _marginBottom, _leading: _leading}"/>
		</block>
		<block>
			<bind name="visible" value="_checkedLines.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_checkedLines.length &gt; 0"/>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<bind name="repeat" value="_checkedLines; 'CheckedLineRepeater'; {_maxWidth: _maxWidth, _marginBottom: _marginBottom, _lastIndex: (_checkedLines.length - 1), _leading: _leading}"/>
		</block>
		<block>
			<bind name="visible" value="(_multiParagraphArray.length &gt; 0) &amp;&amp; (_mouseInstructions.length &gt; 0)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_mouseInstructions.length &gt; 0"/>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<bind name="repeat" value="_mouseInstructions; 'MouseInstructionRepeater'; {_maxWidth: _maxWidth, _lastIndex: (_mouseInstructions.length - 1), _leading: _leading}"/>
		</block>
	</block>
	<block className="SimpleTooltip">
		<block className="SimpleTooltipTemplate">
			<styleClass value="$DefaultTooltipBehaviour"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<style>
					<position value="absolute"/>
				</style>
				<styleClass value="$Fullsize"/>
			</block>
			<block type="text">
				<styleClass value="$InfoBlockIndentNoWidth"/>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="style" value="'leading'; (tooltipText.length &gt; 30 ? 0 : -3)"/>
				<style>
					<maxWidth value="300"/>
				</style>
				<bind name="text" value="tooltipText"/>
			</block>
		</block>
	</block>
	<block className="SubTextTooltip">
		<block className="SubTextTooltipTemplate">
			<styleClass value="$DefaultTooltipBehaviour"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$InfoBlockIndentNoWidth"/>
				<block type="text">
					<styleClass value="$TextHeaderBold"/>
					<style>
						<leading value="-3"/>
						<maxWidth value="260"/>
					</style>
					<bind name="text" value="tooltipText"/>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<marginTop value="3px"/>
						<leading value="-3"/>
						<maxWidth value="260"/>
					</style>
					<bind name="text" value="tooltipSubText"/>
				</block>
			</block>
		</block>
	</block>
	<block className="SimpleWarningTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 240"/>
				<style>
					<leading value="-3"/>
				</style>
				<bind name="text" value="_text"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MultipleWarningsTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block>
				<bind name="repeat" value="_warningsArr; 'SimpleWarningText'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="SimpleWarningText">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontColorUnready'"/>
			<style>
				<maxWidth value="240"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="$value"/>
		</block>
	</block>
	<block className="StartButtonWarningsTooltip">
		<styleClass value="$WarningTooltipBehaviour"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block>
				<params>
					<param name="name" value="MultipleWarningsTooltip"/>
				</params>
				<bind name="repeat" value="_warningsArr; 'StartButtonWarningText'; {}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="StartButtonWarningText">
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'cbs_primeTimeStartTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeStartTime"/>
		<bind name="watchDH" value="'cbs_primeTimeFinishTime'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.primeTimeFinishTime"/>
		<bind name="countdown" value="cbs_primeTimeStartTime; 'startPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
		<bind name="countdown" value="cbs_primeTimeFinishTime; 'finishPrimeTimeText'; 'HIGHEST,WITH_DAYS'; 'timeoutEvent'"/>
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="class" value="'$FontColorUnready'"/>
			<style>
				<maxWidth value="240"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="$value == 'IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN'	?	subst('IDS_CLAN_BATTLES_PRIMETIME_STARTS_IN', [], {timeLeft: startPrimeTimeText}) 
																		:	$value"/>
		</block>
	</block>
	<block className="TooltipBackground">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'DeclareBlurLayer'; _isInBattle ?  null : {}"/>
			<bind name="instance" value="'BlurMap'; _isInBattle ? null : {}"/>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="(optionData.contrast == true || _isInBattle == true)"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!(_isInBattle)"/>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
	</block>
	<block className="TimerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'TooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<styleClass value="$TextHeader"/>
			<bind name="class" value="'$FontSizeHeader4'"/>
			<bind name="pureText" value="_text"/>
		</block>
	</block>
	<block className="PlayerTooltipInvitationCountdown">
		<bind name="countdown" value="_expirationTime; 'countdownText'; 'mm:ss'"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginLeft value="7px"/>
				<marginRight value="4px"/>
				<marginBottom value="3px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<marginRight value="6px"/>
				</style>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true, _formationType: _formationType}"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
						<maxWidth value="158"/>
						<leading value="-3"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorWhite'"/>
					<bind name="text" value="_text"/>
				</block>
				<block type="text">
					<style>
						<top value="-4px"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<styleClass value="$AlignRight"/>
					<bind name="class" value="'$FontSizeHeader6'"/>
					<bind name="pureText" value="'-' + countdownText"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="TooltipHeaderWithIcon">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<margin value="16px"/>
		</style>
		<block>
			<bind name="visible" value="_iconPath"/>
			<style>
				<width value="80px"/>
				<height value="80px"/>
			</style>
			<bind name="style" value="'backgroundImage'; _iconPath"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="class" value="_headerClass ? _headerClass : '$None'"/>
				<style>
					<width value="100%"/>
					<leading value="-5"/>
					<marginTop value="2px"/>
				</style>
				<bind name="text" value="_headerText"/>
			</block>
			<block type="text">
				<bind name="visible" value="_subheaderText"/>
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="_subheaderClass ? _subheaderClass : '$None'"/>
				<style>
					<width value="100%"/>
					<leading value="-3"/>
					<marginTop value="8px"/>
					<alpha value="0.9"/>
				</style>
				<bind name="text" value="_subheaderText"/>
			</block>
		</block>
	</block>
	<block className="TooltipContentTextBlock">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<bind name="visible" value="_withBackground == true"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<marginTop value="1px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<bind name="repeat" value="_multiParagraphArray; 'RepeatParagraphItemNM'; {_maxWidth: _maxWidth, _marginBottom: _marginBottom, _leading: (_leading ? _leading : 0)}"/>
		</block>
	</block>
	<block className="AccountCompletionRewardTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="336px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px|16px|12px|12px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="tooltipText"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px|16px|12px|12px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<leading value="-3"/>
					<width value="100%"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="text" value="'IDS_ACCOUNT_COMPLETION_TOOLTIP_SUBHEADER'"/>
			</block>
			<bind name="firstEntityDH" value="'completionRewardsEntity'; CC.completionRewards"/>
			<bind name="watchDH" value="'rewards';[]; completionRewardsEntity.completionRewards.rewards"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="rewards; 'RewardContainerTooltipItemAdapter'"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px|16px|8px|8px"/>
			</style>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: 'IDS_FINISH_ACCOUNT_COMPLETION_TOOLTIP', _maxWidth: 300 }"/>
		</block>
	</block>
	<block className="BattleStatsInteractionsCarousel">
		<style>
			<width value="100%"/>
			<height value="124px"/>
		</style>
		<bind name="var" value="{itemWidth: 218}"/>
		<bind name="watch" value="'isScrollNeeded'; _PBSWidth &lt; ((	_shipsInteractionsEntity.battleResultsEntry.children.length +
													_buildingInteractionsEntity.battleResultsEntry.children.length) * itemWidth)"/>
		<bind name="child" value="isScrollNeeded; {	_repeatCollectionShips: _shipsInteractionsEntity.battleResultsEntry.children,
									_repeatCollectionBuildings: _buildingInteractionsEntity.battleResultsEntry.children,
									_interactionsEntity: _interactionsEntity, _itemWidth: itemWidth,
									_wheelScrollSpeed: itemWidth}; 'PBSCarouselNoScroll'; 'PBSCarouselScroll'"/>
	</block>
	<block className="PBSCarouselScroll">
		<styleClass value="$Fullsize"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<left value="-10px"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="event" value="'click'; scrollLeftByOneUnit"/>
			</block>
		</block>
		<block>
			<style>
				<marginRight value="18px"/>
				<marginLeft value="18px"/>
				<flow value="horizontal"/>
				<width value="100%"/>
				<height value="100%"/>
				<overflow value="scroll"/>
				<scrollArea value="ModernScrollAreaHorizontal"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
				<itemWidth value="218"/>
				<itemHeight value="124"/>
			</style>
			<bind name="style" value="'itemWidth'; _itemWidth"/>
			<bind name="style" value="'wheelScrollSpeed'; _wheelScrollSpeed"/>
			<bind name="controller" value="lesta.unbound.controls.UbCarouselController"/>
			<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
			<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<width value="18px"/>
				<height value="100%"/>
				<right value="-10px"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="name" value="'buttonCarouselRight'"/>
				<bind name="event" value="'click'; scrollRightByOneUnit"/>
			</block>
		</block>
	</block>
	<block className="PBSCarouselNoScroll">
		<style>
			<flow value="horizontal"/>
			<marginLeft value="-5px"/>
		</style>
		<bind name="repeat" value="_repeatCollectionShips; 'BattleResultsInteractionShipItem'; {_itemWidth: _itemWidth}"/>
		<bind name="repeat" value="_repeatCollectionBuildings; 'BattleResultsInteractionBuildingItem'; {_itemWidth: _itemWidth}"/>
	</block>
	<block className="BattleResultsInteractionBuildingItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'paramsId'; entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'buildingType'; entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'isAlive'; entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[8].value"/>
		<style>
			<height value="124px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="watch" value="'groundIconName'; !isAlive || (suppressionCount &gt; 0) ? (buildingType + '_dead') : buildingType"/>
			<block className="icons_team_result_ground_objects" type="native">
				<bind name="gotoAndStop!" value="groundIconName"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; buildingType == 'Complex' ?	{tooltipText: 'IDS_BATTLE_STATS_FORT_BUILDING_SUPPRESSIONS_HINT'} :
																			{tooltipText: 'IDS_BATTLE_STATS_WATCHTOWER_BUILDING_SUPPRESSIONS_HINT'}"/>
					<bind name="visible" value="suppressionCount &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="7px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'suppression'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="suppressionCount"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_YOU_DESTROYED_THIS_BUILDING'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="6px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'building_kill'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_BATTLE_STATS_AIRBASE_PLANES_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tr('IDS_BATTLE_STATS_' + toUpperCase(buildingType) + '_BUILDING_DAMAGE_HINT')}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="2px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsInteractionShipItem">
		<bind name="entityDH" value="'entity'; $value"/>
		<bind name="watch" value="'playerName'; entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isEnemy'; !(entity.battleResultsEntry.values[2].value)"/>
		<bind name="watch" value="'isKilled'; !(entity.battleResultsEntry.values[3].value)"/>
		<bind name="watch" value="'isKilledByMe'; entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'planesKilled'; entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'causedDamage'; entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'totalHits'; entity.battleResultsEntry.values[7].value"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; entity.battleResultsEntry.values[0].value; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<style>
			<height value="124px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
		</style>
		<bind name="style" value="'width'; ((_itemWidth - 10) + 'px')"/>
		<block className="pbs_slot_bg" type="native">
			<bind name="tooltip" value="'BattleResultsShipInteractionsTooltip'; {_list: entity.battleResultsEntry.children}"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="gotoAndStop!" value="(isEnemy ? 'enemy' : 'ally')"/>
		</block>
		<block>
			<style>
				<marginTop value="12px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="122px"/>
					<height value="22px"/>
				</style>
				<bind name="style" value="'marginRight'; isEnemy ?	(shipInfo.subtype == ShipTypes.Destroyer)	? '-26px' :
													(shipInfo.subtype == ShipTypes.Cruiser)		? '-14px'
																									: '0px'
												:	(shipInfo.subtype == ShipTypes.Destroyer)	? '26px' :
													(shipInfo.subtype == ShipTypes.Cruiser)		? '14px'
																									: '0px'"/>
				<bind name="style" value="'right'; isEnemy ? '10' : '0'"/>
				<bind name="scaleX" value="isEnemy ? '1' : '1'"/>
				<bind name="style" value="'backgroundImage'; 'url:' + (isKilled ? shipInfo.pathTinyDeadIcon : shipInfo.pathTinyIcon)"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'BattleResultsShipTitleWithIconAndLevel'; {_shipID : entity.battleResultsEntry.values[0].value, _isEnemy: isEnemy, _isKilled: isKilled}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<width value="180px"/>
					<textAlign value="center"/>
					<leading value="-5"/>
				</style>
				<bind name="class" value="	isKilled	? '$FontColorAlmostBlack'
										: '$None'"/>
				<bind name="class" value="isKilled ? '$FontDropShadowWhite' : '$None'"/>
				<bind name="text" value="playerName"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_BATTLE_STATS_KILL_HINT'}"/>
					<bind name="visible" value="isKilledByMe"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="5px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'kill'"/>
						<bind name="alpha" value="0.7"/>
						<styleClass value="$GivenDamageRMargin"/>
					</block>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_BATTLE_STATS_PLANE_HINT'}"/>
					<bind name="visible" value="planesKilled &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="3px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'plane'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-2px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="planesKilled"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_BATTLE_STATS_DAMAGE_HINT'}"/>
					<bind name="visible" value="causedDamage &gt; 0 || totalHits &gt; 0"/>
					<style>
						<marginLeft value="4px"/>
						<marginRight value="4px"/>
					</style>
					<block className="icon_stat_damage" type="native">
						<bind name="gotoAndStop!" value="'damage'"/>
						<bind name="alpha" value="0.7"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="-1px"/>
						</style>
						<styleClass value="$TextLargeHeaderBold"/>
						<bind name="text" value="format(causedDamage, -1)"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleResultsShipInteractionsTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxHeight'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))"/>
		<bind name="style" value="'height'; (stageHeight - 124 - 62 - (10 + (stageHeight - 720) * 0.36))+'px'"/>
		<style>
			<hitTest value="false"/>
		</style>
		<block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginBottom value="1px"/>
					<marginTop value="1px"/>
				</style>
				<block className="BlurMap">
					<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
					<bind name="visible" value="optionData.blurEnabled"/>
					<style>
						<hitTest value="false"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="mc_blurmap_medium" type="native">
						<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
						<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="blurMap" value="0"/>
					</block>
					<block className="inner_panel" type="native">
						<style>
							<alpha value="0.5"/>
						</style>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
				</block>
			</block>
			<style>
				<width value="318px"/>
				<height value="100px"/>
			</style>
			<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {width: vTileWidth + 4, height: vTileHeight + 10}; {width: vTileWidth + 4, height: vTileHeight + 10}"/>
			<block className="notification_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<bind name="vTileHack"/>
			<style>
				<height value="100%"/>
				<marginTop value="2px"/>
				<marginBottom value="1px"/>
				<marginLeft value="-1px"/>
				<flow value="vtile"/>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="_list; 'ShipInteractionsTooltipRow'; {_childrenLength: _list.length, _marginLeft: '3px'}"/>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight - 50))"/>
			<style>
				<left value="320px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
					</style>
					<block className="divider_v" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(vTileHeight &gt; (maxHeight*2 - 50))"/>
			<style>
				<left value="640px"/>
				<height value="300px"/>
				<marginTop value="2px"/>
				<position value="absolute"/>
			</style>
			<block>
				<bind name="fade" value="vTileWidth + vTileHeight; 0.01; {height: vTileHeight + 6}; {height: vTileHeight + 6}"/>
				<style>
					<height value="300px"/>
				</style>
				<block className="VerticalDivider">
					<style>
						<height value="100%"/>
						<width value="3px"/>
					</style>
					<block className="divider_v" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipRow">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="318px"/>
		</style>
		<bind name="style" value="'marginLeft'; _marginLeft ? _marginLeft : '0px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; (entity.battleResultsEntry.type == 15) &amp;&amp; ($index == 0) ? '-5px' : '0px'"/>
			<bind name="child" value="entity.battleResultsEntry.type ? entity.battleResultsEntry.type
													: 'no_item'; {_entity: entity}; {	14	: 'ShipInteractionsBuildingTooltipHeader',
																						10	: 'ShipInteractionsTooltipHeader',
																						0			: 'ShipInteractionsHeader',
																						1		: 'ShipInteractionsSubHeader',
																						2				: 'ShipInteractionsLine',
																						3			: 'ShipInteractionsSubLine',
																						4				: 'BattleStatsDetailedReportList',
																						12		: 'ShipInteractionsTooltipEmptyLine',
																						15			: 'ShipInteractionsPlayer',
																						13		: 'ShipInteractionsTooltipLine',
																						no_item					: 'EmptyItem'}"/>
		</block>
	</block>
	<block className="ShipInteractionsBuildingTooltipHeader">
		<bind name="watch" value="'buildingType'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'name'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'suppressionCount'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isAlive'; _entity.battleResultsEntry.values[3].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x12ffffff"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="6px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="instance" value="'BattleResultsBuildingIconWithTitle'; {_name: name, _buildingType: buildingType, _isAlive: isAlive, _suppressionCount: suppressionCount}"/>
		</block>
		<block>
			<style>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 285"/>
				<bind name="text" value="'IDS_BATTLE_STATS_BUILDING_DAMAGE_NOT_FOR_STATS'"/>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipHeader">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; false"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<bind name="watch" value="'killerShipId'; _entity.battleResultsEntry.values[6].value"/>
		<bind name="watch" value="'killerName'; _entity.battleResultsEntry.values[7].value"/>
		<bind name="watch" value="'isKillerAlly'; _entity.battleResultsEntry.values[8].value"/>
		<bind name="watch" value="'isKillerSelf'; _entity.battleResultsEntry.values[9].value"/>
		<bind name="watch" value="'isKillerInMyDivision'; _entity.battleResultsEntry.values[10].value"/>
		<bind name="watch" value="'isKillerTk'; _entity.battleResultsEntry.values[11].value"/>
		<bind name="watch" value="'deathReasonId'; _entity.battleResultsEntry.values[12].value"/>
		<block>
			<style>
				<backgroundColor value="0x12ffffff"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="5px"/>
				<marginTop value="5px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId, _name: playerName, _isEnemy: !(isPlayerAlly), _fontSizeClass: '$FontSizeHeader6',
													_isTeamKiller: isPlayerTk, _isSelf: isPlayerSelf, _isInMyDivision: isPlayerInMyDivision}"/>
			</block>
			<block type="text">
				<bind name="visible" value="(deathReasonId !=  0)"/>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_BATTLE_STATS_DAMAGED_BY_' + deathReasonId)"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="instance" value="'PBSPlayerWithShip'; killerShipId	? {	_shipId: killerShipId, _name: killerName, _isEnemy: !(isKillerAlly), _fontSizeClass: '$FontSizeDefault',
																	_isTeamKiller: isKillerTk, _isSelf: isKillerSelf, _isInMyDivision: isKillerInMyDivision}
																: null"/>
			</block>
		</block>
	</block>
	<block className="PBSPlayerWithShip">
		<bind name="style" value="'width'; _noWidth ? 'auto' : '100%'"/>
		<bind name="style" value="'flow'; _noWidth ? 'horizontal' : 'htile'"/>
		<bind name="watch" value="'nameFontColorClass';	_isEnemy 						? '$FontColorCompareNegative' :
										_isTeamKiller					? '$FontColorTeamkiller' :
										(_isSelf || _isInMyDivision)	? '$FontColorGolden'
																		: '$FontColorWhite'"/>
		<bind name="watch" value="'shipFontColorClass';	_isEnemy 						? '$FontColorCompareNegative' :
										(_isSelf || _isInMyDivision)	? '$FontColorGolden'
																		: '$FontColorWhite'"/>
		<block>
			<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
			<block type="text">
				<styleClass value="$TextHeaderWhite"/>
				<bind name="style" value="'width'; _noWidth ? 'auto' : '100%f'"/>
				<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
				<bind name="class" value="nameFontColorClass"/>
				<bind name="class" value="_fontSizeClass"/>
				<bind name="text" value="_name"/>
			</block>
			<block>
				<style>
					<width value="6px"/>
					<height value="2px"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="instance" value="'ShipTitleWithIconAndLevelPBS'; {_shipID: _shipId, _isSelf: _isSelf, _isEnemy: _isEnemy, _isTeamKiller: _isTeamKiller, _fontColorClass: shipFontColorClass, _fontSizeClass: _fontSizeClass}"/>
		</block>
	</block>
	<block className="ShipInteractionsHeader">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<height value="30px"/>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="battle_stats_backgrounds" type="native">
					<style>
						<alpha value="0.7"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="gotoAndStop!" value="'grey'"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubHeader"/>
	<block className="ShipInteractionsTooltipLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x12ffffff"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="5px"/>
				</style>
				<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderWhiteBold', _valueSizeClass: '$FontSizeHeader6'}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="7px"/>
					<marginTop value="2px"/>
				</style>
				<styleClass value="$InfoBlockHorizontalIndent"/>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<maxWidth value="290"/>
						<leading value="-1"/>
					</style>
					<bind name="text" value="_entity.battleResultsEntry.hint"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsPlayer">
		<bind name="watch" value="'shipId'; _entity.battleResultsEntry.values[0].value"/>
		<bind name="watch" value="'playerName'; _entity.battleResultsEntry.values[1].value"/>
		<bind name="watch" value="'isPlayerAlly'; _entity.battleResultsEntry.values[2].value"/>
		<bind name="watch" value="'isPlayerSelf'; _entity.battleResultsEntry.values[3].value"/>
		<bind name="watch" value="'isPlayerInMyDivision'; _entity.battleResultsEntry.values[4].value"/>
		<bind name="watch" value="'isPlayerTk'; _entity.battleResultsEntry.values[5].value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginBottom value="-2px"/>
				<marginTop value="10px"/>
			</style>
			<bind name="instance" value="'PBSPlayerWithShip'; {	_shipId: shipId, _name: playerName, _isEnemy: !(isPlayerAlly), _fontSizeClass: '$FontSizeLarge',
												_isTeamKiller: isPlayerTk, _isSelf: isPlayerSelf, _isInMyDivision: isPlayerInMyDivision}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="2px"/>
			</style>
			<bind name="repeat" value="_entity.battleResultsEntry.children; 'ShipInteractionsTooltipRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="ShipInteractionsLine">
		<style>
			<height value="26px"/>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="battle_stats_backgrounds" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="gotoAndStop!" value="3"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="0px"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextHeaderBold', _valueSizeClass: '$FontSizeLarge'}"/>
		</block>
	</block>
	<block className="ShipInteractionsSubLine">
		<style>
			<width value="100%"/>
			<marginTop value="1px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
			</style>
			<bind name="instance" value="'BattleStatsDetailedReportRowItem'; {_entity: _entity, _labelClass: '$TextDefault', _valueSizeClass: '$FontSizeDefault'}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="-3px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="symbol:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipInteractionsTooltipEmptyLine">
		<style>
			<width value="100%"/>
			<height value="8px"/>
		</style>
	</block>
	<block className="BattleResultsShipTitleWithIconAndLevel">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="21px"/>
				<marginRight value="-7px"/>
			</style>
			<bind name="style" value="'marginTop'; _isEnemy ? '13px' : '12px'"/>
			<block className="icon_ship_centered" type="native">
				<bind name="rotation" value="_isEnemy ? '180' : '0'"/>
				<bind name="gotoAndStop!" value="(_isKilled ? (shipInfo.subtype + '_U') : shipInfo.subtype)"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="	_isKilled	? '$FontColorAlmostBlack'
									: '$FontColorWhite'"/>
			<bind name="class" value="_isKilled ? '$FontDropShadowWhite' : '$None'"/>
			<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
		</block>
	</block>
	<block className="ShipTitleWithIconAndLevelPBS">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<marginTop value="-1px"/>
				<marginLeft value="-4px"/>
				<marginRight value="1px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'ShipIcon'; {_shipId: _shipID}"/>
		</block>
		<block>
			<block type="text">
				<bind name="class" value="_isSelf ? '$Bold' : '$None'"/>
				<styleClass value="$TextHeaderWhite"/>
				<bind name="class" value="_fontColorClass"/>
				<bind name="class" value="_fontSizeClass"/>
				<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
			</block>
		</block>
	</block>
	<block className="BattleResultsBuildingIconWithTitle">
		<style>
			<height value="20px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'buildingState'; _isAlive &amp;&amp; !_suppressionCount ? '_N' : '_D')"/>
		<block>
			<style>
				<width value="13px"/>
				<marginTop value="6px"/>
				<marginRight value="3px"/>
			</style>
			<block className="icon_ground_object" type="native">
				<bind name="gotoAndStop!" value="(_buildingType + buildingState)"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderBold"/>
			<bind name="text" value="_name"/>
			<bind name="class" value="buildingState == '_D' ? '$FontColorAlmostBlack' : null"/>
			<bind name="class" value="buildingState == '_D' ? '$FontDropShadowWhite' : '$None'"/>
		</block>
	</block>
	<block className="PostBattleReammunitionTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<style>
						<top value="2px"/>
					</style>
					<styleClass value="$AlignRight"/>
					<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
															 currency: 'credits'}, _medium: true, _deficit: !(tempValueCredits.applied)}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleFreeExpTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="380px"/>
		</style>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<styleClass value="$TextHeaderWhiteBold"/>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<text value="IDS_FREE_EXPERIENCE_C"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block type="text">
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<leading value="-3"/>
				<width value="100%"/>
				<marginTop value="5px"/>
				<marginBottom value="4px"/>
			</style>
			<text value="IDS_FREE_XP_DESC"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="tr('IDS_EARNED') + tr('IDS_COLON')"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<bind name="instance" value="'PriceTag'; {	priceInfo: { 	finalPrice: _entity.battleResultsEntry.values[1].value,
																currency: _entity.battleResultsEntry.values[1].type},
																_medium: true}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleReequipTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'PBSConsumablesList'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<bind name="visible" value="_entity.battleResultsEntry.children.length &gt; 0"/>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<bind name="visible" value="(tempValueGold.value != 0)"/>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueGold.value,
																 currency: 'gold'}, _medium: true, _deficit: !(tempValueGold.applied)}"/>
					</block>
					<block>
						<bind name="visible" value="(tempValueCredits.value != 0)"/>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true, _deficit: !(tempValueCredits.applied)}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ExteriorPostBattleTooltip">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'attributes'; ['exteriorEntity.attributes.evChanged']; exteriorEntity.attributes"/>
		<bind name="watch" value="'exteriorName'; exteriorConfig.name"/>
		<bind name="watch" value="'achieves'; exteriorConfig.achievements"/>
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<style>
			<width value="300px"/>
		</style>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ExteriorTooltipHeader'; {_exteriorId: _id, _shipId: _shipId, _amount: 0, _needPNG: true }"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="((attributes.positive.length + attributes.negative.length + attributes.neutral.length) &gt; 0)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="16px"/>
					<paddingLeft value="12px"/>
					<paddingRight value="12px"/>
				</style>
				<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributes.positive,
													_attributesNegative: attributes.negative,
													_attributesNeutral:	attributes.neutral}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<bottom value="-1px"/>
					<position value="absolute"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="achievements.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="tr('IDS_GET_FOR_ACHIEVEMENTS') + tr('IDS_COLON')"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="achievements; 'AchievementIconWithTitleForFlags'"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<bottom value="0px"/>
					<position value="absolute"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValue'; _entity.battleResultsEntry.values[0].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="tr('IDS_EARNED') + tr('IDS_COLON')"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<bind name="instance" value="'PriceTag'; {	priceInfo: { 	finalPrice: _entity.battleResultsEntry.values[0].value,
																currency: _entity.battleResultsEntry.values[0].type},
																_medium: true}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PostBattleRecamoTooltip">
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; _id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watchDH" value="'attributes'; ['exteriorEntity.attributes.evChanged']; exteriorEntity.attributes"/>
		<bind name="watch" value="'exteriorName'; exteriorConfig].name"/>
		<bind name="watch" value="'achieves'; exteriorConfig.achievements"/>
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<style>
			<width value="300px"/>
		</style>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<bind name="instance" value="'ExteriorTooltipHeader'; {_exteriorId: _id, _amount: 0, _needPNG: true}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="((attributes.positive.length + attributes.negative.length + attributes.neutral.length) &gt; 0)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="16px"/>
					<paddingLeft value="12px"/>
					<paddingRight value="12px"/>
				</style>
				<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributes.positive,
													_attributesNegative: attributes.negative,
													_attributesNeutral:	attributes.neutral}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<bottom value="-1px"/>
					<position value="absolute"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<bind name="visible" value="(tempValueGold.value != 0)"/>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueGold.value,
																 currency: 'gold'}, _medium: true, _deficit: !(tempValueGold.applied)}"/>
					</block>
					<block>
						<bind name="visible" value="(tempValueCredits.value != 0)"/>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true, _deficit: !(tempValueCredits.applied)}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="AOGASPostBattleTooltip">
		<style>
			<width value="330px"/>
		</style>
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<text value="IDS_AOGAS_FACTOR"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<maxWidth value="260"/>
				</style>
				<bind name="text" value="subst('IDS_PL_TIME_SPENT_IN_GAME_MORE_THAN', [], {hours: _value.online}) "/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'InstructionWarning'; { _instructionText: 'IDS_AOGAS_FACTOR_HINT', _maxWidth: '190'}"/>
				</block>
				<block type="text">
					<style>
						<position value="absolute"/>
						<right value="0"/>
					</style>
					<styleClass value="$WarningTextOrange"/>
					<bind name="text" value="-(1-_value.factor) * 100 + '%'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="PBSConsumables">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="70px"/>
			<height value="70px"/>
		</style>
		<block>
			<style>
				<width value="60px"/>
				<height value="60px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<bind name="style" value="'backgroundImage'; ('url:../consumables/consumable_' + entity.dataComponent.data.source.name + '.png')"/>
		</block>
	</block>
	<block className="PBSConsumablesList">
		<bind name="entityDH" value="'entity'; $value"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<flow value="htile"/>
				<align value="center"/>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="entity.battleResultsEntry.children; 'PBSConsumables' ; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
		</block>
	</block>
	<block className="PostBattleResignalTooltip">
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="watch" value="'exteriorsList'; _entity.battleResultsEntry.values[2].value"/>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="notification_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<marginTop value="8px"/>
				<marginBottom value="4px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhiteBold"/>
				<bind name="text" value="_entity.battleResultsEntry.title"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<flow value="htile"/>
					<align value="center"/>
					<marginTop value="3px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="exteriorsList; 'PBSExteriorIcon'; {}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<style>
					<marginRight value="2px"/>
					<marginLeft value="2px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="6px"/>
					<marginBottom value="2px"/>
					<alpha value="0.95"/>
				</style>
				<bind name="repeat" value="_entity.battleResultsEntry.children; 'BattleStatsEconomicsRow'; {_childrenLength: _entity.battleResultsEntry.children.length}"/>
			</block>
			<block>
				<style>
					<bottom value="0"/>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<height value="30px"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<bind name="watch" value="'tempValueCredits'; _entity.battleResultsEntry.values[0].value"/>
			<bind name="watch" value="'tempValueGold'; _entity.battleResultsEntry.values[1].value"/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="250"/>
						<leading value="-3"/>
						<alpha value="0.8"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="'IDS_PRICE_Q'"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<style>
						<top value="2px"/>
					</style>
					<block>
						<bind name="visible" value="(tempValueGold.value != 0)"/>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueGold.value,
																 currency: 'gold'}, _medium: true, _deficit: !(tempValueGold.applied)}"/>
					</block>
					<block>
						<bind name="visible" value="(tempValueCredits.value != 0)"/>
						<style>
							<marginLeft value="6px"/>
						</style>
						<bind name="instance" value="'PriceTag';	{	priceInfo: { finalPrice: tempValueCredits.value,
																 currency: 'credits'}, _medium: true, _deficit: !(tempValueCredits.applied)}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PBSExteriorIcon">
		<style>
			<width value="100%"/>
			<height value="60px"/>
			<width value="60px"/>
			<marginLeft value="5px"/>
			<marginRight value="5px"/>
			<marginTop value="5px"/>
			<marginBottom value="5px"/>
		</style>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="style" value="'backgroundImage'; ('url:' + exteriorConfig.iconPath)"/>
	</block>
	<block className="BuyPremResultScreenButtonTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="12px"/>
				<paddingLeft value="12px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; { _unifiedStatus: SC.Ui_styles.UNIFIED_STATUS.ATTENTION,
													_text: 'IDS_PURCHASE_PREMIUM_WARNING_NEXT_BATTLE'}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemMouseInstruction'; { _type: 'left', _instructionText: 'IDS_MOVE_TO_THE_PURCHASE_PREMIUM' }"/>
			</block>
		</block>
	</block>
	<css name="$RepeatMarginsForTasks">
		<marginTop value="720:5,1080:15ah"/>
		<marginBottom value="720:5,1080:15ah"/>
		<marginLeft value="1280:5,1920:15aw"/>
		<marginRight value="1280:5,1920:15aw"/>
	</css>
	<block className="ChooseTask">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="watchDH" value="'usualTasks';[]; mission.campaignMissionParams.usualTasks"/>
		<bind name="watchDH" value="'isNarrative'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isNarrative"/>
		<bind name="handleEventDH" value="'campaign.campaignParams.evUpdateVisibility'; 'onUpdateCampaignVisibility'"/>
		<bind name="action" value="'onUpdateCampaignVisibility'; 'campaignState.campaigns'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="scroll_line" type="native">
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="-21px"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100px"/>
					<position value="absolute"/>
					<bottom value="-121px"/>
				</style>
				<block className="gradient_half_sphere" type="native">
					<style>
						<width value="100%"/>
						<height value="100%"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginRight'; isNarrative ? '1280:250,1920:340aw' : '1280:20,1920:40aw'"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="repeat" value="campaignAllMissions; 'MissionCarouselItem'; {_curCampaignId: _curCampaignId, _mapPosition: campaignMapPositions, _curMissionId: _curMissionId}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<marginRight value="1280:20,1920:40aw"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<marginTop value="5sh"/>
					</style>
					<block>
						<styleClass value="$MiddleAligned"/>
						<bind name="instance" value="'WindowTaskHeaderInstruction'; { _curMissionId: _curMissionId, _curCampaignId: _curCampaignId }"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<height value="10sh"/>
						<marginTop value="3.5sh"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
					<block className="gradient_half_sphere" type="native">
						<style>
							<alpha value="0.6"/>
						</style>
						<styleClass value="$Fullsize"/>
					</block>
				</block>
				<block>
					<styleClass value="$Fullsize"/>
					<styleClass value="$DefaultScrollBar"/>
					<style>
						<flow value="htile"/>
						<align value="center"/>
						<overflow value="scroll"/>
						<marginTop value="-7sh"/>
					</style>
					<bind name="repeat" value="usualTasks; 'TaskItem'; {_isShipSuitable: true, _isBattleSuitable: true, _needMargins: true, _isUseless: false}"/>
				</block>
			</block>
			<block>
				<style>
					<marginTop value="5sh"/>
				</style>
				<bind name="visible" value="campaign.campaignParams.isNarrative"/>
				<bind name="instance" value="'CampaignDescription'; {_text: 'IDS_' + toUpperCase(tr(mission.campaignMissionParams.name)) + '_DESCR'}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<css name="$TaskItemInnerPicked">
		<width value="230px"/>
		<top value="0px"/>
		<left value="0px"/>
		<height value="80px"/>
	</css>
	<css name="$TaskItemInner">
		<width value="220px"/>
		<top value="5px"/>
		<left value="5px"/>
		<height value="70px"/>
	</css>
	<block className="TaskItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID ? _taskID : $value"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'number';[]; campaignTaskEntity.campaignTaskParams.number"/>
		<bind name="watchDH" value="'uiNumber';[]; mission.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'lootStars';[]; campaignTaskEntity.campaignTaskParams.lootStars"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'bgIconID';[]; campaignTaskEntity.campaignTaskParams.bgIconID"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watch" value="'canOpenFinalTask'; isMainTask &amp;&amp; (stars &gt;= costUnlock) &amp;&amp; (state == 0)"/>
		<bind name="watch" value="'isInteractive'; (state == 1) || (state == 2) || (state == 3)"/>
		<bind name="watch" value="'isHighlighted'; (state == 2) || (state == 3) || (canOpenFinalTask)"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evChangedPrem'];	resourceEntity.accountResource.isPremium"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watch" value="'availableSlots'; 		(isPremiumAccount ? (common + premium) : common)"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="watch" value="'haveFreeSlot'; 		(choosenTasks.length &lt; availableSlots)"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<style>
			<width value="230px"/>
			<height value="80px"/>
		</style>
		<bind name="class" value="_needMargins ? '$RepeatMarginsForTasks' : null"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="class" value="	isHighlighted ? '$TaskItemInnerPicked'
									  : '$TaskItemInner'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'colorMatrixFilter'; 	
												!isInteractive	? '0 -95 0 0'
																: '0 0 0 0'"/>
				<bind name="style" value="'alpha'; state == 0 || !isInteractive ? 0.5 : 1"/>
				<block>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="DropShadow">
						<styleClass value="$FullsizeAbsolute"/>
						<styleClass value="$MouseDisable"/>
						<block className="drop_shadow" type="native">
							<styleClass value="$Fullsize"/>
							<style>
								<position value="absolute"/>
								<marginTop value="-2px"/>
								<marginRight value="-6px"/>
								<marginBottom value="-10px"/>
								<marginLeft value="-6px"/>
							</style>
						</block>
					</block>
					<block>
						<bind name="name" value="'TaskItem_' + number"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<backgroundSize value="cover"/>
						</style>
						<bind name="style" value="'backgroundImage'; 'url:../campaigns/bg_task_item/' + 'task_bg_campaign_' + (bgIconID ? bgIconID : number) + '.png'"/>
					</block>
					<block className="inner_panel" type="native">
						<style>
							<alpha value="2.5"/>
						</style>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block className="white_panel_gradient" type="native">
						<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 0.7}"/>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block>
						<bind name="visible" value="isLooted &amp;&amp; state != 2"/>
						<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 0.7}"/>
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'backgroundImage'; 'url:../campaigns/task_item_icons/border_islooted.png'"/>
					</block>
					<block className="hint_panel_bold" type="native">
						<style>
							<marginTop value="-2px"/>
							<marginBottom value="-2px"/>
							<marginLeft value="-2px"/>
							<marginRight value="-2px"/>
						</style>
						<bind name="transition" value="isHighlighted; 0.15; {alpha: 0}; {alpha: 1}"/>
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block>
						<style>
							<width value="56%"/>
							<height value="100%"/>
							<alpha value="0.4"/>
							<backgroundSize value="cover"/>
						</style>
						<bind name="style" value="'alpha'; (isMainTask &amp;&amp; (state == 0)) ? 0.3 : 0.6"/>
						<bind name="style" value="'backgroundImage'; (state == CAMPAIGN_STATE_COMPLETED) ? 	'url:../campaigns/task_item_icons/' + campaignName + '_done.png' : 
																							'url:../campaigns/task_item_icons/' + campaignName + '.png'"/>
						<block>
							<bind name="visible" value="(state != 0)"/>
							<style>
								<width value="51%"/>
								<height value="100%"/>
							</style>
							<block type="text">
								<style>
									<alpha value="0.6"/>
								</style>
								<styleClass value="$MiddleAligned"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$TextAccentBoldAccountLevel1"/>
								<bind name="text" value="uiNumber"/>
							</block>
						</block>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<style>
							<left value="70px"/>
							<position value="absolute"/>
						</style>
						<block type="text">
							<bind name="style" value="'alpha'; isLooted &amp;&amp; state != 2 ? '0.75' : '0.95' "/>
							<style>
								<maxWidth value="140"/>
							</style>
							<styleClass value="$TextLargeHeaderBold"/>
							<bind name="text" value="isMainTask 	? (toUpperCase(tr('IDS_FINAL_TASK')))
												: (toUpperCase(tr('IDS_CAMPAIGN_TASK'))) + ' ' + number"/>
						</block>
						<block className="indicator_progress_bar" type="native">
							<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
							<style>
								<width value="140px"/>
							</style>
							<bind name="value" value="(taskProgress / max) * 10"/>
						</block>
						<block>
							<bind name="visible" value="((missionState == 0) || (missionState == 2)) &amp;&amp; !isMainTask"/>
							<style>
								<marginTop value="3px"/>
							</style>
							<block>
								<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
								<style>
									<flow value="horizontal"/>
								</style>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="state == 0"/>
				<style>
					<width value="64px"/>
					<height value="100%"/>
					<position value="absolute"/>
					<left value="-1px"/>
				</style>
				<block>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<block className="icon_locked_mc" type="native"/>
				</block>
			</block>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<bind name="dispatch" value="'doubleClick'; 'Tooltip.Close'"/>
			<block>
				<style>
					<backgroundColor value="0x01000000"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<params>
					<param name="doubleClickEnabled" value="true"/>
				</params>
				<bind name="soundSet" value="'default_button'"/>
				<bind name="tooltip" value="'TaskItemTooltip'; {	_taskID: campaignTaskEntity.campaignTaskParams.id}"/>
				<bind name="tooltip" value="'TaskItemInfotip'; {	_taskID: campaignTaskEntity.campaignTaskParams.id}; TooltipBehaviour.infotip"/>
				<bind name="action" value="'doubleClick';  (taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) 													? null :
										  ((state == 1) &amp;&amp; haveFreeSlot &amp;&amp; (missionTimeToStart &lt;= 0))				? 'CampaignsProxy.activateTask' :
										  ((state == 2) &amp;&amp; ((taskProgress == 0) || (taskProgress == null)))	? 'CampaignsProxy.deactivateTask'
																																		: null ; { taskID: campaignTaskEntity.campaignTaskParams.id}"/>
				<bind name="request" value="'doubleClick'; ((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max)) 	? 'CampaignsProxy.deactivateTask'
																						: null; {taskID: campaignTaskEntity.campaignTaskParams.id}"/>
			</block>
			<block>
				<bind name="visible" value="(state == 3) || (canOpenFinalTask)"/>
				<styleClass value="$FullsizeAbsolute"/>
				<block>
					<style>
						<alpha value="0.75"/>
						<hitTest value="false"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="BlurMapCustom">
						<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<hitTest value="false"/>
						</style>
						<bind name="visible" value="optionData.blurEnabled"/>
						<block className="mc_blurmap5_feather" type="native">
							<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
							<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
							<styleClass value="$Fullsize"/>
							<bind name="blurMap" value="0"/>
						</block>
					</block>
					<block className="modal_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'alpha'; optionData.contrast ? 1.0 : 0.8"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="100%"/>
						<marginLeft value="6px"/>
						<marginRight value="6px"/>
					</style>
					<block>
						<bind name="visible" value="(((missionState == 0) || (missionState == 2)) &amp;&amp; !isMainTask) ||
									(!isLooted &amp;&amp; !canOpenFinalTask)"/>
						<styleClass value="$MiddleAligned"/>
						<style>
							<height value="40px"/>
						</style>
						<block>
							<bind name="visible" value="((missionState == 0) || (missionState == 2)) &amp;&amp; !isMainTask"/>
							<styleClass value="$MiddleVAligned"/>
							<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<block>
							<bind name="visible" value="!isLooted &amp;&amp; !canOpenFinalTask"/>
							<style>
								<marginLeft value="6px"/>
							</style>
							<bind name="tooltip" value="'RewardContainerTooltip'; { _rewards: rewards, _tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK', _isDH20: true}"/>
							<block className="icon_giftbox_small" type="native"/>
							<block>
								<bind name="visible" value="isLooted"/>
								<style>
									<position value="absolute"/>
									<top value="21px"/>
									<left value="21px"/>
								</style>
								<bind name="scaleX" value="0.85"/>
								<bind name="scaleY" value="0.85"/>
								<block className="icon_issued_small" type="native">
									<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
									<bind name="gotoAndStop!" value="'issued'"/>
								</block>
							</block>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block className="button_default" type="native">
						<style>
							<width value="100%"/>
						</style>
						<bind name="focus" value="0; true"/>
						<bind name="label" value=" 	(state == 3) &amp;&amp; !(isLooted)		? toUpperCase(tr('IDS_TAKE_REWARD')) :
									(state == 3) &amp;&amp; (isLooted) 		? toUpperCase(tr('IDS_TAKE_STARS'))  :
									(canOpenFinalTask) 									? toUpperCase(tr('IDS_OPEN_FINAL_TASK'))
																						: null"/>
						<bind name="action" value="'buttonClick';  	(state == 3) 	? 'CampaignsProxy.takeReward' :
													(canOpenFinalTask) 					? 'CampaignsProxy.unlockTask'
																						: null ; { taskID: campaignTaskEntity.campaignTaskParams.id}"/>
					</block>
				</block>
			</block>
			<bind name="watch" value="'showGiftbox'; ((rollOver &amp;&amp; !(canOpenFinalTask))) &amp;&amp; (state != 3)"/>
			<block>
				<bind name="fade" value="showGiftbox; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}; {alpha: 0, top: 5}; 2"/>
				<style>
					<right value="5px"/>
					<bottom value="1px"/>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'hitTest'; showGiftbox"/>
				<bind name="tooltip" value="'RewardContainerTooltip'; { _rewards: rewards, _tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK', _isDH20: true}"/>
				<block>
					<bind name="style" value="'alpha'; (isLooted ? 0.5 : 1)"/>
					<block className="icon_giftbox_small" type="native"/>
					<block>
						<bind name="visible" value="isLooted"/>
						<style>
							<position value="absolute"/>
							<top value="21px"/>
							<left value="21px"/>
						</style>
						<bind name="scaleX" value="0.85"/>
						<bind name="scaleY" value="0.85"/>
						<block className="icon_issued_small" type="native">
							<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
							<bind name="gotoAndStop!" value="'issued'"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="isLooted &amp;&amp; !_inTaskPicker"/>
				<style>
					<backgroundImage value="symbol:checkbox_check"/>
					<top value="5px"/>
					<right value="26px"/>
					<position value="absolute"/>
					<hitTest value="false"/>
				</style>
			</block>
			<bind name="watch" value="'showWarning'; (!_isShipSuitable || !_isBattleSuitable || _isUseless) &amp;&amp; (state != 3)"/>
			<bind name="watch" value="'unsuitableShipAndBattle'; !_isShipSuitable &amp;&amp; !_isBattleSuitable"/>
			<block>
				<bind name="fade" value="showWarning; 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}; 2"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<block>
					<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
					<styleClass value="$FullsizeAbsolute"/>
					<block className="BlurMapCustom">
						<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
						<styleClass value="$FullsizeAbsolute"/>
						<style>
							<hitTest value="false"/>
						</style>
						<bind name="visible" value="optionData.blurEnabled"/>
						<block className="mc_blurmap5_feather" type="native">
							<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
							<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
							<styleClass value="$Fullsize"/>
							<bind name="blurMap" value="0"/>
						</block>
					</block>
					<block className="modal_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
						<bind name="style" value="'alpha'; optionData.contrast ? 1.0 : 0.8"/>
					</block>
				</block>
				<block type="text">
					<bind name="fade" value="showWarning; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2; 0.05"/>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorUnready'"/>
					<style>
						<maxWidth value="210"/>
						<textAlign value="center"/>
					</style>
					<bind name="text" value="unsuitableShipAndBattle					? toUpperCase(tr('IDS_TASK_UNSUITABLE_BATTLE_AND_SHIP')) :
							!(_isShipSuitable) 						? toUpperCase(tr('IDS_TASK_UNSUITABLE_SHIP')) :
							!(_isBattleSuitable) 					? toUpperCase(tr('IDS_TASK_UNSUITABLE_BATTLE')) :
							 (_isUseless) 							? toUpperCase(tr('IDS_TASK_IS_USELESS'))
																	: ''"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TaskItemTooltip">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evChangedPrem'];	resourceEntity.accountResource.isPremium"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'isActivated';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isActivated"/>
		<bind name="watchDH" value="'goal';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watch" value="'canOpenFinalTask'; 	(isMainTask) &amp;&amp; (stars &gt;= costUnlock) &amp;&amp; (state == 0)"/>
		<bind name="watch" value="'availableSlots'; 		(isPremiumAccount ? (common + premium) : common)"/>
		<bind name="watch" value="'taskWithoutProgress'; (taskProgress == 0) || (taskProgress == null)"/>
		<bind name="watch" value="'haveFreeSlot'; 		(choosenTasks.length &lt; availableSlots)"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="350px"/>
			<hitTest value="false"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="hint_panel_bold" type="native">
			<bind name="visible" value="isActivated"/>
			<style>
				<marginTop value="-2px"/>
				<marginBottom value="-2px"/>
				<marginLeft value="-2px"/>
				<marginRight value="-2px"/>
				<alpha value="0.6"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TaskItemHeader'; {_taskID: _taskID}"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block className="TaskItemStatus">
				<bind name="visible" value="(state != 5)"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$HugeMargins"/>
					<block>
						<bind name="visible" value="(state == 5 || isLooted)"/>
						<style>
							<backgroundImage value="symbol:checkbox_check"/>
							<width value="22px"/>
							<height value="17px"/>
							<top value="4px"/>
							<marginRight value="3px"/>
						</style>
					</block>
					<block type="text">
						<styleClass value="$TextHeaderBigDefault"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 ? 'IDS_TASK_IN_PROGRESS' :
						state == 3		? 'IDS_TASK_COMPLETED' :
						isLooted							? 'IDS_TASK_REPLAYABLE' :
						state == 0	? 'IDS_TASK_LOCKED'
															: 'IDS_TASK_NOT_DONE'"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$HugeMargins"/>
					<bind name="instance" value="'GoalsItem'; { _entityId: goal }"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="-2px"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<bind name="instance" value="'TaskContainerRestriction'; {_taskID: _taskID}"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<bind name="style" value="'alpha'; (isLooted ? 0.7 : 1)"/>
					<style>
						<marginRight value="16px"/>
					</style>
					<block className="icon_giftbox_small" type="native"/>
					<block>
						<bind name="visible" value="isLooted"/>
						<style>
							<position value="absolute"/>
							<top value="21px"/>
							<left value="23px"/>
						</style>
						<block className="icon_issued_small" type="native">
							<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
							<bind name="gotoAndStop!" value="'issued'"/>
						</block>
					</block>
				</block>
				<block type="text">
					<styleClass value="$MiddleVAligned"/>
					<style>
						<maxWidth value="240"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="!isLooted ? 'IDS_ADDITIONAL_REWARD_BEFORE' : 'IDS_ADDITIONAL_REWARD_AFTER'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="	!_isInPostbattle &amp;&amp; ((state == 1) ||
											(state == 2) || (state == 3) || canOpenFinalTask)"/>
			<styleClass value="$HugeMargins"/>
			<bind name="instance" value="'MouseInstruction'; { 	_type: 'left', 
												_instructionText: 	(state == 1)								? 'IDS_SHOW_TASK_DETAILS' :
																	(state == 2 &amp;&amp; taskWithoutProgress) 	? 'IDS_SHOW_TASK_DETAILS' :
																	(state == 2 &amp;&amp; !taskWithoutProgress) 	? 'IDS_SHOW_TASK_DETAILS' :
																	(state == 3) 								? 'IDS_TAKE_REWARD':
																	(canOpenFinalTask) 												? 'IDS_OPEN_FINAL_TASK'
																							 										: '',
												_maxWidth: 300 }"/>
		</block>
		<block>
			<styleClass value="$HugeMargins"/>
			<style>
				<marginTop value="-6px"/>
			</style>
			<bind name="visible" value="	!_isInPostbattle &amp;&amp;
						((state == 1) &amp;&amp; haveFreeSlot &amp;&amp; missionTimeToStart &lt;= 0) || (state == 2)"/>
			<bind name="instance" value="'MouseInstruction'; { 	_type: 'double_left', 
												_instructionText: 	(state == 1) 	  						  ? 'IDS_TASK_ACTIVATE' :
																	(state == 2 &amp;&amp; !taskWithoutProgress) ? 'IDS_TASK_CANCEL_WITH_PROGRESS' :
																	(state == 2)						  ? 'IDS_TASK_CANCEL' 
																							 									  : '',
												_maxWidth: 300 }"/>
		</block>
	</block>
	<block className="TaskItemInfotip">
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="firstEntityDH" value="'slotsEntity'; CC.constantsCampaignSlots"/>
		<bind name="collectionDH" value="CC.campaignTaskPlayer; 'choosenTasks'; 'active'"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'isPremiumAccount';	['resourceEntity.accountResource.evChangedPrem'];	resourceEntity.accountResource.isPremium"/>
		<bind name="watchDH" value="'stars';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<bind name="watchDH" value="'goal';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="watchDH" value="'rewards';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskParams.rewards"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'common'; []; slotsEntity.constantsCampaignSlots.common"/>
		<bind name="watchDH" value="'premium'; []; slotsEntity.constantsCampaignSlots.premium"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watch" value="'canOpenFinalTask'; 	(isMainTask) &amp;&amp; (stars &gt;= costUnlock) &amp;&amp; (state == 0)"/>
		<bind name="watch" value="'availableSlots'; 		(isPremiumAccount ? (common + premium) : common)"/>
		<bind name="watch" value="'haveFreeSlot'; 		(choosenTasks.length &lt; availableSlots)"/>
		<bind name="watchDH" value="'missionStartTime'; []; mission.campaignMissionParams.startTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<style>
			<width value="350px"/>
		</style>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-8px"/>
				<marginRight value="-13px"/>
				<marginLeft value="-13px"/>
				<marginBottom value="-16px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TaskItemHeader'; {_taskID: _taskID}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block className="TaskItemStatus">
			<bind name="visible" value="(state != 5)"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<block>
					<bind name="visible" value="(state == 5 || isLooted)"/>
					<style>
						<backgroundImage value="symbol:checkbox_check"/>
						<width value="22px"/>
						<height value="17px"/>
						<top value="4px"/>
						<marginRight value="3px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextHeaderBigDefault"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 ? 'IDS_TASK_IN_PROGRESS' :
						state == 3		? 'IDS_TASK_COMPLETED' :
						isLooted							? 'IDS_TASK_REPLAYABLE' :
						state == 0	? 'IDS_TASK_LOCKED'
															: 'IDS_TASK_NOT_DONE'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$HugeMargins"/>
				<bind name="instance" value="'GoalsItem'; { _entityId: goal }"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-2px"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<bind name="instance" value="'TaskContainerRestriction'; {_taskID: _taskID}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<styleClass value="$HugeMargins"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'RewardContainerTooltip'; { _rewards: rewards, _tooltipHeader: 'IDS_REWARDS_CAMPAIGN_TASK', _isDH20: true}"/>
			<block>
				<style>
					<marginRight value="16px"/>
				</style>
				<bind name="style" value="'alpha'; (isLooted ? 0.7 : 1)"/>
				<block className="icon_giftbox_small" type="native"/>
				<block>
					<bind name="visible" value="isLooted"/>
					<style>
						<position value="absolute"/>
						<top value="21px"/>
						<left value="23px"/>
					</style>
					<block className="icon_issued_small" type="native">
						<innerBind elementName="item.item" name="text" value="'IDS_ISSUED_STAMP'"/>
						<bind name="gotoAndStop!" value="'issued'"/>
					</block>
				</block>
			</block>
			<block type="text">
				<style>
					<maxWidth value="240"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="!isLooted ? 'IDS_ADDITIONAL_REWARD_BEFORE' : 'IDS_ADDITIONAL_REWARD_AFTER'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="(state == 2) || (state == 3) || canOpenFinalTask ||
						((state == 1) &amp;&amp; haveFreeSlot &amp;&amp; (missionTimeToStart &lt;= 0))"/>
			<styleClass value="$HugeMargins"/>
			<block className="button_default" type="native">
				<params>
					<param name="name" value="ActivateButtonTask"/>
				</params>
				<style>
					<width value="210px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<bind name="focus" value="1; true"/>
				<bind name="label" value=" 	(state == 1) 			 	? toUpperCase(tr('IDS_TASK_ACTIVATE'))  :
							(state == 2) 			? toUpperCase(tr('IDS_TASK_CANCEL'))  :
							(state == 3) &amp;&amp; !(isLooted)	? toUpperCase(tr('IDS_TAKE_REWARD')) :
							(state == 3) &amp;&amp; (isLooted) 	? toUpperCase(tr('IDS_TAKE_STARS'))  :
							(canOpenFinalTask) 								? toUpperCase(tr('IDS_OPEN_FINAL_TASK'))
																			: null"/>
				<bind name="action" value="'buttonClick';  ((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max)) 	? null 
																						: (state == 1) 		? 'CampaignsProxy.activateTask'
																						: (state == 2) 	? 'CampaignsProxy.deactivateTask'
																						: (state == 3) 			? 'CampaignsProxy.takeReward'
																						: (canOpenFinalTask)						? 'CampaignsProxy.unlockTask'
																																	: null ; { taskID: campaignTaskEntity.campaignTaskParams.id}"/>
				<bind name="dispatch" value="'buttonClick'; 'Tooltip.Close'; {}"/>
				<bind name="request" value="'buttonClick'; ((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max)) 	? 'CampaignsProxy.deactivateTask'
																						: null; {taskID: campaignTaskEntity.campaignTaskParams.id}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	(state == 5) || (state == 0) || ((state == 1) &amp;&amp; !(haveFreeSlot))
						|| ((state == 1) &amp;&amp; (missionTimeToStart &gt; 0))"/>
			<styleClass value="$HugeMargins"/>
			<block type="text">
				<style>
					<maxWidth value="320"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<bind name="timeFormat" value="missionTimeToStart; 'HIGHEST'; 'formatStartTime'; true"/>
				<bind name="text" value="(state == 5) 															? 'IDS_IMPOSSIBLE_TO_CHOOSE_TASK' :
						((state == 1) &amp;&amp; !(haveFreeSlot)) 										? 'IDS_TOOLTIP_NEED_FREE_SLOT' :
						(state == 0) &amp;&amp; (isMainTask) &amp;&amp; (missionState != 0)	? 'IDS_TOOLTIP_FINAL_TASK_LOCKED' :
						(state == 0)																? campaignNeedToken 	? 'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN'
																																				: (missionTimeToStart &gt; 0)	? subst('IDS_LOCKED_MISSION_TIME_LEFT_TASK_TOOLTIP', [], {timeLeft: formatStartTime})
																																											: 'IDS_TOOLTIP_TASK_LOCKED'
																														: ''"/>
			</block>
		</block>
		<block className="dock_panel_pin_h" type="native">
			<style>
				<position value="absolute"/>
				<marginTop value="-8px"/>
			</style>
			<bind name="gotoAndStop!" value="'left'"/>
			<params>
				<param name="name" value="pinLeft"/>
			</params>
		</block>
		<block className="dock_panel_pin_h" type="native">
			<style>
				<position value="absolute"/>
				<marginTop value="-8px"/>
				<right value="-8px"/>
			</style>
			<bind name="gotoAndStop!" value="'right'"/>
			<params>
				<param name="name" value="pinRight"/>
			</params>
		</block>
	</block>
	<block className="TaskItemStatus">
		<bind name="visible" value="(state != 5)"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$HugeMargins"/>
			<block>
				<bind name="visible" value="(state == 5 || isLooted)"/>
				<style>
					<backgroundImage value="symbol:checkbox_check"/>
					<width value="22px"/>
					<height value="17px"/>
					<top value="4px"/>
					<marginRight value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="state == 2 &amp;&amp; isLooted ? 'IDS_TASK_IN_PROGRESS_REPEAT' :
						state == 2 ? 'IDS_TASK_IN_PROGRESS' :
						state == 3		? 'IDS_TASK_COMPLETED' :
						isLooted							? 'IDS_TASK_REPLAYABLE' :
						state == 0	? 'IDS_TASK_LOCKED'
															: 'IDS_TASK_NOT_DONE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
	</block>
	<block className="TaskItemHeader">
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; campaignTaskEntity.campaignTaskParams.missionID"/>
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; campaignTaskEntity.campaignTaskParams.campaignID"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="watchDH" value="'state';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'taskProgress';['campaignTaskEntity.progress.evChanged']; campaignTaskEntity.progress.value"/>
		<bind name="watchDH" value="'max';[]; campaignTaskEntity.progress.max"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'number';[]; campaignTaskEntity.campaignTaskParams.number"/>
		<bind name="watchDH" value="'uiNumber';[]; mission.campaignMissionParams.uiNumber"/>
		<bind name="watchDH" value="'isMainTask';[]; campaignTaskEntity.campaignTaskParams.isMainTask"/>
		<bind name="watchDH" value="'lootStars';[]; campaignTaskEntity.campaignTaskParams.lootStars"/>
		<bind name="watchDH" value="'costUnlock';[]; campaignTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'bgIconID';[]; campaignTaskEntity.campaignTaskParams.bgIconID"/>
		<bind name="watchDH" value="'isLooted';['campaignTaskEntity.campaignTaskPlayer.evUpdate']; campaignTaskEntity.campaignTaskPlayer.isLooted"/>
		<style>
			<width value="100%"/>
			<paddingTop value="2px"/>
			<paddingRight value="2px"/>
			<paddingLeft value="2px"/>
		</style>
		<bind name="style" value="'height'; _isPortBanner ? '100px' : '120px'"/>
		<block>
			<bind name="visible" value="!_isPortBanner"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../campaigns/bg_task_item/' + 'task_bg_campaign_' + (bgIconID ? bgIconID : number) + '.png'"/>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<style>
					<alpha value="2.5"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="(state == 5)"/>
			<style>
				<backgroundImage value="symbol:quest_done_icon"/>
				<top value="10px"/>
				<right value="32px"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
		</block>
		<block>
			<block>
				<style>
					<backgroundSize value="fill"/>
				</style>
				<bind name="style" value="'width'; _isPortBanner ? '100px' : '120px'"/>
				<bind name="style" value="'height'; _isPortBanner ? '100px' : '120px'"/>
				<bind name="tooltip" value="'SimpleTooltip';  {tooltipText: 'IDS_MISSION_NUMBER'}"/>
				<bind name="style" value="'backgroundImage'; (missionState == 5) 	? 'url:../campaigns/missions_pin/' + campaignName + '_done_pin.png'
																							: 'url:../campaigns/missions_pin/' + campaignName + '_pin.png'"/>
				<block type="text">
					<bind name="visible" value="(state != 0) &amp;&amp; (missionState != 5)"/>
					<style>
						<alpha value="0.8"/>
						<position value="absolute"/>
					</style>
					<styleClass value="$MiddleAligned"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$TextAccentBoldAccountLevel2"/>
					<bind name="text" value="uiNumber"/>
				</block>
				<block>
					<bind name="visible" value="state == 0"/>
					<styleClass value="$FullsizeAbsolute"/>
					<block>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
						<block className="icon_locked_mc" type="native"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<style>
						<marginTop value="3px"/>
						<maxWidth value="200"/>
					</style>
					<styleClass value="$TextLargeHeaderBold"/>
					<bind name="text" value="isMainTask 	? (toUpperCase(tr('IDS_FINAL_TASK')))
										: (toUpperCase(tr('IDS_CAMPAIGN_TASK'))) + ' ' + number"/>
				</block>
				<block className="indicator_progress_bar" type="native">
					<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
					<style>
						<width value="200px"/>
					</style>
					<bind name="value" value="(taskProgress/max) * 10"/>
				</block>
				<block>
					<bind name="visible" value="((taskProgress &gt; 0) &amp;&amp; (taskProgress &lt; max) )"/>
					<style>
						<width value="100%"/>
						<marginTop value="-3px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeader"/>
						<bind name="class" value="'$FontColorBlueish'"/>
						<bind name="text" value="taskProgress + '/' + max"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="((missionState == 0) || (missionState == 2)) &amp;&amp; !isMainTask"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_STARS_FOR_BATTLE'}"/>
					<style>
						<marginTop value="3px"/>
						<marginLeft value="-1px"/>
					</style>
					<block>
						<bind name="repeat" value="lootStars; 'StarsEarnedEnable'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<style>
							<position value="absolute"/>
						</style>
						<bind name="repeat" value="costUnlock; 'StarsEarnedDisabled'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="WindowTaskHeaderInstruction">
		<bind name="primaryEntityDH" value="'campaign'; CC.campaignParams; _curCampaignId"/>
		<bind name="watchDH" value="'campaignState'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.state"/>
		<bind name="watchDH" value="'campaignMissionsStates'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.missionsStates"/>
		<bind name="watchDH" value="'campaignName'; []; campaign.campaignParams.name"/>
		<bind name="watchDH" value="'campaignIsActivated'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isActivated"/>
		<bind name="watchDH" value="'campaignAllMissions'; []; campaign.campaignParams.allMissions"/>
		<bind name="watchDH" value="'campaignMainTask'; []; campaign.campaignParams.mainTask"/>
		<bind name="watchDH" value="'campaignMapPositions'; []; campaign.campaignParams.mapPositions"/>
		<bind name="watchDH" value="'campaignCountTasks'; []; campaign.campaignParams.countTasks"/>
		<bind name="watchDH" value="'campaignStartTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.startTime"/>
		<bind name="watchDH" value="'campaignEndTime'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.endTime"/>
		<bind name="watchDH" value="'campaignIsNarrative'; []; campaign.campaignParams.isNarrative"/>
		<bind name="watchDH" value="'campaignToken'; []; campaign.campaignParams.token"/>
		<bind name="watchDH" value="'campaignIsViewed'; ['campaign.campaignParams.evUpdate']; campaign.campaignParams.isViewed"/>
		<bind name="watch" value="'campaignNeedToken'; campaignState == 0 &amp;&amp; campaignToken != ''"/>
		<bind name="watchDH" value="'campaignCountLootedTasks'; ['campaign.campaignPlayer.evUpdate']; campaign.campaignPlayer.countLootedTasks"/>
		<bind name="primaryEntityDH" value="'mission'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; mission.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'missionState';['mission.campaignMissionPlayer.evUpdate']; mission.campaignMissionPlayer.state"/>
		<bind name="watchDH" value="'mainTaskState';['missionMainTaskEntity.campaignTaskPlayer.evUpdate']; missionMainTaskEntity.campaignTaskPlayer.state"/>
		<bind name="watchDH" value="'costUnlock';[]; missionMainTaskEntity.campaignTaskParams.costUnlock"/>
		<bind name="watchDH" value="'mainTask';[]; mission.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'missionStartTime';[]; mission.campaignMissionParams.startTime"/>
		<bind name="watch" value="'missionTimeToStart'; missionStartTime - serverTime"/>
		<bind name="serverTime" value="'serverTime'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="instance" value="'TaskItem'; {_isShipSuitable: true, _isBattleSuitable: true, _isUseless: false, _taskID: mainTask}"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1.5sw"/>
			</style>
			<block>
				<bind name="instance" value="'WindowHeaderCostUnlock'; {_curMissionId: _curMissionId, _isInHeader: true}"/>
			</block>
			<block>
				<style>
					<marginTop value="3px"/>
				</style>
				<block type="text">
					<bind name="visible" value="(missionState != 2)"/>
					<style>
						<maxWidth value="500"/>
						<leading value="-2"/>
					</style>
					<styleClass value="$TextHeaderWhite"/>
					<bind name="class" value="campaignNeedToken || missionTimeToStart &gt; 0 ? '$FontColorUnready' : '$FontColorDefault'"/>
					<bind name="timeFormat" value="missionTimeToStart; 'HIGHEST'; 'formatStartTime'; true"/>
					<bind name="text" value="missionState == 0						? campaignNeedToken 			? 'IDS_TOOLTIP_CAMPAIGN_NEED_TOKEN'
																						  								: missionTimeToStart &gt; 0	? subst('IDS_LOCKED_MISSION_TIME_LEFT_TOOLTIP', [], {timeLeft: formatStartTime})
																																					: 'IDS_MISSION_STATE_LOCKED' :
							(	missionState == 4 &amp;&amp;
								mainTaskState == 5) 			? 'IDS_MISSION_STATE_OPENED_BOSS' :
							(missionState == 4)				? 'IDS_MISSION_STATE_FINAL_TASK_OPENED_NOT_COMPLETED' 
																						: 'IDS_MISSION_STATE_COMPLETED'"/>
				</block>
				<block type="text">
					<bind name="visible" value="(missionState == 2)"/>
					<styleClass value="$TextHeaderWhite"/>
					<style>
						<maxWidth value="500"/>
						<leading value="-2"/>
						<alpha value="0.9"/>
						<styleSheet value="h3
						{
							color: #f5c96f;
						}"/>
					</style>
					<bind name="text" value="subst('IDS_CHOOSE_TASK_DESCR', [], {count: costUnlock}, costUnlock)"/>
				</block>
			</block>
		</block>
	</block>
	<block className="WindowHeaderCostUnlock">
		<bind name="primaryEntityDH" value="'campaignMissionEntity'; CC.campaignMissionParams; _curMissionId"/>
		<bind name="primaryEntityDH" value="'missionMainTaskEntity'; CC.campaignTaskParams; campaignMissionEntity.campaignMissionParams.mainTask"/>
		<bind name="watchDH" value="'stars';['campaignMissionEntity.campaignMissionPlayer.evUpdate']; campaignMissionEntity.campaignMissionPlayer.stars"/>
		<bind name="watchDH" value="'costUnlock'; []; missionMainTaskEntity.campaignTaskParams.costUnlock"/>
		<block>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_STARS_FOR_BATTLE_EMPTY'}"/>
			<bind name="repeat" value="costUnlock; 'StarsEarnedDisabled'; {_isInHeader: _isInHeader}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_STARS_FOR_BATTLE_EARNED'}"/>
			<bind name="repeat" value="stars; 'StarsEarnedEnable'; {_isInHeader: _isInHeader}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="StarsEarnedEnable">
		<style>
			<width value="23px"/>
			<height value="23px"/>
		</style>
		<bind name="style" value="'marginRight'; _isInHeader ? '9px' : '2px'"/>
		<bind name="style" value="'marginBottom'; _isInTooltip ? '6px' : '0px'"/>
		<block className="icon_rank_star_nano" type="native">
			<bind name="gotoAndStop!" value="'earned'"/>
		</block>
	</block>
	<block className="StarsEarnedDisabled">
		<style>
			<width value="23px"/>
			<height value="23px"/>
		</style>
		<bind name="style" value="'marginRight'; _isInHeader ? '9px' : '2px'"/>
		<bind name="style" value="'marginBottom'; _isInTooltip ? '6px' : '0px'"/>
		<block className="icon_rank_star_nano" type="native">
			<bind name="gotoAndStop!" value="'not_earned'"/>
		</block>
	</block>
	<block className="GoalsItem">
		<bind name="entityDH" value="'campaignGoalEntity'; _entityId"/>
		<bind name="watchDH" value="'l10nText';[]; campaignGoalEntity.campaignTaskGoal.l10nText"/>
		<bind name="watchDH" value="'l10nRestriction';[]; campaignGoalEntity.campaignTaskGoal.l10nRestriction"/>
		<block type="text">
			<bind name="style" value="'maxWidth'; _isInMissionTooltip ? '245' : '320'"/>
			<styleClass value="$TextHeader"/>
			<bind name="text" value="l10nText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_isInMissionTooltip == true"/>
			<bind name="style" value="'maxWidth'; _isInMissionTooltip ? '245' : '320'"/>
			<styleClass value="$TextHeader"/>
			<bind name="text" value="l10nRestriction"/>
		</block>
	</block>
	<block className="ArcEventHeader3">
		<bind name="watch" value="'isMainScreen'; _page &gt; 0"/>
		<style>
			<width value="100%"/>
			<height value="32px"/>
		</style>
		<block>
			<bind name="visible" value="isMainScreen"/>
			<style>
				<position value="absolute"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<styleClass value="$ArcEventTextStyle"/>
				<bind name="text" value="subst('IDS_ARC_EVENT_TITLE_PAGE', [], {page: _page})"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextDefault19NM"/>
			<styleClass value="$ArcEventTextStyle"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
			</style>
			<bind name="text" value="_headerText"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<styleClass value="$ArcEventTextStyle"/>
				<bind name="text" value="'IDS_ARC_EVENT_TITLE_DECOR'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!isMainScreen"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<width value="336px"/>
				<bottom value="0"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; {}"/>
		</block>
		<block>
			<bind name="visible" value="isMainScreen"/>
			<style>
				<position value="absolute"/>
				<width value="100%px"/>
				<bottom value="0"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; {}"/>
		</block>
	</block>
	<block className="ArcEventHeader2">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<position value="absolute"/>
				<width value="100%%"/>
				<marginTop value="13px"/>
			</style>
			<bind name="instance" value="'BlackDivider1'; {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<height value="1px"/>
					<width value="100%"/>
					<position value="absolute"/>
					<top value="13px"/>
					<backgroundRepeatX value="true"/>
				</style>
				<bind name="style" value="'backgroundImage';  _isFinalScreen ? 'url:../events/arc_event/final_screen/header_line_mask.png' : 'url:../events/arc_event/common/header_line_mask.png'"/>
			</block>
			<block>
				<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
				<style>
					<width value="10px"/>
					<height value="13px"/>
					<marginTop value="7px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/common/header_arrow_right.png'"/>
			</block>
			<block>
				<block type="text">
					<style>
						<margin value="24px|0"/>
					</style>
					<styleClass value="$TextDefaultBold30NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="_headerText"/>
				</block>
				<bind name="instance" value="'ArcEventHeaderUnderline'; _showUnderline ? {} : null"/>
			</block>
			<block>
				<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
				<style>
					<width value="10px"/>
					<height value="13px"/>
					<marginTop value="7px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/common/header_arrow_left.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ArcEventHeaderUnderline">
		<style>
			<flow value="horizontal"/>
			<position value="absolute"/>
			<bottom value="-15px"/>
			<width value="100%"/>
			<height value="10px"/>
		</style>
		<block>
			<style>
				<width value="22px"/>
				<height value="100%"/>
				<backgroundImage value="url:../events/arc_event/common/underline_left.png"/>
			</style>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundImage value="url:../events/arc_event/common/underline_repeater.png"/>
				<backgroundRepeatX value="true"/>
			</style>
		</block>
		<block>
			<style>
				<width value="19px"/>
				<height value="100%"/>
				<backgroundImage value="url:../events/arc_event/common/underline_right.png"/>
			</style>
		</block>
	</block>
	<block className="ArcEventHeader1">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!_isFinalScreen"/>
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
			</style>
			<bind name="instance" value="'ArcEventHeader3'; { _page: _page, _headerText: 'IDS_ARC_EVENT_TITLE' }"/>
		</block>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="24px"/>
				<marginBottom value="24px"/>
			</style>
			<block type="text">
				<style>
					<letterSpacing value="2"/>
				</style>
				<styleClass value="$TextDefaultBold50NM"/>
				<styleClass value="$ArcEventTextStyle"/>
				<bind name="text" value="toUpperCase(tr(_headerText))"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_isFinalScreen"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BlackDivider4'; {}"/>
		</block>
	</block>
	<block className="ArcEventDecorFooter">
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; {}"/>
		</block>
		<block>
			<style>
				<paddingTop value="16px"/>
				<height value="100%"/>
			</style>
			<block>
				<style>
					<width value="272px"/>
					<height value="100%"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefaultBold30NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="'IDS_ARC_EVENT_FOOTER_'+ _windowName +'_TEXT_0'"/>
				</block>
				<block type="text">
					<style>
						<marginTop value="24px"/>
						<textAlign value="justify"/>
						<overflow value="hidden"/>
					</style>
					<styleClass value="$Fullsize"/>
					<styleClass value="$TextDefault17NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="'IDS_ARC_EVENT_FOOTER_'+ _windowName +'_TEXT_1'"/>
				</block>
			</block>
			<block>
				<style>
					<height value="100%"/>
					<margin value="16px|0px"/>
				</style>
				<bind name="instance" value="'BlackDivider1'; { _vertical: true }"/>
			</block>
			<block>
				<style>
					<width value="272px"/>
					<height value="100%"/>
				</style>
				<block type="text">
					<style>
						<textAlign value="justify"/>
						<overflow value="hidden"/>
					</style>
					<styleClass value="$Fullsize"/>
					<styleClass value="$TextDefault17NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="'IDS_ARC_EVENT_FOOTER_'+ _windowName +'_TEXT_2'"/>
				</block>
			</block>
			<block>
				<style>
					<height value="100%"/>
					<margin value="16px|0px"/>
				</style>
				<bind name="instance" value="'BlackDivider1'; { _vertical: true }"/>
			</block>
			<block>
				<style>
					<width value="272px"/>
					<height value="100%"/>
				</style>
				<block type="text">
					<style>
						<textAlign value="justify"/>
						<overflow value="hidden"/>
					</style>
					<styleClass value="$Fullsize"/>
					<styleClass value="$TextDefault17NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="'IDS_ARC_EVENT_FOOTER_'+ _windowName +'_TEXT_3'"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ArcEventSideHeader">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'sides';	[]; arcEventEntity.arcEvent.sides"/>
		<bind name="watchDH" value="'sideId'; ['arcEventEntity.playerArcEventInfo.evSideChanged']; arcEventEntity.playerArcEventInfo.sideId"/>
		<bind name="watchDH" value="'state'; ['arcEventEntity.arcEvent.evChanged']; arcEventEntity.arcEvent.state"/>
		<bind name="watch" value="'isFinalScreen'; state == 2"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="120px"/>
			</style>
		</block>
		<block>
			<bind name="colorTransform" value="isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<block>
				<bind name="instance" value="'ArcEventSideHeaderLogo';	{ _side: sides[0], _sideId: sideId, _isFinalScreen: isFinalScreen }"/>
			</block>
			<block>
				<style>
					<width value="320px"/>
					<height value="120px"/>
				</style>
				<bind name="instance" value="'ArcEventSideHeaderLeft';	{ _side: sides[0], _sideId: sideId, _isFinalScreen: isFinalScreen }"/>
			</block>
			<block>
				<style>
					<width value="320px"/>
					<height value="120px"/>
				</style>
				<bind name="instance" value="'ArcEventSideHeaderRight';	{ _side: sides[1], _sideId: sideId, _isFinalScreen: isFinalScreen }"/>
			</block>
			<block>
				<bind name="instance" value="'ArcEventSideHeaderLogo';	{ _side: sides[1], _sideId: sideId, _isFinalScreen: isFinalScreen }"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="tooltip" value="'SimpleTooltip'; sideId == -1 ? null : {tooltipText: tr('IDS_COMMON_TEAM_VICTORY_POINTS_TOOLTIP')}"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<bottom value="18px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<styleClass value="$ArcEventTextStyle"/>
				<bind name="text" value="isFinalScreen 	? 'IDS_COMMON_TEAM_VICTORY_POINTS' 
										: sideId == -1 	? 'IDS_ARC_EVENT_CHOOSE_SIDE' 
																				: 'IDS_COMMON_FINAL_STAT_POINTS'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="(sideId == -1) &amp;&amp; !isFinalScreen"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<position value="absolute"/>
				<width value="247px"/>
				<height value="100px"/>
				<marginTop value="50px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/common/icon_selected.png'"/>
		</block>
	</block>
	<block className="ArcEventSideHeaderLogo">
		<bind name="watch" value="'isSelected'; _side == _sideId"/>
		<bind name="watch" value="'sideLogoSmall'; 	'url:../events/arc_event/common/side_icon_' + _side + '.png'"/>
		<bind name="watch" value="'sideLogoBig'; 	'url:../events/arc_event/common/side_icon_' + _side + '_selected.png'"/>
		<block>
			<style>
				<width value="120px"/>
				<height value="120px"/>
			</style>
			<bind name="style" value="'alpha'; isSelected ? 0 : 1"/>
			<bind name="style" value="'backgroundImage'; sideLogoSmall"/>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="visible" value="isSelected &amp;&amp; !_isFinalScreen"/>
			<style>
				<width value="200px"/>
				<height value="200px"/>
				<position value="absolute"/>
				<marginTop value="-70px"/>
			</style>
			<bind name="style" value="'backgroundImage'; sideLogoBig"/>
		</block>
	</block>
	<block className="ArcEventSideHeaderLeft">
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; _side"/>
		<bind name="watchDH" value="'sideDailyProgress'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.sideDailyProgress"/>
		<bind name="watchDH" value="'sideVictoryDays'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.sideVictoryDays"/>
		<bind name="watchDH" value="'myTotalBattles'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.myTotalBattles"/>
		<bind name="watchDH" value="'state'; ['arcEventEntity.arcEvent.evChanged']; arcEventEntity.arcEvent.state"/>
		<bind name="watch" value="'isSelected'; _side == _sideId"/>
		<styleClass value="$Fullsize"/>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<position value="absolute"/>
				<height value="100%"/>
				<margin value="0px|8px"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; { _vertical: true }"/>
		</block>
		<block>
			<style>
				<height value="70px"/>
			</style>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tr('IDS_ARC_EVENT_SIDE_TOOLTIP_0')}"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="240px"/>
					<paddingLeft value="32px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<multiline value="false"/>
					</style>
					<styleClass value="$TextDefaultBold40NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="toUpperCase(tr('IDS_ARC_EVENT_SIDE_' + _side))"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isSelected &amp;&amp; !(state == 2)"/>
				<style>
					<position value="absolute"/>
					<width value="135px"/>
					<height value="11px"/>
					<top value="55px"/>
					<left value="25px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/common/side_selected.png'"/>
			</block>
			<block>
				<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
				<style>
					<height value="100%"/>
					<margin value="0px|8px"/>
				</style>
				<bind name="instance" value="'BlackDivider2'; { _vertical: true }"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="80px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<align value="right"/>
						<paddingRight value="20px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold40NM"/>
						<styleClass value="$ArcEventTextStyle"/>
						<bind name="text" value="sideVictoryDays"/>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<width value="100%"/>
				<paddingLeft value="8px"/>
			</style>
			<bind name="instance" value="'BlackDivider1'; {}"/>
		</block>
		<block>
			<style>
				<height value="50px"/>
			</style>
			<block>
				<bind name="visible" value="(_sideId != -1) || (_isFinalScreen == true)"/>
				<style>
					<marginLeft value="32px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefault21NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="class" value="isSelected	? '$Bold' : '$None'"/>
					<bind name="text" value="_isFinalScreen ? format(myTotalBattles) : format(sideDailyProgress)"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ArcEventSideHeaderRight">
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; _side"/>
		<bind name="watchDH" value="'sideDailyProgress'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.sideDailyProgress"/>
		<bind name="watchDH" value="'sideVictoryDays'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.sideVictoryDays"/>
		<bind name="watchDH" value="'myTotalBattles'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.myTotalBattles"/>
		<bind name="watchDH" value="'state'; ['arcEventEntity.arcEvent.evChanged']; arcEventEntity.arcEvent.state"/>
		<bind name="watch" value="'isSelected'; _side == _sideId"/>
		<styleClass value="$Fullsize"/>
		<block>
			<style>
				<height value="70px"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="-1px"/>
					<position value="absolute"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold40NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="':'"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="80px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<align value="left"/>
						<paddingLeft value="20px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold40NM"/>
						<styleClass value="$ArcEventTextStyle"/>
						<bind name="text" value="sideVictoryDays"/>
					</block>
				</block>
			</block>
			<block>
				<style>
					<position value="absolute"/>
					<left value="-80px"/>
					<width value="160px"/>
					<height value="100%"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tr('IDS_COMMON_STAT_POINTS_TOOLTIP')}"/>
			</block>
			<block>
				<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
				<style>
					<height value="100%"/>
					<margin value="0px|8px"/>
				</style>
				<bind name="instance" value="'BlackDivider2'; { _vertical: true }"/>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tr('IDS_ARC_EVENT_SIDE_TOOLTIP_1')}"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="240px"/>
					<paddingRight value="32px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<multiline value="false"/>
						<textAlign value="right"/>
					</style>
					<styleClass value="$TextDefaultBold40NM"/>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="text" value="toUpperCase(tr('IDS_ARC_EVENT_SIDE_' + _side))"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isSelected &amp;&amp; !(state == 2)"/>
				<style>
					<position value="absolute"/>
					<width value="135px"/>
					<height value="11px"/>
					<top value="55px"/>
					<right value="25px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/common/side_selected.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<width value="100%"/>
				<paddingRight value="8px"/>
			</style>
			<bind name="instance" value="'BlackDivider1'; {}"/>
		</block>
		<block>
			<style>
				<height value="50px"/>
				<width value="100%"/>
			</style>
			<block>
				<bind name="visible" value="(_sideId != -1) || (_isFinalScreen == true)"/>
				<style>
					<align value="right"/>
					<width value="100%"/>
					<marginRight value="32px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefault21NM"/>
					<style>
						<textAlign value="right"/>
					</style>
					<styleClass value="$ArcEventTextStyle"/>
					<bind name="class" value="isSelected	? '$Bold' : '$None'"/>
					<bind name="text" value="_isFinalScreen ? format(myTotalBattles) : format(sideDailyProgress)"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="colorTransform" value="_isFinalScreen ? {redOffset:119,greenOffset:44,blueOffset:-29} : {}"/>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
				<height value="100%"/>
				<margin value="0px|8px"/>
			</style>
			<bind name="instance" value="'BlackDivider2'; { _vertical: true }"/>
		</block>
	</block>
	<block className="ArcEventPlayerLoyalty">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'sides';[]; arcEventEntity.arcEvent.sides"/>
		<bind name="firstEntityDH" value="'arcEventConfigEntity'; CC.arcEventConfig"/>
		<bind name="watchDH" value="'stagesNumberForEventLoyalty';[]; arcEventConfigEntity.arcEventConfig.stagesNumberForEventLoyalty"/>
		<bind name="primaryEntityDH" value="'arcEventFirstSideEntity'; CC.arcEventSide; sides[0]"/>
		<bind name="watchDH" value="'myLoyaltyFirstSide';['arcEventFirstSideEntity.arcEventSide.evLoyaltyChanged']; arcEventFirstSideEntity.arcEventSide.myLoyalty"/>
		<bind name="primaryEntityDH" value="'arcEventSecondSideEntity'; CC.arcEventSide; sides[1]"/>
		<bind name="watchDH" value="'myLoyaltySecondSide';['arcEventSecondSideEntity.arcEventSide.evLoyaltyChanged']; arcEventSecondSideEntity.arcEventSide.myLoyalty"/>
		<bind name="watch" value="'gainedReward'; (myLoyaltyFirstSide &gt;= stagesNumberForEventLoyalty) &amp;&amp; (myLoyaltySecondSide &gt;= stagesNumberForEventLoyalty)"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'ArcEventPlayerLoyaltyRow'; { _side: sides[0] }"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<bind name="instance" value="'ArcEventPlayerLoyaltyRow'; { _side: sides[1] }"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="80px"/>
				<height value="80px"/>
				<position value="absolute"/>
				<right value="140px"/>
			</style>
			<bind name="tooltip" value="'ArcEventEventLoyaltyTooltip'; { _isEventLoyalty: true, _isEventLoyaltyReward: true }"/>
			<bind name="style" value="'backgroundImage'; gainedReward 	? 'url:../events/arc_event/personal_progress/loyalty_event_reward_full.png'
														: 'url:../events/arc_event/personal_progress/loyalty_event_reward_empty.png'"/>
		</block>
		<block>
			<bind name="visible" value="gainedReward"/>
			<style>
				<width value="25px"/>
				<height value="25px"/>
				<position value="absolute"/>
				<right value="125px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/personal_progress/icon_done.png'"/>
		</block>
		<block type="text">
			<style>
				<position value="absolute"/>
				<marginTop value="7px"/>
				<right value="655px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<styleClass value="$ArcEventTextStyle"/>
			<bind name="text" value="'IDS_ARC_EVENT_SIDE_TOOLTIP_0'"/>
		</block>
		<block type="text">
			<style>
				<position value="absolute"/>
				<marginTop value="53px"/>
				<right value="655px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<styleClass value="$ArcEventTextStyle"/>
			<bind name="text" value="'IDS_ARC_EVENT_SIDE_TOOLTIP_1'"/>
		</block>
	</block>
	<block className="ArcEventPlayerLoyaltyRow">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'sides';[]; arcEventEntity.arcEvent.sides"/>
		<bind name="firstEntityDH" value="'arcEventConfigEntity'; CC.arcEventConfig"/>
		<bind name="watchDH" value="'stagesNumberForTeamLoyalty';[]; arcEventConfigEntity.arcEventConfig.stagesNumberForTeamLoyalty"/>
		<bind name="watchDH" value="'stagesNumberForEventLoyalty';[]; arcEventConfigEntity.arcEventConfig.stagesNumberForEventLoyalty"/>
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; sides[_side]"/>
		<bind name="watchDH" value="'myLoyalty';['arcEventSideEntity.arcEventSide.evLoyaltyChanged']; arcEventSideEntity.arcEventSide.myLoyalty"/>
		<bind name="watch" value="'teamLoyaltyCounter'; 	stagesNumberForTeamLoyalty[_side] / myLoyalty"/>
		<bind name="watch" value="'teamLoyaltyPercent'; 10 / teamLoyaltyCounter"/>
		<bind name="watch" value="'eventLoyaltyCounter'; (stagesNumberForEventLoyalty - stagesNumberForTeamLoyalty[_side]) / (myLoyalty - stagesNumberForTeamLoyalty[_side])"/>
		<bind name="watch" value="'eventLoyaltyPercent'; 10 / eventLoyaltyCounter"/>
		<bind name="watch" value="'teamLoyalty'; 	(myLoyalty &gt; 0) 	? teamLoyaltyPercent  : 0"/>
		<bind name="watch" value="'eventLoyalty'; 	(teamLoyalty &gt;= 10) ? eventLoyaltyPercent : 0"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="tooltip" value="'ArcEventEventLoyaltyTooltip'; { _side: _side }"/>
			<style>
				<height value="30px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block className="indicator_progress_bar_dark_bg" type="native">
					<style>
						<width value="170px"/>
						<height value="8px"/>
					</style>
				</block>
				<block className="indicator_progress_bar_dark_mask" type="native">
					<style>
						<width value="170px"/>
						<height value="6px"/>
						<position value="absolute"/>
					</style>
					<bind name="value" value="teamLoyalty"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="tooltip" value="'ArcEventEventLoyaltyTooltip'; { _side: _side }"/>
			<style>
				<height value="30px"/>
				<marginLeft value="8px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="30px"/>
					<height value="30px"/>
				</style>
				<bind name="style" value="'backgroundImage'; (_side == 0) 	? 	(teamLoyalty &gt;= 10) ? 'url:../events/arc_event/personal_progress/loyalty_reward_honor_full.png'
																					: 'url:../events/arc_event/personal_progress/loyalty_reward_honor_empty.png'
															: 	(teamLoyalty &gt;= 10) ? 'url:../events/arc_event/personal_progress/loyalty_reward_glory_full.png'
																					: 'url:../events/arc_event/personal_progress/loyalty_reward_glory_empty.png'"/>
			</block>
			<block>
				<bind name="visible" value="(teamLoyalty &gt;= 10)"/>
				<style>
					<width value="25px"/>
					<height value="25px"/>
					<position value="absolute"/>
					<left value="20px"/>
					<top value="-20px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:../events/arc_event/personal_progress/icon_done.png'"/>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'ArcEventEventLoyaltyTooltip'; { _side: _side, _isEventLoyalty: true }"/>
			<style>
				<height value="30px"/>
				<marginLeft value="8px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block className="indicator_progress_bar_dark_bg" type="native">
					<style>
						<width value="170px"/>
						<height value="8px"/>
					</style>
				</block>
				<block className="indicator_progress_bar_dark_mask" type="native">
					<style>
						<width value="170px"/>
						<height value="6px"/>
						<position value="absolute"/>
					</style>
					<bind name="value" value="eventLoyalty"/>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="11px"/>
					<height value="19px"/>
					<marginLeft value="8px"/>
				</style>
				<bind name="style" value="'backgroundImage'; (eventLoyalty &gt;= 10) 	? 'url:../events/arc_event/personal_progress/loyalty_reward_unlocked.png'
																	: 'url:../events/arc_event/personal_progress/loyalty_reward_locked.png'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ArcEventEventLoyaltyTooltip">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'sides'; []; arcEventEntity.arcEvent.sides"/>
		<bind name="watchDH" value="'stagesNumberForTeamLoyalty'; []; arcEventEntity.arcEventConfig.stagesNumberForTeamLoyalty"/>
		<bind name="watchDH" value="'stagesNumberForEventLoyalty'; []; arcEventEntity.arcEventConfig.stagesNumberForEventLoyalty"/>
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; sides[_side]"/>
		<bind name="watchDH" value="'myLoyalty'; ['arcEventSideEntity.arcEventSide.evLoyaltyChanged']; arcEventSideEntity.arcEventSide.myLoyalty"/>
		<bind name="watch" value="'totalPoints'; _isEventLoyalty ? stagesNumberForEventLoyalty : stagesNumberForTeamLoyalty[_side]"/>
		<bind name="watchDH" value="'teamLoyaltyRewardIds';  []; arcEventEntity.arcEventConfig.teamLoyaltyRewardIds"/>
		<bind name="watchDH" value="'eventLoyaltyRewardIds'; []; arcEventEntity.arcEventConfig.eventLoyaltyRewardIds"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="360px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$ArcEventTooltipMargins"/>
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="text" value="_isEventLoyalty ? 'IDS_ARC_EVENT_LOYALTY' : tr('IDS_ARC_EVENT_SIDE_' + _side + '_LOYALTY')"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<styleClass value="$ArcEventTooltipMargins"/>
			<bind name="text" value="_isEventLoyalty ? 'IDS_ARC_EVENT_LOYALTY_DESCR' : tr('IDS_ARC_EVENT_TEAM_LOYALTY_DESCR_' + _side)"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!_isEventLoyaltyReward"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<margin value="16px|8px"/>
				</style>
				<bind name="instance" value="'ArcEventEventLoyaltyPoints'; { _text: 'IDS_ARC_EVENT_LOYALTY_PROGRESS_COUNTER', _playerPointsCounter: myLoyalty, _totalPointsCounter: totalPoints }"/>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginBottom value="5px"/>
				<marginLeft value="16px"/>
			</style>
			<bind name="repeat" value="_isEventLoyalty ? eventLoyaltyRewardIds : teamLoyaltyRewardIds[_side]; 'RewardContainerTooltipItemAdapter'"/>
		</block>
	</block>
	<block className="ArcEventEventLoyaltyPoints">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<marginTop value="8px"/>
			<marginBottom value="8px"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="_text"/>
		</block>
		<block>
			<bind name="instance" value="'DefaultDividedCounter'; {	_curValueTextClass: '$TextDefaultBold17NM',
													_curValue: _playerPointsCounter,
													_maxValue: _totalPointsCounter}"/>
		</block>
	</block>
	<block className="ArcEventSideModifier">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'yesterdayWinnerSideId'; ['arcEventEntity.arcEvent.evChanged']; arcEventEntity.arcEvent.yesterdayWinnerSideId"/>
		<bind name="watchDH" value="'sideId';['arcEventEntity.playerArcEventInfo.evSideChanged']; arcEventEntity.playerArcEventInfo.sideId"/>
		<bind name="primaryEntityDH" value="'arcEventSide'; CC.arcEventSide; _sideId"/>
		<bind name="watchDH" value="'complexity'; ['arcEventSide.arcEventSide.evChanged']; arcEventSide.arcEventSide.complexity"/>
		<bind name="watchDH" value="'sideModifierTeam';   ['arcEventSide.arcEventSide.evChanged']; arcEventSide.arcEventSide.sideModifierTeam"/>
		<bind name="watch" value="'arcEventSideModifierItems'; [
			{_text: tr('IDS_ARC_EVENT_SIDE_MODIFIER_COMPLEXITY_' + complexity)}, 
			{_text: (complexity &gt; 0 								? 'IDS_ARC_EVENT_SIDE_MODIFIER_REWARD_1'	: 'IDS_ARC_EVENT_SIDE_MODIFIER_REWARD_0')}, 
			{_text: (complexity &gt; 0 || yesterdayWinnerSideId == -1	? 'IDS_ARC_EVENT_SIDE_MODIFIER_TEAM_1' 		: subst('IDS_SUBST_ARC_EVENT_SIDE_MODIFIER_TEAM_0', [], {modifier: sideModifierTeam}))}
		]
	"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="tooltip" value="'ArcEventSideModifierTooltip'; {_sideId: _sideId}"/>
		<bind name="repeat" value="arcEventSideModifierItems; 'ArcEventSideModifierItemRenderer'; {}"/>
	</block>
	<block className="ArcEventSideModifierItemRenderer">
		<style>
			<width value="100%"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<bind name="visible" value="($index &gt; 0) &amp;&amp; _text"/>
			<style>
				<width value="100%"/>
				<marginLeft value="8px"/>
				<marginRight value="8px"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="instance" value="'BlackDivider1'; {}"/>
		</block>
		<block type="text">
			<bind name="class" value="$index ? '$TextDefault17NM' : '$TextDefaultBold17NM'"/>
			<bind name="class" value="'$ArcEventTextStyle'"/>
			<style>
				<width value="100%"/>
				<textAlign value="center"/>
				<marginBottom value="16px"/>
			</style>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="ArcEventSideModifierTooltip">
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'yesterdayWinnerSideId'; []; arcEventEntity.arcEvent.yesterdayWinnerSideId"/>
		<bind name="primaryEntityDH" value="'arcEventWinnerSideEntity'; CC.arcEventSide; yesterdayWinnerSideId"/>
		<bind name="watchDH" value="'complexityWinner'; ['arcEventWinnerSideEntity.arcEventSide.evChanged']; arcEventWinnerSideEntity.arcEventSide.complexity"/>
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; _sideId"/>
		<bind name="watchDH" value="'complexity'; ['arcEventSideEntity.arcEventSide.evChanged']; arcEventSideEntity.arcEventSide.complexity"/>
		<bind name="watchDH" value="'stageProgressRules';	['arcEventEntity.arcEvent.evChanged']; arcEventEntity.arcEventConfig.stageProgressRules"/>
		<bind name="watch" value="'sideScoreModifier'; stageProgressRules[complexityWinner][1][1]"/>
		<bind name="watch" value="'isLastDayWinner'; yesterdayWinnerSideId == _sideId"/>
		<bind name="watch" value="'rewards1'; stageProgressRules[complexity][0][0][1][_sideId]"/>
		<bind name="watch" value="'rewards2'; stageProgressRules[complexity][0][1][1][_sideId]"/>
		<bind name="watch" value="'rewards3'; stageProgressRules[complexity][0][2][1][_sideId]"/>
		<bind name="watch" value="'rewards4'; stageProgressRules[complexity][0][3][1][_sideId]"/>
		<bind name="watch" value="'rewards5'; stageProgressRules[complexity][0][4][1][_sideId]"/>
		<bind name="watch" value="'rewards'; [rewards1, rewards2, rewards3, rewards4, rewards5]"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="352px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold19NM"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="tr('IDS_ARC_EVENT_SIDE_MODIFIER_COMPLEXITY_' + complexity)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px|16px|16px|0"/>
			</style>
			<bind name="repeat" value="isLastDayWinner	? [{_paragraphText: 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_DESCRIPTION_COMPLEXITY'}, {_paragraphText: 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_DESCRIPTION_COMPLEXITY_WINNER'}]
										: [{_paragraphText: 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_DESCRIPTION_COMPLEXITY'}]; 
			'RepeatParagraphItemNM'; {_class: '$TextDefault17NM', _maxWidth: 320}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<margin value="16px|16px|16px|0"/>
				</style>
				<bind name="repeat" value="rewards; 'ArcEventSideModifierTooltipParamsWrapper'; {_sideId: _sideId}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="yesterdayWinnerSideId &gt; -1"/>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="isLastDayWinner ? 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_DESCRIPTION_MODIFIER_WINNER' : 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_DESCRIPTION_MODIFIER_LOSER'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isLastDayWinner == false &amp;&amp; sideScoreModifier &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<margin value="16px|16px|16px|0"/>
				</style>
				<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: [ {
				attributeIDS: 'IDS_ARC_EVENT_SIDE_MODIFIER_TOOLTIP_PARAM_LOSER_MODIFIER_TEAM',
				measuredValue: '+'+ sideScoreModifier   +'%',
				category: 'positive'} ] }"/>
			</block>
		</block>
	</block>
	<block className="ArcEventSideModifierTooltipParamsWrapper">
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<bind name="watch" value="'rewardSubtype'; rewardEntity.rewardComponent.subtype"/>
		<bind name="watch" value="'rewardAmount'; rewardEntity.rewardComponent.amount"/>
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; _sideId"/>
		<bind name="watchDH" value="'complexity'; ['arcEventSideEntity.arcEventSide.evChanged']; arcEventSideEntity.arcEventSide.complexity"/>
		<bind name="firstEntityDH" value="'arcEventEntity'; CC.arcEvent"/>
		<bind name="watchDH" value="'stageProgressRules'; []; arcEventEntity.arcEventConfig.stageProgressRules"/>
		<bind name="watch" value="'points'; stageProgressRules[complexity][0][$index][0]"/>
		<bind name="watch" value="'paramsObject'; {
		attributeIDS: subst('IDS_SUBST_POINTS', [], {points: points}, points),
		measuredValue: format(rewardAmount),
		measure: ' ' + subst( (rewardSubtype != 'credits' ? 'IDS_PL_REWARD_'+toUpperCase(tr(rewardSubtype)) : 'IDS_PL_CREDITS'), [], {}, rewardAmount) }"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'ParamsModifierItem'; paramsObject"/>
	</block>
	<block className="ArcEventSideResultsTooltip">
		<bind name="primaryEntityDH" value="'arcEventSideEntity'; CC.arcEventSide; _side"/>
		<bind name="watchDH" value="'sideDailyProgress'; ['arcEventSideEntity.arcEventSide.evProgressChanged']; arcEventSideEntity.arcEventSide.sideDailyProgress"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold19NM"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="tr('IDS_ARC_EVENT_SIDE_TOOLTIP_' + _side)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<margin value="16px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="'IDS_ARC_EVENT_SIDE_RESULTS_COUNTER'"/>
			</block>
			<block type="text">
				<style>
					<textAlign value="right"/>
				</style>
				<styleClass value="$TextDefault17NM"/>
				<bind name="text" value="format(sideDailyProgress, -1)"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipBonusTags">
		<bind name="entityDH" value="'shipEntity'; _shipEntityId"/>
		<bind name="watchDH" value="'expMultiply';	['shipEntity.ownShip.evExpMultiplyChanged'];	shipEntity.ownShip.expMultiply"/>
		<bind name="watchDH" value="'bonusTagIds'; ['shipEntity.ship.evBonusTagsChanged']; shipEntity.ship.bonusTags"/>
		<bind name="entityDH" value="'firstBonusTag'; bonusTagIds[0]"/>
		<style>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'BonusTagsTooltip'; {_shipEntityId: _shipEntityId, _isInShipResearch: _isInShipResearch}"/>
		<bind name="watch" value="'entityBonusTagVisible'; (!(_isInShipResearch) || firstBonusTag.bonusTag.type == 'paragon') &amp;&amp; bonusTagIds.length &gt; 0"/>
		<bind name="watch" value="'expBonusTagVisible'; (expMultiply &gt; 1) &amp;&amp; !(bonusTagIds.length) &amp;&amp; !(_isInShipResearch)"/>
		<block>
			<bind name="visible" value="entityBonusTagVisible"/>
			<bind name="instance" value="'BonusTagItem'; entityBonusTagVisible ? { _bonusTagEntityId: bonusTagIds[0] } : null"/>
		</block>
		<block>
			<bind name="instance" value="'DoubleExperienceBonusTag'; expBonusTagVisible ? { _expMultiplyPercentsString: subst('%m',[expMultiply]) } : null"/>
		</block>
	</block>
	<block className="DoubleExperienceBonusTag">
		<style>
			<flow value="horizontal"/>
			<height value="27px"/>
			<width value="27px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="39px"/>
				<width value="39px"/>
				<left value="-12px"/>
				<bottom value="-12px"/>
				<backgroundImage value="url:../service_kit/bonus_tags/bonus_exp.png"/>
			</style>
		</block>
		<block type="text">
			<style>
				<marginLeft value="23px"/>
				<marginTop value="8px"/>
			</style>
			<styleClass value="$TextDefaultBold"/>
			<bind name="text" value="_expMultiplyPercentsString"/>
		</block>
	</block>
	<block className="BonusTagsTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<hitTest value="false"/>
			<width value="320px"/>
		</style>
		<bind name="entityDH" value="'shipEntity'; _shipEntityId"/>
		<bind name="watchDH" value="'expMultiply';	['shipEntity.ownShip.evExpMultiplyChanged'];	shipEntity.ownShip.expMultiply"/>
		<bind name="watchDH" value="'shipEntityBonusTags'; ['shipEntity.ship.evBonusTagsChanged'];	shipEntity.ship.bonusTags"/>
		<bind name="watch" value="'bonusTagIds'; _bonusTagId 		? [_bonusTagId] :
								_isInShipResearch 	? [shipEntityBonusTags[0]]
													: shipEntityBonusTags"/>
		<bind name="watch" value="'isDoubleExpBlockVisible'; (!(_isInShipResearch) &amp;&amp; (expMultiply &gt; 1))"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="12px"/>
				<paddingLeft value="12px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="bonusTagIds; 'BonusTagTooltipItem'; {_itemsLength: bonusTagIds.length}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="isDoubleExpBlockVisible &amp;&amp; (bonusTagIds.length &gt; 0)"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DoubleExperienceTooltipItem'; 	isDoubleExpBlockVisible ? {_shipEntityId: _shipEntityId}
																				: null"/>
			</block>
		</block>
	</block>
	<block className="BonusTagItem">
		<bind name="entityDH" value="'bonusTagEntity'; _bonusTagEntityId"/>
		<style>
			<height value="27px"/>
			<width value="27px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="39px"/>
				<width value="39px"/>
				<left value="-12px"/>
				<bottom value="-12px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_' + bonusTagEntity.bonusTag.type + '.png'"/>
		</block>
	</block>
	<block className="BonusTagTooltipItem">
		<bind name="entityDH" value="'bonusTagEntity'; $value"/>
		<bind name="watch" value="'bonusTagType'; bonusTagEntity.bonusTag.type"/>
		<bind name="watch" value="'rewards'; bonusTagEntity.bonusTag.rewards"/>
		<bind name="watch" value="'expirationDate'; bonusTagEntity.bonusTag.finishTime"/>
		<bind name="watch" value="'bonusTagsLeft'; bonusTagEntity.bonusTag.left"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../service_kit/bonus_tags/bonus_' + bonusTagType + '_big.png',
																_imageWidth: '80px',
																_imageHeight: '80px',
																_headerText: tr(toUpperCase('IDS_BONUSTAG_' + bonusTagType + '_HEADER')),
																_subheaderText: 'IDS_BATTLE_BONUS'}"/>
		</block>
		<block>
			<bind name="visible" value="bonusTagsLeft &gt; 1"/>
			<style>
				<position value="absolute"/>
				<width value="80px"/>
				<height value="80px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<style>
					<position value="absolute"/>
					<bottom value="0"/>
					<width value="100%"/>
					<textAlign value="right"/>
				</style>
				<bind name="text" value="'x' + bonusTagsLeft"/>
			</block>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="expirationDate"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemDueDateStatusLine'; expirationDate 	? {	_dueDateTimeStamp: expirationDate,
																				_substTextIDS: 'IDS_BONUS_TAG_EXPIRATION_DATE'}
																			: null"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemDescriptionText'; {	_descriptionText: 'IDS_TOOLTIP_BATTLE_BONUS_ONCE_DESCRIPTION'}"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemRewardsList'; {_rewards: rewards}"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="_itemsLength &gt; $index + 1"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
	</block>
	<block className="DoubleExperienceTooltipItem">
		<bind name="entityDH" value="'shipOwnEntity'; _shipEntityId"/>
		<bind name="watchDH" value="'expMultiply';			['shipOwnEntity.ownShip.evExpMultiplyChanged'];	shipOwnEntity.ownShip.expMultiply"/>
		<bind name="watchDH" value="'remainingExpBonusWins';	['shipOwnEntity.ownShip.evUpdateConfig'];		shipOwnEntity.ownShip.remainingExpBonusWins"/>
		<bind name="watch" value="'attributesPositive'; 	[{	attributeIDS: 'IDS_REWARD_EXPCOEFF_TITLE',
											measuredValue: '+' + ((expMultiply - 1) *100),
											measure: 'IDS_PERCENT',
											category: 'positive'
										}]"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageUrl: 'url:../service_kit/bonus_tags/bonus_exp_big.png',
																_imageWidth: '80px',
																_imageHeight: '80px',
																_headerText: 'IDS_BONUSTAG_FIRST_WIN',
																_subheaderText: 'IDS_BATTLE_BONUS'}"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemDescriptionText'; {	_descriptionText: (remainingExpBonusWins &gt; 1)	? subst('IDS_TOOLTIP_BATTLE_BONUS_MULTIPLE_DESCRIPTION', [], {_battleAmount: remainingExpBonusWins}, remainingExpBonusWins)
																											: 'IDS_TOOLTIP_BATTLE_BONUS_DAILY_DESCRIPTION'}"/>
		</block>
		<block className="TooltipSystemHorizontalDivider">
			<bind name="visible" value="true"/>
			<style>
				<width value="100%"/>
				<height value="2px"/>
				<marginTop value="12px"/>
				<marginBottom value="12px"/>
				<marginRight value="-12px"/>
				<marginLeft value="-12px"/>
				<backgroundSize value="fill"/>
				<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'TooltipSystemParamsModifiersList'; {	_attributesPositive: attributesPositive}"/>
		</block>
	</block>
	<block className="PlayerContactItemWithRollover">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="watchDH" value="'windowInset'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.inset"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="firstEntityDH" value="'dockStateEntity'; CC.dockState"/>
		<bind name="watchDH" value="'dockStateName'; ['dockStateEntity.dockState.evUpdate']; dockStateEntity.dockState.stateName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'accountLevel'; ['entityAccount.accountLevel.evLevelChanged']; entityAccount.accountLevel.level"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInDivision'; 'pureName'; entityAccount.accountName.name; 'playerInDivision'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'name'; entityAccount.accountName.name; 'playerInvitedToDivision'"/>
		<bind name="watchDH" value="'referralType'; 		['entityAccount.referral.evTypeUpdated']; entityAccount.referral.type"/>
		<bind name="watch" value="'isRefSysParticipant'; referralType != null"/>
		<params>
			<param name="name" value="'playerContactName_' + entityAccount.accountName.name"/>
		</params>
		<bind name="watch" value="'isInDivision'; (playerInDivision.length == 0) ? false : true"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionData'"/>
		<bind name="levelToFeature" value="accountLevel; 19; 'clubBattleFeatureUnLocked'"/>
		<bind name="watch" value="'isInYourParty'; ((divisionEntranceData.divisionType == 'party') &amp;&amp; (playerInDivision.length &gt; 0)) ? true : false"/>
		<bind name="watch" value="'isInvitedToYourParty'; ((divisionEntranceData.divisionType == 'party') &amp;&amp; (playerInvitedToDivision.length &gt; 0)) ? true : false"/>
		<bind name="contains" value="clubMembers; $item == _entityAccountId; 'isClubMember'; false; [_entityAccountId]"/>
		<bind name="collectionDH" value="CC.club; 'playersClubs'"/>
		<bind name="collectionDH" value="CC.clubsCommon; 'clubsCommonCollection'"/>
		<bind name="entityDH" value="'clubsCommonEntity'; clubsCommonCollection[0].id"/>
		<bind name="watchDH" value="'clubsVoted'; ['clubsCommonEntity.clubsCommon.evClubsVotedChanged']; clubsCommonEntity.clubsCommon.clubsVoted"/>
		<bind name="watch" value="'isVoteInCurClub';	(clubsVoted[0] == entityClub.club.id) ||
									(clubsVoted[1] == entityClub.club.id) ||
									(clubsVoted[2] == entityClub.club.id) ? true : false"/>
		<bind name="watch" value="'actionDenyReason';	(_playerContext.type == 'inviteToDivision') ?	!(accountOnline)				? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_OFFLINE' :
																						isInvitedToDivision 			? 'IDS_INVITE_TO_DIVISION_ACTION_DENY_REASON_ALREADY_INVITED'
																														: 'no_reason' :
																						!(accountOnline)				? 'IDS_INVITE_TO_PARTY_ACTION_DENY_REASON_OFFLINE' :
																						isInvitedToYourParty			? 'IDS_INVITE_TO_PARTY_ACTION_DENY_REASON_ALREADY_INVITED' :
																						isInYourParty					? 'IDS_INVITE_TO_PARTY_ACTION_DENY_REASON_ALREADY_IN_PARTY'
																														: 'no_reason'
																					: 'no_reason'"/>
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<bind name="style" value="'alpha'; accountOnline ? 1 : 0.5"/>
		<block>
			<bind name="visible" value="isSelf"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-1px"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="transition" value="(mouseDown &amp;&amp; !isSelf); 0.03; {alpha: 1}; {alpha: 0.7}"/>
			<bind name="transition" value="(rollOver || contactContextMenuVisible); 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="style" value="'hitTest'; !(isSuspended) || ((isSuspended) &amp;&amp; (groupIdsOfAccount != null))"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="menu" value="'ContactContextMenu';	!(isSelf)	? 	{	
																_entityAccountId: _entityAccountId, 
																_currentGroupId: _currentGroupId, 
																_actionDenyReason: actionDenyReason,
																_playerContext: _playerContext, 
																_inviteType: InviteType.COMMON,
																_channelId: _channelId}
														: 	null; 
											null; 'contactContextMenuVisible'"/>
			<bind name="tooltip" value="'ContactInfoTooltip'; !(isSuspended) ?	{	_entityAccountId: _entityAccountId,
																	_playerContext: _playerContext,
																	_actionDenyReason: actionDenyReason,
																	_dogTagView: dogtagview
																}
															:	null"/>
			<bind name="clickSplit"/>
			<bind name="watch" value="'isActionEnabled'; (	!(isSelf) &amp;&amp; 
											(actionDenyReason == 'no_reason') &amp;&amp; 
											!(isSuspended)
										)"/>
			<bind name="var" value="{showBusyIndicator: false, isInvitationSent: false}"/>
			<bind name="catch" value="'evPlayerInvitationToClub'"/>
			<bind name="catch" value="'evPlayerInvitationToClubRevoked'"/>
			<bind name="dispatch" value="'left_click';	((_playerContext.type == 'inviteToClub') &amp;&amp; (actionDenyReason == 'no_reason')) ? 'evPlayerInvitationToClub' : null; {showBusyIndicator: true} "/>
			<bind name="entityDH" value="'entityClub'; _playerContext.clubEntityId"/>
			<bind name="watchDH" value="'invitedPlayers'; ['entityClub.club.evInvitedClubmansChanged']; entityClub.club.invitedClubmans"/>
			<bind name="contains" value="invitedPlayers; ($item.accountEntityId == entityAccount.id); 'isInvitationSent'"/>
			<bind name="changeDispatch" value="isInvitationSent; 'evPlayerInvitationToClub'; {showBusyIndicator: false}"/>
			<bind name="watchDH" value="'clubMembers'; ['entityClub.club.evMembersChanged']; entityClub.club.members"/>
			<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
			<bind name="action" value="'left_click';	(isActionEnabled == false)						? '' :
									(_playerContext.type == 'startPrivateChat')		? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'inviteToChannel')		? 'sendChannelInvite' :
									(_playerContext.type == 'inviteToClub')			? 'inviteUserToClub' :
									(_playerContext.type == 'inviteToParty')		? 'inviteToDivision' :
									(_playerContext.type == 'inviteToPartyFromClubMembersList')	? 'inviteToDivision' :
									(_playerContext.type == 'inviteToDivision')		? 'inviteToDivision' :
									(_playerContext.type == 'inviteToTrainingRoom')	? 'TrainingRoomProxy.sendInvite' :
									(_playerContext.type == 'clubMembersList')		? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'contactsClubMembers')	? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'invitedToClubPlayers')	? 'openChannelForPrivateMessages' :
									(_playerContext.type == 'channelParticipants')	? 'openChannelForPrivateMessages'
																					: '';
									(isActionEnabled == false)						? {} :
									(_playerContext.type == 'startPrivateChat')		? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToChannel')		? {channelId: _playerContext.channelId, inviteDbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToClub')			? {clubId: _playerContext.clubId, playerName: entityAccount.accountName.name, userId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'inviteToParty')		? {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: InviteType.COMMON} :
									(_playerContext.type == 'inviteToPartyFromClubMembersList')	? {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: InviteType.COMMON} :
									(_playerContext.type == 'inviteToDivision')		? {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: InviteType.COMMON} :
									(_playerContext.type == 'inviteToTrainingRoom')	? {newAccDBID: entityAccount.accountSimple.dbId, teamId: _teamId} :
									(_playerContext.type == 'clubMembersList')		? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'contactsClubMembers')	? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'invitedToClubPlayers')	? {dbId: entityAccount.accountSimple.dbId} :
									(_playerContext.type == 'channelParticipants')	? {dbId: entityAccount.accountSimple.dbId}
																					: {}"/>
			<block>
				<bind name="visible" value="isRefSysParticipant"/>
				<style>
					<position value="absolute"/>
					<top value="2px"/>
					<left value="-1px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'IconReferralSystem'; isRefSysParticipant ? { _referralType: referralType} : null"/>
			</block>
			<block>
				<bind name="transition" value="(mouseDown &amp;&amp; !isSelf); 0.03; {alpha: 1}; {alpha: 0.7}"/>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'marginLeft';	_isShort	? '17px'
													: '19px'"/>
				<block>
					<styleClass value="$Fullsize"/>
					<bind name="instance" value="'PlayerContactItem'; {_entityAccountId: _entityAccountId, _playerContext: _playerContext, _isShort: _isShort, _nickNameWidth: _nickNameWidth }"/>
				</block>
				<block>
					<styleClass value="$AlignRight"/>
					<block>
						<bind name="visible" value="!(isSelf)"/>
						<style>
							<marginTop value="4px"/>
						</style>
						<bind name="style" value="'marginRight'; _isShort ? '6px' : '10px'"/>
						<bind name="transition" value="rollOver; 0.3; {alpha: 0}; {alpha: 1.0}; {alpha: 0}; 1; 0.07"/>
						<bind name="watch" value="'isAddToContactsBtnVisible';	(groupIdsOfAccount==null) &amp;&amp;
																!(isIgnored) &amp;&amp;
																!(isSuspended)"/>
						<block>
							<style>
								<marginTop value="1px"/>
								<marginRight value="3px"/>
							</style>
							<bind name="instance" value="'BusyIndicator'; showBusyIndicator ? { _showBusyIndicator: showBusyIndicator } : null"/>
						</block>
						<block>
							<bind name="visible" value="isAddToContactsBtnVisible"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<block className="button_add_contact" type="native"/>
							<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_ADD_TO_CONTACTS'}"/>
							<bind name="action" value="'click'; 'addContact'; {dbId: entityAccount.accountSimple.dbId}"/>
						</block>
						<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInDivision'; 'playersInDivision'"/>
						<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'playersInvitedToDivision'"/>
						<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
						<bind name="watch" value="'freePlaces'; (divisionData.maxPlayersInDivision - playersInDivision.length - playersInvitedToDivision.length)"/>
						<bind name="watch" value="'isSelfInParty'; ((divisionEntranceData.divisionType == 'party') &amp;&amp; (divisionData.divisionExist)) ? true : false"/>
						<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
						<bind name="watch" value="'isInviteToDivisionBtnVisible'; (	slimClientData.isFull &amp;&amp;
																	(freePlaces &gt; 0) &amp;&amp;
																	accountOnline &amp;&amp;
																	!(_isShort) &amp;&amp;
																	!(isInDivision) &amp;&amp;
																	(dockStateName != 'balancer') &amp;&amp;
																	(_playerContext.type != 'clubMembersList') &amp;&amp;
																	(_playerContext.type != 'inviteToClub') &amp;&amp;
																	(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
																	(_playerContext.type != 'contactsClubMembers') &amp;&amp;
																	(_playerContext.type != 'inviteToPartyFromClubMembersList') &amp;&amp;
																	!(isSelfInParty) &amp;&amp;
																	!(isInTrainingRoom) &amp;&amp;
																	!(isSuspended) )"/>
						<block>
							<bind name="visible" value="isInviteToDivisionBtnVisible"/>
							<style>
								<marginRight value="4px"/>
							</style>
							<block className="button_division_invite" type="native">
								<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'name'; entityAccount.accountName.name; 'sentInvitationData'"/>
								<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'invitationsToDivision'; 'playerName'; entityAccount.accountName.name; 'receivedInvitationData'"/>
								<bind name="enabled" value="(sentInvitationData.length == 0) &amp;&amp; (receivedInvitationData.length == 0) &amp;&amp; !isInvitedToDivision"/>
								<bind name="action" value="'buttonClick'; 'inviteToDivision'; {playerId: entityAccount.accountSimple.dbId, playerName: entityAccount.accountName.name, inviteType: InviteType.COMMON}"/>
							</block>
							<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: isInvitedToDivision ? 'IDS_INVITED_IN_DIVISION_ALREADY' : 'IDS_INVITE_IN_DIVISION'}"/>
						</block>
						<block>
							<bind name="visible" value="!(isSuspended)"/>
							<block className="button_chat_small" type="native"/>
							<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SEND_MESSAGE'}"/>
							<bind name="action" value="'click'; 'openChannelForPrivateMessages'; {dbId: entityAccount.accountSimple.dbId}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<bind name="watch" value="'isRevokeInvitationBtnVisible'; 	(_playerContext.type == 'invitedToClubPlayers') &amp;&amp;
																(_playerContext.invatorDbId == selfPlayerDbId) &amp;&amp;
																rollOver"/>
					<block>
						<bind name="visible" value="isRevokeInvitationBtnVisible"/>
						<bind name="dispatch" value="'buttonClick'; _playerContext.type == 'invitedToClubPlayers' ? 'evPlayerInvitationToClubRevoked' : null; {showBusyIndicator: true} "/>
						<block>
							<bind name="visible" value="!showBusyIndicator"/>
							<style>
								<marginTop value="3px"/>
								<marginRight value="7px"/>
							</style>
							<block className="button_cross" type="native">
								<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_RECALL_INVITATION'}"/>
								<bind name="action" value="'buttonClick'; 'cancelClubInvitation'; {clubId: _playerContext.clubId, userId: entityAccount.accountSimple.dbId}"/>
							</block>
						</block>
						<block>
							<bind name="fade" value="showBusyIndicator; 0.15; {alpha: 0}; {alpha: 1}"/>
							<style>
								<marginTop value="4px"/>
								<marginRight value="4px"/>
							</style>
							<bind name="instance" value="'BusyIndicator'; showBusyIndicator ? { _showBusyIndicator: showBusyIndicator } : null"/>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ContactInfoTooltipAccountHeader">
		<bind name="entityDH" value="'playerEntity'; _entityAccountId"/>
		<bind name="watchDH" value="'playerEntityDbId'; [];  playerEntity.accountSimple.dbId"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="dock_submenu_item" type="native">
			<params>
				<param name="soundSet" value="dropmenu_button"/>
			</params>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<margin value="8px"/>
				</style>
				<bind name="child" value="_isBot ? 1 : 0; {_playerDbId: playerEntityDbId, _entityAccountId: _entityAccountId}; 'PlayerStereotypeDogTag'; 'BotStereotype'"/>
			</block>
		</block>
	</block>
	<block className="BotStereotype">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="watchDH" value="'windowInset'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.inset"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="watchDH" value="'isBotsAIEnabled'; ['trainingRoomEntity.trainingRoom.evUpdate']; trainingRoomEntity.trainingRoom.isBotsAIEnabled"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'AILevel'; ['entityAccount.bot.evUpdate']; entityAccount.bot.AILevel"/>
		<bind name="watchDH" value="'canShoot'; ['entityAccount.bot.evUpdate']; entityAccount.bot.canShoot"/>
		<bind name="watchDH" value="'canMove'; ['entityAccount.bot.evUpdate']; entityAccount.bot.canMove"/>
		<bind name="watch" value="'canShootStr'; canShoot	? 'IDS_BOT_CAN_SHOOT_STATUS'
											: 'IDS_BOT_CAN_NOT_SHOOT_STATUS'"/>
		<bind name="watch" value="'canMoveStr';	canMove		? 'IDS_BOT_CAN_MOVE_STATUS'
											: 'IDS_BOT_CAN_NOT_MOVE_STATUS'"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginRight value="8px"/>
				<marginTop value="10px"/>
				<marginBottom value="6px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextHeaderWhite"/>
				<bind name="text" value="nickName"/>
				<bind name="class" value="'$Bold'"/>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
					<marginTop value="-3px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="!isBotsAIEnabled 	? 'IDS_DISABLED_AI_BOT_STATUS' :
						AILevel &gt; 9 		? 'IDS_HARD_LEVEL_BOT_STATUS' :
						AILevel &gt; 5 		? 'IDS_MEDIUM_LEVEL_BOT_STATUS'
											: 'IDS_LOW_LEVEL_BOT_STATUS'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isBotsAIEnabled"/>
			<style>
				<width value="100%"/>
				<marginRight value="8px"/>
				<marginBottom value="6px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="tr(canShootStr) + ' ' + tr(canMoveStr)"/>
			</block>
		</block>
	</block>
	<block className="PlayerContactItem">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInDivision'; 'pureName'; pureName; 'playerInDivision'"/>
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'nickName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName';			['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'clubsMembership';	['entityAccount.clubman.evClubsMembershipChanged']; entityAccount.clubman.clubsMembership"/>
		<bind name="watchDH" value="'accountOnline';		['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'inBattle'; 			['entityAccount.accountStatus.evInBattleChanged']; entityAccount.accountStatus.inBattle"/>
		<bind name="watchDH" value="'rank'; 				['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.rank"/>
		<bind name="watchDH" value="'rankSeasonId'; 		['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.seasonId"/>
		<bind name="watchDH" value="'clanId'; 			['entityAccount.clanman.evClanIdChanged']; entityAccount.clanman.clanId"/>
		<bind name="watchDH" value="'isSelf'; 			[]; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="entityDH" value="'entityClub'; _playerContext.clubEntityId"/>
		<bind name="watchDH" value="'isSelfPlayerCurPartyMember';['entityClub.party.evUpdate']; entityClub.party.isMember"/>
		<bind name="watchDH" value="'playerPrebattleClubId'; 	['entityAccount.prebattlePlayer.evClubIdChanged']; entityAccount.prebattlePlayer.clubId"/>
		<bind name="watchDH" value="'isPartyReady'; 				['entityAccount.prebattlePlayer.evStateChanged']; entityAccount.prebattlePlayer.isReady"/>
		<bind name="watchDH" value="'isPartyCommander'; 			['entityAccount.prebattlePlayer.evIsCommanderChanged']; entityAccount.prebattlePlayer.isCommander"/>
		<bind name="watchDH" value="'inPartyBattle'; 			['entityAccount.prebattlePlayer.evIsInBattleChanged']; entityAccount.prebattlePlayer.isInBattle"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'clanTag'; 	['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'color'; 	['clanExtendedEntity.clanExtended.evColorChanged']; clanExtendedEntity.clanExtended.color"/>
		<bind name="watchDH" value="'league'; 	['clanExtendedEntity.clanExtended.evLeagueChanged']; clanExtendedEntity.clanExtended.league"/>
		<bind name="watch" value="'clanTagColor'; ('0xff' + color)"/>
		<bind name="watch" value="'isPlayerInParty'; (entityAccount.prebattlePlayer &amp;&amp; (playerPrebattleClubId != -1))"/>
		<bind name="watch" value="'isInCurClubChannelParty'; (_playerContext.type == 'channelParticipants')			&amp;&amp;
											(_playerContext.channelTypeIdent == 'club')				&amp;&amp;
											(entityClub.club.id == playerPrebattleClubId)			&amp;&amp;
											(isSelfPlayerCurPartyMember)			? true
																					: false"/>
		<bind name="watch" value="'isInDivision'; ((divisionEntranceData.divisionType == 'division') &amp;&amp; (playerInDivision.length &gt; 0)) ? true : false"/>
		<bind name="watch" value="'isInParty'; ((divisionEntranceData.divisionType == 'party') &amp;&amp; (playerInDivision.length &gt; 0)) ? true : false"/>
		<bind name="watch" value="'isInFormation'; (playerInDivision.length &gt; 0)"/>
		<bind name="watch" value="'isReady'; isPlayerInParty				? isPartyReady :
							playerInDivision[0].isReady ? true
														: false"/>
		<bind name="watch" value="'isCommander'; isPlayerInParty					? isPartyCommander : 
								playerInDivision[0].isCommander	? true
																: false"/>
		<bind name="watch" value="'isInFormationBattle'; (isPlayerInParty || isInDivision || isInParty) &amp;&amp;
										(playerInDivision[0].isInBattle || inPartyBattle || inBattle)	? true
																										: false"/>
		<bind name="watchDH" value="'invitedPartyClubmans'; ['entityClub.party.evUpdate']; entityClub.party.invitedClubmans"/>
		<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
		<bind name="watchDH" value="'inviteExpirationTime'; ['entityAccount.playerInvitedToPrebattleInfo.evChanged']; entityAccount.playerInvitedToPrebattleInfo.expirationTime"/>
		<bind name="var" value="{wantedInDivision: false}"/>
		<bind name="style" value="'alpha'; _isOfflineAlpha	? accountOnline ? 1
															: 0.5
											: 1"/>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<bind name="visible" value="accountOnline &amp;&amp; ((inBattle &amp;&amp; !(isInFormationBattle)) || wantedInDivision)"/>
				<style>
					<marginLeft value="3px"/>
					<marginTop value="5px"/>
				</style>
				<block className="icon_player_status" type="native">
					<bind name="gotoAndStop!" value="(_playerContext.type == 'invitedToClubPlayers')	? 'invited' :
									wantedInDivision								? 'wanted_in_division' :
									inBattle										? 'in_battle'
																					: 'not_ready'"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="isInDivision || (isInvitedToDivision &amp;&amp; !(isSelf)) ? true : false"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block>
					<style>
						<position value="absolute"/>
						<marginTop value="9px"/>
						<marginLeft value="-12px"/>
					</style>
					<bind name="instance" value="'VoiceChatDockIcon'; (accountOnline &amp;&amp; isInFormation)	? {_playerName: pureName, _isSelf: isSelf}
																						: null"/>
				</block>
				<block>
					<style>
						<marginTop value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon';	{	_isEmptySlot: isInvitedToDivision, isCommander: isCommander, isReady: isReady, isInBattle: isInFormationBattle,
															_formationType: divisionEntranceData.divisionType, _isWardog: _isWardog} "/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="rank != 0 &amp;&amp; !(_isShort || isInDivision)"/>
				<style>
					<marginTop value="2px"/>
				</style>
				<bind name="instance" value="'IconRankSmall'; {_rankId: rank, _seasonId: rankSeasonId}"/>
			</block>
			<block type="text">
				<bind name="name" value="'playerContactName_' + nickName"/>
				<bind name="watch" value="'_tfWidth' ; 	_nickNameWidth	? _nickNameWidth :
										_isShort		? 148
														: 235"/>
				<bind name="style" value="'width';	_notTrancated	? 'auto' :
									((rank != 0) || inBattle || wantedInDivision)	? isInDivision	? _tfWidth - 37 + 'px'
																									: _tfWidth - 20 + 'px'
																					: isInDivision	? _tfWidth - 20 + 'px'
																									: _tfWidth + 'px'"/>
				<style>
					<marginTop value="2px"/>
					<marginLeft value="2px"/>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="class" value=" (_playerContext.channelTypeIdent == 'division' &amp;&amp; divisionEntranceData.divisionType == 'party' &amp;&amp; _isWardog) 	? '$FontColorMercenaries' :
							(isSelf || (isInDivision &amp;&amp; divisionEntranceData.divisionType == 'division'))								? '$FontColorGolden'
																																		: '$FontColorWhite'"/>
				<bind name="class" value=" isSelf ? '$Bold' : '$None'"/>
				<bind name="text" value="_playerContext.channelTypeIdent == 'clan' ? pureName : nickName"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltip">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'inBattle'; 		['entityAccount.accountStatus.evInBattleChanged']; entityAccount.accountStatus.inBattle"/>
		<bind name="watchDH" value="'accountOnline';	['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'accountLevel'; 	['entityAccount.accountLevel.evLevelChanged']; entityAccount.accountLevel.level"/>
		<bind name="watchDH" value="'rank'; 			['entityAccount.accountRank.evRankChanged']; entityAccount.accountRank.rank"/>
		<bind name="watchDH" value="'isSuspended'; 	['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="watchDH" value="'referralType'; 		['entityAccount.referral.evTypeUpdated']; entityAccount.referral.type"/>
		<bind name="watch" value="'isRefSysParticipant'; referralType != null"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInDivision'; 'pureName'; entityAccount.accountName.name; 'playerInDivision'"/>
		<bind name="watch" value="'isInDivision'; ((divisionEntranceData.divisionType == 'division') &amp;&amp; (playerInDivision.length &gt; 0)) ? true : false"/>
		<bind name="watch" value="'isInFormation'; (playerInDivision.length &gt; 0)"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watch" value="'isBot'; entityAccount.bot != undefined"/>
		<bind name="watch" value="'playerTooltipItem';	isBot 		? 2 :
										rank == 0	? 0
													: 1"/>
		<bind name="watch" value="'isReady'; playerInDivision[0].isReady ? true
														: false"/>
		<bind name="watch" value="'isCommander'; playerInDivision[0].isCommander	? true
																: false"/>
		<bind name="watch" value="'isInFormationBattle'; isInDivision &amp;&amp;
										(playerInDivision[0].isInBattle || inBattle)	? true
																						: false"/>
		<bind name="watchDH" value="'expirationTime'; ['entityAccount.playerInvitedToPrebattleInfo.evChanged']; entityAccount.playerInvitedToPrebattleInfo.expirationTime"/>
		<bind name="watch" value="'isInvitedToDivision'; entityAccount.playerInvitedToPrebattleInfo != null"/>
		<bind name="countdown" value="expirationTime; 'countdownText'; 'mm:ss'"/>
		<bind name="var" value="{wantedInDivision: false}"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="320px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ContactInfoTooltipAccountHeader'; {_entityAccountId: _entityAccountId, _isBot: isBot}"/>
		</block>
		<block>
			<bind name="visible" value="isRefSysParticipant"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<marginLeft value="8px"/>
					<marginTop value="8px"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="instance" value="'ContactInfoTooltipReferralStatus'; isRefSysParticipant ? { _referralType: referralType, _maxWidth: 280 } : null"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="(!(accountOnline) || (inBattle &amp;&amp; !(isInFormationBattle))) &amp;&amp; !(isBot)"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="-4px"/>
					<marginLeft value="10px"/>
					<marginRight value="5px"/>
				</style>
				<block>
					<block className="icon_player_status" type="native">
						<bind name="gotoAndStop!" value=" inBattle	? 'in_battle'
													: 'not_ready'"/>
					</block>
				</block>
				<block type="text">
					<bind name="style" value="'alpha'; (!(accountOnline) || inBattle) ? 0.6 : 1"/>
					<style>
						<marginLeft value="1px"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="text" value=" inBattle	? tr('IDS_IN_BATTLE')
										: tr('IDS_PLAYER_IS_OFFLINE_C')"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ContactInfoTooltipWantInFormation'; _playerContext.isFormationSeeker ? {_playerContext: _playerContext} : null"/>
		</block>
		<bind name="watch" value="'isFormationStatusVisible';	isInDivision"/>
		<block>
			<bind name="visible" value="isFormationStatusVisible &amp;&amp; !(_playerContext.isInvitation)"/>
			<style>
				<width value="100%"/>
				<height value="30px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="-4px"/>
					<marginLeft value="5px"/>
					<marginRight value="5px"/>
				</style>
				<block>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: _playerContext.isInvitation, isCommander: isCommander, isReady: isReady,
														isInBattle: isInFormationBattle, _formationType: divisionEntranceData.divisionType}"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="(divisionEntranceData.divisionType == 'division') 	? '$FontColorGolden'
																				: '$FontColorWhite'"/>
					<bind name="watch" value="'playerRoleStr'; 	isCommander	? tr('IDS_DIVISION_COMMANDER_C')
															: tr('IDS_IN_DIVISION')"/>
					<bind name="watch" value="'playerStatusStr'; isInFormationBattle	? tr('IDS_IN_BATTLE') :
												isReady				? tr('IDS_READY')
																	: tr('IDS_NOT_READY')"/>
					<bind name="text" value="playerRoleStr + '. ' + playerStatusStr"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'PlayerTooltipInvitationCountdown'; isInvitedToDivision &amp;&amp; !(isSelf) ? { 	_expirationTime: expirationTime, _formationType: 'division',
																									_text: 'IDS_INVITED_IN_DIVISION'} : null"/>
		</block>
		<block>
			<bind name="visible" value="isFormationStatusVisible"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ContactInfoTooltipVoiceChatStatus'; (accountOnline &amp;&amp; isInFormation)	? {_isSelf: isSelf, _playerName: pureName}
																								: null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ContactInfoTooltipActionDenyReason'; _actionDenyReason != 'no_reason' ? {_actionDenyReason: _actionDenyReason} : null"/>
		</block>
		<block>
			<bind name="visible" value="!(isSelf)"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="10px"/>
					<marginRight value="8px"/>
					<marginTop value="7px"/>
				</style>
				<block>
					<bind name="visible" value="_actionDenyReason == 'no_reason' &amp;&amp; !(isBot) &amp;&amp; !(isSuspended)"/>
					<style>
						<width value="100%"/>
						<marginBottom value="5px"/>
					</style>
					<bind name="instance" value="'MouseInstruction'; {_type: 'left',	_instructionText:	(_playerContext.type == 'startPrivateChat')		? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT' :
																						(_playerContext.type == 'inviteToChannel')		? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_CHANNEL' :
																						(_playerContext.type == 'inviteToClub')			? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_CLUB' :
																						(_playerContext.type == 'inviteToParty')		? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_PARTY' :
																						(_playerContext.type == 'inviteToPartyFromClubMembersList') ? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_PARTY' :
																						(_playerContext.type == 'inviteToDivision')		? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_DIVISION' :
																						(_playerContext.type == 'inviteToTrainingRoom')	? 'IDS_HINT_LEFT_CLICK_TO_IVITE_TO_TRAINING_ROOM' :
																						(_playerContext.type == 'clubMembersList')		? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT' :
																						(_playerContext.type == 'clubMemberPartyPlayer')? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT' :
																						(_playerContext.type == 'contactsClubMembers')	? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT' :
																						(_playerContext.type == 'invitedToClubPlayers')	? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT' :
																						(_playerContext.type == 'channelParticipants')	? 'IDS_HINT_LEFT_CLICK_TO_START_CHAT'
																																		: ('NO INSTRUCTION FOR SUCH _playerContext.type: ' + _playerContext.type),
													_maxWidth: 220}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginBottom value="6px"/>
					</style>
					<bind name="style" value="'marginTop'; (_actionDenyReason == 'no_reason') ? '0px' : '7px'"/>
					<bind name="instance" value="'MouseInstruction'; {_type: 'right', _instructionText: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU', _maxWidth: 220}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ContactInfoTooltipWantInFormation">
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="6px"/>
				<marginBottom value="8px"/>
				<marginLeft value="10px"/>
				<marginRight value="5px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<marginTop value="2px"/>
					</style>
					<block className="icon_player_status" type="native">
						<bind name="gotoAndStop!" value="'wanted_in_division'"/>
					</block>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="text" value="'IDS_WANT_IN_DIVISION'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<bind name="visible" value="_playerContext.seekerComment ? true : false"/>
				<style>
					<width value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="class" value="'$FontColorBlueish'"/>
				<styleClass value="$TextHeader"/>
				<bind name="text" value="tr('IDS_LEFT_QUOTE') + _playerContext.seekerComment + tr('IDS_RIGHT_QUOTE')"/>
			</block>
		</block>
	</block>
	<block className="ContactInfoTooltipActionDenyReason">
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="10px"/>
				<marginRight value="8px"/>
				<marginTop value="6px"/>
				<marginBottom value="5px"/>
			</style>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="4px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<style>
					<maxWidth value="210"/>
				</style>
				<bind name="text" value="_actionDenyReason"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltipLongOffline">
		<bind name="collectionDH" value="CC.clubsCommon; 'clubsCommonCollection'"/>
		<bind name="entityDH" value="'clubsCommonEntity'; clubsCommonCollection[0].id"/>
		<bind name="timeFormat" value="clubsCommonEntity.clubsCommon.maxOfflineTime; 'HIGHEST'; 'maxOfflineTimeFormatted'; true"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="3px"/>
				<marginLeft value="6px"/>
				<marginRight value="5px"/>
			</style>
			<block>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block className="icon_player_status" type="native">
					<bind name="gotoAndStop!" value="'long_offline'"/>
				</block>
			</block>
			<block type="text">
				<style>
					<marginLeft value="1px"/>
				</style>
				<style>
					<maxWidth value="210"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<bind name="text" value="subst('IDS_PLAYER_LONG_OFFLINE', [], {maxOfflineTime: maxOfflineTimeFormatted})"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltipInvitation">
		<style>
			<width value="100%"/>
			<height value="30px"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="4px"/>
				<marginBottom value="-4px"/>
				<marginLeft value="6px"/>
				<marginRight value="5px"/>
			</style>
			<block>
				<style>
					<marginLeft value="4px"/>
				</style>
				<block className="icon_player_status" type="native">
					<bind name="gotoAndStop!" value="'invited'"/>
				</block>
			</block>
			<block type="text">
				<style>
					<marginLeft value="1px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorDefault'"/>
				<text value="IDS_INVITED_TO_CLUB"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactInfoTooltipReferralStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="19px"/>
				<height value="19px"/>
			</style>
			<bind name="style" value="'backgroundImage'; _referralType == SC.Common.REFERRAL_TYPE.VETERAN	? '/url:../service_kit/icons/icon_status_hint_veteran.png'
																							: '/url:../service_kit/icons/icon_status_hint_referal.png'"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginLeft value="5px"/>
				<marginTop value="3px"/>
			</style>
			<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 180"/>
			<bind name="style" value="'leading'; _leading ? _leading : 0"/>
			<bind name="text" value="(_referralType == SC.Common.REFERRAL_TYPE.VETERAN	? 'IDS_REFERRAL_PLAYER_TYPE_VETERAN_DESCRIPTION'
																		: 'IDS_REFERRAL_PLAYER_TYPE_REFERRAL_DESCRIPTION')"/>
		</block>
	</block>
	<block className="ContactInfoTooltipVoiceChatStatus">
		<bind name="primaryEntityDH" value="'selfVoiceChatEntity'; CC.voiceChat; 0"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEntity.voiceChat.evEnabledChanged']; selfVoiceChatEntity.voiceChat.enabled"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; (playerVoiceChatEntity != null)"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'voiceChatStatusText';	_isSelf						?	selfVoiceChatEnabled	? 	'IDS_VOICE_CHAT_ENABLED'
																								:	'IDS_VOICE_CHAT_DISABLED' :
										!(playerVoiceChatIsEnabled)	?	'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT'	:
										playerVoiceChatIsMuted		?	'IDS_PLAYER_IS_MUTED_IN_VOICE_CHAT'
																	:	'IDS_PLAYER_IS_AVAILABLE_IN_VOICE_CHAT'"/>
		<bind name="watch" value="'state';	_isSelf 					? !(selfVoiceChatEnabled)	? 'disabled'
																					: 'speak' :
							!(playerVoiceChatIsEnabled) ? 'disabled' :
							playerVoiceChatIsMuted		? 'muted'
														: 'speak'"/>
		<bind name="visible" value="(_isSelf || selfVoiceChatEnabled)"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="10px"/>
				<marginRight value="8px"/>
				<marginTop value="4px"/>
				<marginBottom value="2px"/>
			</style>
			<block className="icon_voice_chat_small" type="native">
				<style>
					<marginTop value="6px"/>
					<marginRight value="4px"/>
				</style>
				<bind name="gotoAndStop!" value="state"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="(state == 'speak' ? '$FontColorWhite' : '$FontColorUnready')"/>
				<style>
					<maxWidth value="210"/>
				</style>
				<bind name="text" value="voiceChatStatusText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ContactContextMenu">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="watchDH" value="'isSuspended'; ['entityAccount.accountSimple.evSuspendedChanged']; entityAccount.accountSimple.suspended"/>
		<bind name="childParentScope" value="isSuspended ? 0 : 1; {}; 'SuspendedContactContextMenu'; 'NormalContactContextMenu'"/>
	</block>
	<block className="SuspendedContactContextMenu">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<bind name="visible" value="optionData.contrast &amp;&amp; !(false)"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="!(false)"/>
				<block className="hint_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="false"/>
				<block className="dock_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginBottom value="-19px"/>
						<marginRight value="-14px"/>
						<marginLeft value="-14px"/>
						<marginTop value="-9px"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithAction">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
	</block>
	<block className="NormalContactContextMenu">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="watchDH" value="'windowInset'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.inset"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="firstEntityDH" value="'dockStateEntity'; CC.dockState"/>
		<bind name="watchDH" value="'dockStateName'; ['dockStateEntity.dockState.evUpdate']; dockStateEntity.dockState.stateName"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'isSelfPlayerCommander'; ['selfPlayerEntity.preBattlePlayerSimple.evIsCommanderChanged']; selfPlayerEntity.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'selfTeamId'; ['selfPlayerEntity.preBattlePlayerSimple.evStateChanged']; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'selfPreBattlePlayerId'; []; selfPlayerEntity.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'isSelfPlayerTeamCommander'; ['selfPlayerEntity.trainingRoomPlayer.evUpdate']; selfPlayerEntity.trainingRoomPlayer.isCommander"/>
		<bind name="watchDH" value="'isSelf'; []; entityAccount.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'prebattleInvitedPlayerId'; []; entityAccount.playerInvitedToPrebattleInfo.id"/>
		<bind name="watchDH" value="'prebattlePlayerId'; []; entityAccount.preBattlePlayerSimple.id"/>
		<bind name="watchDH" value="'prebattlePlayerTeamId'; ['entityAccount.preBattlePlayerSimple.evStateChanged']; entityAccount.preBattlePlayerSimple.teamId"/>
		<bind name="watchDH" value="'isPrebattlePlayerOwner'; ['entityAccount.preBattlePlayerSimple.evIsCommanderChanged']; entityAccount.preBattlePlayerSimple.isCommander"/>
		<bind name="watchDH" value="'isPrebattlePlayerTeamCommander'; ['entityAccount.trainingRoomPlayer.evUpdate']; entityAccount.trainingRoomPlayer.isCommander"/>
		<bind name="watch" value="'isInvitedToPrebattle'; (entityAccount.playerInvitedToPrebattleInfo != null)"/>
		<bind name="watch" value="'isInPrebattle'; (entityAccount.preBattlePlayerSimple != null &amp;&amp; !(isInvitedToPrebattle))"/>
		<bind name="watch" value="'isInTrainingRoom'; trainingRoomEntity != null"/>
		<bind name="watchDH" value="'trainingRoomOwnerId'; ['trainingRoomEntity.preBattle.evOwnerIdChanged']; trainingRoomEntity.preBattle.ownerId"/>
		<bind name="watch" value="'isSelfPlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == selfPreBattlePlayerId)"/>
		<bind name="watch" value="'isPrebattlePlayerTrainingRoomOwner'; isInTrainingRoom &amp;&amp; (trainingRoomOwnerId == prebattlePlayerId)"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="dataRefDH" value="'contactsGroups'; 'dataHub.chat.ref.chat.contactsGroups.ref.items'"/>
		<bind name="dataRefDH" value="'chat'; 'dataHub.chat.ref.chat'"/>
		<bind name="watchDH" value="'nickName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.nickName"/>
		<bind name="watchDH" value="'pureName'; ['entityAccount.accountName.evChanged']; entityAccount.accountName.name"/>
		<bind name="watchDH" value="'accountOnline'; ['entityAccount.accountStatus.evOnlineChanged']; entityAccount.accountStatus.online"/>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<bind name="watchDH" value="'isIgnored';['entityAccount.contact.evIsIgnoredChanged']; !!entityAccount.contact.isIgnored"/>
		<bind name="watchDH" value="'canAddGroupEntitiesId'; ['entityAccount.elementInGroups.evCanAddGroupEntitiesChanged', 'dataHub.chat.ref.chat.evRosterChanged']; (entityAccount.elementInGroups) ? entityAccount.elementInGroups.canAddGroupEntitiesId : chat.canAddGroupEntitiesId"/>
		<bind name="watch" value="'isInFormation'; (entityAccount.preBattlePlayerSimple != null)"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'name';  entityAccount.accountName.name; 'sentInvitationData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'invitationsToDivision'; 'playerName';  entityAccount.accountName.name; 'receivedInvitationData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'; 'dockInitData,dockUpdateData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionData'"/>
		<bind name="watchDH" value="'clubsMembership'; ['entityAccount.clubman.evClubsMembershipChanged']; entityAccount.clubman.clubsMembership"/>
		<bind name="entityDH" value="'entityClub'; _playerContext.clubEntityId"/>
		<bind name="watchDH" value="'clubMembers'; ['entityClub.club.evMembersChanged']; entityClub.club.members"/>
		<bind name="collectionDH" value="CC.club; 'playersClubs'"/>
		<bind name="collectionDH" value="CC.clubsCommon; 'clubsCommonCollection'"/>
		<bind name="entityDH" value="'clubsCommonEntity'; clubsCommonCollection[0].id"/>
		<bind name="watchDH" value="'clubsVoted'; ['clubsCommonEntity.clubsCommon.evClubsVotedChanged']; clubsCommonEntity.clubsCommon.clubsVoted"/>
		<bind name="watch" value="'isVoteInCurClub';	(clubsVoted[0] == entityClub.club.id) ||
									(clubsVoted[1] == entityClub.club.id) ||
									(clubsVoted[2] == entityClub.club.id) ? true : false"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="tooltip" value="'SimpleWarningTooltip'; accountDbId ? null : {_text: 'IDS_UNABLED_ACTION_WITH_PLAYER'}"/>
		<bind name="style" value="'mouseChildren'; accountDbId ? true : false"/>
		<bind name="style" value="'alpha'; accountDbId ? 1 : 0.5"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<bind name="visible" value="optionData.contrast &amp;&amp; !(false)"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="!(false)"/>
				<block className="hint_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="false"/>
				<block className="dock_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginBottom value="-19px"/>
						<marginRight value="-14px"/>
						<marginLeft value="-14px"/>
						<marginTop value="-9px"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="(isSelfPlayerCommander || (isInTrainingRoom &amp;&amp; isSelfPlayerTeamCommander &amp;&amp; selfTeamId == prebattlePlayerTeamId)) &amp;&amp; 
					   (isInPrebattle || isInvitedToPrebattle) &amp;&amp; (dockStateName != 'balancer')"/>
			<block>
				<bind name="visible" value="(isInvitedToPrebattle == true)"/>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_RECALL_INVITATION'"/>
					</block>
				</block>
				<bind name="action" value="'click'; 'revokeInvitationToDivision'; {id: prebattlePlayerId}"/>
			</block>
			<block>
				<bind name="visible" value="(isInPrebattle == true &amp;&amp; 
							(!isInTrainingRoom ||
							(isInTrainingRoom &amp;&amp; isSelfPlayerTrainingRoomOwner &amp;&amp; !isPrebattlePlayerTrainingRoomOwner) ))"/>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="isInTrainingRoom ? 'IDS_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'"/>
					</block>
				</block>
				<bind name="request" value="'buttonClick'; 'kickPlayerFromDivision'; {	playerId: prebattlePlayerId, name: nickName,
																		subtitle: isInTrainingRoom ? 	'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_TRAINING_ROOM' : 
																										'IDS_MODAL_EXCLUDE_PLAYER_OUT_OF_DIVISION'
																	}"/>
			</block>
			<block>
				<bind name="visible" value="(isSelfPlayerCommander || (isInTrainingRoom &amp;&amp; isSelfPlayerTeamCommander &amp;&amp; selfTeamId == prebattlePlayerTeamId)) &amp;&amp; 
				!(_isBot) &amp;&amp;
				((isInPrebattle == true &amp;&amp; !trainingRoomEntity) || 
				(trainingRoomEntity &amp;&amp; trainingRoomEntity.trainingRoom.commandersManagement)) &amp;&amp; 
				(prebattlePlayerTeamId != -1) &amp;&amp; !isInvitedToPrebattle &amp;&amp;
				!isPrebattlePlayerTeamCommander"/>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_APPOINT_PLAYER_TO_COMMANDER'"/>
					</block>
				</block>
				<bind name="action" value="'buttonClick'; 'changeCommander'; {playerId: prebattlePlayerId, teamId: prebattlePlayerTeamId}"/>
				<bind name="dispatch" value="'buttonClick'; _isTrainingRoom ? '' : 'Tooltip.Close'; null; 2"/>
			</block>
			<block>
				<bind name="visible" value="!(_isBot)"/>
				<style>
					<width value="100%"/>
					<marginTop value="2px"/>
					<marginBottom value="3px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_playerContext.type == 'inviteToChannel'"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_INVITE_PLAYER_TO_CHANNEL'"/>
				</block>
			</block>
			<bind name="action" value="'click'; 'sendChannelInvite'; {channelId: _playerContext.channelId, inviteDbId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="_playerContext.type == 'inviteToClub'"/>
			<bind name="style" value="'alpha'; (_actionDenyReason == 'no_reason') ? 1 : 0.5"/>
			<bind name="tooltip" value="'SimpleWarningTooltip'; (_actionDenyReason != 'no_reason') ? {_text: _actionDenyReason} : null"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<styleClass value="$ContextMenuListItem"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'hitTest';  (_actionDenyReason == 'no_reason') ? true : false"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_INVITE_TO_CLUB'"/>
					</block>
				</block>
			</block>
			<bind name="action" value="'click'; (_actionDenyReason == 'no_reason') ? 'inviteUserToClub' : '' ; {clubId: _playerContext.clubId, playerName: pureName, userId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="!(_isBot)"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_SEND_MESSAGE'"/>
				</block>
			</block>
			<bind name="action" value="'click'; 'openChannelForPrivateMessages'; {dbId: accountDbId}"/>
		</block>
		<block>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInDivision'; 'playersInDivision'"/>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'playersInvitedToDivision'"/>
			<bind name="watch" value="'freePlaces'; (divisionData.maxPlayersInDivision - playersInDivision.length - playersInvitedToDivision.length)"/>
			<bind name="visible" value=" slimClientData.isFull &amp;&amp;
						accountOnline &amp;&amp;
						!(isInFormation) &amp;&amp;
						(dockStateName != 'balancer') &amp;&amp;
						(_playerContext.type != 'inviteToClub') &amp;&amp;
						(_playerContext.type != 'inviteToTrainingRoom') &amp;&amp;
						!isInvitedToPrebattle &amp;&amp;
						(freePlaces &gt; 0) &amp;&amp;
						!(isInTrainingRoom)"/>
			<bind name="style" value="'alpha'; ((sentInvitationData.length == 0) &amp;&amp; (receivedInvitationData.length == 0)) ? 1 : 0.5 "/>
			<bind name="style" value="'hitTest'; ((sentInvitationData.length == 0) &amp;&amp; (receivedInvitationData.length == 0))"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithAction">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_INVITE_IN_DIVISION'"/>
				</block>
				<bind name="action" value="'click'; 'inviteToDivision'; {playerId: accountDbId, playerName: pureName, inviteType: _inviteType}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	isInTrainingRoom &amp;&amp; (isSelfPlayerCommander || isSelfPlayerTeamCommander) &amp;&amp;
						accountOnline &amp;&amp;
						!(isInFormation) &amp;&amp;
						!isInvitedToPrebattle"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithAction">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_INVITE_IN_TRAINING_ROOM'"/>
				</block>
				<bind name="action" value="'click'; 'TrainingRoomProxy.sendInvite'; {newAccDBID: accountDbId, teamId: _teamId}"/>
			</block>
		</block>
		<bind name="watchDH" value="'groupIdsOfAccount'; ['entityAccount.elementInGroups.evGroupsChanged']; entityAccount.elementInGroups.groupIds"/>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="visible" value="((groupIdsOfAccount==null) &amp;&amp; !(isIgnored)) &amp;&amp; !(_isBot)"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_ADD_TO_CONTACTS'"/>
				</block>
			</block>
			<bind name="action" value="'click'; 'addContact'; {dbId: accountDbId}"/>
		</block>
		<block>
			<bind name="visible" value="!(isIgnored) &amp;&amp; ((canAddGroupEntitiesId.length &gt; 0) &amp;&amp; (contactsGroups.length &gt; 1)) &amp;&amp; !(_isBot)"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_ADD_TO_GROUP'"/>
				</block>
			</block>
			<block className="button_expand_h" type="native">
				<style>
					<position value="absolute"/>
					<right value="6px"/>
				</style>
				<styleClass value="$MouseDisable"/>
				<styleClass value="$MiddleVAligned"/>
			</block>
			<bind name="tooltip" value="'MoveToGroupContextSubMenu'; {_entityAccountId: _entityAccountId, canAddGroupEntitiesId: canAddGroupEntitiesId, _dropDown: false}; 7"/>
		</block>
		<block>
			<bind name="visible" value="((_currentGroupId != null) &amp;&amp; !(isIgnored)) &amp;&amp; !(_isBot)"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithAction">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_REMOVE_FROM_GROUP'"/>
				</block>
				<bind name="action" value="'click'; 'removeContactFromGroup'; {dbId: entityAccount.accountSimple.dbId, fromGroupId: _currentGroupId}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!(_isBot)"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$ContextMenuListItem"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="(!isIgnored) ? 'IDS_IGNORE_PLAYER' : 'IDS_NOT_IGNORE_PLAYER'"/>
					</block>
				</block>
				<bind name="action" value="'click'; 'userIgnoreContact'; {dbId: accountDbId, ignore: !(isIgnored)}"/>
			</block>
			<bind name="instance" value="'MenuItemReportPortChatMisbehaviour'; {_dbId: entityAccount.accountSimple.dbId, _channelId: _channelId}"/>
		</block>
		<block>
			<bind name="visible" value="((groupIdsOfAccount!=null) &amp;&amp; !(isIgnored)) &amp;&amp; !(_isBot)"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItemWithAction">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_REMOVE_FROM_CONTACTS'"/>
				</block>
				<bind name="action" value="'click'; 'removeContact'; {dbId: accountDbId}"/>
			</block>
		</block>
		<block>
			<bind name="primaryEntityDH" value="'selfVoiceChatEntity'; CC.voiceChat; 0"/>
			<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEntity.voiceChat.evEnabledChanged']; selfVoiceChatEntity.voiceChat.enabled"/>
			<bind name="instance" value="'VoiceChatContextMenuItem'; ((selfVoiceChatEnabled || isSelf) &amp;&amp; isInFormation) ? {_isSelf: isSelf, _playerName: pureName, _nickName: nickName} : null"/>
		</block>
		<block>
			<bind name="visible" value="	(_playerContext.type == 'clubMembersList') ||
						(_playerContext.type == 'contactsClubMembers') ||
						(_playerContext.type == 'inviteToPartyFromClubMembersList') ||
						((_playerContext.type == 'clubMemberPartyPlayer') &amp;&amp; (!_isWardog)) ||
						(_playerContext.type == 'channelParticipants' &amp;&amp; _playerContext.channelTypeIdent == 'club')"/>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'SimpleWarningTooltip'; (dockStateName == 'balancer') ? {_text: tr('IDS_CONTEXT_ACTION_NOT_AVAILABLE_IN_MATCHMAKER')} : null"/>
			<block>
				<bind name="visible" value="!(_isBot)"/>
				<style>
					<width value="100%"/>
					<marginTop value="3px"/>
					<marginBottom value="2px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<bind name="style" value="'hitTest'; (dockStateName == 'balancer') ? false : true"/>
				<bind name="style" value="'alpha'; (dockStateName == 'balancer') ? 0.5 : 1"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="accountDbId != _playerContext.clubLeaderDbId"/>
					<styleClass value="$ContextMenuListItem"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="tooltip" value="'SimpleWarningTooltip'; isVoteInCurClub ? {_text: tr('IDS_UNABLE_TO_START_VOTE_TILL_CURRENT_NOT_FINISHED')} : null"/>
					<block>
						<styleClass value="$Fullsize"/>
						<bind name="style" value="'hitTest'; !(isVoteInCurClub) ? true : false"/>
						<bind name="style" value="'alpha'; !(isVoteInCurClub) ? 1 : 0.5"/>
						<block className="MenuItemWithAction">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_KICK_PLAYER_FROM_CLUB'"/>
							</block>
							<bind name="action" value="'click'; 'kickClubMember'; {clubId: _playerContext.clubId, accountId: accountDbId, price: 0, playerName: pureName}"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="accountDbId == _playerContext.clubLeaderDbId"/>
					<styleClass value="$ContextMenuListItem"/>
					<style>
						<backgroundColor value="0x01000000"/>
					</style>
					<bind name="tooltip" value="'SimpleWarningTooltip';	(clubMembers.length &lt; VoteTypes.MIN_MEMBERS_TO_RIOT) ? {_text: tr('IDS_DEPOSE_CLUB_LEADER_HINT')} :
														isVoteInCurClub 									 ? {_text: tr('IDS_UNABLE_TO_START_VOTE_TILL_CURRENT_NOT_FINISHED')}
																											 : null"/>
					<block>
						<styleClass value="$Fullsize"/>
						<bind name="style" value="'hitTest'; ((clubMembers.length &gt;= VoteTypes.MIN_MEMBERS_TO_RIOT) &amp;&amp; !(isVoteInCurClub)) ? true : false"/>
						<bind name="style" value="'alpha'; ((clubMembers.length &gt;= VoteTypes.MIN_MEMBERS_TO_RIOT) &amp;&amp; !(isVoteInCurClub)) ? 1 : 0.5"/>
						<block className="MenuItemWithAction">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_DEPOSE_CLUB_LEADER'"/>
							</block>
							<bind name="action" value="'click'; 'kickClubLeaderWindow'; {clubEntityId: _playerContext.clubEntityId, clubId: _playerContext.clubId, accountId: accountDbId, playerName: pureName}"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="selfPlayerDbId == _playerContext.clubLeaderDbId"/>
					<styleClass value="$ContextMenuListItem"/>
					<block>
						<styleClass value="$Fullsize"/>
						<block className="MenuItemWithAction">
							<styleClass value="$Fullsize"/>
							<block className="dock_submenu_item" type="native">
								<styleClass value="$FullsizeAbsolute"/>
							</block>
							<block type="text">
								<styleClass value="$TextDefault"/>
								<styleClass value="$MiddleVAligned"/>
								<styleClass value="$ContextMenuListItemContent"/>
								<bind name="text" value="'IDS_CHANGE_CLUB_LEADER'"/>
							</block>
							<bind name="action" value="'click'; 'changeClubLeaderWindow'; {clubEntityId: _playerContext.clubEntityId, entityAccountId: _entityAccountId}"/>
						</block>
					</block>
				</block>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; selfPlayerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanName'; ['clanEntity.clanExtended.evNameChanged']; clanEntity.clanExtended.name"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="firstEntityDH" value="'clanInviteeEntity'; CC.clanInvitee"/>
		<bind name="watchDH" value="'role'; ['selfPlayerEntity.clanman.evRoleChanged']; selfPlayerEntity.clanman.role"/>
		<bind name="watchDH" value="'isFull'; ['clanEntity.clanExtended.evIsFullChanged']; clanEntity.clanExtended.isFull"/>
		<bind name="watch" value="'haveOwnClan'; 			clanEntity != null"/>
		<bind name="watch" value="'canInvite'; 				(role == 'executive_officer' || role == 'recruitment_officer' || role == 'commander')"/>
		<bind name="watch" value="'notInBalancer'; 			(dockStateName != 'balancer')"/>
		<bind name="watch" value="'alreadyInYourClan'; 		(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId == selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'alreadyInAnotherClan'; 	(entityAccount.clanman != null) &amp;&amp; (entityAccount.clanman.clanId != selfPlayerEntity.clanman.clanId)"/>
		<bind name="watch" value="'noFreePlacesInClan'; 		isFull"/>
		<block>
			<bind name="visible" value="(haveOwnClan &amp;&amp; canInvite &amp;&amp; notInBalancer &amp;&amp; !alreadyInYourClan &amp;&amp; !_isBot)"/>
			<bind name="action" value="'click'; 'ClanProxy.sendInvite'; { playerDBID: accountDbId }"/>
			<bind name="style" value="'alpha'; (alreadyInAnotherClan || noFreePlacesInClan) ? 0.5 : 1"/>
			<bind name="tooltip" value="'SimpleWarningTooltip'; (alreadyInAnotherClan || noFreePlacesInClan) ? { _text: 	noFreePlacesInClan 		? 'IDS_CLAN_INVITATION_DENY_REASON_CLAN_IS_FULL':
																										alreadyInAnotherClan 	? 'IDS_CLAN_INVITATION_DENY_REASON_PLAYER_ALREADY_IN_CLAN'
																																: ''}
																							: null"/>
			<style>
				<width value="100%"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<styleClass value="$ContextMenuListItem"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="style" value="'hitTest'; (alreadyInAnotherClan || noFreePlacesInClan) ? false : true"/>
				<block className="MenuItem">
					<styleClass value="$Fullsize"/>
					<block className="dock_submenu_item" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$ContextMenuListItemContent"/>
						<bind name="text" value="'IDS_INVITATION_TO_CLAN'"/>
					</block>
				</block>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
		<block>
			<bind name="visible" value="realmConstants.showProfileInBrowser &amp;&amp; (dockStateName != 'balancer') &amp;&amp; !(_isBot)"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_PROFILE'"/>
				</block>
			</block>
			<bind name="request" value="'click'; 'showPlayerStats'; { playerId: accountDbId + '',  url: 'playerStats' }"/>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
	</block>
	<block className="VoiceChatContextMenuItem">
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; (playerVoiceChatEntity != null)"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watch" value="'voiceChatMenuText'; 	!(playerVoiceChatIsEnabled) ? 'IDS_PLAYER_IS_NOT_AVAILABLE_IN_VOICE_CHAT' :
										playerVoiceChatIsMuted		? 'IDS_UNMUTE_PLAYER_VOICE_CHAT'
																	: 'IDS_MUTE_PLAYER_VOICE_CHAT'"/>
		<bind name="watch" value="'state'; 	!(playerVoiceChatIsEnabled)	? 'disabled' :
							playerVoiceChatIsMuted		? 'muted'
														: 'speak'"/>
		<bind name="style" value="'alpha'; !(playerVoiceChatIsEnabled)	? 0.9 : 1"/>
		<bind name="style" value="'hitTest'; !(playerVoiceChatIsEnabled)	? false : true"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropmenu_button"/>
			</params>
			<bind name="action" value="'buttonClick'; 'toggleVoice'; {playerName: _playerName, nickName: _nickname}"/>
		</block>
		<block>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$ContextMenuListItemContent"/>
			<block className="icon_voice_chat_small" type="native">
				<style>
					<marginTop value="6px"/>
					<marginRight value="4px"/>
				</style>
				<bind name="gotoAndStop!" value="state"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	!(playerVoiceChatIsEnabled)	? '$FontColorUnready' :
							playerVoiceChatIsMuted		? '$FontColorUnready'
														: '$FontColorWhite'"/>
				<style>
					<width value="100%"/>
					<marginBottom value="3px"/>
					<hitTest value="false"/>
					<leading value="-3"/>
				</style>
				<bind name="text" value="voiceChatMenuText"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MoveToGroupContextSubMenu">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; { _isInBattle: _isInBattle }"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="canAddGroupEntitiesId; 'MoveToGroupContextMenuItem'; {_entityAccountId: _entityAccountId, _currentGroupId: _currentGroupId}"/>
		</block>
	</block>
	<block className="MoveToGroupContextMenuItem">
		<bind name="entityDH" value="'entityAccount'; _entityAccountId"/>
		<bind name="dataRefDH" value="'accountDbId'; 'entityAccount.accountSimple.dbId'"/>
		<bind name="entityDH" value="'group'; $value"/>
		<bind name="visible" value="(group.groupOfElements.groupId != 1)"/>
		<styleClass value="$ContextMenuListItem"/>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<block className="MenuItem">
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="group.groupOfElements.name"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<bind name="action" value="'click'; 'addContactToGroupGroup'; {dbId: accountDbId, toGroupId: group.groupOfElements.groupId, fromGroupId: _currentGroupId}"/>
	</block>
	<block className="VoiceChatDockIcon">
		<bind name="primaryEntityDH" value="'selfVoiceChatEntity'; CC.voiceChat; 0"/>
		<bind name="watchDH" value="'selfVoiceChatEnabled'; ['selfVoiceChatEntity.voiceChat.evEnabledChanged']; selfVoiceChatEntity.voiceChat.enabled"/>
		<bind name="primaryEntityDH" value="'playerVoiceChatEntity'; CC.playerVoiceState; _playerName"/>
		<bind name="watchDH" value="'playerVoiceChatIsMuted'; ['playerVoiceChatEntity.playerVoiceState.evIsMutedChanged']; playerVoiceChatEntity.playerVoiceState.isMuted"/>
		<bind name="watchDH" value="'playerVoiceChatIsSpeaking'; ['playerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; playerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<bind name="watch" value="'playerVoiceChatIsEnabled'; playerVoiceChatEntity != null"/>
		<bind name="watch" value="'isChatEnabled'; _isSelf	? selfVoiceChatEnabled
											: (selfVoiceChatEnabled ? playerVoiceChatIsEnabled : true))"/>
		<bind name="watch" value="'state';	!(isChatEnabled)			? 'disabled' :
							playerVoiceChatIsMuted		? 'muted' :
							playerVoiceChatIsSpeaking	? 'speak'
														: null"/>
		<bind name="transition" value="state; 0.1; {alpha: 0}; {alpha: 1}; {alpha: 0}; 1"/>
		<block className="icon_voice_chat_small" type="native">
			<bind name="gotoAndStop!" value="state"/>
		</block>
	</block>
	<block className="MenuTooltipBackground">
		<styleClass value="$FullsizeAbsolute"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'DeclareBlurLayer'; _isInBattle ?  null : {}"/>
			<bind name="instance" value="'BlurMap'; _isInBattle ? null : {}"/>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="(optionData.contrast == true || _isInBattle == true)"/>
			<style>
				<marginTop value="-2px"/>
				<marginBottom value="-2px"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!(_isInBattle)"/>
			<style>
				<marginTop value="-1px"/>
				<marginBottom value="-1px"/>
			</style>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
	</block>
	<block className="IconReferralSystem">
		<style>
			<width value="27px"/>
			<height value="27px"/>
		</style>
		<bind name="style" value="'backgroundImage'; _referralType == SC.Common.REFERRAL_TYPE.VETERAN 	? '/url:../service_kit/icons/icon_status_list_veteran.png'
																						: '/url:../service_kit/icons/icon_status_list_referal.png'"/>
	</block>
	<block className="MenuItemReportPortChatMisbehaviour">
		<styleClass value="$ContextMenuListItem"/>
		<bind name="primaryEntityDH" value="'channelEntity'; CC.channel; _channelId"/>
		<bind name="watchDH" value="'canReportPortChatMisbehaviour'; ['channelEntity.channel.evTypeChanged']; channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.PREBATTLE &amp;&amp; 
																								channelEntity.channel.typeIdent != SC.Channel.CHANNEL_TYPE_IDENT_VALUE.TRAINING_ROOM"/>
		<bind name="visible" value="_channelId != null &amp;&amp; canReportPortChatMisbehaviour"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _dbId"/>
		<bind name="watchDH" value="'banRequestAlreadySent'; ['playerEntity.accountSimple.evReportedChanged'];  playerEntity.accountSimple.reported"/>
		<bind name="style" value="'mouseChildren'; !banRequestAlreadySent"/>
		<bind name="style" value="'alpha'; banRequestAlreadySent ? 0.5 : 1.0"/>
		<block className="MenuItemWithAction">
			<styleClass value="$Fullsize"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="text" value="'IDS_REQUEST_BAN_PLAYER_DOCK'"/>
			</block>
			<bind name="action" value="'click'; 'makeChatComplaint'; {subjectSpaID: _dbId, channelID: _channelId}"/>
		</block>
	</block>
	<block className="NationFlagsBig">
		<style>
			<backgroundStretchY value="true"/>
			<backgroundStretchX value="true"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '694px' "/>
		<bind name="style" value="'height'; _height ? _height : '426px' "/>
		<bind name="style" value="'alpha'; _alpha ? _alpha : '1' "/>
		<bind name="style" value="'backgroundImage'; 'url:../nation_flags/big/flag_' + shipCountry + '.png'"/>
	</block>
	<block className="NationFlagsSmall">
		<style>
			<backgroundStretchY value="true"/>
			<backgroundStretchX value="true"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '117px' "/>
		<bind name="style" value="'height'; _height ? _height : '72px' "/>
		<bind name="style" value="'alpha'; _alpha ? _alpha : '1' "/>
		<bind name="style" value="'backgroundImage'; 'url:../nation_flags/small/flag_' + shipCountry + '.png'"/>
	</block>
	<block className="NationFlagsTiny">
		<style>
			<backgroundStretchY value="true"/>
			<backgroundStretchX value="true"/>
		</style>
		<bind name="style" value="'width'; _width ? _width : '33px' "/>
		<bind name="style" value="'height'; _height ? _height : '21px' "/>
		<bind name="style" value="'alpha'; _alpha ? _alpha : '1' "/>
		<bind name="style" value="'backgroundImage'; 'url:../nation_flags/tiny/flag_' + shipCountry + '.png'"/>
	</block>
	<block className="ShipExtendedTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_EXPLORE + shipId; 'shipExplorePrice'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + shipId; 'shipBuyPrice'"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';		['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isInFormation"/>
		<bind name="watchDH" value="'playerShipParams';	['shipOwnEntity.ownShip.evShipParamsUpdate'];	shipOwnEntity.ownShip.params"/>
		<bind name="watchDH" value="'ownShipExp';		['shipOwnEntity.ownShip.evUpdateConfig'];		shipOwnEntity.ownShip.exp"/>
		<bind name="style" value="'userData'; { rightOffset: _hOffset }"/>
		<styleClass value="$ShipTreeTooltipBehaviour"/>
		<params>
			<param name="name" value="upgrade_tree_Ship_info"/>
		</params>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'ShipInfoTabHeader'; {	_isNotMyShip: _isNotMyShip, _inSideCompare: inSideCompare, shipId: shipId }"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="-40px"/>
					<marginBottom value="-20px"/>
					<width value="214px"/>
					<height value="126px"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + shipInfo.pathPreview"/>
			</block>
			<block>
				<bind name="visible" value="(inSideCompare != true) &amp;&amp; !(inIntromissionWindow)"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="instance" value="'CurrentXPLarge'; shipOwnEntity != null ? { _exp: ownShipExp, _label: 'IDS_SHIP_EXPERIENCE'} : null"/>
				</block>
				<block>
					<bind name="visible" value="!isOwned &amp;&amp; !(_inRewards) &amp;&amp; !(shipInfo.isEventLike || shipInfo.group == 'earlyAccess')"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'PriceInLine'; !(upgradableShipInfo.isExplored)	? { priceInfo: shipInfo.group == 'upgradeableExclusive' ? { finalPrice: shipExplorePrice.prices[0].finalPrice,
																																				basePrice: shipExplorePrice.prices[0].basePrice,
																																				till: shipExplorePrice.prices[0].till,
																																				discountEventName: shipExplorePrice.prices[0].discountEventName,
																																				currency: 'freexp' } 
																																			: shipExplorePrice.prices[0],
																						_label: 'IDS_RESEARCH_COST',
																						_medium: true,
																						_showDiscountTag: true }
																					: null"/>
					</block>
					<block>
						<bind name="style" value="'marginTop'; upgradableShipInfo.isExplored ? '0px' : '9px'"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'PriceInLine'; 	upgradableShipInfo.isExplored &amp;&amp; isOwned ? null
															:!(isOwned) ? { priceInfo: shipBuyPrice.prices[0], _label: 'IDS_PURCHASE_COST', _medium : true, _showDiscountTag:true}
															: null"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="shipInfo.group == 'earlyAccess' &amp;&amp; !isOwned"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="21px"/>
						<height value="21px"/>
						<backgroundImage value="url:../service_kit/icons/icon_rent_yellow.png"/>
					</style>
				</block>
				<block type="text">
					<style>
						<marginLeft value="4px"/>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorGolden'"/>
					<bind name="text" value="'IDS_EARLY_ACCESS_TOOLTIP'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="inSideCompare != true"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<position value="absolute"/>
					<marginBottom value="-1px"/>
					<marginTop value="1px"/>
				</style>
				<styleClass value="$PxHorizontalCorrection"/>
				<styleClass value="$Fullsize"/>
			</block>
			<bind name="instance" value="'ShipDescription'; {_shipNameIDS: shipInfo.nameIDS, _needShowProjectYear: shipInfo.needShowProjectYear, _isPaperShip: shipInfo.isPaperShip, _peculiarity: shipInfo.peculiarity}"/>
		</block>
		<bind name="watch" value="'showStats'; !(shipInfo.isEventLike) || isOwned)"/>
		<bind name="watch" value="'showLabelComingSoon'; shipInfo.isEventLike &amp;&amp; (shipInfo.group != 'event')"/>
		<block>
			<bind name="visible" value="showStats"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="style" value="'marginTop'; (inSideCompare == true) ? '18px' : '0px'"/>
			<bind name="instance" value="'ShipParamsTooltipList'; _testShipParams ?
			{ inSideCompare: inSideCompare, typeList : 'tooltipShipParams', params: _testShipParams, testParams: (nonPlayerShipParams ? nonPlayerShipParams : (shipOwnEntity != null ? playerShipParams : shipInfo.params)), testObjectIsBaseForView: 1, testObjectIsBaseForCompare: 0, showCompareWithZero: 1}
			: { typeList : 'tooltipShipParams', params: (shipOwnEntity != null ? playerShipParams : shipInfo.params)}"/>
		</block>
		<block>
			<bind name="visible" value="showLabelComingSoon"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'LabelComingSoon'; { _showTestSampleLabel: showStats }"/>
		</block>
		<block>
			<bind name="visible" value="(_inRewards == true) &amp;&amp; (_isPRMP != true)"/>
			<style>
				<width value="100%"/>
				<marginBottom value="9px"/>
			</style>
			<bind name="instance" value="'RewardReasonsList'; _inRewards ? { _rewardReasons: _rewardReasons } : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="class" value="	(inSideCompare != true) &amp;&amp; 
						(_needService ||
						(isLocked &amp;&amp; !isInFormation))			? '$InfoBlockIndent'
																: '$None'"/>
			<bind name="instance" value="'InstructionWarning';	(inSideCompare == true)				? null :
												_needService 						? { _instructionText: 'IDS_SHIP_NEEDS_SERVICE_MESSAGE', _maxWidth: '280'} :
												isLocked &amp;&amp; !isInFormation)			? { _instructionText: 'IDS_SHIP_IN_BATTLE_MESSAGE', _maxWidth: '280'}
																					: null"/>
		</block>
		<block>
			<bind name="visible" value="(shipInfoSlim.isDownloaded ? false : true)"/>
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="repeat" value="[	{_type: 'warning', _instructionText: _isEventLike	? 'IDS_ENTER_IN_FULL_VERSION_FOR_ANNOUNCE_SHIPS'
																			: 'IDS_ENTER_IN_FULL_VERSION_FOR_SHIPS'},
						{_type: 'left', _instructionText: 'IDS_EXIT_AND_CONTINUE_DOWNLOADING_MOUSE_INSTRUCTION'}]; 'MouseInstructionRepeater'; {_maxWidth: 260, _lastIndex: 1}"/>
		</block>
	</block>
	<block className="ShipExtendedTooltipUB2">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_EXPLORE + shipId; 'shipExplorePrice'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + shipId; 'shipBuyPrice'"/>
		<styleClass value="$ShipTreeTooltipBehaviour"/>
		<params>
			<param name="name" value="upgrade_tree_Ship_info"/>
		</params>
		<styleClass value="$MouseDisable"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="ShipExtendedTooltip" type="ublock">
			<params>
				<param name="name" value="upgrade_tree_Ship_info_ub2"/>
			</params>
			<bind name="build!" value="$ubPlayerProxy; {__shipId: shipId, __needService: _needService, __isLocked: _isLocked}"/>
			<bind name="externalArgs" value="{_shipId: shipId, _needService: _needService, _isLocked: _isLocked}"/>
		</block>
	</block>
	<block className="ShipTooltipWithPrice">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_EXPLORE + shipId; 'shipExplorePrice'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + shipId; 'shipBuyPrice'"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="style" value="'userData'; { rightOffset: _hOffset }"/>
		<styleClass value="$ShipTreeTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<styleClass value="$MouseDisable"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="4px"/>
			</style>
			<bind name="instance" value="'ShipInfoTabHeader'; {	_isNotMyShip: _isNotMyShip, _inSideCompare: inSideCompare, shipId: shipId, _isHideFlag: true }"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<marginLeft value="1px"/>
					<marginRight value="1px"/>
					<marginBottom value="1px"/>
				</style>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="name" value="'ResearchPrice'"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'PriceInLine'; !(upgradableShipInfo.isExplored)	?   { priceInfo: shipInfo.group == 'upgradeableExclusive' 	? 	{ finalPrice: shipExplorePrice.prices[0].finalPrice,
																																				  basePrice: shipExplorePrice.prices[0].basePrice,
																																				  till: shipExplorePrice.prices[0].till,
																																				  discountEventName: shipExplorePrice.prices[0].discountEventName,
																																				  currency: 'freexp' }
																																			: 	shipExplorePrice.prices[0],
																					  _label: 'IDS_RESEARCH_COST',
																					  _showDiscountTag: true }
																				: null"/>
				</block>
				<block>
					<bind name="name" value="'PurchasePrice'"/>
					<bind name="style" value="'marginTop'; upgradableShipInfo.isExplored ? '0px' : '9px'"/>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'PriceInLine'; 	upgradableShipInfo.isExplored &amp;&amp; isOwned ? null
														:!(isOwned) ? { priceInfo: shipBuyPrice.prices[0], _label: 'IDS_PURCHASE_COST', _showDiscountTag:true}
														: null"/>
				</block>
			</block>
		</block>
	</block>
	<css name="$MetaTooltipTextWidth">
		<maxWidth value="250"/>
	</css>
	<block className="SimpleShipParamTooltip">
		<block>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<styleClass value="$MetaTooltipTextWidth"/>
				<style>
					<leading value="-3"/>
				</style>
				<bind name="text" value="$parent.nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<styleClass value="$MetaTooltipTextWidth"/>
				<style>
					<leading value="-3"/>
				</style>
				<bind name="text" value="$parent.tooltipIDS"/>
			</block>
		</block>
	</block>
	<block className="SecondLevelShipParamTooltip">
		<style>
			<width value="100%"/>
		</style>
		<bind name="name" value="'secondLevelParamsTooltip_' + $parent.id"/>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<styleClass value="$FullWidth"/>
				<style>
					<leading value="-3"/>
				</style>
				<bind name="text" value="$parent.nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextHeaderBigDefault"/>
				<styleClass value="$FullWidth"/>
				<style>
					<leading value="-3"/>
				</style>
				<bind name="text" value="$parent.tooltipIDS"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
			</block>
			<block>
				<bind name="visible" value="_deepWaterTorpedoBombers == true"/>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<styleClass value="$InfoBlockIndent"/>
					<bind name="instance" value="'TorpedoAffectedShipsParamRow'; (_deepWaterTorpedoBombers == true) ? { _torpedoId: _torpedoId, _isTooltip: true } : null"/>
				</block>
			</block>
			<bind name="instance" value="'ShipParamsListView'; { viewParams: $parent.secondLevel, secondLevelTooltip: true }"/>
		</block>
	</block>
	<block className="ShipParamTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<bind name="class" value="meta ? '$None' : '$DefaultTooltipWidth'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; (_isArmour &amp;&amp; (_armourOff != true)) ? 'dockDefaultValues' : null; 'dockInitData,dockUpdateData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$Fullsize"/>
		</block>
		<block>
			<bind name="class" value="(secondLevel == null || secondLevel.length == 0) ? '$None' : '$FullWidth'"/>
			<bind name="child" value="(secondLevel == null || secondLevel.length == 0) ? 0 : 1; { _torpedoId: _torpedoId, _deepWaterTorpedoBombers: _deepWaterTorpedoBombers }; 'SimpleShipParamTooltip'; 'SecondLevelShipParamTooltip'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-3px"/>
			</style>
			<bind name="visible" value="_hasExcursion || (_isArmour &amp;&amp; (_armourOff != true))"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndentNoWidth"/>
				<bind name="instance" value="'MouseInstruction'; _hasExcursion 							? { _type: 'left', _instructionText: 'IDS_INSTRUCTION_SHIP_COMPONENT_DEMO', _maxWidth: '250'} :
												(_isArmour &amp;&amp; (_armourOff != true))		? { _type: 'left', _instructionText: dockDefaultValues.armourVisibility ? 'IDS_INSTRUCTION_SHIP_ARMOUR_DEMO_OFF' : 'IDS_INSTRUCTION_SHIP_ARMOUR_DEMO_ON', _maxWidth: '250' }
																						: null"/>
			</block>
		</block>
	</block>
	<block className="ShipInfoTooltipRow">
		<style>
			<width value="100%"/>
		</style>
		<bind name="height" value="meta ? 27 : $block.measuredHeight"/>
		<block>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
				<bottom value="-1px"/>
			</style>
			<bind name="visible" value="meta"/>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<left value="1px"/>
				<overflow value="hidden"/>
			</style>
			<bind name="instance" value="'StatValueBar'; meta ? {_width: _width ? _width : 298, _hasDiff: root.hasDiff || inSideCompare, _currentValue: root.values[0], _diffValue: root.diffData[0].value, _isGood: root.diffData[0].isGood, _expand: true, _invert: ident == 'visibility' } : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="12px"/>
				<marginRight value="12px"/>
				<marginTop value="1px"/>
				<marginBottom value="3px"/>
			</style>
			<bind name="style" value="'marginTop'; ($parent.viewParams.list[$index - 1] == null) &amp;&amp; !(meta) ? '5px' : '1px'"/>
			<bind name="style" value="'marginBottom'; $parent.viewParams.list[$index + 1] == null &amp;&amp; !(meta) ? '8px' : '3px'"/>
			<block>
				<block type="text">
					<style>
						<alpha value="0.8"/>
						<leading value="-4"/>
						<maxWidth value="160"/>
					</style>
					<bind name="class" value="meta ? '$TextMetaHeader' : '$TextMetaInfo'"/>
					<bind name="text" value="nameIDS"/>
				</block>
				<block>
					<style>
						<alpha value="0.8"/>
						<marginLeft value="-7px"/>
					</style>
					<bind name="style" value="'marginTop'; title ? '-7px' : '0px'"/>
					<bind name="instance" value="'ParamElement'; title"/>
				</block>
			</block>
			<block>
				<styleClass value="$AlignRight"/>
				<block>
					<bind name="instance" value="'ParamElement'; value"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipParamsTooltipList">
		<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerParams"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="viewParams.list; 'ShipInfoTooltipRow'; { inSideCompare: inSideCompare }"/>
	</block>
	<block className="ShipParamsTooltipListView">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="viewParams.list;'ShipInfoTooltipRow'; { _width: _width }"/>
	</block>
	<block className="ShipSideCompareTooltip">
		<styleClass value="$ShipTreeTooltipBehaviour"/>
		<params>
			<param name="name" value="ShipSideCompareTooltip"/>
		</params>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _selfPlayerShipId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'showOwnShip'; (userPrefs.showOwnShipInCompare == null) ? false : userPrefs.showOwnShipInCompare "/>
		<bind name="watchDH" value="'selfPlayerShipParams';	['shipOwnEntity.ownShip.evShipParamsUpdate'];	shipOwnEntity.ownShip.params"/>
		<style>
			<flow value="horizontal"/>
			<hitTest value="false"/>
		</style>
		<block>
			<bind name="visible" value="showOwnShip || _isSelf"/>
			<style>
				<marginRight value="3px"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<right value="0px"/>
				</style>
				<text value="IDS_YOUR_SHIP"/>
			</block>
			<block>
				<bind name="instance" value="'ShipExtendedTooltip'; { _isNotMyShip: false, shipId: _selfPlayerShipId, _testShipParams: _isSelf ? null : _nonPlayerShipParams,
													 inSideCompare: true}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!(_isSelf)"/>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<right value="0px"/>
				</style>
				<bind name="text" value="_nickname"/>
			</block>
			<block>
				<bind name="instance" value="'ShipExtendedTooltip'; relation != 0	? { _isNotMyShip: true, shipId: _shipId, _testShipParams: selfPlayerShipParams,
																		nonPlayerShipParams: _nonPlayerShipParams, inSideCompare: true}
																	: null"/>
			</block>
		</block>
	</block>
	<css name="$DynamicDivisionsItemSize">
		<width value="230px"/>
		<height value="128px"/>
	</css>
	<css name="$NoSize">
		<width value="0px"/>
		<height value="0px"/>
	</css>
	<block className="DynamicDivisions">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'maxDivisions'; battleDataEntity.battleInfo.maxDivisions"/>
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'DeclareBlurLayer'; _isBattleLoading ? {} : null"/>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<flow value="htile"/>
				<align value="center"/>
				<width value="690px"/>
			</style>
			<bind name="repeat" value="divisions; 'DivisionSlot'; {_divisions: divisions, _selfPlayer: selfPlayer, _isBattleStats: _isBattleStats}"/>
		</block>
		<block>
			<bind name="visible" value="(divisions[maxDivisions-1].id &amp;&amp; (divisions[maxDivisions-1].id != -1))"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<marginTop value="16px"/>
			</style>
			<bind name="instance" value="'StatusLineWithIcon'; { _text: 'IDS_MAX_DIVISIONS_CREATED', _maxWidth: 900, _large: true}"/>
		</block>
	</block>
	<block className="DivisionSlot">
		<bind name="style" value="'colorMatrixFilter'; _selfPlayer.isAlive ? '0 0 0 0' : '0 -100 0 0'"/>
		<bind name="style" value="'alpha'; _selfPlayer.isAlive ? 1 : 0.7"/>
		<bind name="watch" value="'state';	(id == -1) ? 'Creation' : 'Division'"/>
		<styleClass value="$DynamicDivisionsItemSize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="child" value="state ? state : 'Creation'; {	_data: _divisions[$index], _selfPlayer: _selfPlayer,
													_isBattleStats: _isBattleStats, _isBattleLoading: _isBattleLoading};
												 {Creation: 'CreateDynamicDivision', Division: 'DynamicDivisionItem'}"/>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="!(_selfPlayer.isAlive)"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="tooltip" value="'MouseInstructionTooltip';	_selfPlayer.isAlive	? null
																		: {_multiParagraphArray: [{_paragraphText: 'IDS_DIVISION_MANAGEMENT_LOCKED_FOR_DESTROYED'}], _isInBattle: _isBattleStats}"/>
		</block>
	</block>
	<block className="CreateDynamicDivision">
		<styleClass value="$DynamicDivisionsItemSize"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0}; {alpha: 1}"/>
		<block>
			<style>
				<width value="220px"/>
				<height value="118px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled &amp;&amp; _isBattleLoading"/>
				<block className="mc_blurmap5" type="native">
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DynamicDivisionHeader'; {	_isCommander: false,
														_isPlayersDivision: false,
														_newDivision: true,
														_isBattleStats: _isBattleStats}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="3; 'JoinDynamicDivisionItem'; {_isBattleStats: _isBattleStats}"/>
			</block>
		</block>
	</block>
	<block className="EmptyDynamicDivision">
		<bind name="visible" value="false"/>
	</block>
	<block className="DynamicDivisionItem">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'playersInvitedToDivision'; 'playersInvitedToDivision'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'invitationsToDivision'; 'id'; _data.id; 'selfPlayerInvitedToDivisionCollection'"/>
		<bind name="watch" value="'invitedPlayers'; isPlayersDivision ? playersInvitedToDivision : []"/>
		<bind name="watch" value="'isSelfInvitedToThisDivision'; (selfPlayerInvitedToDivisionCollection.length &gt; 0)"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.0; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$DynamicDivisionsItemSize"/>
		<bind name="watch" value="'isCurPlayerCommander'; (_selfPlayer.id == _data.ownerId)"/>
		<bind name="watch" value="'isPlayersDivision'; (_data.id == _selfPlayer.divisionId)"/>
		<bind name="watch" value="'reservedPlacesCounter'; isPlayersDivision ? ((_data.inPortParticipantsCount - invitedPlayers.length) &lt; 0) 	? 0
																																		: (_data.inPortParticipantsCount - invitedPlayers.length)
															: (isSelfInvitedToThisDivision	&amp;&amp;	(_data.inPortParticipantsCount &gt; 0)) 	? (_data.inPortParticipantsCount - 1)
																																		: _data.inPortParticipantsCount)"/>
		<block>
			<bind name="style" value="'alpha'; _data.locked &amp;&amp; !isPlayersDivision ? 0.6 : 1"/>
			<style>
				<width value="220px"/>
				<height value="118px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled &amp;&amp; !(_isBattleStats)"/>
				<block className="mc_blurmap5" type="native">
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'DynamicDivisionHeader'; {	_isCommander: isCurPlayerCommander,
														_isPlayersDivision: isPlayersDivision,  
														_newDivision: false,
														_name: _data.name,  
														_locked: _data.locked,
														_isBattleStats: _isBattleStats}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="_data.staff; 'DynamicDivisionPlayerItem'; {	_isPlayersDivision: isPlayersDivision, _selfPlayer: _selfPlayer,
																			_isCurPlayerCommander: isCurPlayerCommander,
																			_commanderId: _data.ownerId, _isBattleStats: _isBattleStats}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="invitedPlayers; 'DynamicDivisionInvitedPlayerItem'; {	_selfPlayer: _selfPlayer, _isCurPlayerCommander: isCurPlayerCommander,
																					_isBattleStats: _isBattleStats}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="visible" value="!(isPlayersDivision)"/>
					<block>
						<bind name="visible" value="!(isSelfInvitedToThisDivision)"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="repeat" value="3 - (_data.staff.length + _data.inPortParticipantsCount); 'JoinDynamicDivisionItem'; {	_divisionId: _data.id, _locked: _data.locked,
																															_isBattleStats: _isBattleStats}"/>
					</block>
					<block>
						<bind name="visible" value="isSelfInvitedToThisDivision"/>
						<style>
							<width value="100%"/>
						</style>
						<bind name="repeat" value="3 - (_data.staff.length + _data.inPortParticipantsCount - 1); 'ApplyDivisionInvitation'; { _invitationData: selfPlayerInvitedToDivisionCollection[0],
																															 _isBattleStats: _isBattleStats}"/>
					</block>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="repeat" value="reservedPlacesCounter; 'DynamicDivisionReservedItem'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ApplyDivisionInvitation">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="countdown" value="_invitationData.expirationTime; 'countdownText'; 'mm:ss'"/>
		<bind name="action" value="'click'; 'acceptDivisionInvitation'; {id: _invitationData.id}"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="tooltip" value="'TimerTooltip'; {_text: '-' + countdownText, _isInBattle: _isBattleStats}"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<text value="IDS_ACCEPT_INVITATION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="JoinDynamicDivisionItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'enterDivisionCooldownData'"/>
		<bind name="watch" value="'joinTimeOut'; enterDivisionCooldownData.finishTime"/>
		<bind name="style" value="'alpha'; joinTimeOut &gt; 0 ? 0.7 : 1"/>
		<bind name="catch" value="'timeoutEvent'; {joinTimeOut : 0}"/>
		<bind name="countdown" value="joinTimeOut; 'joinTimeOutText'; 'mm:ss'; 'timeoutEvent'"/>
		<bind name="action" value="'click'; joinTimeOut &gt; 0	? null :
								_divisionId	? 'joinDivision'
											: 'createDivision'; joinTimeOut &gt; 0 ? {} :
																_divisionId	? {divisionId: _divisionId}
																			: {}"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<bind name="name" value="(_divisionId ? 'JoinDiv_' : 'JoinNew_') + $index"/>
		<block className="dock_submenu_item_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver &amp;&amp; !(joinTimeOut &gt; 0); 0.15; {alpha: 0}; {alpha: 1}"/>
			<bind name="style" value="'hitTest'; _locked ? false : true"/>
			<bind name="tooltip" value="'MouseInstructionTooltip';	joinTimeOut &gt; 0 ? { _multiParagraphArray: [{_paragraphText: tr('IDS_WAIT_TIMEOUT_TO_JOIN_DIVISION') + ' ' + joinTimeOutText}],
																		_mouseInstructions: null,
																		_maxWidth: 250, _isInBattle: _isBattleStats} :
													_divisionId		? {	_multiParagraphArray: [{_paragraphText: 'IDS_JOIN_DYNAMIC_DIVISION_HINT'}],
																		_mouseInstructions:  [{_type: 'left', _instructionText: 'IDS_JOIN_DYNAMIC_DIVISION_MOUSE_HINT'}],
																		_maxWidth: 250, _isInBattle: _isBattleStats}
																	: {	_multiParagraphArray: [{_paragraphText: 'IDS_CREATE_NEW_DIVISION_HINT'}],
																		_mouseInstructions:  [{_type: 'left', _instructionText: 'IDS_CREATE_NEW_DIVISION_MOUSE_HINT'}],
																		_maxWidth: 250, _isInBattle: _isBattleStats}"/>
		</block>
		<block>
			<style>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
				<marginTop value="2px"/>
				<hitTest value="false"/>
			</style>
			<block className="icon_plus" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="2px"/>
				</style>
				<text value="IDS_JOIN_DIVISION"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DynamicDivisionReservedItem">
		<style>
			<height value="27px"/>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginLeft value="11px"/>
				<marginRight value="6px"/>
				<hitTest value="false"/>
				<height value="100%"/>
			</style>
			<block className="icon_player_lock" type="native">
				<style>
					<marginTop value="3px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginLeft value="1px"/>
				</style>
				<text value="IDS_PLACE_IS_LOCKED"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DynamicDivisionHeader">
		<style>
			<width value="100%"/>
			<height value="36px"/>
		</style>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<marginLeft value="6px"/>
				<marginRight value="6px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="icon_formation" type="native">
				<style>
					<position value="absolute"/>
					<marginLeft value="-2px"/>
				</style>
				<bind name="gotoAndStop!" value=" _isCommander	? 'commander_division'
												: 'not_commander_division'"/>
				<bind name="tooltip" value="'MouseInstructionTooltip';	_isPlayersDivision	? {_multiParagraphArray: (_isCommander	? [{_paragraphText: 'IDS_YOU_ARE_COMMANDER'}]
																													: [{_paragraphText: 'IDS_YOU_ARE_MEMBER_DIVISION_IN_BATTLE'}]),
																														_maxWidth: 250, _isInBattle: _isBattleStats}
																													: null"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block>
					<bind name="visible" value="!(_newDivision)"/>
					<bind name="tooltip" value="'MouseInstructionTooltip'; 	_isCommander	? {	_multiParagraphArray: 	[{_paragraphText: _locked	? 'IDS_DIVISION_IS_LOCKED_COMMANDER'
																																	: 'IDS_DIVISION_IS_NOT_LOCKED_COMMANDER'}],
																				_mouseInstructions:  [{_type: 'left', _instructionText: (_locked ? 'IDS_UNLOCK_DIVISION'
																																		: 'IDS_LOCK_DIVISION')}],
																				maxWidth: 250, _isInBattle: _isBattleStats}
																			: { _multiParagraphArray: 	[{_paragraphText: _locked	? 'IDS_DIVISION_IS_LOCKED'
																																	: 'IDS_DIVISION_IS_NOT_LOCKED'}],
																				_mouseInstructions: null, maxWidth: 250, _isInBattle: _isBattleStats}"/>
					<block className="button_lock" type="native">
						<bind name="visible" value="_isCommander || (!(_isCommander) &amp;&amp; _locked)"/>
						<bind name="action" value="'click'; _isCommander ? (_locked	? 'unlockDivision'
																	: 'lockDivision')
														: null; {id: id}"/>
						<bind name="selected" value="_locked"/>
						<bind name="enabled" value="_isCommander"/>
					</block>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<marginLeft value="4px"/>
					</style>
					<bind name="tooltip" value="'MouseInstructionTooltip';	_isPlayersDivision	? { _mouseInstructions: [{_type: 'right', _instructionText: 'IDS_HINT_RIGHT_CLICK_FOR_CONTEXT_MENU'}],
																					_maxWidth: 250, _isInBattle: _isBattleStats}
																				: null"/>
					<bind name="menu" value="'DivisionHeaderRightClickBattleMenu'; _isPlayersDivision ? {_isCommander: _isCommander, _isInBattle: _isBattleStats} : null"/>
					<block type="text">
						<styleClass value="$TextHeaderWhiteBold"/>
						<bind name="class" value="_isPlayersDivision ? '$FontColorGolden': '$None'"/>
						<bind name="text" value="_newDivision	? toUpperCase(tr('IDS_NEW_DIVISION'))
												: toUpperCase(tr('IDS_DIVISION')) + ' ' + _name"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="tooltip" value="'MouseInstructionTooltip'; { _multiParagraphArray:  [{_paragraphText: 'IDS_LEAVE_DIVISION'}],
													_maxWidth: 250, _isInBattle: _isBattleStats}"/>
			<bind name="visible" value="_isPlayersDivision == true"/>
			<style>
				<position value="absolute"/>
				<right value="8px"/>
				<marginTop value="9px"/>
			</style>
			<block className="button_close" type="native">
				<bind name="name" value="'LeaveDiv'"/>
				<bind name="action" value="'buttonClick'; 'leaveDivision'"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="DynamicDivisionInvitedPlayerItem">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'players in battle'; 'name'; name; 'playerInDivisionCollection'"/>
		<bind name="watch" value="'player'; playerInDivisionCollection[0]"/>
		<bind name="watch" value="'_isCurrentPlayer'; (_selfPlayer.id == player.id)"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="transition" value="rollOver; 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; {	_isInBattle: _isBattleStats, _battleType: battleType,
												_player: player, _selfPlayer: _selfPlayer}"/>
			<bind name="menu" value="'UIListPlayerContextMenu'; {	_player: player, _selfPlayer: _selfPlayer, _battleType: battleType,
													_complaintsAvailable: true, _isBattleLoading: !(_isBattleStats), _isBattleStats: _isBattleStats}
												; null; 'contextMenuVisible'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="selected" value="contextMenuVisible"/>
		</block>
		<block className="button_cross" type="native">
			<bind name="tooltip" value="'MouseInstructionTooltip'; { _multiParagraphArray:  [{_paragraphText: 'IDS_RECALL_INVITATION'}],
													_maxWidth: 250, _isInBattle: _isBattleStats}"/>
			<bind name="visible" value="rollOver &amp;&amp; _isCurPlayerCommander"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<bind name="action" value="'buttonClick'; 'revokeInvitationToDivision'; {id: id}"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="13px"/>
				<hitTest value="false"/>
			</style>
			<bind name="instance" value="'FormationPlayerIcon'; {_isEmptySlot: true, _formationType: 'division'}"/>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="1px"/>
				<width value="160px"/>
				<multiline value="false"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$TextDefaultBold"/>
			<bind name="text" value="name"/>
		</block>
	</block>
	<block className="DynamicDivisionPlayerItem">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'players in battle'; 'id'; $value; 'playerInDivisionCollection'"/>
		<bind name="watch" value="'player'; playerInDivisionCollection[0]"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'ships'; 'id'; player.shipId; 'shipsCollection'"/>
		<bind name="watch" value="'shipInfo'; shipsCollection[0]"/>
		<bind name="watch" value="'_isCurrentPlayer'; (_selfPlayer.id == player.id)"/>
		<bind name="watch" value="'_isCommander'; (_commanderId == player.id)"/>
		<style>
			<height value="27px"/>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="_isCurrentPlayer"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; _isCurrentPlayer	? {	_isInBattle: _isBattleStats,
																	_player: player, _selfPlayer: _selfPlayer,
																	_battleType: battleType}
																: null"/>
		</block>
		<block className="dock_submenu_item_bg" type="native">
			<bind name="style" value="'hitTest'; !(_isCurrentPlayer)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$PxHorizontalCorrection"/>
			<bind name="transition" value="rollOver &amp;&amp; !(_isCurrentPlayer); 0.15; {alpha: 0}; {alpha: 1.0}"/>
			<bind name="tooltip" value="'BattlePlayerTooltip'; !(_isCurrentPlayer) 	? {	_isInBattle: _isBattleStats,
																		_player: player, _selfPlayer: _selfPlayer,
																		_battleType: battleType}
																	: null"/>
			<bind name="menu" value="'UIListPlayerContextMenu'; {	_player: player, _selfPlayer: _selfPlayer, _battleType: battleType,
													_complaintsAvailable: true, _isBattleLoading: !(_isBattleStats), _isBattleStats: _isBattleStats}
												; null; 'contextMenuVisible'"/>
			<bind name="selected" value="contextMenuVisible"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="-1px"/>
			</style>
			<bind name="visible" value="_isCurPlayerCommander &amp;&amp; !(_isCurrentPlayer) &amp;&amp; rollOver"/>
			<block className="button_cross" type="native">
				<bind name="tooltip" value="'MouseInstructionTooltip'; {	_multiParagraphArray:  [{_paragraphText: 'IDS_EXCLUDE_PLAYER_OUT_OF_DIVISION'}],
														_maxWidth: 250, _isInBattle: _isBattleStats}"/>
				<bind name="action" value="'click'; 'kickPlayerFromDivision'; {playerId: player.id}"/>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<marginLeft value="13px"/>
				<marginRight value="6px"/>
			</style>
			<block>
				<style>
					<position value="absolute"/>
					<top value="-1"/>
					<marginLeft value="-11px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'UIListVoiceTextChatIcons'; {_playerId: player.id, _isInSameDivision: _isPlayersDivision, _selfPlayerDivisionId: _selfPlayer.divisionId,
														 _isSpeaking: player.isSpeaking, _battleType: battleType,
														 _isVoiceChatMuted: player.isMuted, _isInVoiceChat: player.isInVoiceChat}"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'FormationPlayerIcon'; {isCommander: _isCommander, isReady: true, isInBattle: false,
													isOtherDivision: !(_isPlayersDivision), _formationType: 'division', _isWardog: false}"/>
			</block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="1px"/>
					<width value="84px"/>
					<multiline value="false"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	!(player.isAlive) &amp;&amp; !(_isCurrentPlayer)	? '$FontColorAlmostBlack' :
							player.tkStatus								? '$FontColorTeamkiller' :
							_isPlayersDivision 							? '$FontColorGolden'
																		: '$None'"/>
				<bind name="class" value="(player.isAlive || _isCurrentPlayer) ? '$None' : '$FontDropShadowWhite'"/>
				<bind name="class" value="_isCurrentPlayer ? '$Bold' : '$None'"/>
				<bind name="text" value="player.name"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_ship" type="native">
					<style>
						<marginTop value="6px"/>
					</style>
					<bind name="gotoAndStop!" value="!(player.isAlive)	? shipInfo.subtype + '_U'
														: shipInfo.subtype"/>
				</block>
				<block type="text">
					<style>
						<width value="70px"/>
						<multiline value="false"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="class" value="_isCurrentPlayer ? '$Bold' : '$None'"/>
					<bind name="class" value="'$LetterSpacingSmall'"/>
					<bind name="class" value="	_isCurrentPlayer	?	'$FontColorGolden' :
								!(player.isAlive) 	?	'$FontColorAlmostBlack'
													: '$None'"/>
					<bind name="class" value="(player.isAlive || _isCurrentPlayer) ? '$None' : '$FontDropShadowWhite'"/>
					<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="DivisionHeaderRightClickBattleMenu">
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="instance" value="'MenuTooltipBackground'; {_isInBattle: _isInBattle}"/>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<bind name="visible" value="_isCommander"/>
			<block className="dock_submenu_item" type="native">
				<bind name="action" value="'buttonClick'; 'dismissDivision'"/>
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<styleClass value="$Fullsize"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_DISMISS_DIVISION'"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<bind name="action" value="'buttonClick'; 'leaveDivision'"/>
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<styleClass value="$Fullsize"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="text" value="'IDS_LEAVE_DIVISION'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="QuickCommandHelpPanelVElement">
		<bind name="visible" value="_qcShortcut1 != null"/>
		<style>
			<marginTop value="1px"/>
			<width value="10px"/>
			<paddingRight value="20px"/>
		</style>
		<bind name="style" value="'paddingBottom'; _qcHelpPanelVElementPadding ? _qcHelpPanelVElementPadding : 0"/>
		<bind name="watch" value="'_qcShortcut1'; _qcShortcut1"/>
		<block>
			<block>
				<style>
					<width value="10px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<textColor value="0xffffffff"/>
						<right value="0"/>
						<maxWidth value="180"/>
						<textAlign value="right"/>
					</style>
					<bind name="text" value="_qcText1 ? _qcText1 : 'IDS_ALL_SEASONS'"/>
				</block>
			</block>
			<block>
				<style>
					<marginTop value="1px"/>
					<left value="0"/>
					<marginLeft value="15px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="55"/>
					</style>
					<bind name="substitute" value="2; null; _qcShortcut1"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BattleStats">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'battleModeInfo'; 'battleModeInfo,updateBattleModeInfo'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="controller" value="lesta.dialogs.battle_window_controllers.uss_controllers.ControllerBattleStats"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="watchDH" value="'teamId'; []; selfPlayerEntity.preBattlePlayerSimple.teamId"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="watch" value="'topOffset'; (10 + (stageHeight-720)/2.2)"/>
		<bind name="watch" value="'isBattletypeWithDynamicDivisions';	(battleType == BattleTypes.COOPERATIVE_BATTLE)	||
														(battleType == BattleTypes.RANDOM_BATTLE)		||
														(battleType == BattleTypes.EVENT_BATTLE)"/>
		<bind name="watch" value="'isDynamicDivisionsEnabled'; isBattletypeWithDynamicDivisions &amp;&amp; slimClientData.isFull"/>
		<bind name="watch" value="'isVoiceChatEnabled';	(battleType == BattleTypes.CLAN_BATTLE) ||
										((selfPlayer.divisionId != 0) &amp;&amp; ((battleType == BattleTypes.RANDOM_BATTLE) ||
																		  (battleType == BattleTypes.COOPERATIVE_BATTLE) ||
																		  (battleType == BattleTypes.PVE_BATTLE)))"/>
		<bind name="watch" value="'validTabIndex';	teamId == 100									? 0 :
									(gameModeId == GameMode.TUTORIAL) 							? 0 :
									((tabStatsTabIndex == 1) &amp;&amp; !(isDynamicDivisionsEnabled))	? 0
																								: tabStatsTabIndex"/>
		<bind name="watch" value="'tabStatsTabIndex'; (userPrefs.tabStatsTabIndex == null) ? 0 : userPrefs.tabStatsTabIndex"/>
		<bind name="var" value="{isFirstShow: true}"/>
		<bind name="catch" value="'addedToStage'; {isFirstShow: false}"/>
		<bind name="appear" value="isFirstShow ? 'addedToStage' : null; 0.1; 0.15; {alpha: 0}; {alpha: 1}"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="gradient_liner_1" type="native">
				<styleClass value="$Fullsize"/>
				<style>
					<alpha value="0.8"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="style" value="'top'; topOffset"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<bind name="visible" value="teamId != 100"/>
				<styleClass value="$MiddleAligned"/>
				<block className="tab_bar_bg" type="native">
					<style>
						<position value="absolute"/>
						<marginLeft value="-2px"/>
						<marginRight value="-2px"/>
						<width value="100%"/>
						<height value="29px"/>
					</style>
				</block>
				<block>
					<block>
						<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_2', 
														_width: '160px', 
														_selected: validTabIndex == 2,
														_action: 'setUserPref', _actionParams: {value: 2, name: 'tabStatsTabIndex'}, 
														_label: 'IDS_SCENARIO_TASKS_TAB', 
														_index: 2, 
														_paragraphText: 'IDS_TOOLTIP_SCENARIO_TASKS_TAB', _isInBattle: true}"/>
					</block>
					<bind name="action" value="'click'; 'setUserPref' ; {value: 2, name: 'tabStatsTabIndex'}"/>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<top value="2px"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_0', 
													_width: '160px', 
													_selected: validTabIndex == 0,
													_action: 'setUserPref', _actionParams: {value: 0, name: 'tabStatsTabIndex'}, 
													_label: 'IDS_TEAM_STRUCTURE', 
													_index: 0, 
													_paragraphText: 'IDS_TOOLTIP_TAB_TEAM_STRUCTURE', _isInBattle: true}"/>
				</block>
				<block>
					<bind name="visible" value="isDynamicDivisionsEnabled"/>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<top value="2px"/>
						</style>
					</block>
					<block>
						<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTab_1', 
														_width: '160px', 
														_selected: validTabIndex == 1,
														_action: 'setUserPref', _actionParams: {value: 1, name: 'tabStatsTabIndex'}, 
														_label: 'IDS_DIVISIONS', 
														_index: 1, 
														_paragraphText: 'IDS_TOOLTIP_TAB_DIVISIONS', _isInBattle: true}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<width value="810px"/>
				</style>
				<bind name="stageSize"/>
				<bind name="watch" value="'instructionsOffsetX'; (26 + (stageWidth - 1280) / 16)"/>
				<bind name="style" value="'marginTop'; showTabBar ? (4 + topOffset/60) : '4sh'"/>
				<block>
					<bind name="visible" value="validTabIndex == 0 &amp;&amp; gameModeId != GameMode.ESCAPE_TO_PORTAL &amp;&amp; teamId != 100"/>
					<style>
						<width value="230px"/>
						<height value="290px"/>
						<position value="absolute"/>
						<top value="20px"/>
					</style>
					<bind name="style" value="'left'; -(280 + instructionsOffsetX)"/>
					<block>
						<style>
							<right value="0"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold"/>
							<style>
								<marginBottom value="3px"/>
								<right value="0"/>
							</style>
							<bind name="text" value="toUpperCase(tr('IDS_QUICK_COMMANDS'))"/>
						</block>
						<bind name="watch" value="'qcDataArray1'; [ { _qcText1: 'IDS_CMD_QUICK_COMMANDS_WINDOW', _qcShortcut1: '[CMD_QUICK_COMMANDS_WINDOW]', _qcHelpPanelVElementPadding: '15px'},
													{ _qcText1: 'IDS_CMD_QUICK_NO_WAY_WINDOW', _qcShortcut1: '[CMD_QUICK_NO_WAY]'},
													{ _qcText1: 'IDS_CMD_QUICK_TACTIC_WINDOW', _qcShortcut1: '[CMD_QUICK_TACTIC]'},
													{ _qcText1: 'IDS_CMD_QUICK_AYE_AYE_WINDOW', _qcShortcut1: '[CMD_QUICK_AYE_AYE]'},
													{ _qcText1: 'IDS_CMD_QUICK_NEED_SUPPORT_WINDOW', _qcShortcut1: '[CMD_QUICK_NEED_SUPPORT]', _qcHelpPanelVElementPadding: '15px'},
													{ _qcText1: 'IDS_CMD_QUICK_NEED_AIR_DEFENCE_WINDOW', _qcShortcut1: '[CMD_QUICK_NEED_AIR_DEFENCE]'},
													{ _qcText1: 'IDS_CMD_QUICK_NEED_VISION_WINDOW', _qcShortcut1: '[CMD_QUICK_NEED_VISION]'},
													{ _qcText1: 'IDS_CMD_QUICK_NEED_SMOKE_WINDOW', _qcShortcut1: '[CMD_QUICK_NEED_SMOKE]'},
													{ _qcText1: 'IDS_CMD_QUICK_BACK_WINDOW', _qcShortcut1: '[CMD_QUICK_BACK]', _qcHelpPanelVElementPadding: '15px'},
													{ _qcText1: 'IDS_CMD_QUICK_GOOD_LUCK_WINDOW', _qcShortcut1: '[CMD_QUICK_GOOD_LUCK]'},
													{ _qcText1: 'IDS_CMD_QUICK_GOOD_GAME_WINDOW', _qcShortcut1: '[CMD_QUICK_GOOD_GAME]'},
													{ _qcText1: 'IDS_CMD_QUICK_THANK_YOU_WINDOW', _qcShortcut1: '[CMD_QUICK_THANK_YOU]'},
													{ _qcText1: 'IDS_CMD_QUICK_CARAMBA_WINDOW', _qcShortcut1: '[CMD_QUICK_CARAMBA]'} ]"/>
						<block>
							<style>
								<right value="0"/>
								<paddingTop value="10px"/>
							</style>
							<bind name="repeat" value="qcDataArray1; 'QuickCommandHelpPanelVElement'"/>
						</block>
					</block>
				</block>
				<bind name="child" value="validTabIndex; {	_isBattleStats: true, battleModeInfo: battleModeInfo,
											selfPlayer: selfPlayer, enemies: enemies, enemiesByTeam: enemiesByTeam, allies: allies, divisions: divisions,
											_isDynamicDivisionsEnabled: isDynamicDivisionsEnabled}
										; 'TeamBattlePage'; 'DynamicDivisions'; 'TaskBattleStats'"/>
				<block>
					<bind name="visible" value="gameModeId != GameMode.ESCAPE_TO_PORTAL"/>
					<style>
						<width value="210px"/>
						<position value="absolute"/>
						<top value="20px"/>
					</style>
					<bind name="style" value="'right';	-(210 + instructionsOffsetX)"/>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<bind name="instance" value="'RightPanelInfo'; validTabIndex == 0 &amp;&amp; teamId != 100	? {	_headerText: 'IDS_ACTIONS_WITH_PLAYERS_HEADER',
																											_infoText: 'IDS_ACTIONS_WITH_PLAYERS_HINT',
																											_isBattleStats: true}
																										: null"/>
						<bind name="instance" value="'RightPanelInfo'; validTabIndex == 1	? {	_headerText: 'IDS_DIVISIONS_IN_BATTLE_HEADER',
																				_infoText: 'IDS_DYNAMIC_DIVISIONS_INFO',
																				_isBattleStats: true}
																			: null"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginLeft value="2px"/>
						</style>
						<bind name="instance" value="'VoiceChatRightPanelControl'; isVoiceChatEnabled	? {_isBattleStats: true, _battleType: battleType}
																						: null"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
							<marginLeft value="2px"/>
						</style>
						<bind name="instance" value="'InvitationsToDivisionRightPanelControl'; isDynamicDivisionsEnabled	? {_selfPlayer: selfPlayer, _isBattleStats: true}
																										: null"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="watch" value="'bottomOffset'; 17+(stageHeight-720)/3"/>
			<style>
				<width value="100%"/>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'bottom'; bottomOffset"/>
			<block>
				<bind name="visible" value="battleModeInfo.holdRewards.length &gt; 0 "/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="9px"/>
				</style>
				<bind name="instance" value="'PointsCharge'; {_battleModeInfo: battleModeInfo}"/>
			</block>
			<block>
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
				<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
				<bind name="watchDH" value="'chosenOperationId'; ['']; pveStateEntity.pveState.chosenOperation"/>
				<bind name="watchDH" value="'activeOperationId'; ['']; pveStateEntity.pveState.activeOperation"/>
				<bind name="watchDH" value="'chosenDifficulty';	['']; pveStateEntity.pveState.chosenDifficulty"/>
				<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
				<bind name="watchDH" value="'operationType';	['operationEntity.operation.evStatusChanged']; operationEntity.operation.type"/>
				<bind name="watchDH" value="'operationIsHard'; []; operationEntity.operation.isHard"/>
				<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
				<bind name="watchDH" value="'isBrawl'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.isBrawl"/>
				<bind name="watch" value="'isChosenOperationOfTheWeek'; ((chosenOperationId == activeOperationId) &amp;&amp; (chosenDifficulty == 'normal'))"/>
				<style>
					<marginTop value="16px"/>
					<width value="100%"/>
				</style>
				<bind name="watch" value="'pveDifficultyPostfix'; operationIsHard ? '_hard' : ''"/>
				<bind name="watch" value="'pveIconLabel'; (operationType == 'event' ? 'PVEBattle_event' : 'PVEBattle') + pveDifficultyPostfix"/>
				<block className="icon_battletypes" type="native">
					<styleClass value="$MiddleAligned"/>
					<style>
						<marginTop value="0px"/>
					</style>
					<bind name="gotoAndStop!" value="(battleType == BattleTypes.RANKED_BATTLE) &amp;&amp; (rankedBattlesSeason.isJuniorSeason == true) 	? 'RankedBattle_junior' :
									(battleType == BattleTypes.CLAN_BATTLE) &amp;&amp; (isBrawl)									 	? 'ClanBrawl':
									(battleType == BattleTypes.PVE_BATTLE)  &amp;&amp; (operationType == 'event')		? pveIconLabel 
																																		: battleType"/>
				</block>
				<block>
					<styleClass value="$MiddleAligned"/>
					<block type="text">
						<bind name="class" value="'$FontSizeLargeHeader'"/>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextAccentBold"/>
						<bind name="text" value="(gameModeId == GameMode.PVE	? tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_NAME')
															: toUpperCase(tr(battleModeInfo.mapName)))"/>
					</block>
					<block type="text">
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$TextHeader"/>
						<style>
							<marginTop value="-6px"/>
							<alpha value="0.8"/>
						</style>
						<bind name="text" value="(gameModeId == GameMode.PVE	? tr('IDS_PVE_BATTLE_WITH_DOT') + ' ' +	(isChosenOperationOfTheWeek == true		? tr('IDS_OPERATION_OF_THE_WEEK_OPERATION_TITLE') :
																									(!(operationIsHard)						? tr('IDS_OPERATION_NORMAL_DIFFICULTY_TITLE')
																																			: tr('IDS_OPERATION_HARD_DIFFICULTY_TITLE')))
															: (toUpperCase(tr('IDS_')) + gameMode + toUpperCase(tr('_TITLE'))))"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BottomMenu"/>
			<block>
				<style>
					<marginLeft value="10px"/>
					<marginTop value="4px"/>
					<width value="19px"/>
					<height value="17px"/>
				</style>
				<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isInBattle: true, _isSpeaking: selfPlayer.isSpeaking}"/>
			</block>
		</block>
		<block>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'invitationsToDivision'; 'InvitationsToDivision'"/>
			<bind name="style" value="'bottom'; bottomOffset"/>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="repeat" value="InvitationsToDivision; 'BattleDivisionInvitationItem'; {_isBattleStats: true}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="TooltipWithKeyIcon">
		<block>
			<styleClass value="$DefaultTooltipBehaviour"/>
			<style>
				<width value="250px"/>
			</style>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'TooltipBackground'; {_isInBattle: true}"/>
			</block>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextHeaderBigDefault"/>
				<bind name="substitute" value="3; {'[KEY_CONTROL]':'[CONTROL]'}; tr('IDS_SHOW_CURSOR_IN_STATS_PANEL_HINT')"/>
			</block>
		</block>
	</block>
	<block className="RightPanelInfo">
		<bind name="appear" value="_isBattleStats ? null : 'addedToStage'; 0.15; 0.1; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
		<bind name="name" value="'RightPanelInfo'"/>
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBoldNM"/>
			<bind name="text" value="toUpperCase(tr(_headerText))"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="15px"/>
				<leading value="1"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="tr(_infoText)"/>
		</block>
	</block>
	<block className="BattleLoadingMinimap">
		<bind name="name" value="'BattleLoadingMinimap'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'capturePoints'; 'capturePointsCollection'"/>
		<bind name="collectionDH" value="CC.building; 'forts'"/>
		<style>
			<width value="1px"/>
			<height value="1px"/>
		</style>
		<bind name="var" value="{minimapSize: 360}"/>
		<bind name="style" value="'width'; minimapSize + 'px'"/>
		<bind name="style" value="'height'; minimapSize + 'px'"/>
		<bind name="firstEntityDH" value="'minimapEntity'; CC.minimap"/>
		<bind name="watch" value="'mapBorderScale'; minimapEntity.mapBorder.ratio"/>
		<bind name="watch" value="'mapBorderMarginX'; - minimapSize * minimapEntity.mapBorder.relativeMargin.x"/>
		<bind name="watch" value="'mapBorderMarginY'; - minimapSize * minimapEntity.mapBorder.relativeMargin.y"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<backgroundStretchY value="true"/>
				<backgroundStretchX value="true"/>
				<alpha value="0.7"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:' + _battleModeInfo.minimapWaterPath"/>
		</block>
		<block className="universal_mask" type="native">
			<bind name="style" value="'width'; minimapSize + 'px'"/>
			<bind name="style" value="'height'; minimapSize + 'px'"/>
			<bind name="isMask" value="true"/>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<backgroundStretchY value="true"/>
					<backgroundStretchX value="true"/>
				</style>
				<bind name="style" value="'backgroundImage'; 'url:' + _battleModeInfo.minimapPath"/>
				<bind name="style" value="'width'; (minimapSize * mapBorderScale) + 'px'"/>
				<bind name="style" value="'height'; (minimapSize * mapBorderScale) + 'px'"/>
				<bind name="style" value="'left'; (mapBorderMarginX * mapBorderScale) + 'px'"/>
				<bind name="style" value="'top'; (mapBorderMarginY * mapBorderScale) + 'px'"/>
			</block>
		</block>
		<block className="minimap_grid" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<left value="-30px"/>
			</style>
			<bind name="repeat" value="['A','B','C','D','E','F','G','H','I','J']; 'MinimapSectorLabel'; { size: minimapSize / 10}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<top value="-30px"/>
				<flow value="horizontal"/>
			</style>
			<bind name="repeat" value="[1,2,3,4,5,6,7,8,9,10]; 'MinimapSectorLabel'; { size: minimapSize / 10}"/>
		</block>
		<block>
			<style>
				<overflow value="scroll"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="repeat" value="capturePointsCollection; 'MinimapCircleItem'; { minimapSize: minimapSize}"/>
		</block>
		<block>
			<style>
				<overflow value="scroll"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="repeat" value="capturePointsCollection; 'MinimapPointItem'; { minimapSize: minimapSize, modeId: _battleModeInfo.modeId }"/>
			<bind name="repeat" value="forts; 'MinimapFortsItem'; {minimapSize: minimapSize}"/>
		</block>
		<block>
			<style>
				<overflow value="scroll"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="repeat" value="_allies; 'MinimapShipItem'; { minimapSize: minimapSize }"/>
		</block>
	</block>
	<block className="MinimapShipItem">
		<style>
			<position value="absolute"/>
		</style>
		<bind name="visible" value="(worldPos.x + worldPos.z &gt; 0) &amp;&amp; worldPos.x &lt;= 1 &amp;&amp; worldPos.z &lt;= 1"/>
		<bind name="tooltip" value="'SimpleTooltip'; relation == 0	? {tooltipText: 'IDS_MY_SHIP'}
													: {tooltipText: tr('IDS_ALLY') + ' ' + ((shipTypeIdent == ShipTypes.Auxiliary)	?	toLowerCase(tr('IDS_SHIP'))
																																	:	toLowerCase(tr('IDS_' + toUpperCase(shipTypeIdent))))}"/>
		<bind name="left" value="worldPos.x * minimapSize"/>
		<bind name="top" value="worldPos.z * minimapSize"/>
		<block className="icon_ships_minimap" type="native">
			<bind name="gotoAndStop!" value="relation == 0 ? 'Player' 
										: isInSameDivision ? shipTypeIdent + '_division'
										: tkStatus ? shipTypeIdent + '_teamkiller' : shipTypeIdent"/>
			<bind name="rotation" value="worldYaw * 180 / 3.14"/>
		</block>
	</block>
	<block className="MinimapCircleItem">
		<style>
			<position value="absolute"/>
			<alpha value="1"/>
		</style>
		<bind name="left" value="posX * minimapSize"/>
		<bind name="top" value="posY * minimapSize"/>
		<block className="lesta.display.CapturePointShape" type="native">
			<bind name="radius" value="radius * minimapSize"/>
			<bind name="innerRadius" value="innerRadius * minimapSize"/>
			<bind name="maxRadius" value="maxRadius * minimapSize"/>
			<bind name="relation" value="ownerRelation"/>
			<bind name="visible" value="visible"/>
		</block>
	</block>
	<block className="MinimapPointItem">
		<style>
			<position value="absolute"/>
		</style>
		<bind name="left" value="posX * minimapSize"/>
		<bind name="top" value="posY * minimapSize"/>
		<bind name="visible" value="visible"/>
		<block>
			<bind name="tooltip" value="'SimpleTooltip'; ownerRelation == 1 	? {tooltipText: 'IDS_ALLY_BASE'}
															: ownerRelation == 2 ? {tooltipText: 'IDS_ENEMY_BASE'} : null"/>
			<bind name="visible" value="(type == CapturePointType.BASE || type == CapturePointType.MEGABASE)"/>
			<block className="icon_base_minimap" type="native">
				<bind name="gotoAndStop!" value="type == CapturePointType.BASE ? ownerRelation : ownerRelation+3"/>
			</block>
		</block>
		<block>
			<bind name="left" value="linkIndex * 40"/>
			<bind name="var" value="{ capturePointName: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'] }"/>
			<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: (type == CapturePointType.BASE_WITH_POINTS) 	? (ownerRelation == 1) ? 'IDS_ALLY_BASE' : 'IDS_ENEMY_BASE'
																									: tr('IDS_CAPTURE_POINT') + ' ' + capturePointName[id] }"/>
			<bind name="visible" value="(type == CapturePointType.CONTROL || type == CapturePointType.BASE_WITH_POINTS)"/>
			<block className="icon_capture_point_minimap" type="native">
				<bind name="gotoAndStop!" value="type == CapturePointType.BASE_WITH_POINTS ? 11 + ownerRelation : (id + 1)"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="type == CapturePointType.BUILDING_CP"/>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: tr('IDS_CAPTURE_SECTOR') + ' ' + (id + 1)}"/>
			<block className="icon_capture_sector_minimap" type="native">
				<bind name="gotoAndStop!" value="'relation_' + ownerRelation"/>
			</block>
			<block type="text">
				<style>
					<position value="absolute"/>
					<top value="-12px"/>
					<left value="-6px"/>
				</style>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="ownerRelation == 1 ? '$FontColorComparePositive' :
						 ownerRelation == 2 ? '$FontColorCompareNegative'
											: '$FontColorWhite'"/>
				<bind name="text" value="id + 1"/>
			</block>
		</block>
	</block>
	<block className="MinimapFortsItem">
		<bind name="entityDH" value="'mapFortPoint'; id"/>
		<bind name="watchDH" value="'relation'; ['mapFortPoint.relation.evChanged']; mapFortPoint.relation.value"/>
		<bind name="watchDH" value="'mapVisible'; ['mapFortPoint.visibility.evChanged']; mapFortPoint.visibility.mapVisible"/>
		<bind name="watch" value="'isVisible'; mapVisible &amp;&amp; !!(mapFortPoint.mapPosition)"/>
		<style>
			<position value="absolute"/>
		</style>
		<bind name="visible" value="isVisible"/>
		<bind name="left" value="isVisible ? mapFortPoint.mapPosition.position.x * minimapSize : 0"/>
		<bind name="top" value="isVisible ? mapFortPoint.mapPosition.position.y * minimapSize : 0"/>
		<bind name="tooltip" value="'SimpleTooltip'; { tooltipText: tr(toUpperCase('IDS_' + relation + '_' + mapFortPoint.building.type))}"/>
		<block>
			<block className="icon_forts_minimap" type="native">
				<bind name="gotoAndStop!" value="mapFortPoint.building.type + relation"/>
			</block>
		</block>
	</block>
	<block className="MinimapSectorLabel">
		<style>
			<height value="1px"/>
			<width value="1px"/>
		</style>
		<bind name="style" value="'width'; size + 'px'"/>
		<bind name="style" value="'height'; size + 'px'"/>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextSecondaryBold"/>
			<bind name="text" value="$value"/>
		</block>
	</block>
	<block className="PointsCharge">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="visible" value="_battleModeInfo.holdRewards.length &gt; 0 "/>
			<style>
				<marginRight value="32px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<text value="IDS_HOLDING_BASE"/>
			</block>
			<block>
				<bind name="repeat" value="_battleModeInfo.holdRewards; 'HoldPointReward'"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<block>
			<bind name="instance" value="'PowerUpPointsCharge'; battleDataEntity.battleInfo.gameModeSubtype == 1 ? {} : null"/>
		</block>
		<block>
			<bind name="visible" value="_battleModeInfo.buildingRewardList.length &gt; 0 || _battleModeInfo.buildingPenaltyList.length &gt; 0"/>
			<style>
				<marginRight value="32px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<text value="IDS_SUPPRESSION"/>
			</block>
			<block>
				<block>
					<bind name="repeat" value="_battleModeInfo.buildingRewardList; 'BuildingSuppressionRewardItem'"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="repeat" value="_battleModeInfo.buildingPenaltyList; 'BuildingSuppressionPenaltyItem'"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="_battleModeInfo.shipPenaltyList.length &gt; 0"/>
			<style>
				<marginRight value="16px"/>
			</style>
			<block type="text">
				<style>
					<minWidth value="150"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<text value="IDS_ALLY_LOSS"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="repeat" value="_battleModeInfo.shipPenaltyList; 'AllyLossItem'"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="_battleModeInfo.shipRewardList.length &gt; 0"/>
			<style>
				<marginLeft value="16px"/>
				<height value="92px"/>
			</style>
			<block type="text">
				<style>
					<minWidth value="150"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<text value="IDS_ENEMY_DESTROY"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="repeat" value="_battleModeInfo.shipRewardList; 'EnemiesDestructionItem'"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="PowerUpPointsCharge">
		<style>
			<marginRight value="32px"/>
			<align value="center"/>
		</style>
		<block type="text">
			<styleClass value="$BattleLoadingDescriptionSmall"/>
			<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_HEADER'"/>
		</block>
		<block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_MODIFIER_PARAM_HEADER_PCOM001_VISIBILITY'}"/>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundImage value="symbol:icon_ship_modifier_PCOM001_Visibility"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_MODIFIER_PARAM_HEADER_PCOM002_REGENERATION'}"/>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundImage value="symbol:icon_ship_modifier_PCOM002_Regeneration"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_MODIFIER_PARAM_HEADER_PCOM003_SHOTDELAY'}"/>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundImage value="symbol:icon_ship_modifier_PCOM003_ShotDelay"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_MODIFIER_PARAM_HEADER_PCOM004_ENGINEBOOST'}"/>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundImage value="symbol:icon_ship_modifier_PCOM004_EngineBoost"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_MODIFIER_PARAM_HEADER_PCOM006_CONSUMABLETIME'}"/>
				<style>
					<width value="44px"/>
					<height value="44px"/>
					<backgroundImage value="symbol:icon_ship_modifier_PCOM006_ConsumableTime"/>
					<backgroundSize value="cover"/>
				</style>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_GET'"/>
			</block>
			<block type="text">
				<style>
					<marginLeft value="8px"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'IDS_EVENTBATTLE_PW_CHARGING_POINTS_LOST'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="HoldPointReward">
		<style>
			<width value="100px"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="visible" value="pointType != CapturePointType.BUILDING_CP"/>
			<block className="icon_hold_base" type="native">
				<bind name="gotoAndStop!" value="(pointType == CapturePointType.BASE_WITH_POINTS) 	? 'flags' :
								(pointType == CapturePointType.EPICENTER_CP) 		? 'epicenter_' + index
																					: 'letters'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="pointType == CapturePointType.BUILDING_CP"/>
			<styleClass value="$MiddleAligned"/>
			<block className="icon_hold_fort_object" type="native"/>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<style>
					<maxWidth value="100"/>
					<leading value="-2"/>
					<textAlign value="center"/>
				</style>
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="message"/>
			</block>
		</block>
	</block>
	<block className="EnemiesDestructionItem">
		<style>
			<width value="38px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_ship_reward" type="native">
					<bind name="gotoAndStop!" value="shipType"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'+' + number"/>
			</block>
		</block>
	</block>
	<block className="AllyLossItem">
		<style>
			<width value="38px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_ship_penalty" type="native">
					<bind name="gotoAndStop!" value="shipType"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="number"/>
			</block>
		</block>
	</block>
	<block className="BuildingSuppressionRewardItem">
		<style>
			<width value="38px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_building_suppress_reward" type="native">
					<bind name="gotoAndStop!" value="buildingType"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="'+' + number"/>
			</block>
		</block>
	</block>
	<block className="BuildingSuppressionPenaltyItem">
		<style>
			<width value="40px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<height value="44px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_building_suppress_penalty" type="native">
					<bind name="gotoAndStop!" value="buildingType"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<block type="text">
				<styleClass value="$BattleLoadingDescriptionSmall"/>
				<bind name="text" value="number"/>
			</block>
		</block>
	</block>
	<block className="BattleLoadingPVETasks">
		<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
		<bind name="watchDH" value="'chosenOperationId'; ['']; pveStateEntity.pveState.chosenOperation"/>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
		<bind name="watch" value="'isHW2018'; isIn(operationEntity.operation.gpName, ['PCVO013_EV_HL_18_e04_Halloween_2018', 'PCVO017_EV_HL_18_e04_Halloween_2018_Hard'])"/>
		<style>
			<width value="100%"/>
			<marginRight value="80px"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.4; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_NAME')"/>
			</block>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.47; {alpha: 0, top: 10}; {alpha: 0.85, top: 0}"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_DESCRIPTION')"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.54; {alpha: 0, top: 10}; {alpha: 1, top: 0}"/>
				<styleClass value="$TextDefaultBold23NM"/>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="text" value="'IDS_PVE_OPERATION_GOAL'"/>
			</block>
			<block type="text">
				<bind name="appear" value="'startShow'; 0.15; 0.61; {alpha: 0, top: 10}; {alpha: 0.85, top: 0}"/>
				<style>
					<width value="100%"/>
					<marginBottom value="24px"/>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefault19NM"/>
				<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_GOAL')"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isHW2018"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'SubmarineBattleDescription'; isHW2018 ? {} : null"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity ? {} : null"/>
		</block>
	</block>
	<block className="GalleryViewer">
		<bind name="watch" value="'currentSelectedImage'; 	_currentImageIdx ? _currentImageIdx : 1"/>
		<bind name="watch" value="'nextSelectedImage'; 		(currentSelectedImage == _galleryItemRendererParams.length	? 1
																										: currentSelectedImage + 1)"/>
		<bind name="watch" value="'previousSelectedImage';	(currentSelectedImage == 1	? _galleryItemRendererParams.length
																		: currentSelectedImage - 1)"/>
		<bind name="dispatch" value="'imageSelectionEv'; 'changeImage'; null; 1; 0.08"/>
		<bind name="catch" value="'imageSelectionEv'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="var" value="{ _isAutoSwitchStoped: false }"/>
		<bind name="watch" value="'autoSwitchStopped'; _isAutoSwitchStoped == true || _galleryItemRendererParams.length &lt; 2"/>
		<bind name="catch" value="'nextEv'; 		{ autoSwitchStopped: true }"/>
		<bind name="catch" value="'previousEv'; 	{ autoSwitchStopped: true }"/>
		<bind name="catch" value="'changeImage'; { autoSwitchStopped: true }"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="var" value="{ timerTimeStamp: 0 }"/>
		<bind name="catch" value="'addedToStage'; { timerTimeStamp: serverTime - (-_autoSwitchDelay) }"/>
		<bind name="countdown" value="timerTimeStamp; 'countdownText'; 'ss'; (autoSwitchStopped == true) ? null : 'timeoutEvent'"/>
		<bind name="catch" value="'timeoutEvent'; (autoSwitchStopped == true) ? null : { timerTimeStamp: serverTime - (-_autoSwitchDelay), currentSelectedImage: nextSelectedImage}"/>
		<bind name="dispatch" value="'timeoutEvent'; (autoSwitchStopped == true) ? null : 'timeOutEv'; {}; 1"/>
		<block>
			<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_arrowsDisabled != true)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			<bind name="dispatch" value="'click'; 'previousEv'; {}; 1"/>
			<bind name="catch" value="'click'; { currentSelectedImage: previousSelectedImage }"/>
			<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
			<bind name="style" value="'height'; _fakeHitboxWidth &gt; 0 ? _galleryImageHeight + 'px' : '100%' "/>
			<style>
				<width value="40px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
			</block>
			<block>
				<bind name="visible" value="_fakeHitboxWidth &gt; 0"/>
				<bind name="style" value="'width'; _fakeHitboxWidth ? _fakeHitboxWidth + 'px' : '0' "/>
				<bind name="style" value="'left'; _fakeHitboxWidth ? -(_fakeHitboxWidth - 40) + 'px' : '0' "/>
				<style>
					<backgroundColor value="0x01000000"/>
					<height value="100%"/>
					<position value="absolute"/>
				</style>
			</block>
		</block>
		<block>
			<block>
				<style>
					<overflow value="scroll"/>
					<scrollbar value="ModernScrollBar"/>
					<scrollbarController value="lesta.unbound.style.UbScrollingControllerModern"/>
					<scrollArea value="ModernScrollArea"/>
					<scrollbarTrackMode value="scrollToCursor"/>
				</style>
				<bind name="style" value="'width'; _galleryImageWidth + 'px'"/>
				<bind name="style" value="'height'; _galleryImageHeight + 'px'"/>
				<bind name="repeat" value="_galleryItemRendererParams; 'GalleryItem'; {	_currentSelectedImage: 	 	currentSelectedImage,
																		_nextSelectedImage: 		nextSelectedImage,
																		_previousSelectedImage: 	previousSelectedImage,
																		_galleryImageWidth: 		_galleryImageWidth, 
																		_galleryImageHeight: 		_galleryImageHeight, 
																		_galleryItemRenderer: 		_galleryItemRenderer, 
																		_galleryItemRendererParams: _galleryItemRendererParams
																	}; true"/>
			</block>
			<block>
				<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_indicatorDisabled != true)"/>
				<bind name="style" value="'marginLeft'; _galleryItemRendererImageIndicatorMarginLeft ? (_galleryItemRendererImageIndicatorMarginLeft + 'px') : 0"/>
				<bind name="repeat" value="_galleryItemRendererParams; _galleryItemRendererImageIndicator; 	{	
																							_currentSelectedImage: currentSelectedImage,
																							_imageCount: _galleryItemRendererParams.length,
																							_imageWidth: _galleryImageWidth
																							}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="(_galleryItemRendererParams.length &gt; 1) &amp;&amp; (_arrowsDisabled != true)"/>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
			<bind name="transition" value="rollOver; 0.15; {alpha: 0.5}; {alpha: 1}"/>
			<bind name="dispatch" value="'click'; 'nextEv'; {}; 1"/>
			<bind name="catch" value="'click'; { currentSelectedImage: nextSelectedImage }"/>
			<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
			<bind name="style" value="'height'; _fakeHitboxWidth &gt; 0 ? _galleryImageHeight + 'px' : '100%' "/>
			<style>
				<width value="40px"/>
				<backgroundColor value="0x01000000"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
			</block>
			<block>
				<bind name="visible" value="_fakeHitboxWidth &gt; 0"/>
				<bind name="style" value="'width'; _fakeHitboxWidth ? _fakeHitboxWidth + 'px' : '0' "/>
				<style>
					<backgroundColor value="0x01000000"/>
					<height value="100%"/>
					<position value="absolute"/>
				</style>
			</block>
		</block>
	</block>
	<block className="GalleryItem">
		<bind name="var" value="{imageIndex: $index + 1}"/>
		<bind name="appear" value="imageIndex == _nextSelectedImage		?	'timeOutEv'		: null ; 0.35; 0; 	{alpha: 1, left: _galleryImageWidth};		{alpha: 1, left: 0}; 1"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage	?	'timeOutEv'		: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: -_galleryImageWidth}; 1"/>
		<bind name="appear" value="imageIndex == _nextSelectedImage		?	'nextEv'		: null ; 0.35; 0; 	{alpha: 1, left: _galleryImageWidth};		{alpha: 1, left: 0}; 1"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage	?	'nextEv'		: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: -_galleryImageWidth}; 1"/>
		<bind name="appear" value="imageIndex == _previousSelectedImage 	?	'previousEv'	: null ; 0.35; 0; 	{alpha: 1, left: -_galleryImageWidth};		{alpha: 1, left: 0}; 1"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage 	?	'previousEv'	: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: _galleryImageWidth}; 1"/>
		<bind name="appear" value="imageIndex == _currentSelectedImage 	?	'changeImage'	: null ; 0.35; 0; 	{alpha: 1, left: 0};						{alpha: 1, left: 0}; 1"/>
		<bind name="appear" value="imageIndex != _currentSelectedImage	? 	'changeImage'	: null ; 0; 0;		{alpha: 0, left: _galleryImageWidth};		{alpha: 0, left: _galleryImageWidth}; 1"/>
		<styleClass value="$FullsizeAbsolute"/>
		<bind name="style" value="'alpha'; (imageIndex == _currentSelectedImage) ? 1 : 0)"/>
		<bind name="instance" value="_galleryItemRenderer; { _galleryItemRendererParams: _galleryItemRendererParams, _index: $index,
											_galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight }"/>
	</block>
	<block className="SelectedImageIndicator">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'indicatorLength'; ((_imageWidth - ((_imageCount - 1)*2)) / _imageCount)"/>
		<bind name="watch" value="'indicatorLengthRemainder'; ((_imageWidth - ((_imageCount - 1)*2)) % _imageCount)"/>
		<bind name="style" value="'marginRight'; (($index + 1) &lt; _imageCount) ? '2px' : '0px'"/>
		<bind name="style" value="'width'; $index &lt; indicatorLengthRemainder ? ((indicatorLength + 1) + 'px') : indicatorLength + 'px'"/>
		<bind name="var" value="{ imageIndex: $index + 1 }"/>
		<bind name="dispatch" value="'click'; 'imageSelectionEv'; { currentSelectedImage: imageIndex }; 0"/>
		<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
		<bind name="style" value="'backgroundColor'; ( _currentSelectedImage == imageIndex ) ? '0xCC4CE8AA' : '0x779CBABA'"/>
		<bind name="transition" value="rollOver; 0.05; {height: 5}; {height: 10}"/>
		<style>
			<height value="5px"/>
		</style>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<height value="60px"/>
				<top value="-10px"/>
				<position value="absolute"/>
				<width value="100%"/>
			</style>
		</block>
	</block>
	<block className="SelectedImageIndicatorAccountLeveling">
		<bind name="watch" value="'indicatorState'; _currentSelectedImage == imageIndex ? 'selected' : 'unselected'"/>
		<bind name="var" value="{ imageIndex: $index + 1 }"/>
		<bind name="dispatch" value="'click'; 'imageSelectionEv'; { currentSelectedImage: imageIndex }; 0"/>
		<bind name="soundOn" value="'mouseDown'; 'press'; 'default_button'"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController; null; 'ct_'"/>
		<bind name="var" value="{ 
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 30,
			greenOffset: 30,
			blueOffset: 30,
			alphaOffset: 0
		}
	}"/>
		<bind name="var" value="{ 
		ctMouseDown: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: -30,
			greenOffset: -30,
			blueOffset: -30,
			alphaOffset: 0
		}
	}"/>
		<bind name="colorTransform" value="	true &amp;&amp; (ct_mouseDown)	? ctMouseDown :
							true &amp;&amp; (ct_rollOver)	? ctRollOver
														: {}"/>
		<style>
			<width value="25px"/>
			<height value="25px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="9px"/>
				<height value="9px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../accountLevel/progressBarIcons/account_leveling_gallery_conrol_' + indicatorState + '.png'"/>
		</block>
	</block>
	<block className="PlayerDogTag">
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId"/>
		<bind name="watchDH" value="'dogTagList';['playerEntity.dogTagView.evComponentsChanged']; playerEntity.dogTagView.components"/>
		<bind name="name" value="'playerDogTag'"/>
		<bind name="watch" value="'size';	_size == 'big' 				? 512 : 
							_size == 'medium' 			? 190 : 
							_size == 'small' 			? 80 :
							_size == 'profile' 			? 60
														: 80"/>
		<bind name="style" value="'width'; size + 'px'"/>
		<bind name="style" value="'height'; size + 'px'"/>
		<bind name="repeat" value="dogTagList; 'PlayerDogTagItemByPK'; {_path: _size == 'small' 		? 'url:../dogTags/small/'  :
														  _size == 'profile' 	? 'url:../dogTags/small/' :
														  _size == 'medium' 	? 'url:../dogTags/medium/' :
														  _size == 'big' 		? 'url:../dogTags/big/'
														  						: 'url:../dogTags/big/'
														  						, _playerDbId : _playerDbId,
													_clanTagPaths: _size == 'small' 	? '../fonts/small/'  :
																   _size == 'profile' 	? '../fonts/small/' :
																   _size == 'medium' 	? '../fonts/medium/' :
																   _size == 'big' 		? '../fonts/big/'
																				: '../fonts/big/'
																				, _size: size}"/>
	</block>
	<block className="PlayerDogTagItem">
		<bind name="entityDH" value="'dogTagEntity'; id"/>
		<bind name="watchDH" value="'iconPath'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.iconPath"/>
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId"/>
		<bind name="watchDH" value="'clanId'; ['playerEntity.clanman.evClanIdChanged']; playerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanTagOffsetX';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetX"/>
		<bind name="watchDH" value="'clanTagOffsetY';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetY"/>
		<bind name="watchDH" value="'clanTagFont';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagFont"/>
		<bind name="watchDH" value="'clanTagVisible';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagVisible"/>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'top'; clanTagOffsetY + '%'"/>
			<bind name="style" value="'left'; clanTagOffsetX + '%'"/>
			<block>
				<style>
					<position value="absolute"/>
					<marginLeft value="-50%"/>
					<marginTop value="-50%"/>
				</style>
				<bind name="visible" value="clanTagVisible"/>
				<bind name="atlasText" value="clanTagVisible ?  (clanTag ? '[' + clanTag + ']' : '^') : '' ; _clanTagPaths + clanTagFont; 0"/>
			</block>
		</block>
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<backgroundStretchX value="true"/>
			<backgroundStretchY value="true"/>
		</style>
		<bind name="style" value="'backgroundImage'; _path + iconPath"/>
		<bind name="name" value="'dogTag_' + _path + '_' + $index + '_' + dogTagEntity.dogTagComponent.gpName"/>
	</block>
	<block className="PlayerDogTagItemByPK">
		<bind name="primaryEntityDH" value="'dogTagEntity'; CC.dogTagComponent; $value"/>
		<bind name="watchDH" value="'iconPath'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.iconPath"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="primaryEntityDH" value="'dogtagOwnerPlayerEntity'; CC.accountSimple; _playerDbId ? _playerDbId : selfPlayerDbId"/>
		<bind name="watchDH" value="'clanId'; ['dogtagOwnerPlayerEntity.clanman.evClanIdChanged']; dogtagOwnerPlayerEntity.clanman.clanId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
		<bind name="watchDH" value="'clanTagOffsetX';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetX"/>
		<bind name="watchDH" value="'clanTagOffsetY';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetY"/>
		<bind name="watchDH" value="'clanTagFont';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagFont"/>
		<bind name="watchDH" value="'clanTagVisible';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagVisible"/>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<bind name="style" value="'top'; clanTagOffsetY + '%'"/>
			<bind name="style" value="'left'; clanTagOffsetX + '%'"/>
			<block>
				<style>
					<position value="absolute"/>
					<marginLeft value="-50%"/>
					<marginTop value="-50%"/>
				</style>
				<bind name="visible" value="clanTagVisible"/>
				<bind name="atlasText" value="clanTagVisible ?  (clanTag ? '[' + clanTag + ']' : '^') : '' ; _clanTagPaths + clanTagFont; 0"/>
			</block>
		</block>
		<styleClass value="$FullsizeAbsolute"/>
		<style>
			<backgroundStretchX value="true"/>
			<backgroundStretchY value="true"/>
		</style>
		<bind name="style" value="'backgroundImage'; _path + iconPath"/>
		<bind name="name" value="'dogTag_' + _path + '_' + $index + '_' + dogTagEntity.dogTagComponent.gpName"/>
	</block>
	<block className="DogTagProgressDefault">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
			</style>
			<bind name="class" value="(_current &lt; _goal) ? '$FontColorUnready' : '$None'"/>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_DOGTAG_PARAM_' + _name))"/>
		</block>
		<block type="text">
			<style>
				<marginLeft value="8px"/>
			</style>
			<bind name="class" value="(_current &lt; _goal) ? '$FontColorUnready' : '$None'"/>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="_current"/>
		</block>
	</block>
	<block className="ResultBlock">
		<style>
			<width value="100%"/>
		</style>
		<bind name="child" value="_progress[$index][0];	{_name: _progress[$index][0], _goal: _progress[$index][1], _current: _progress[$index][2]};
										{	battleCount: 'DogTagProgressDefault',
											achievementCount: 'DogTagProgressDefault',
										 	damage: 'DogTagProgressDefault',
										 	clearExp: 'DogTagProgressDefault',
										 	winRate: 'DogTagProgressDefault',
										 	uniqueStars: 'DogTagProgressDefault'	}"/>
	</block>
	<block className="DogTagComponentTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
			<hitTest value="false"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="primaryEntityDH" value="'dogTagEntity'; CC.dogTagComponent; _id"/>
		<bind name="watchDH" value="'enabled'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.enabled"/>
		<bind name="watchDH" value="'iconPath'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.iconPath"/>
		<bind name="watchDH" value="'gpName'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.gpName"/>
		<bind name="watchDH" value="'categoryId'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.categoryId"/>
		<bind name="watchDH" value="'restriction'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.restriction"/>
		<bind name="watchDH" value="'data'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.data"/>
		<bind name="watchDH" value="'progress'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.progress"/>
		<bind name="watchDH" value="'description'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.description"/>
		<bind name="watchDH" value="'quest'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.quest"/>
		<bind name="watchDH" value="'unique'; ['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.unique"/>
		<bind name="watchDH" value="'clanTagOffsetX';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetX"/>
		<bind name="watchDH" value="'clanTagOffsetY';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagOffsetY"/>
		<bind name="watchDH" value="'clanTagFont';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagFont"/>
		<bind name="watchDH" value="'clanTagVisible';['dogTagEntity.dogTagComponent.evUpdate']; dogTagEntity.dogTagComponent.clanTagVisible"/>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'DogTagComponentTooltipHeader'; {_iconPath: iconPath, _categoryId: categoryId, _gpName: gpName, _unique: unique,
				_clanTagOffsetX: clanTagOffsetX, _clanTagOffsetY: clanTagOffsetY, _clanTagFont: clanTagFont, _clanTagVisible: clanTagVisible}"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="isNotSelf != true"/>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<block className="icon_module_state" type="native">
					<bind name="gotoAndStop!" value="enabled 	? 'installed'
											: 'action'"/>
				</block>
			</block>
			<block type="text">
				<styleClass value="$TextDefault17NM"/>
				<style>
					<maxWidth value="260"/>
					<marginLeft value="4px"/>
				</style>
				<bind name="class" value="	enabled &amp;&amp; dogTagEntity.dogTagComponentSaved != null	? '$FontColorGolden' :
							enabled													? '$None'
																					: '$FontColorUnready'"/>
				<bind name="text" value="	enabled &amp;&amp; dogTagEntity.dogTagComponentSaved != null	? 'IDS_DOGTAG_COMPONENT_SET':
							enabled													? 'IDS_DOGTAG_COMPONENT_AVAILABLE'
																					: 'IDS_DOGTAG_COMPONENT_NOT_AVAILABLE'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="isNotSelf != true"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="description"/>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-3"/>
					</style>
					<bind name="text" value="tr( toUpperCase('IDS_DOGTAG_' + gpName + '_DESCRIPTION'))"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="!isRewardTooltip &amp;&amp; quest"/>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-3"/>
					</style>
					<bind name="text" value="quest"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<styleClass value="$InfoBlockIndent"/>
					<style>
						<width value="100%"/>
						<alpha value="0.7"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<width value="100%"/>
							<marginTop value="3px"/>
							<marginBottom value="3px"/>
							<leading value="-3"/>
						</style>
						<bind name="text" value="restriction"/>
					</block>
				</block>
				<block>
					<styleClass value="$InfoBlockIndent"/>
					<block>
						<bind name="repeat" value="data.battleTypes; 'DogTagBattleTypeRestriction'"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="instance" value="'ShipRestrictions'; {_restrictionsEntityId: dogTagEntity.id, _withShipTypeCounters: false}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="!enabled &amp;&amp; progress[0][2] != 0 &amp;&amp; isNotSelf != true"/>
				<style>
					<width value="100%"/>
					<marginTop value="9px"/>
				</style>
				<block>
					<styleClass value="$InfoBlockHorizontalIndent"/>
					<bind name="repeat" value="progress; 'ResultBlock'; {_progress: progress}"/>
				</block>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(isNotSelf != true &amp;&amp; _canInstall == 'true') || isRewardTooltip"/>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'MouseInstruction'; isRewardTooltip ? {_type: 'left', _instructionText: 'IDS_DOGTAG_TOOLTIP_GO_TO_CONSTUCTOR', _maxWidth: 300 } :
											unique			? {_type: 'left', _instructionText: 'IDS_SELECT_DOGTAG_COMPONENT_UNIQUE', _maxWidth: 300 } 
															: {_type: 'left', _instructionText: 'IDS_SELECT_DOGTAG_COMPONENT', _maxWidth: 300 }"/>
		</block>
	</block>
	<block className="DogTagComponentTooltipHeader">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<backgroundStretchX value="true"/>
				<backgroundStretchY value="true"/>
				<width value="80px"/>
				<height value="80px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../dogTags/small/' + _iconPath"/>
			<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
			<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
			<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
			<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
			<bind name="watchDH" value="'clanId'; ['selfPlayerEntity.clanman.evClanIdChanged']; selfPlayerEntity.clanman.clanId"/>
			<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
			<bind name="watchDH" value="'clanTag'; ['clanEntity.clan.evTagChanged']; clanEntity.clan.tag"/>
			<block>
				<bind name="visible" value="_clanTagVisible == true"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'top'; _clanTagOffsetY + '%'"/>
				<bind name="style" value="'left'; _clanTagOffsetX + '%'"/>
				<block>
					<style>
						<position value="absolute"/>
						<marginLeft value="-50%"/>
						<marginTop value="-50%"/>
					</style>
					<bind name="atlasText" value="_clanTagVisible ? (clanTag ? '[' + clanTag + ']' : '^') : '' ; '../fonts/small/' + _clanTagFont; 0"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="6px"/>
			</style>
			<block type="text">
				<styleClass value="$TextHeaderBold"/>
				<style>
					<maxWidth value="192"/>
				</style>
				<bind name="text" value="tr(toUpperCase('IDS_DOGTAG_' + _gpName + '_NAME'))"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<maxWidth value="192"/>
				</style>
				<bind name="text" value="_unique ? tr(toUpperCase('IDS_DOGTAG_COMPONENT_TOOLTIP_CATEGORY_' + 'unique')) : tr(toUpperCase('IDS_DOGTAG_COMPONENT_TOOLTIP_CATEGORY_' + _categoryId))"/>
			</block>
		</block>
	</block>
	<block className="DogTagBattleTypeRestriction">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<block className="icon_battletypes_small" type="native">
			<style>
				<marginRight value="6px"/>
				<width value="25px"/>
				<height value="25px"/>
			</style>
			<bind name="gotoAndStop!" value="	($value == 'PVP')			? 'RandomBattle' :
								($value == 'COOPERATIVE')	? 'CooperativeBattle':
								($value == 'RANKED') 		? (rankedBattlesSeason.isJuniorSeason == true) 	? 'RankedBattle_junior'
																											: 'RankedBattle':
								($value == 'PVE')			? 'PVEBattle':
								($value == 'PVE_PREMADE')	? 'PVEBattle_hard':
								($value == 'CLAN')			? 'ClanBattle'
															: null "/>
		</block>
		<block className="VerticalDivider">
			<style>
				<height value="100%"/>
				<width value="3px"/>
			</style>
			<block className="divider_v" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
	</block>
	<block className="PlayerStereotypeDogTag">
		<style>
			<width value="100%f"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
			<block>
				<bind name="tooltip" value="'SimpleTooltip'; !_hitTest ? {tooltipText: 'IDS_TOOLTIP_PLAYER_STEREOTYPE_DOGTAG'} : null"/>
				<bind name="tooltip" value="'MouseInstructionTooltip'; _hitTest == true ? {_mouseInstructions: [{_type: 'left', _instructionText: 'IDS_DOGTAG_TOOLTIP_GO_TO_CONSTUCTOR'}], _maxWidth: 250} : null"/>
				<bind name="transition" value="rollOver &amp;&amp; _hitTest == true; 0.15; {alpha: 1}; {alpha: 0.3}"/>
				<bind name="request" value="'click'; _hitTest == true ? 'modalDogTag' : null ; {}"/>
				<bind name="instance" value="'PlayerDogTag'; {_playerDbId: _playerDbId, _size: 'small'}"/>
			</block>
			<block>
				<bind name="visible" value="_hitTest == true"/>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="transition" value="rollOver; 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: 10}"/>
				<block className="button_dock_bg" type="native">
					<style>
						<hitTest value="false"/>
						<paddingLeft value="8px"/>
						<paddingRight value="8px"/>
						<paddingTop value="8px"/>
						<paddingBottom value="8px"/>
					</style>
					<bind name="transition" value="rollOver &amp;&amp; !(mouseDown); 0.15; {alpha: 0}; {alpha: 1}; {alpha: 0}"/>
					<bind name="gotoAndStop!" value="'up'"/>
					<block>
						<params>
							<param name="name" value="changeDogTag"/>
						</params>
						<style>
							<hitTest value="false"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBoldNM"/>
							<bind name="text" value="toUpperCase(tr('IDS_DOG_TAG_DOLL_CHANGE'))"/>
						</block>
					</block>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%f"/>
				<marginLeft value="8px"/>
			</style>
			<bind name="instance" value="'PlayerStereotype'; {
											_playerDbId: _playerDbId,
											_clanTag: _clanTag,
											_clanTagColor: _clanTagColor,
											_noRank: _noRank,
											_isBot: _isBot,
											_isPlayerNameDisable: _isPlayerNameDisable,
											_isAccountButton: _isAccountButton,
											_tkStatus: _tkStatus,
											_ttkStatus: _ttkStatus,
											_abuseStatus: _abuseStatus,
											_isPremiumAccount: _isPremiumAccount,
											_player: _player,
											_noClanTagColor: _noClanTagColor,
											_isWithKarma: _isWithKarma
											}"/>
		</block>
	</block>
	<block className="PlayerStereotype">
		<bind name="primaryEntityDH" value="'playerEntity'; CC.accountSimple; _playerDbId"/>
		<bind name="watchDH" value="'isSelf';			[]; playerEntity.accountSimple.isSelfPlayer"/>
		<bind name="watchDH" value="'clanId';			['playerEntity.clanman.evClanIdChanged']; playerEntity.clanman.clanId"/>
		<bind name="watchDH" value="'pureName';		['playerEntity.accountName.evChanged']; playerEntity.accountName.name"/>
		<bind name="watchDH" value="'rank'; 			['playerEntity.accountRank.evRankChanged']; playerEntity.accountRank.rank"/>
		<bind name="watchDH" value="'seasonId'; 		['playerEntity.accountRank.evRankChanged']; playerEntity.accountRank.seasonId"/>
		<bind name="primaryEntityDH" value="'clanEntity'; CC.clan; clanId"/>
		<bind name="watchDH" value="'clanTag'; 	['clanEntity.clan.evTagChanged']; _clanTag ? _clanTag : clanEntity.clan.tag"/>
		<bind name="primaryEntityDH" value="'clanExtendedEntity'; CC.clanExtended; clanId"/>
		<bind name="watchDH" value="'clanTagColor'; 	['clanExtendedEntity.clanExtended.evColorChanged']; _clanTagColor ? _clanTagColor : clanExtendedEntity.clanExtended.color"/>
		<bind name="watch" value="'isWithRank'; !_noRank &amp;&amp; !_isBot &amp;&amp; rank != 0 &amp;&amp; rank != null"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'"/>
		<style>
			<width value="100%f"/>
			<marginTop value="16"/>
		</style>
		<block>
			<style>
				<width value="100%f"/>
			</style>
			<block>
				<style>
					<width value="100%f"/>
					<marginLeft value="-4px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<bind name="style" value="'hitTest'; _isPlayerNameDisable ? false : true"/>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_TOOLTIP_PLAYER_STEREOTYPE_NAME'}"/>
				<bind name="instance" value="'PlayerNameAndClanTag'; {
													_isSelf: 			isSelf,
													_isAccountButton:	_isAccountButton,
													_tkStatus: 			_tkStatus || _abuseStatus == AbuseStatus.SUSPECT,
													_ctkStatus:			_ctkStatus || _abuseStatus == AbuseStatus.CONFIRMED,
													_ttkStatus:			_ttkStatus,
													_isPremiumAccount:	_isPremiumAccount,
													_isInSameDivision:  _player.isInSameDivision,
													_fontSize:			17,
													_playerName:		pureName,
													_clanTag:			clanTag,
													_clanTagColor:		clanTagColor,
													_isDead:			false,
													_noClanTagColor:	_noClanTagColor
													}"/>
			</block>
			<block>
				<bind name="visible" value="_isWithKarma == true"/>
				<bind name="tooltip" value="'SubTextTooltip'; {tooltipText: 'IDS_YOUR_KARMA', tooltipSubText: 'IDS_TOOLTIP_KARMA'}"/>
				<style>
					<marginTop value="-14px"/>
					<marginLeft value="-4px"/>
					<backgroundColor value="0x01000000"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault13NM"/>
					<style>
						<margin value="8px"/>
					</style>
					<bind name="text" value="format(dockDefaultValues.karma, -1)"/>
					<bind name="name" value="'karma_account_progress_item'"/>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<bind name="visible" value="isWithRank"/>
			<styleClass value="$TextDefaultNM"/>
			<style>
				<marginTop value="8"/>
				<maxWidth value="130"/>
				<multiline value="false"/>
				<hitTest value="false"/>
			</style>
			<bind name="text" value="subst('IDS_RANK_X',[], {rank: rank})"/>
		</block>
	</block>
	<block className="PlayerProgressBar">
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="3px"/>
			</style>
			<block>
				<block className="indicator_progress_bar_yellow" type="native">
					<bind name="value" value="(_currentProgress / _levelProgress)*10"/>
					<style>
						<width value="138px"/>
						<marginTop value="8px"/>
					</style>
				</block>
			</block>
			<block>
				<block type="text">
					<styleClass value="$TextSecondary"/>
					<bind name="text" value="(format(_currentProgress, -1)) + ' / ' + (format(_levelProgress, -1))"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="BattleGalleryItem">
		<style>
			<width value="900px"/>
			<height value="382px"/>
		</style>
		<block>
			<bind name="child" value="_galleryItemRendererParams[_index].image.type; { 	_galleryItemRendererParams: _galleryItemRendererParams,
																		_galleryImageWidth: 		900, 
																		_galleryImageHeight: 		382, 
																		_index: 					_index
																	}; 
																	{ 	Default: 	'DefaultPngViewer',
																		Hotkey: 	'HotkeyViewer',
																		Indicator: 	'IndicatorViewer'
																	}"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="0px"/>
			</style>
			<bind name="instance" value="'TextRenderer'; { _galleryItemRendererParams: _galleryItemRendererParams, _index: _index}"/>
		</block>
	</block>
	<block className="DefaultPngViewer">
		<bind name="style" value="'width'; _galleryImageWidth + 'px'"/>
		<bind name="style" value="'height'; _galleryImageHeight + 'px'"/>
		<bind name="style" value="'backgroundImage'; _galleryItemRendererParams[_index].image.imagePath"/>
	</block>
	<block className="HotkeyViewer">
		<block>
			<bind name="instance" value="'DefaultPngViewer'; { _galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight, _galleryItemRendererParams: _galleryItemRendererParams, _index: _index }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<left value="108px"/>
				<bottom value="42px"/>
			</style>
			<block type="text">
				<style>
					<marginLeft value="-50%"/>
				</style>
				<bind name="substitute" value="5; null; tr(_galleryItemRendererParams[_index].image.hotkey); '_bg'"/>
			</block>
		</block>
	</block>
	<block className="IndicatorViewer">
		<block>
			<bind name="instance" value="'DefaultPngViewer'; { _galleryImageWidth: _galleryImageWidth, _galleryImageHeight: _galleryImageHeight, _galleryItemRendererParams: _galleryItemRendererParams, _index: _index }"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="377px"/>
				<top value="46px"/>
				<width value="150px"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<backgroundImage value="symbol:icon_visibility_ship"/>
				</style>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="27px"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="150"/>
						<textAlign value="center"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="class" value="'$FontColorUnready'"/>
					<bind name="text" value="toUpperCase(tr(_galleryItemRendererParams[_index].image.indicatorText))"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TextRenderer">
		<style>
			<width value="360px"/>
			<height value="382px"/>
			<backgroundColor value="0x50000000"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="30px"/>
				<marginLeft value="20px"/>
				<marginRight value="20px"/>
			</style>
			<block>
				<block type="text">
					<style>
						<maxWidth value="320"/>
					</style>
					<styleClass value="$TextHeaderWhiteBold"/>
					<bind name="text" value="toUpperCase(tr(_galleryItemRendererParams[_index].description.textHeader))"/>
				</block>
			</block>
			<block>
				<styleClass value="$DefaultScrollBar"/>
				<style>
					<width value="100%"/>
					<height value="290px"/>
					<marginTop value="15px"/>
					<overflow value="scroll"/>
				</style>
				<block type="text">
					<style>
						<maxWidth value="320"/>
						<leading value="2.5"/>
					</style>
					<styleClass value="$TextHeader"/>
					<bind name="substitute" value="6; null; tr(_galleryItemRendererParams[_index].description.text); '_bg'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="TaskContainerRestriction">
		<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerRange; 'shipLevelsRange'; shipLevels"/>
		<bind name="primaryEntityDH" value="'campaignTaskEntity'; CC.campaignTaskParams; _taskID"/>
		<bind name="watchDH" value="'battleTypes';[]; campaignTaskEntity.campaignTaskRestrictions.battleTypes"/>
		<bind name="watchDH" value="'shipLevels';[]; campaignTaskEntity.campaignTaskRestrictions.shipLevels"/>
		<bind name="watchDH" value="'shipClasses';[]; campaignTaskEntity.campaignTaskRestrictions.shipClasses"/>
		<bind name="watchDH" value="'shipNations';[]; campaignTaskEntity.campaignTaskRestrictions.shipNations"/>
		<bind name="watchDH" value="'shipIDs';[]; campaignTaskEntity.campaignTaskRestrictions.shipIDs"/>
		<bind name="watchDH" value="'goalEntityId';['']; campaignTaskEntity.campaignTaskParams.goal"/>
		<bind name="entityDH" value="'campaignGoalEntity'; goalEntityId"/>
		<bind name="watchDH" value="'l10nRestriction';[]; campaignGoalEntity.campaignTaskGoal.l10nRestriction"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<styleClass value="$HugeMargins"/>
			<block type="text">
				<styleClass value="$TextHeader"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="text" value="l10nRestriction"/>
			</block>
			<block>
				<style>
					<flow value="htile"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="visible" value="battleTypes.length != 0"/>
					<styleClass value="$InfoLineBoundaries"/>
					<block>
						<bind name="repeat" value="battleTypes; 'TaskBattleTypeRestriction'; {}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="visible" value="shipLevels.length != 0"/>
						<style>
							<height value="25px"/>
							<marginLeft value="3px"/>
							<marginRight value="3px"/>
						</style>
						<block className="VerticalDivider">
							<style>
								<height value="100%"/>
								<width value="3px"/>
							</style>
							<block className="divider_v" type="native">
								<styleClass value="$Fullsize"/>
							</block>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="shipLevels.length != 0"/>
					<bind name="tooltip" value="'ShipListTooltipCampaigns'; {_taskID: _taskID}"/>
					<styleClass value="$InfoLineBoundaries"/>
					<block>
						<style>
							<marginLeft value="6px"/>
							<marginRight value="6px"/>
						</style>
						<bind name="repeat" value="shipLevelsRange; 'TaskShipLevelRestriction'; {}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<block>
						<bind name="visible" value="shipClasses.length != 0"/>
						<style>
							<height value="25px"/>
							<marginLeft value="3px"/>
							<marginRight value="3px"/>
						</style>
						<block className="VerticalDivider">
							<style>
								<height value="100%"/>
								<width value="3px"/>
							</style>
							<block className="divider_v" type="native">
								<styleClass value="$Fullsize"/>
							</block>
						</block>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="shipClasses.length != 0"/>
					<bind name="tooltip" value="'ShipListTooltipCampaigns'; {_taskID: _taskID}"/>
					<styleClass value="$InfoLineBoundaries"/>
					<block>
						<style>
							<marginLeft value="6px"/>
							<marginRight value="6px"/>
						</style>
						<bind name="repeat" value="shipClasses; 'TaskShipClassRestriction';	{_shipIsPremium: campaignTaskEntity.campaignTaskRestrictions.shipIsPremium,																												
																			_shipIsElite: campaignTaskEntity.campaignTaskRestrictions.shipIsElite}"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="shipNations.length != 0"/>
					<styleClass value="$InfoLineBoundaries"/>
					<style>
						<height value="25px"/>
						<marginLeft value="3px"/>
						<marginRight value="9px"/>
					</style>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
						</style>
						<block className="divider_v" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
				<block>
					<styleClass value="$InfoLineBoundaries"/>
					<bind name="visible" value="shipNations.length != 0"/>
					<bind name="repeat" value="shipNations; 'TaskShipNationRestriction'; {}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="TaskBattleTypeRestriction">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<block className="icon_battletypes_small" type="native">
			<style>
				<marginRight value="6px"/>
				<width value="25px"/>
				<height value="25px"/>
			</style>
			<bind name="gotoAndStop!" value=" 	($value == 0)	? 'RandomBattle' :
								($value == 1) 	? 'TrainingBattle' :
								($value == 2) 	? 'CooperativeBattle' :
								($value == 3) 	? 'TutorialBattle' :
								($value == 4) 	? (rankedBattlesSeason.isJuniorSeason == true) 	? 'RankedBattle_junior' 
																								: 'RankedBattle':
								($value == 5) 	? 'ClubBattle':
								($value == 6) 	? 'PVEBattle' :
								($value == 7) 	? 'PVEBattle' :
								($value == 8) 	? 'ClanBattle' :
								($value == 9) 	? 'EventBattle'
												: null"/>
		</block>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 	($value == 0)	? 'IDS_RANDOM_BATTLE' :
													($value == 1) 	? 'IDS_TRAINING_BATTLE' :
													($value == 2) 	? 'IDS_COOPERATIVE_BATTLE' :
													($value == 3) 	? 'IDS_INTRO_MISSION_BATTLE' :
													($value == 4) 	? 'IDS_RANKED_BATTLE':
													($value == 5) 	? 'IDS_CLUB_BATTLE':
													($value == 6) 	? 'IDS_PVE_BATTLE':
													($value == 7) 	? 'IDS_PVE_BATTLE':
													($value == 8) 	? 'IDS_CLAN_BATTLE':
													($value == 9) 	? 'IDS_EVENTBATTLE'
																	: null}"/>
	</block>
	<block className="TaskShipLevelRestriction">
		<block type="text">
			<styleClass value="$TextDefault"/>
			<bind name="text" value="ShipLevels.RLEVELS[$value]"/>
		</block>
	</block>
	<block className="TaskShipClassRestriction">
		<style>
			<width value="27px"/>
			<height value="24px"/>
			<marginTop value="-2px"/>
			<marginLeft value="-4px"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../service_kit/ship_classes/icon_' + toLowerCase($value) + '_' + (
				_shipIsPremium	? 'premium' :
				_shipIsElite	? 'elite'
								: 'standard'
		) + '.png'"/>
	</block>
	<block className="TaskShipNationRestriction">
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_NATION_RESTRICTION'}"/>
		<style>
			<marginRight value="3px"/>
		</style>
		<block>
			<bind name="instance" value="'NationFlagsTiny'; {shipCountry: $value}"/>
		</block>
	</block>
	<block className="ShipListTooltipCampaigns">
		<bind name="collectionDH" value="CC.ownShip; 'shipList'; 'campaigns_task_current'"/>
		<bind name="action" value="'Tooltip.selfOpened'; 'updateTaskShipList'; {taskId: _taskID}"/>
		<bind name="instance" value="'ShipListTooltip'; {_shipList: shipList}"/>
	</block>
	<block className="ShipListTooltip">
		<bind name="watch" value="'countShipList'; _shipList.length - 10"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="250px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<bind name="visible" value="_shipList.length &gt; 0"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextHeaderBigDefaultTech"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<text value="IDS_AVAILABLE_SHIP"/>
			</block>
			<block>
				<bind name="repeat" value="(_shipList.length &gt; 10 ? 10 : _shipList.length); 'ShipItem'; {_shipList: _shipList}"/>
			</block>
			<block type="text">
				<bind name="visible" value="(_shipList.length) &gt; 10"/>
				<style>
					<marginTop value="-2px"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$TextHeaderBigDefaultTech"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="subst('IDS_AND_OTHER_SHIPS', [], {count: countShipList}, countShipList)}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_shipList.length &lt;= 0"/>
			<styleClass value="$InfoBlockIndentNoWidth"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="5px"/>
					<marginRight value="2px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<style>
					<maxWidth value="240"/>
					<leading value="-3"/>
				</style>
				<text value="IDS_NO_SUITABLE_SHIPS"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ShipItem">
		<styleClass value="$InfoBlockIndent"/>
		<bind name="instance" value="'ShipLineItem'; {_shipId: _shipList[$index].ship.id, _width: '185px'}"/>
	</block>
	<css name="$HugeMargins">
		<width value="100%"/>
		<marginTop value="10px"/>
		<marginLeft value="18px"/>
		<marginBottom value="10px"/>
		<marginRight value="18px"/>
	</css>
	<block className="BlackDivider1">
		<bind name="class" value="'$ArcEventBackgroundColorDark'"/>
		<bind name="style" value="'width'; 	_vertical ? '1px' : '100%'"/>
		<bind name="style" value="'height'; 	_vertical ? '100%' : '1px'"/>
	</block>
	<block className="BlackDivider2">
		<bind name="class" value="'$ArcEventBackgroundColorDark'"/>
		<bind name="style" value="'width'; 	_vertical ? '2px' : '100%'"/>
		<bind name="style" value="'height'; 	_vertical ? '100%' : '2px'"/>
	</block>
	<block className="BlackDivider4">
		<bind name="class" value="'$ArcEventBackgroundColorDark'"/>
		<bind name="style" value="'width'; 	_vertical ? '4px' : '100%'"/>
		<bind name="style" value="'height'; 	_vertical ? '100%' : '4px'"/>
	</block>
	<css name="$ArcEventTooltipMargins">
		<margin value="16px|12px"/>
	</css>
	<css name="$ArcEventBackgroundColorLight">
		<backgroundColor value="0xffb5a98f"/>
	</css>
	<css name="$ArcEventTextColorLight">
		<textColor value="0xffe8d8b9"/>
	</css>
	<css name="$ArcEventBackgroundColorDark">
		<backgroundColor value="0xff2f3034"/>
	</css>
	<css name="$ArcEventTextColorDark">
		<textColor value="0xff2f3034"/>
	</css>
	<css name="$ArcEventTextStyle">
		<dropShadowFilter value="0 0 0x000000 0 0 0 0 0"/>
		<textColor value="0xff2f3034"/>
	</css>
	<block className="TooltipSystemHeaderWithIconAndText">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<marginRight value="12px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'width'; _imageWidth"/>
			<bind name="style" value="'height'; _imageHeight"/>
			<bind name="style" value="'backgroundImage'; _imageUrl"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'TooltipSystemHeaderSubheaderText'; {	_headerText: _headerText,
																_subheaderText: _subheaderText,
																_unifiedStatus: _unifiedStatus}"/>
		</block>
	</block>
	<block className="TooltipSystemHeaderSubheaderText">
		<style>
			<width value="100%"/>
		</style>
		<bind name="watch" value="'textColor';	_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.ATTENTION			? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION	? SC.Ui_styles.SERVICE_COLORS.ORANGE :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.CHECK				? SC.Ui_styles.SERVICE_COLORS.YELLOW :
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.NEGATIVE			? SC.Ui_styles.SERVICE_COLORS.RED	:
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.WARNING			? SC.Ui_styles.SERVICE_COLORS.RED	:
									_unifiedStatus == SC.Ui_styles.UNIFIED_STATUS.DEFAULT			? SC.Ui_styles.SERVICE_COLORS.WHITE
																									: SC.Ui_styles.SERVICE_COLORS.WHITE"/>
		<bind name="watch" value="'textAlpha';	textColor == SC.Ui_styles.SERVICE_COLORS.ORANGE	? 1 :
									textColor == SC.Ui_styles.SERVICE_COLORS.YELLOW	? 1 :
									textColor == SC.Ui_styles.SERVICE_COLORS.RED		? 1
																							: 0.9"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-4"/>
			</style>
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="style" value="'alpha'; textAlpha"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_headerText"/>
		</block>
		<block type="text">
			<bind name="visible" value="_subheaderText ? true : false"/>
			<style>
				<width value="100%"/>
				<alpha value="0.7"/>
				<marginTop value="8px"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="style" value="'textColor'; textColor"/>
			<bind name="text" value="_subheaderText"/>
		</block>
	</block>
	<block className="TooltipSystemDueDateStatusLine">
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isTimeRunningOut'; _dueDateTimeStamp - serverTime &lt; 86400"/>
		<bind name="timeFormat" value="_dueDateTimeStamp; 'dd.MM.yy'; 'formattedDueDate'; true"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'TooltipSystemStatusLine'; {	_unifiedStatus: isTimeRunningOut	? SC.Ui_styles.UNIFIED_STATUS.DATE_ATTENTION
																						: SC.Ui_styles.UNIFIED_STATUS.DATE,
													_text: subst(_substTextIDS, [], { _date: formattedDueDate }) 									
												}"/>
	</block>
	<block className="TooltipSystemStatusLine">
		<style>
			<width value="100%"/>
		</style>
		<bind name="instance" value="'StatusLine'; {	_unifiedStatus: _unifiedStatus, _text: _text,
									_textClass: '$TextDefault17NM', _leading: -3,
									_width: '100%'}"/>
	</block>
	<block className="TooltipSystemDescriptionText">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="_descriptionText"/>
		</block>
	</block>
	<block className="TooltipSystemParamsModifiersList">
		<bind name="entityDH" value="'paramsModifiersEntity'; _paramsModifiersEntityId"/>
		<bind name="watch" value="'attributesPositive'; 		_attributesPositive	? _attributesPositive
																: paramsModifiersEntity.attributes.positive"/>
		<bind name="entityDH" value="'attributesNegative'; 	_attributesNegative	? _attributesNegative
																: paramsModifiersEntity.attributes.negative"/>
		<bind name="entityDH" value="'attributesNeutral';	_attributesNeutral	: _attributesNeutral
																? paramsModifiersEntity.attributes.neutral"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<style>
				<margin value="-12px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-16px"/>
			</style>
			<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: attributesPositive,
												_attributesNegative: attributesNegative,
												_attributesNeutral: attributesNeutral}"/>
		</block>
	</block>
	<block className="TooltipSystemRewards">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_rewardsTitle"/>
		</block>
		<bind name="repeat" value="_rewards; 'RewardContainerTooltipItemAdapter'"/>
	</block>
	<block className="TooltipSystemRewardsList">
		<style>
			<width value="100%"/>
		</style>
		<block className="inner_panel" type="native">
			<style>
				<margin value="-12px"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="-16px"/>
			</style>
			<bind name="repeat" value="_rewards; 'TooltipSystemRewardsAdapter'"/>
		</block>
	</block>
	<block className="TooltipSystemRewardsAdapter">
		<style>
			<width value="100%"/>
		</style>
		<bind name="entityDH" value="'rewardEntity'; $value"/>
		<bind name="watch" value="'type'; rewardEntity.rewardComponent.type ? rewardEntity.rewardComponent.type : 'None'"/>
		<bind name="child" value="type; {_entityId: $value}; {	Exterior: 'TooltipSystemRewardExteriorAdapter',
												Resource: 'TooltipSystemRewardResourceAdapter',
												Lootbox: 'TooltipSystemRewardLootboxAdapter',
												None: 'EmptyItem'
												}"/>
	</block>
	<block className="TooltipSystemRewardExteriorAdapter">
		<style>
			<width value="100%"/>
		</style>
		<bind name="entityDH" value="'rewardEntity'; _entityId"/>
		<bind name="primaryEntityDH" value="'exteriorEntity'; CC.exteriorConfig; rewardEntity.rewardComponent.id"/>
		<bind name="watchDH" value="'exteriorConfig'; []; exteriorEntity.exteriorConfig"/>
		<bind name="watch" value="'title'; tr('IDS_CAMOUFLAGE') + ' ' +  tr('IDS_' + toUpperCase(exteriorConfig.name))"/>
		<bind name="watch" value="'count'; rewardEntity.rewardComponent.amount"/>
		<bind name="instance" value="'TooltipSystemPriceLineWithoutIcon'; {_title: title, _count: count}"/>
	</block>
	<block className="TooltipSystemRewardLootboxAdapter">
		<style>
			<width value="100%"/>
		</style>
		<bind name="entityDH" value="'rewardEntity'; _entityId"/>
		<bind name="watch" value="'title'; 'IDS_REWARD_LOOTBOX_' + rewardEntity.rewardComponent.subtype + '_TITLE'"/>
		<bind name="watch" value="'count'; rewardEntity.rewardComponent.amount"/>
		<bind name="instance" value="'TooltipSystemPriceLineWithoutIcon'; {_title: title, _count: count}"/>
	</block>
	<block className="TooltipSystemRewardResourceAdapter">
		<style>
			<width value="100%"/>
		</style>
		<bind name="entityDH" value="'rewardEntity'; _entityId"/>
		<bind name="watch" value="'currency'; 	(rewardEntity.rewardComponent.subtype == 'crewPoints')		?	'exp' :
		 						(rewardEntity.rewardComponent.subtype == 'clanResource')	?	'clan_resource' 
		 																					:	rewardEntity.rewardComponent.subtype"/>
		<bind name="watch" value="'title'; tr(toUpperCase('IDS_REWARD_' + rewardEntity.rewardComponent.subtype + '_TITLE'))"/>
		<bind name="watch" value="'priceInfo'; { finalPrice: rewardEntity.rewardComponent.amount, currency: currency}"/>
		<bind name="instance" value="'TooltipSystemPriceTagLine'; {_title: title, _priceInfo: priceInfo, _nation: _nation}"/>
	</block>
	<block className="TooltipSystemPriceTagLine">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'PriceTag'; {	priceInfo: _priceInfo,
										_nation: _nation}"/>
		</block>
	</block>
	<block className="TooltipSystemPriceLineWithoutIcon">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<marginBottom value="12px"/>
		</style>
		<block type="text">
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<styleClass value="$TextDefaultNM"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<style>
				<marginTop value="-6px"/>
				<marginBottom value="-5px"/>
			</style>
			<bind name="instance" value="'InvertableTextLine'; { _text: format(_count, -1),
												_normalClass: '$TextPriceDefault'}"/>
		</block>
	</block>
	<block className="TooltipSystemMouseInstruction">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<marginTop value="-5px"/>
				<marginBottom value="-4px"/>
				<marginLeft value="-2px"/>
			</style>
			<block className="icon_mouse" type="native">
				<bind name="gotoAndStop!" value="_type"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$TextDefault17NM"/>
			<style>
				<width value="100%"/>
				<alpha value="0.9"/>
				<leading value="-2"/>
			</style>
			<bind name="style" value="'marginLeft'; (_type=='no_icon') ? '0px' : '8px'"/>
			<bind name="text" value="_instructionText"/>
		</block>
	</block>
	<css name="$TextPriceDefault">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextPriceDefaultGold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextPriceDefaultFreeExp">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xCCFF99"/>
	</css>
	<css name="$TextPriceDefaultDeficit">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextPriceLarge">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextPriceLargeGold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextPriceLargeFreeExp">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0xCCFF99"/>
	</css>
	<css name="$TextPriceMedium">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="17"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextPriceMediumGold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextPriceMediumFreeExp">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<selectable value="false"/>
		<textColor value="0xCCFF99"/>
	</css>
	<css name="$TextPriceMediumDeficit">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextPriceLargeDeficit">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextPriceSmall">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextPriceSmallGold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextPriceSmallFreeExp">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0xCCFF99"/>
	</css>
	<css name="$TextPriceSmallDeficit">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<block className="PriceTag">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="visible" value="priceInfo.basePrice != null &amp;&amp; (priceInfo.finalPrice != priceInfo.basePrice) &amp;&amp; (_showDiscountTag == true)"/>
			<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: priceInfo, _customLabel: _customLabel, _isExternal: _isExternal }"/>
			<bind name="name" value="'icon_discount_' + priceInfo.id"/>
			<block className="icon_discount" type="native">
				<style>
					<marginTop value="4px"/>
					<marginRight value="-3px"/>
				</style>
				<bind name="gotoAndStop!" value="_large || _medium ? 'large' : 'normal'"/>
			</block>
		</block>
		<block>
			<bind name="name" value="'price_' + priceInfo.id"/>
			<bind name="instance" value="'InvertableTextLine'; { _name: _name,
												_text: (_isNextPriceInARow ? (tr('IDS_AND') + ' ') : '') + format(priceInfo.finalPrice, -1),
												_invert: _deficit &gt; 0, 
												_normalClass:
															_customClass	?	_customClass
															: _large		?	(priceInfo.currency == 'gold' ? '$TextPriceLargeGold' : priceInfo.currency == 'freexp' ? '$TextPriceLargeFreeExp' : '$TextPriceLarge')
															: _medium 		? 	(priceInfo.currency == 'gold' ? '$TextPriceMediumGold' : priceInfo.currency == 'freexp' ? '$TextPriceMediumFreeExp' : '$TextPriceMedium')
															: _small		?	(priceInfo.currency == 'gold' ? '$TextPriceSmallGold' : priceInfo.currency == 'freexp' ? '$TextPriceSmallFreeExp' : '$TextPriceSmall')
															: (priceInfo.currency == 'gold' ? '$TextPriceDefaultGold' : priceInfo.currency == 'freexp' ? '$TextPriceDefaultFreeExp' :'$TextPriceDefault'), 
												_invertedClass:
															_customClass	?	_customClass
															:_large			?	'$TextPriceLargeDeficit'
															: _medium		?	'$TextPriceMediumDeficit'
															: _small		?	'$TextPriceSmallDeficit'
															: '$TextPriceDefaultDeficit' }"/>
		</block>
		<block>
			<bind name="visible" value="!_duplicateCurrency"/>
			<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
			<bind name="style" value="'marginLeft'; _large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency == 'money')		? null : 
									(priceInfo.currency == 'accPoints')	? null 
																		: { _currency: priceInfo.currency,
																			_large: _large, _medium: _medium }"/>
		</block>
		<block>
			<bind name="visible" value="_duplicateCurrency == true"/>
			<bind name="instance" value="'DuplicateCurrency'; { _large: _large }"/>
		</block>
	</block>
	<block className="Currency">
		<bind name="style" value="'marginTop'; _large || _medium ? '8px' : '3px'"/>
		<bind name="watch" value="'iconName';	_currency +	((_large || _medium)	? '' : '_small')"/>
		<block>
			<bind name="style" value="'width'; (_large || _medium) ? '26px' : '15px'"/>
			<bind name="style" value="'height'; (_large || _medium) ? '26px' : '16px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/currencies/icon_' + iconName + '.png'"/>
		</block>
	</block>
	<block className="DuplicateCurrency">
		<bind name="style" value="'marginTop'; _large ? '5px' : '0px'"/>
		<bind name="style" value="'backgroundImage'; 'url:../collections/duplicate_icons/duplicate_medium.png'"/>
	</block>
	<block className="AlterablePriceTag">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];		resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];		resourceEntity.accountResource.credits"/>
		<bind name="watchDH" value="'accountFreeXP';		['resourceEntity.accountResource.evChangedFreeXP'];		resourceEntity.accountResource.freeXP"/>
		<bind name="watchDH" value="'eliteXP';			['resourceEntity.accountResource.evChangedEliteXP'];	resourceEntity.accountResource.eliteXP"/>
		<bind name="watch" value="'metaXP'; eliteXP + accountFreeXP"/>
		<bind name="watch" value="'curCurrency'; _prices[_selectedPriceIndex].currency"/>
		<bind name="watch" value="'curCurrencyResource'; curCurrency == 'gold'		? accountGold :
										curCurrency ==	'eliteXP'	? metaXP
																	: accountCredits"/>
		<bind name="dispatch" value="'isAlterablePriceMenuVisible' + varChanged; 'alterablePriceTagMenuVisibleChanged'; {isAlterablePriceMenuVisible: isAlterablePriceMenuVisible}; 0; isAlterablePriceMenuVisible ? 0 : 0.05"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="visible" value="(_prices[_selectedPriceIndex].basePrice != null) &amp;&amp; (_prices[_selectedPriceIndex].finalPrice != _prices[_selectedPriceIndex].basePrice) &amp;&amp; _showDiscountTag == true"/>
			<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: _prices[_selectedPriceIndex] }"/>
			<block className="icon_discount" type="native">
				<bind name="style" value="'marginRight'; _prices.length &gt; 1 ? '-2px' : '-6px'"/>
				<bind name="gotoAndStop!" value="_large || _medium ? 'large' : 'normal'"/>
			</block>
		</block>
		<block className="button_dock" type="native">
			<style>
				<flow value="horizontal"/>
			</style>
			<bind name="style" value="'hitTest'; _prices.length &gt; 1"/>
			<bind name="tooltip" value="'MouseInstructionTooltip'; ( _tooltipText != null )	? { _multiParagraphArray:  [{_paragraphText: _tooltipText}],
																				_mouseInstructions:	[{_type: 'left', _instructionText: 'IDS_HINT_CURRENCY_CHOICE'} ], _maxWidth: 250 }
																			: { _mouseInstructions:	[{_type: 'left', _instructionText: 'IDS_HINT_CURRENCY_CHOICE'} ], _maxWidth: 250 }"/>
			<bind name="tooltip" value="'PriceSelectionMenu'; {_prices: _prices, _showDiscountTag: _showDiscountTag, _selectedPriceIndex: _selectedPriceIndex, _small: _small, _medium: _medium, _large: _large,}; TooltipBehaviour.verticalInfoWidget; null; 'isAlterablePriceMenuVisible'"/>
			<block>
				<style>
					<marginTop value="0px"/>
					<marginBottom value="3px"/>
					<marginLeft value="3px"/>
					<marginRight value="1px"/>
					<hitTest value="false"/>
				</style>
				<bind name="instance" value="'AdjustablePriceTag'; { 	_prices: _prices[_selectedPriceIndex],
														_showDiscountTag: false, 
														_small: _small, _medium: _medium, _large: _large,
														_customLabel: _customLabel, _isExternal: _isExternal }"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MouseDisable"/>
				<bind name="visible" value="_prices.length &gt; 1"/>
				<style>
					<marginRight value="3px"/>
					<hitTest value="false"/>
				</style>
				<block className="icon_navigate" type="native">
					<bind name="gotoAndStop!" value="'down'"/>
				</block>
			</block>
		</block>
	</block>
	<block className="AdjustablePriceTag">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'_isMixedPrice'; _prices.mixPrice ? true : false"/>
		<bind name="instance" value="'PriceTagWithDeficit'; !_isMixedPrice 	? { priceInfo: _prices, 
																_showDiscountTag: _showDiscountTag, 
																_small: _small, _medium: _medium, _large: _large,
																_customLabel: _customLabel, _isExternal: _isExternal } 
															: null"/>
		<bind name="repeat" value="_isMixedPrice ? _prices.mixPrice : 0; 'MixedPriceTag'; {	_priceInfos: _prices.mixPrice, 
																			_large: _large, _medium: _medium, _small: _small, 
																			_showDiscountTag: _showDiscountTag, 
																			_customLabel: _customLabel, _isExternal: _isExternal } : null"/>
	</block>
	<block className="PriceTagWithDeficit">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];		resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];		resourceEntity.accountResource.credits"/>
		<bind name="watchDH" value="'accountFreeXP';		['resourceEntity.accountResource.evChangedFreeXP'];		resourceEntity.accountResource.freeXP"/>
		<bind name="watchDH" value="'eliteXP';			['resourceEntity.accountResource.evChangedEliteXP'];	resourceEntity.accountResource.eliteXP"/>
		<bind name="watch" value="'metaXP'; eliteXP + accountFreeXP"/>
		<bind name="watch" value="'curCurrency'; priceInfo.currency"/>
		<bind name="watch" value="'curCurrencyResource'; curCurrency == 'gold'		? accountGold :
										curCurrency ==	'eliteXP'	? metaXP
																	: accountCredits"/>
		<bind name="watch" value="'_deficit'; (priceInfo.finalPrice - curCurrencyResource)"/>
		<block className="PriceTag">
			<style>
				<flow value="horizontal"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="visible" value="priceInfo.basePrice != null &amp;&amp; (priceInfo.finalPrice != priceInfo.basePrice) &amp;&amp; (_showDiscountTag == true)"/>
				<bind name="tooltip" value="'DiscountTooltip'; { priceInfo: priceInfo, _customLabel: _customLabel, _isExternal: _isExternal }"/>
				<bind name="name" value="'icon_discount_' + priceInfo.id"/>
				<block className="icon_discount" type="native">
					<style>
						<marginTop value="4px"/>
						<marginRight value="-3px"/>
					</style>
					<bind name="gotoAndStop!" value="_large || _medium ? 'large' : 'normal'"/>
				</block>
			</block>
			<block>
				<bind name="name" value="'price_' + priceInfo.id"/>
				<bind name="instance" value="'InvertableTextLine'; { _name: _name,
												_text: (_isNextPriceInARow ? (tr('IDS_AND') + ' ') : '') + format(priceInfo.finalPrice, -1),
												_invert: _deficit &gt; 0, 
												_normalClass:
															_customClass	?	_customClass
															: _large		?	(priceInfo.currency == 'gold' ? '$TextPriceLargeGold' : priceInfo.currency == 'freexp' ? '$TextPriceLargeFreeExp' : '$TextPriceLarge')
															: _medium 		? 	(priceInfo.currency == 'gold' ? '$TextPriceMediumGold' : priceInfo.currency == 'freexp' ? '$TextPriceMediumFreeExp' : '$TextPriceMedium')
															: _small		?	(priceInfo.currency == 'gold' ? '$TextPriceSmallGold' : priceInfo.currency == 'freexp' ? '$TextPriceSmallFreeExp' : '$TextPriceSmall')
															: (priceInfo.currency == 'gold' ? '$TextPriceDefaultGold' : priceInfo.currency == 'freexp' ? '$TextPriceDefaultFreeExp' :'$TextPriceDefault'), 
												_invertedClass:
															_customClass	?	_customClass
															:_large			?	'$TextPriceLargeDeficit'
															: _medium		?	'$TextPriceMediumDeficit'
															: _small		?	'$TextPriceSmallDeficit'
															: '$TextPriceDefaultDeficit' }"/>
			</block>
			<block>
				<bind name="visible" value="!_duplicateCurrency"/>
				<bind name="style" value="'marginTop';	_large	? '-2px' :
									_medium	? '-7px' :
									_small	? '0px'
											: '1px'"/>
				<bind name="style" value="'marginLeft'; _large	? '-1px' :
									_medium ? '0px' :
									_small	? '1px'
											: '0px'"/>
				<bind name="instance" value="'Currency'; (priceInfo.currency == 'money')		? null : 
									(priceInfo.currency == 'accPoints')	? null 
																		: { _currency: priceInfo.currency,
																			_large: _large, _medium: _medium }"/>
			</block>
			<block>
				<bind name="visible" value="_duplicateCurrency == true"/>
				<bind name="instance" value="'DuplicateCurrency'; { _large: _large }"/>
			</block>
		</block>
	</block>
	<block className="MixedPriceTag">
		<bind name="instance" value="'PriceTagWithDeficit'; { priceInfo: _priceInfos[$index], 
											_showDiscountTag: _showDiscountTag, 
											_small: _small, _medium: _medium, _large: _large,
											_customLabel: _customLabel, _isExternal: _isExternal }"/>
	</block>
	<block className="PriceSelectionMenu">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<block>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<marginTop value="-9px"/>
				<marginRight value="-14px"/>
				<marginBottom value="-19px"/>
				<marginLeft value="-14px"/>
			</style>
		</block>
		<bind name="repeat" value="_prices; 'PriceSelectionMenuItem'; {_prices: _prices, _showDiscountTag: _showDiscountTag, _selectedPriceIndex: _selectedPriceIndex, _small: _small, _medium: _medium, _large: _large, }"/>
	</block>
	<block className="PriceSelectionMenuItem">
		<bind name="style" value="'width'; _large ? '140px' : '100px'"/>
		<bind name="style" value="'height'; _large ? '36px' : '24px'"/>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<params>
				<param name="soundSet" value="dropmenu_button"/>
			</params>
			<bind name="selected" value="_selectedPriceIndex == $index"/>
			<bind name="dispatch" value="'buttonClick'; 'selectedPriceChanged'; { selectedPriceIndex: $index }"/>
			<bind name="name" value="'selectablePrice_' + $index"/>
			<bind name="tooltip" value="'DiscountTooltip'; (basePrice != null) &amp;&amp; (finalPrice != basePrice) ? { priceInfo: {	currency: currency, finalPrice: finalPrice,
																											basePrice: basePrice, till: till,
																											discountEventName: discountEventName}}
																							: null"/>
		</block>
		<block>
			<styleClass value="$MouseDisable"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<right value="3px"/>
			</style>
			<bind name="instance" value="'AdjustablePriceTag'; { _prices: _prices[$index],
												_showDiscountTag: _showDiscountTag, 
												_small: _small, _medium: _medium, _large: _large,
												_customLabel: _customLabel,
												_isExternal: _isExternal }"/>
		</block>
	</block>
	<block className="PriceDeficit">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_warning_red" type="native">
				<bind name="style" value="'marginTop'; _large ? '5px' : '0px'"/>
			</block>
		</block>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextDefault"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<text value="IDS_NOT_ENOUGH"/>
		</block>
		<block type="text">
			<bind name="style" value="'marginLeft'; _large ? '2px' : '0px'"/>
			<styleClass value="$TextDefaultBold"/>
			<bind name="class" value="'$FontColorCompareNegative'"/>
			<bind name="class" value="	_large ? '$FontSizeHeader6':
						_medium ? '$FontSizeLarge' :
						_small ? '$FontSizeSmall' : '$None'"/>
			<bind name="text" value="format(_deficit, -1)"/>
		</block>
		<block>
			<bind name="visible" value="!_duplicateCurrency"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="style" value="'marginLeft'; _large ? '-2px' : '0px'"/>
			<bind name="instance" value="'Currency'; (priceInfo.currency != 'money') ?	{	_currency: priceInfo.currency,
																			 _large: _large, _medium: _medium}
																	: null"/>
		</block>
		<block>
			<bind name="visible" value="_duplicateCurrency == true"/>
			<bind name="instance" value="'DuplicateCurrency'; { large: _large }"/>
		</block>
	</block>
	<block className="PriceInLine">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	_large ? '$FontSizeHeader6':
							_medium ? '$FontSizeLarge' :
							_small ? '$FontSizeSmall' : '$None'"/>
				<bind name="text" value="	_customLabel 						? _customLabel :
							priceInfo.currency == 'credits' ||
							priceInfo.currency == 'gold' ||
							priceInfo.currency == 'eliteXP'		? 'IDS_PURCHASE_COST'
																: 'IDS_RESEARCH_COST'"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$AlignRight"/>
				<bind name="instance" value="'PriceTag'; { priceInfo: priceInfo, _deficit: _deficit, _showDiscountTag: _showDiscountTag, _medium: _medium }"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="priceInfo.finalPrice != priceInfo.basePrice "/>
			<bind name="countdown" value="priceInfo.till; 'timeLeft'; 'HIGHEST'; ''; ''; 'rawTimeLeft'"/>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-3"/>
				</style>
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="priceInfo.type == 2 	? 'IDS_SHARE_FROM_CLAN_BUILDINGS_TIMING' :
										(rawTimeLeft &gt; 0) 		? tr('IDS_SHARE_ENDS_IN') + ' ' + timeLeft
																: tr('IDS_SHARE_IS_EXPIRING_WARNING')"/>
			</block>
			<block>
				<bind name="visible" value="priceInfo.basePrice != 0"/>
				<bind name="style" value="'marginRight'; _medium ? '23px' : '15px'"/>
				<block type="text">
					<styleClass value="$TextSecondaryBold"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="format(priceInfo.basePrice, -1)"/>
				</block>
				<block className="icon_price_strikethrough" type="native">
					<style>
						<width value="110%"/>
						<height value="40%"/>
						<top value="60%"/>
						<marginTop value="-50%"/>
						<position value="absolute"/>
					</style>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PriceTagWithLabel">
		<block>
			<style>
				<flow value="horizontal"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="	_large ? '$FontSizeHeader6':
							_medium ? '$FontSizeLarge' :
							_small ? '$FontSizeSmall' : '$None'"/>
				<bind name="class" value="_techText ? '$FontColorBlueish' : '$None'"/>
				<bind name="class" value="_bold ? '$FontFamilyDefaultBold' : '$None'"/>
				<bind name="text" value="_label"/>
			</block>
			<block>
				<style>
					<marginLeft value="4px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="instance" value="'PriceTag'; { 	priceInfo: priceInfo, _deficit: _deficit , _showDiscountTag: _showDiscountTag,
											_large: _large, _medium: _medium, _small: _small, _duplicateCurrency: _duplicateCurrency}"/>
			</block>
		</block>
	</block>
	<block className="DiscountTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<styleClass value="$DefaultTooltipWidth"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$Fullsize"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block className="icon_discount" type="native">
				<styleClass value="$MiddleVAligned"/>
				<bind name="gotoAndStop!" value=" _large ? 'large':'normal'"/>
			</block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextDefaultBold"/>
				<bind name="class" value="'$FontColorGolden'"/>
				<bind name="text" value="(	priceInfo.discountEventName				? priceInfo.discountEventName : 
							priceInfo.type == 1	? 'IDS_EVENT_SHARE' : 
							priceInfo.type == 2	? 'IDS_SHARE_FROM_CLAN_BUILDINGS' : 
							priceInfo.isPrivate 					? 'IDS_PERSONAL_DISCOUNT' 
																	: 'IDS_PROMO_EVENT' )"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<style>
				<marginTop value="0px"/>
			</style>
			<bind name="instance" value="'PriceInLine'; { priceInfo: priceInfo, _showDiscountTag: _showDiscountTag, _customLabel: _customLabel }"/>
		</block>
		<block>
			<bind name="visible" value="(_isExternal == true)"/>
			<styleClass value="$InfoBlockIndent"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-5px"/>
					<marginLeft value="-12px"/>
					<marginRight value="-12px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="'IDS_HINT_REDIRECT_TO_STORE'"/>
			</block>
		</block>
	</block>
	<block className="BranchTypeLabel">
		<style>
			<position value="absolute"/>
			<width value="1px"/>
			<marginLeft value="8px"/>
		</style>
		<bind name="left" value="_useClassGap ? (x + classGap) * _shipResearchBlockWidth : x * _shipResearchBlockWidth"/>
		<bind name="width" value="_blockWidth"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<alpha value="0.7"/>
			</style>
			<bind name="watch" value="'shipType';	nameIDS == 'IDS_DESTROYER'	? 'Destroyer' :
									nameIDS == 'IDS_CARRIER'	? 'AirCarrier' :
									nameIDS == 'IDS_CRUISER'	? 'Cruiser' :
									nameIDS == 'IDS_BATTLESHIP'	? 'BattleShip'
																: 'premiumShip' "/>
			<bind name="watch" value="'shipDescriptionText'; nameIDS != 'IDS_PREMIUM' 	?	[{_paragraphText: (nameIDS + '_DESCRIPTION'), _leading: -2}] 
																		: 	
																			[{_paragraphText: (nameIDS + '_SHIP_DESCRIPTION_1'), _leading: -2},																			
																			{_paragraphText: 'IDS_PREMIUM_SHIP_DESCRIPTION_2', _leading: -2},
																			{_paragraphText: 'IDS_PREMIUM_SHIP_DESCRIPTION_3', _leading: -2},
																			{_paragraphText: 'IDS_PREMIUM_SHIP_DESCRIPTION_4', _leading: -2},
																			{_paragraphText: 'IDS_PREMIUM_SHIP_DESCRIPTION_5', _leading: -2}]"/>
			<bind name="watch" value="'brunchTitle'; (nameIDS + 'S')"/>
			<bind name="tooltip" value="'MultiParagraphHelpTooltip'; {_tooltipHeader: brunchTitle, _multiParagraphArray: shipDescriptionText, _iconType: 'ship', _shipType: shipType}"/>
			<block className="mc_icon_ship" type="native">
				<bind name="visible" value="shipType != 'premiumShip'"/>
				<style>
					<marginRight value="12px"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
				<bind name="gotoAndStop!" value="shipType"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefaultBoldNM"/>
				<bind name="class" value="(nameIDS == 'IDS_PREMIUM' ? '$FontColorGolden' : '$None')"/>
				<bind name="text" value="brunchTitle"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="BranchTypeLabelDark">
		<style>
			<position value="absolute"/>
			<width value="1px"/>
		</style>
		<bind name="left" value="x * $parent.blockWidth"/>
		<bind name="width" value="$parent.blocHalfWidth * 2"/>
		<bind name="class" value="_noMiddle == true ? null : '$MiddleVAligned'"/>
		<block>
			<bind name="class" value="_noMiddle == true ? null : '$MiddleAligned'"/>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<position value="absolute"/>
					<maxWidth value="110"/>
					<textAlign value="center"/>
					<alpha value="0.35"/>
					<top value="1px"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<position value="absolute"/>
					<maxWidth value="110"/>
					<textAlign value="center"/>
					<alpha value="0.1"/>
					<top value="-1px"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<position value="absolute"/>
					<maxWidth value="110"/>
					<textAlign value="center"/>
					<alpha value="0.15"/>
					<left value="1px"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<position value="absolute"/>
					<maxWidth value="110"/>
					<textAlign value="center"/>
					<alpha value="0.15"/>
					<left value="-1px"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<maxWidth value="110"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<style>
					<position value="absolute"/>
					<maxWidth value="110"/>
					<textAlign value="center"/>
				</style>
				<bind name="text" value="nameIDS"/>
			</block>
		</block>
	</block>
	<block className="CurrentFreeXP">
		<styleClass value="$InfoLineBoundaries"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<params>
			<param name="name" value="upgrade_tree_CurrentFreeXP"/>
		</params>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="text" value="_label"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="class" value="'$FontSizeLarge'"/>
			<bind name="class" value="'$FontColorFreeExp'"/>
			<bind name="text" value="format(_freeXP, -1)"/>
		</block>
		<block className="icon_exp_free" type="native">
			<style>
				<marginBottom value="-2px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
		</block>
	</block>
	<block className="CurrentXP">
		<styleClass value="$InfoLineBoundaries"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<params>
			<param name="name" value="upgrade_tree_CurrentShipXP"/>
		</params>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="class" value="_light ? '$None' : '$FontColorBlueish'"/>
			<bind name="class" value="_light ? '$None' : '$Bold'"/>
			<bind name="text" value="_label"/>
		</block>
		<block type="text">
			<styleClass value="$TextDefaultBold"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="class" value="'$FontSizeLarge'"/>
			<bind name="class" value="'$FontColorExp'"/>
			<bind name="text" value="format(_exp, -1)"/>
		</block>
		<block className="icon_exp" type="native">
			<style>
				<marginBottom value="-2px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
		</block>
	</block>
	<block className="CurrentXPLarge">
		<styleClass value="$InfoLineBoundaries"/>
		<style>
			<marginBottom value="-6px"/>
		</style>
		<params>
			<param name="name" value="upgrade_tree_CurrentShipXP"/>
		</params>
		<block>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$TextLargeHeaderBold"/>
				<bind name="class" value="'$FontColorExp'"/>
				<bind name="text" value="format(_exp, -1)"/>
			</block>
			<block className="icon_exp" type="native">
				<styleClass value="$MiddleVAligned"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block type="text">
			<style>
				<marginTop value="2px"/>
				<alpha value="0.8"/>
			</style>
			<styleClass value="$TextDefaultWhite"/>
			<bind name="text" value="_label"/>
		</block>
	</block>
	<block className="StatusLineBig">
		<block type="text">
			<style>
				<maxWidth value="300"/>
				<textAlign value="center"/>
			</style>
			<styleClass value="$TextHeader"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="class" value="_positive ? '$FontColorComparePositive' : '$FontColorUnready'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="StatusLineMedium">
		<block type="text">
			<style>
				<maxWidth value="300"/>
				<textAlign value="center"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="class" value="'$FontColorUnready'"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="StatusLineWithIcon">
		<block>
			<block className="icon_warning_orange" type="native">
				<bind name="style" value="'top'; _small	? '4' :
								_large	? '7'
										: '4'"/>
				<style>
					<marginRight value="2px"/>
				</style>
			</block>
			<block type="text">
				<bind name="style" value="'maxWidth'; _maxWidth ? _maxWidth : 264"/>
				<bind name="class" value="_large ? '$TextHeaderBigDefault' 
								:_small ? '$TextSecondary' : '$TextDefault'"/>
				<bind name="class" value="_positive ? '$FontColorComparePositive' : '$FontColorUnready'"/>
				<bind name="class" value="_bold ? '$Bold' : '$None'"/>
				<bind name="text" value="_text"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModuleStatus">
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'ModuleStatusIcon'; _count.Installed &gt; 0								? { _state: 'installed' } :
											!(_isExplored) &amp;&amp; !(_isStock)						? { _state: 'action' } :
											(_count.Available &gt; 0) &amp;&amp; (_count.toPurchase &gt; 0)	? { _state: 'not_enough' }
																								: null "/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="_count.Installed &gt; 0 	? '$FontColorGolden'
												: _count.Available &gt; 0 	? '$FontColorWhite'
																		: _isExplored 	? '$FontColorUnready'
																						: _isStock 	? '$FontColorDefault'
																									: '$FontColorUnready'"/>
				<bind name="text" value="_count.Installed &gt; 0 	? 'IDS_INSTALLED'
												: _isExplored 	? 	(_count.Available &gt; 0 	? (_count.toPurchase &gt; 0 	? 'IDS_IN_STOCK_Q'
																														: 'IDS_IN_STOCK')
																							: 'IDS_NOT_PURCHASED'
																	)
																: _isStock 	? 'IDS_STOCK'
																			: 'IDS_NOT_RESEARCHED' "/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="_count.Installed &gt; 0 	? '$FontColorGolden'
												: _count.Available &gt; 0 	? '$FontColorWhite'
																		: _isExplored 	? '$FontColorDefault'
																						: '$FontColorExp'"/>
				<bind name="text" value="_count.Installed &gt; 0 	? ''
												: _isExplored	? 	((_count.Available &gt; 0) &amp;&amp; (_count.toPurchase &gt; 0) 	? _count.Available + 0
																														: ''
																	)
																: '' "/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<style>
					<marginLeft value="3px"/>
				</style>
				<bind name="text" value="(_count.Available &gt; 0) &amp;&amp; (_count.toPurchase &gt; 0) 	? 'IDS_TO_BUY_Q'
																			: '' "/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorCompareNegative'"/>
				<bind name="text" value="(_count.Available &gt; 0) &amp;&amp; (_count.toPurchase &gt; 0) 	? _count.toPurchase
																			: '' "/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModuleStatusIcon">
		<block className="icon_module_state" type="native">
			<bind name="gotoAndStop!" value="_state"/>
		</block>
	</block>
	<block className="ShipHeaderModuleTree">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="watchDH" value="'exp';				['shipOwnEntity.ownShip.evUpdateConfig'];			shipOwnEntity.ownShip.exp"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="watch" value="'isExplored'; upgradableShipInfo.isExplored"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountFreeXP';		['resourceEntity.accountResource.evChangedFreeXP'];	resourceEntity.accountResource.freeXP"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="watch" value="'isFarming'; shipInfo.isFarming"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<height value="34px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<top value="-5px"/>
			</style>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap_h_no_right" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<bind name="tooltip" value="'ShipExtendedTooltip'; { shipId: _shipId }; 0"/>
			<style>
				<marginTop value="5px"/>
				<marginLeft value="3px"/>
			</style>
			<block>
				<style>
					<marginTop value="-5px"/>
					<marginBottom value="-8px"/>
				</style>
				<bind name="colorTransform" value="_unavailable ? {
				redMultiplier: 0,
				greenMultiplier: 0,
				blueMultiplier: 0,
				alphaMultiplier: 1,
				redOffset: 8,
				greenOffset: 34,
				blueOffset: 42,
				alphaOffset: 0
			} : {}"/>
				<bind name="instance" value="'ShipIcon'; {_shipId: _shipId}"/>
			</block>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<bind name="class" value="_unavailable ? '$BlockGlowFilterBright' : '$GlowDisabler'"/>
				<block type="text">
					<styleClass value="$FontShipnameWhite"/>
					<bind name="style" value="'letterSpacing'; _letterSpacing ? _letterSpacing : '0'"/>
					<bind name="class" value="isFarming || _uiSpecial 	? '$FontShipnameGolden'
										: _unavailable 	? '$FontShipnameBlack' : '$FontShipnameWhite'"/>
					<bind name="text" value="shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS + '_FULL'))"/>
				</block>
			</block>
			<block className="icon_check" type="native">
				<style>
					<marginLeft value="-2px"/>
					<marginTop value="-4px"/>
				</style>
				<bind name="visible" value="isOwned"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!_isDownloaded"/>
			<style>
				<marginTop value="-3px"/>
			</style>
			<bind name="instance" value="'IconSlimClient'; !_isDownloaded ? { _isEventLike: _eventShips } : null"/>
		</block>
		<block>
			<style>
				<marginLeft value="6px"/>
				<marginTop value="-1px"/>
				<right value="12"/>
				<position value="absolute"/>
			</style>
			<block>
				<style>
					<marginLeft value="6px"/>
				</style>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_SHIP_EXPERIENCE'}"/>
				<bind name="instance" value="'CurrentXP'; isOwned ? { _exp: exp} : null "/>
				<bind name="name" value="'AvailableExpBalanceModuleTreeHeader'"/>
			</block>
			<block>
				<style>
					<marginLeft value="9px"/>
				</style>
				<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_FREE_EXPERIENCE_C'}"/>
				<bind name="feature" value="5; ''"/>
				<bind name="visible" value="feature_5 != 'locked' &amp;&amp; isOwned"/>
				<bind name="instance" value="'CurrentFreeXP'; { _freeXP: accountFreeXP }"/>
				<bind name="name" value="'freeExpBalanceModuleTreeHeader'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watchDH" value="'isLazyLogin'; ['loginEntity.loginData.evUpdate']; (loginEntity.loginData.currentLoginType == 'DEMO')"/>
		<bind name="watch" value="'goldDeficit'; (_buyPriceFinal - accountGold)"/>
		<bind name="watch" value="'enoughGold'; goldDeficit &lt;= 0"/>
		<bind name="watch" value="'enoughCredits'; _creditsDeficit &lt;= 0"/>
		<bind name="watch" value="'isGoldCurrency'; _buyPrice.currency == 'gold'"/>
		<bind name="watch" value="'defaultButtonCostSmallData';
		isOwned || !(_dependencyResearched	||  isExplored) ? null : 
												!(isExplored) &amp;&amp;
													(_expDeficit &lt;= 0) &amp;&amp;
													(_group == 'upgradeable' || _group == 'upgradeableExclusive' || _group == 'event')		?   {   _label: toUpperCase(tr('IDS_DO_RESEARCH')),
																																					priceInfo: (_totalCostXP == _explorePriceFinal  ? _explorePrice 
																																																	: { finalPrice: _totalCostXP, currency: 'exp' }),
																																					_action: (isLazyLogin &amp;&amp; (shipInfo.level &gt; realmConstants.lazyAccountMaxShipTier)) ? null : 'researchShip',
																																					_actionParams: { shipId: _shipId },
																																					_enabled: true,
																																					_showDiscountTag:true
																																				}  :
												isExplored &amp;&amp; 
													((!(isFarming) &amp;&amp; enoughCredits) || (isFarming &amp;&amp; enoughGold))	?	{	_label: toUpperCase(tr('IDS_DO_PURCHASE')),
																																priceInfo: _buyPrice,
																																_action: (isLazyLogin &amp;&amp; (shipInfo.level &gt; realmConstants.lazyAccountMaxShipTier)) ? null : 'purchaseShip',
																																_actionParams: { shipId: _shipId },
																																_enabled: isGoldCurrency ? enoughGold : enoughCredits,
																																_showDiscountTag:true
																														}  
																													: 	null "/>
		<bind name="watch" value="'priceTagWithLabelData';   isOwned ? null : 
											!(isExplored) &amp;&amp; (!(_dependencyResearched) || (_expDeficit &gt; 0))		?	{
																															priceInfo: { finalPrice: _totalCostXP, currency: _group == 'upgradeableExclusive' ? 'freexp' : 'exp' },
																															_label: 'IDS_RESEARCH_COST', _small : true
																														}	:
											isExplored &amp;&amp;
											((!(isFarming) &amp;&amp; !enoughCredits) || (isFarming &amp;&amp; !enoughGold)) 		? 	{
																															priceInfo: _buyPrice,
																															_label: 'IDS_PURCHASE_COST',
																															_small : true
																														}
																													: null"/>
		<bind name="watch" value="'priceDeficitData'; isOwned || !(_dependencyResearched) ? null : 
									!(isExplored) &amp;&amp; _expDeficit &gt; 0 											?   {
																														priceInfo: { finalPrice: _totalCostXP, currency: _group == 'upgradeableExclusive' ? 'freexp' : 'exp' },
																														_small : true,
																														_tooltipText: 'IDS_TOOLTIP_NO_XP',
																														_deficit: _expDeficit
																													}	: 
									isExplored &amp;&amp; 
										((!(isFarming) &amp;&amp; !enoughCredits) || (isFarming &amp;&amp; !enoughGold)) 		? 	{ 
																														priceInfo: _buyPrice,
																														_label: 'IDS_PURCHASE_COST',
																														_small : true,
																														_tooltipText: isGoldCurrency ? 'IDS_TOOLTIP_NO_GOLD' : 'IDS_TOOLTIP_NO_CREDITS',
																														_deficit: isGoldCurrency ? goldDeficit : _creditsDeficit
																													}
																												: null"/>
		<bind name="watch" value="'statusLineWithIconData'; (_dependencyResearched || isExplored) 	? null
																					: { _text: 'IDS_RESEARCH_PREVIOUS_SHIPS', _positive: false, _small: true, _maxWidth: 300}"/>
		<block>
			<bind name="visible" value="!_eventShips"/>
			<style>
				<position value="absolute"/>
				<right value="6px"/>
			</style>
			<block>
				<bind name="visible" value="!!defaultButtonCostSmallData"/>
				<bind name="name" value="'ButtonShipResearchOrPurchaseSmall'"/>
				<bind name="tooltip" value="'ShipTooltipWithPrice'; { shipId: _shipId }; 0"/>
				<style>
					<position value="absolute"/>
					<right value="-3px"/>
					<marginTop value="-2px"/>
				</style>
				<bind name="action" value="'click'; (isLazyLogin &amp;&amp; (shipInfo.level &gt; realmConstants.lazyAccountMaxShipTier)) ? 'forceCreateAccount' : null"/>
				<bind name="instance" value="'ButtonCostSpecial'; !!defaultButtonCostSmallData ? defaultButtonCostSmallData : null"/>
				<bind name="watch" value="'contextGuidingTipId'; isExplored ? SC.Context_guiding_tip.TIP_TYPES.MODULES_BUY : SC.Context_guiding_tip.TIP_TYPES.MODULES_EXPLORE"/>
				<bind name="instance" value="'ContextGuidingTipHub'; {	_tooltipID: contextGuidingTipId, 
														_tipPositioning: 'bottom', 
														_extraCondition: true, 
														_offset: 5,
														_hideOnReasonClick: false	}"/>
			</block>
			<block>
				<bind name="visible" value="!defaultButtonCostSmallData"/>
				<style>
					<marginTop value="-6px"/>
				</style>
				<block>
					<bind name="visible" value="!!priceTagWithLabelData"/>
					<style>
						<right value="0px"/>
					</style>
					<bind name="instance" value="'PriceTagWithLabel'; !!priceTagWithLabelData ? priceTagWithLabelData : null"/>
				</block>
				<block>
					<bind name="visible" value="!!statusLineWithIconData"/>
					<style>
						<right value="0px"/>
						<marginTop value="-5px"/>
					</style>
					<bind name="instance" value="'StatusLineWithIcon'; !!statusLineWithIconData ? statusLineWithIconData : null"/>
				</block>
				<block>
					<bind name="visible" value="!!priceDeficitData"/>
					<style>
						<right value="0px"/>
						<marginTop value="-5px"/>
					</style>
					<bind name="instance" value="'PriceDeficit'; !!priceDeficitData ? priceDeficitData : null"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="_eventShips &amp;&amp; !isOwned"/>
			<style>
				<width value="80px"/>
				<right value="0px"/>
				<position value="absolute"/>
			</style>
			<block className="icon_issued_small" type="native">
				<style>
					<marginTop value="12px"/>
					<marginLeft value="30px"/>
				</style>
				<bind name="rotation" value="-3"/>
				<innerBind elementName="item.item" name="text" value="toUpperCase(tr('IDS_UNAVAILABLE_TO_DISPLAY_SOON'))"/>
				<bind name="gotoAndPlay!" value="'issued'"/>
			</block>
		</block>
	</block>
	<block className="LevelItem">
		<style>
			<height value="85px"/>
			<marginBottom value="85px"/>
			<width value="100%"/>
			<backgroundColor value="0x10000000"/>
		</style>
	</block>
	<block className="IncompatiblesBlock">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="7px"/>
					<marginLeft value="12px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<style>
					<marginTop value="3px"/>
					<marginBottom value="6px"/>
					<marginLeft value="2px"/>
					<marginRight value="12px"/>
				</style>
				<text value="IDS_INSTALL_COMPATIBLE_MODULE"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<block className="icon_warning_red" type="native">
					<style>
						<marginTop value="7px"/>
						<marginLeft value="12px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorCompareNegative'"/>
					<style>
						<marginTop value="3px"/>
						<marginLeft value="2px"/>
						<marginRight value="12px"/>
					</style>
					<text value="IDS_MODULE_INCOMPATIBLE_WITH"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="_incompatibleModules; 'DependencyRepeatItem'; {_type: _type}"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
	</block>
	<block className="ModuleDependenciesBlock">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<flow value="horizontal"/>
				<width value="100%"/>
				<marginLeft value="12px"/>
				<marginRight value="12px"/>
				<marginTop value="8px"/>
				<marginBottom value="3px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'PriceTagWithLabel'; 	_type[1] == 'research' ? { priceInfo: _priceInfo, _label: 'IDS_RESEARCH_COST', _techText:true, _showDiscountTag:true}
													: _type[1] == 'purchase' ? { priceInfo:_priceInfo, _label: 'IDS_PURCHASE_COST', _techText:true, _showDiscountTag:true}
													: null"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="text" value="_type[1] == 'mount' ? 'IDS_HAVE_TO_BE_MOUNTED' : ''"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<bind name="visible" value="_type[1] != 'mount'"/>
				<style>
					<marginTop value="4px"/>
					<marginLeft value="12px"/>
					<marginRight value="12px"/>
				</style>
				<bind name="text" value="_type[1] == 'research' ? 'IDS_WILL_BE_ALSO_RESEARCHED' 
												: _type[1] == 'purchase' 	? 'IDS_HAVE_TO_BE_PURCHASED' 
																			: ''"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="repeat" value="_dependentModules;  'DependencyRepeatItem' ; {_type: _type}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-1px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="DependencyRepeatItem">
		<style>
			<width value="100%"/>
			<marginLeft value="12px"/>
			<marginRight value="12px"/>
			<marginTop value="3px"/>
			<marginBottom value="3px"/>
		</style>
		<bind name="child" value="_type[0]; {dataArray:dataArray};'ResearchDependenciesListItem'; 'PurchaseDependenciesListItem'; 'MountDependenciesListItem'"/>
	</block>
	<block className="ResearchDependenciesListItem">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_EXPLORE + dataArray[1]; 'moduleExplorePrice'"/>
		<style>
			<width value="100%"/>
			<height value="40px"/>
			<flow value="horizontal"/>
		</style>
		<block className="icon_tree_module_states" type="native">
			<styleClass value="$MouseDisable"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="44px"/>
				<height value="44px"/>
			</style>
			<bind name="gotoAndStop!" value="dataArray[3] + '_P'"/>
		</block>
		<block>
			<block type="text">
				<style>
					<marginTop value="3px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="class" value="'$FontColorExp'"/>
				<bind name="text" value="toUpperCase(dataArray[2])"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginTop value="-4px"/>
				</style>
				<bind name="text" value="dataArray[4]"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!($parent.$parent._incompatibleModules)"/>
			<styleClass value="$AlignRight"/>
			<bind name="instance" value="'PriceTag'; { priceInfo: moduleExplorePrice.prices[0], _showDiscountTag:true}"/>
		</block>
	</block>
	<block className="PurchaseDependenciesListItem">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + dataArray[2]; 'moduleBuyPrice'"/>
		<style>
			<width value="100%"/>
			<height value="40px"/>
			<flow value="horizontal"/>
		</style>
		<block className="icon_tree_module_states" type="native">
			<styleClass value="$MouseDisable"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="gotoAndStop!" value="dataArray[3] + '_P'"/>
		</block>
		<block>
			<block type="text">
				<style>
					<marginTop value="1px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="dataArray[0]"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginTop value="-5px"/>
				</style>
				<bind name="text" value="dataArray[4]"/>
			</block>
		</block>
		<block>
			<styleClass value="$AlignRight"/>
			<block>
				<bind name="visible" value="dataArray[1] &gt; 1"/>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorWhite'"/>
					<bind name="text" value="dataArray[1] + ' x'"/>
				</block>
			</block>
			<block>
				<bind name="instance" value="'PriceTag'; { priceInfo: moduleBuyPrice.prices[0], _showDiscountTag:true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="MountDependenciesListItem">
		<style>
			<width value="100%"/>
			<height value="40px"/>
			<flow value="horizontal"/>
		</style>
		<block className="icon_tree_module_states" type="native">
			<styleClass value="$MouseDisable"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="44px"/>
				<height value="44px"/>
			</style>
			<bind name="gotoAndStop!" value="dataArray[1] + '_P'"/>
		</block>
		<block>
			<block type="text">
				<style>
					<marginTop value="1px"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="dataArray[0]"/>
			</block>
			<block type="text">
				<styleClass value="$TextSecondary"/>
				<bind name="class" value="'$FontColorBlueish'"/>
				<style>
					<marginTop value="-5px"/>
				</style>
				<bind name="text" value="'IDS' + toUpperCase(dataArray[1])"/>
			</block>
		</block>
	</block>
	<block className="IncompatibleListItem">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<height value="30px"/>
			<marginLeft value="12px"/>
			<marginRight value="12px"/>
		</style>
		<block type="text">
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextDefault"/>
			<bind name="text" value="dataArray[0]"/>
		</block>
	</block>
	<block className="PremiumShipPointsItem">
		<block type="text">
			<style>
				<maxWidth value="480"/>
			</style>
			<styleClass value="$TextDefault"/>
			<bind name="text" value="_text"/>
		</block>
	</block>
	<block className="CostSmallTransparent">
		<bind name="controller" value="lesta.unbound.core.UbController"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<styleClass value="$InfoLineBoundaries"/>
		<params>
			<param name="name" value="upgrade_tree_CostXP"/>
		</params>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="text" value="_label"/>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<styleClass value="$FontCostNormal"/>
				<bind name="class" value="_deficit ? '$FontColorDefault' : '$FontColorAlmostBlack'"/>
				<style>
					<position value="absolute"/>
					<alpha value="0.35"/>
					<top value="1px"/>
				</style>
				<bind name="text" value="format(_costXP != null ? _costXP : _costCR, -1)"/>
			</block>
			<block type="text">
				<styleClass value="$FontCostNormal"/>
				<bind name="class" value="_deficit ? '$FontColorDefault' : '$FontColorAlmostBlack'"/>
				<style>
					<position value="absolute"/>
					<alpha value="0.1"/>
					<top value="-1px"/>
				</style>
				<bind name="text" value="format(_costXP != null ? _costXP : _costCR, -1)"/>
			</block>
			<block type="text">
				<styleClass value="$FontCostNormal"/>
				<bind name="class" value="_deficit ? '$FontColorDefault' : '$FontColorAlmostBlack'"/>
				<style>
					<position value="absolute"/>
					<alpha value="0.15"/>
					<left value="1px"/>
				</style>
				<bind name="text" value="format(_costXP != null ? _costXP : _costCR, -1)"/>
			</block>
			<block type="text">
				<styleClass value="$FontCostNormal"/>
				<bind name="class" value="_deficit ? '$FontColorDefault' : '$FontColorAlmostBlack'"/>
				<style>
					<position value="absolute"/>
					<alpha value="0.15"/>
					<left value="-1px"/>
				</style>
				<bind name="text" value="format(_costXP != null ? _costXP : _costCR, -1)"/>
			</block>
			<block type="text">
				<bind name="class" value="_deficit ? '$FontCostBlack' : '$FontCostNormal'"/>
				<bind name="text" value="format(_costXP != null ? _costXP : _costCR, -1)"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="_costXP != null"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_exp_small" type="native"/>
		</block>
		<block>
			<bind name="visible" value="_costCR != null"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_credit_small" type="native"/>
		</block>
	</block>
	<block className="ShipTreeMenu">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<bind name="watchDH" value="'isPrimary';			['shipOwnEntity.ownShip.evIsPrimaryChanged'];	shipOwnEntity.ownShip.isPrimary"/>
		<bind name="watchDH" value="'isNeedRepair';		['shipOwnEntity.ownShip.evUpdateDockState'];	shipOwnEntity.ownShip.isNeedRepair"/>
		<bind name="watchDH" value="'timeRent';			['shipOwnEntity.ownShip.evUpdateDockState'];	shipOwnEntity.ownShip.timeRent"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';		['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isInFormation"/>
		<bind name="watchDH" value="'sellable';			['shipOwnEntity.ownShip.evUpdateConfig'];		shipOwnEntity.ownShip.sellable"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'realmConstants'"/>
		<bind name="visible" value="slimClientData.isFull"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<bind name="feature" value="'17'; ''"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="name" value="'ShipContextMenu'"/>
		<block>
			<bind name="visible" value="isOwned"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="name" value="'ShipContextMenu_Primary'"/>
				<bind name="request" value="'buttonClick'; 'primaryThisShip'; {shipId: shipId}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="text" value="isPrimary ? 'IDS_REMOVE_PRIMARY' : 'IDS_ASSIGN_PRIMARY'"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	feature_17 != 'locked' &amp;&amp;
						!_disableShipActions"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="name" value="'ShipContextMenu_Modules'"/>
				<bind name="action" value="'buttonClick'; 'selectShipUpgrade'; {shipId : shipId}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<text value="IDS_MODULES"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	feature_17 != 'locked' &amp;&amp;
						isOwned &amp;&amp;
						sellable &amp;&amp;
						(timeRent == 0) &amp;&amp;
						!(isLocked || isNeedRepair || isInFormation) &amp;&amp;
						!_disableShipActions"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="name" value="'ShipContextMenu_Sell'"/>
				<bind name="request" value="'buttonClick'; 'sellShipWindow'; {shipName: shipInfo.fullName, shipId: shipId}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<text value="IDS_SELL"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="	feature_17 != 'locked' &amp;&amp;
						(!isOwned || (timeRent != 0)) &amp;&amp;
						upgradableShipInfo.isExplored &amp;&amp;
						shipInfo.canBuy &amp;&amp;
						!_disableShipActions"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="name" value="'ShipContextMenu_Purchase'"/>
				<bind name="action" value="'buttonClick'; 'purchaseShip'; { shipId: shipId}"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<text value="IDS_DO_PURCHASE"/>
			</block>
		</block>
		<bind name="firstEntityDH" value="'loginEntity'; CC.loginData"/>
		<bind name="watchDH" value="'isLazyLogin'; ['loginEntity.loginData.evUpdate']; (loginEntity.loginData.currentLoginType == 'DEMO')"/>
		<block>
			<bind name="visible" value="	feature_17 != 'locked'&amp;&amp;
						!(upgradableShipInfo.isExplored) 
						&amp;&amp; upgradableShipInfo.dependencyResearched 
						&amp;&amp; upgradableShipInfo.expDeficit &lt;= 0 
						&amp;&amp; !shipInfo.isEventLike
						&amp;&amp; shipInfo.group != 'earlyAccess'"/>
			<styleClass value="$ContextMenuListItem"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="name" value="'ShipContextMenu_Research'"/>
				<bind name="action" value="'buttonClick'; isLazyLogin &amp;&amp; (shipInfo.level &gt; realmConstants.lazyAccountMaxShipTier) ? null : 'researchShip'; { shipId: shipId }"/>
				<bind name="action" value="'click'; (isLazyLogin &amp;&amp; (shipInfo.level &gt; realmConstants.lazyAccountMaxShipTier)) ? 'forceCreateAccount' : null"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<text value="IDS_DO_RESEARCH"/>
			</block>
		</block>
	</block>
	<block className="ShipInfoArmourBlock">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'; 'dockInitData,dockUpdateData'"/>
		<style>
			<width value="100%"/>
			<height value="0px"/>
		</style>
		<bind name="transition" value="dockDefaultValues.armourVisibility; 0.15; {height: 0, alpha: 0}; {height: 110, alpha: 1}; {height: 0, alpha: 0}"/>
		<block>
			<style>
				<position value="absolute"/>
				<top value="-3px"/>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'ArmourPickerControls'; dockDefaultValues.armourVisibility ? {shipId: shipId} : null"/>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<bottom value="0"/>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipInfoCrewBlock">
		<bind name="feature" value="13; 'click'"/>
		<style>
			<width value="100%"/>
			<height value="80px"/>
		</style>
		<bind name="transition" value="_isNotExpanded; 0.15; {height: 80}; {height: 30}; {height: 80}"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="instance" value="'CrewShipPanelBlock';		(_crewId &gt; 0)	? { _crewId: _crewId, _isNotExpanded: _isNotExpanded } : null"/>
			<bind name="instance" value="'CrewHireShipPanelBlock';	(_crewId == 0)	? {} : null "/>
		</block>
		<block>
			<bind name="fade" value="(feature_13 == 'new'); 0.15; {alpha: 0, top: 10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2"/>
			<style>
				<position value="absolute"/>
				<bottom value="18px"/>
				<right value="5px"/>
			</style>
			<bind name="instance" value="'MarkerNewAttention'; {}"/>
		</block>
		<block>
			<bind name="visible" value="_isNotExpanded == false"/>
			<style>
				<position value="absolute"/>
				<bottom value="-1"/>
				<width value="100%"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<css name="$TextShipLineNormal">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextShipLinePremium">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextShipLineBlack">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextMetaHeader">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextMetaInfo">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="15"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$ShipParamTitleWidth">
		<width value="160px"/>
	</css>
	<css name="$ShipParamOnePieceTitleWidth">
		<maxWidth value="160"/>
	</css>
	<css name="$TextShipLinePremiumAccentBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextShipLineBoldAccent">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextShipLinePremiumBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextShipLineBold">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextShipLineBlackAccentBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextShipLineBlackBold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<css name="$TextShipHeaderNameGolden21">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="21"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextShipHeaderNameNormal21">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="21"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextShipHeaderNameBlack21">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<block className="ShipLineItem">
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; _shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'notInvertable'; (shipOwnEntity != null) || _notInvertable"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<marginLeft value="-4px"/>
			</style>
			<bind name="style" value="'marginTop'; _large ? '0' : '-6px'"/>
			<bind name="style" value="'marginBottom'; _large ? '0' : '-4px'"/>
			<bind name="instance" value="'ShipIcon'; {_shipId: _shipId}"/>
		</block>
		<block>
			<style>
				<marginTop value="-5px"/>
			</style>
			<bind name="instance" value="'InvertableTextLine'; { _text: shipInfo.levelRome + ' ' + toUpperCase(tr(shipInfo.nameIDS)),
												_invert: !notInvertable, 
												_normalClass: (shipInfo.isFarming || shipInfo.uiSpecial ? (_large ? '$TextShipLinePremiumAccentBold' : '$TextShipLinePremiumBold') 
																										: (_large ? '$TextShipLineBoldAccent' : '$TextShipLineBold')), 
												_invertedClass: (_large ? '$TextShipLineBlackAccentBold': '$TextShipLineBlackBold'),
												_width: _width ? _width : '110px',
												_letterSpacing: -0.2}"/>
		</block>
	</block>
	<block className="ShipInfoTabHeader">
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; shipId; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watch" value="'isOwned'; shipOwnEntity != null"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="feature" value="13; ''"/>
			<style>
				<width value="300px"/>
				<height value="184px"/>
				<position value="absolute"/>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="_isNotExpanded; 0.1;	{width: 300, height: 184};
												(feature_13 != 'locked' &amp;&amp; isOwned)	? {width: 118, height: 72}
																					: {width: 69, height: 43};
												{width: 300, height: 184}"/>
			<bind name="instance" value="'NationFlagsBig'; _isHideFlag ? null : {_width: '100%', _height: '100%', _alpha: 0.5, shipCountry: shipInfo.flagName}"/>
		</block>
		<block>
			<styleClass value="$InfoBlockHorizontalIndent"/>
			<style>
				<marginTop value="12px"/>
			</style>
			<block>
				<style>
					<backgroundColor value="0x01000000"/>
					<marginBottom value="-5px"/>
				</style>
				<block>
					<style>
						<marginTop value="-2px"/>
						<marginLeft value="-2px"/>
					</style>
					<bind name="instance" value="'ShipIcon'; {_shipId: shipId}"/>
				</block>
				<block>
					<style>
						<marginTop value="-5px"/>
					</style>
					<bind name="instance" value="'InvertableTextLine'; { _text: (shipInfo.levelRome) + ' ' + toUpperCase(tr(shipInfo.nameIDS + '_FULL')),
														_invert: _fromCrew ? !isOwned : false, 
														_normalClass: (shipInfo.isFarming || shipInfo.uiSpecial) &amp;&amp; !_isNotMyShip	? '$TextShipHeaderNameGolden21'
																																	: '$TextShipHeaderNameNormal21',
														_invertedClass: '$TextShipHeaderNameBlack21' }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<height value="27px"/>
					<marginTop value="-1px"/>
				</style>
				<bind name="transition" value="_isNotExpanded; 0.15;	{alpha: 1, ubScaleY: 1, scaleY: 1};
													{alpha: 0, ubScaleY: 0.23, scaleY: 0.23};
													{alpha: 1, ubScaleY: 1, scaleY: 1}"/>
				<bind name="watch" value="'shipClass';	(shipInfo.subtype == ShipTypes.Cruiser) 		? tr('IDS_CRUISER') :
										(shipInfo.subtype == ShipTypes.AircraftCarrier)	? tr('IDS_AIRCARRIER') :
										(shipInfo.subtype == ShipTypes.BattleShip) 		? tr('IDS_BATTLESHIP') : 
										(shipInfo.subtype == ShipTypes.Auxiliary) 		? tr('IDS_AUXILIARY') :
										(shipInfo.subtype == ShipTypes.Submarine) 		? tr('IDS_SUBMARINE')
																						: tr('IDS_DESTROYER')"/>
				<bind name="instance" value="'InvertableTextLine'; { _text: subst('IDS_SHIP_LEVEL', [], {_shipClass: shipClass, _shipLevel: shipInfo.levelRome}),
													_invert: _fromCrew ? !isOwned : false, 
													_normalClass: shipInfo.isFarming &amp;&amp; !_isNotMyShip	? '$TextShipLinePremium'
																										: '$TextShipLineNormal', 
													_invertedClass: '$TextShipLineBlack' }"/>
			</block>
		</block>
	</block>
	<block className="TitleDefaultMockup">
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<leading value="-4"/>
				<maxWidth value="184"/>
				<marginRight value="9px"/>
			</style>
			<bind name="class" value="meta ? '$TextMetaHeader' : '$TextMetaInfo'"/>
			<bind name="style" value="'alpha'; meta ? 1 : 0.7"/>
			<bind name="text" value="hideParamNameIDS ? (title.data.items ? tr(title.data.items[0].textValue) : '') : (tr(nameIDS) + ' ' + (title.data.items ? tr(title.data.items[0].textValue) : ''))"/>
		</block>
	</block>
	<block className="TitleVertMockup">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<styleClass value="$TextMetaInfo"/>
			<style>
				<leading value="-4"/>
				<width value="184px"/>
				<marginRight value="9px"/>
			</style>
			<bind name="style" value="'alpha'; meta ? 1 : 0.7"/>
			<bind name="text" value="nameIDS"/>
		</block>
		<block type="text">
			<style>
				<leading value="-4"/>
				<maxWidth value="184"/>
				<marginRight value="9px"/>
			</style>
			<styleClass value="$TextMetaInfo"/>
			<style>
				<alpha value="0.7"/>
				<marginTop value="-7px"/>
			</style>
			<bind name="text" value="title.data.items[0].textValue"/>
		</block>
	</block>
	<block className="ShipInfoTabRow">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'; 'dockInitData,dockUpdateData'"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'id'; id"/>
		<bind name="name" value="'param_' + id"/>
		<bind name="dispatch" value="'click'; dockDefaultValues.armourVisibility &amp;&amp; !(excursionOff) ? null : 'onParamRowClicked'; index"/>
		<bind name="action" value="'click'; (id == 'armour') &amp;&amp; (_armourOff != true) ? (dockDefaultValues.armourVisibility ? 'hideArmour' : 'showArmour') : null"/>
		<bind name="fade" value="!empty &amp;&amp; (state &amp;&amp; isRoot || (!(parent.empty) &amp;&amp; parent.state.active)); 0.15; {alpha: 0, ubScaleY: 0.0}; {alpha: 1, ubScaleY: 1.0}"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<bind name="visible" value="!(!_armorEnabled &amp;&amp; id == 'armour')"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="tooltip" value="'ShipParamTooltip';{	id: id, meta: meta, secondLevel: secondLevel, tooltipIDS: tooltipIDS, nameIDS: nameIDS,
											_hasExcursion: (!excursionOff &amp;&amp; !(dockDefaultValues.armourVisibility)),
											_isArmour: id == 'armour', _armourOff: _armourOff, _torpedoId: aviations.params.ammoNameRaw, 
											_deepWaterTorpedoBombers: deepWaterTorpedoBombers }"/>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<styleClass value="$MouseDisable"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="visible" value="!(isRoot)"/>
			</block>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="style" value="'alpha'; (!(isRoot) &amp;&amp; !(excursionOff) &amp;&amp; !(dockDefaultValues.armourVisibility)) || ((id == 'armour') &amp;&amp; (_armourOff != true)) ? 1 : 0"/>
				<bind name="selected" value="state.selected"/>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<styleClass value="$MouseDisable"/>
				<style>
					<position value="absolute"/>
					<left value="1px"/>
				</style>
				<bind name="instance" value="'StatValueBar'; meta ? {_width: 310,	 						_hasDiff: root.hasDiff,
													_currentValue: root.values[0], 			_diffValue: root.diffData[0].value,
													_isGood: root.diffData[0].isGood, 		_expand: state.active,
													_invert: ident == 'visibility',			rollOver: rollOver,
													viewParams: viewParams} : null"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="-1px"/>
				</style>
				<styleClass value="$MouseDisable"/>
				<bind name="visible" value="meta"/>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MouseDisable"/>
				<style>
					<width value="100%"/>
					<marginRight value="12px"/>
				</style>
				<bind name="style" value="'marginLeft'; secondLevelTooltip ? '12px' : '32px'"/>
				<bind name="style" value="'marginTop'; (viewParams.list[$index - 1].meta || viewParams.list[$index - 1] == null) &amp;&amp; !(meta) ? '5px' : '1px'"/>
				<bind name="style" value="'marginBottom'; viewParams.list[$index + 1].meta || viewParams.list[$index + 1] == null ? '8px' : '3px'"/>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="instance" value="'TitleDefaultMockup';(title == null || titleMockup == 0) ? { meta: meta, isRoot: isRoot, nameIDS: nameIDS, hideParamNameIDS: hideParamNameIDS, title: title } : null"/>
					<bind name="instance" value="'TitleVertMockup'; (title != null &amp;&amp; titleMockup == 1) ? { meta: meta, isRoot: isRoot, nameIDS: nameIDS, title: title } : null"/>
				</block>
				<block>
					<block>
						<style>
							<right value="0"/>
							<position value="absolute"/>
						</style>
						<block>
							<bind name="visible" value="secondLevel.hasDiff ? true : false"/>
							<block type="text">
								<styleClass value="$TextParams"/>
								<style>
									<marginTop value="-1px"/>
									<alpha value="0.55"/>
								</style>
								<text value="("/>
							</block>
							<block className="icon_warning_orange" type="native">
								<styleClass value="$MiddleVAligned"/>
								<style>
									<marginLeft value="-2px"/>
									<marginRight value="-2px"/>
								</style>
							</block>
							<block type="text">
								<styleClass value="$TextParams_tight_left"/>
								<style>
									<marginTop value="-1"/>
								</style>
								<text value=")"/>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
						<bind name="instance" value="'ParamElement'; value"/>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="fade" value="!(isRoot) &amp;&amp; !(excursionOff) &amp;&amp; !(dockDefaultValues.armourVisibility); 0.3; {alpha: 0}; {alpha: 1}"/>
					<style>
						<position value="absolute"/>
						<left value="-22px"/>
						<top value="7px"/>
					</style>
					<block className="icon_camera_off" type="native">
						<style>
							<position value="absolute"/>
						</style>
						<bind name="fade" value="!(state.selected); 0.3; {alpha: 0}; {alpha: 1}"/>
					</block>
					<block className="icon_camera_on" type="native">
						<style>
							<position value="absolute"/>
						</style>
						<bind name="fade" value="state.selected; 0.3; {alpha: 0}; {alpha: 1}"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="((id == 'armour') &amp;&amp; (_armourOff != true))"/>
					<style>
						<position value="absolute"/>
						<left value="-22px"/>
						<top value="6px"/>
					</style>
					<block className="button_armour_switcher_small" type="native">
						<bind name="selected" value="dockDefaultValues.armourVisibility"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerModernizations"/>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'weaponsInfo'; deepWaterTorpedoRow ? torpedoSlotsList[0].itemsInSlot[0].id : null; 'torpedoes'"/>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'weaponsInfo'; deepWaterBomberRow  ? planesSlotsList[2].itemsInSlot[0].id : null;  'aviations'"/>
			<bind name="watch" value="'deepWaterTorpedoRow'; (parent.nameIDS == 'IDS_SHIP_PARAM_TORPEDY') &amp;&amp; (id == 'listTorpedoes0')"/>
			<bind name="watch" value="'deepWaterBomberRow'; 	(parent.nameIDS == 'IDS_SHIP_PARAM_AVIATION') &amp;&amp; (id == 'tbomber_squadrons')"/>
			<bind name="watch" value="'deepWaterTorpedoes'; 		(parent.nameIDS == 'IDS_SHIP_PARAM_TORPEDY') &amp;&amp; (id == 'listTorpedoes0') &amp;&amp; (torpedoes.params.torpedoes.isDeepWater == true)"/>
			<bind name="watch" value="'deepWaterTorpedoBombers'; (parent.nameIDS == 'IDS_SHIP_PARAM_AVIATION') &amp;&amp; (id == 'tbomber_squadrons') &amp;&amp; (aviations.params.torpedoIsDeepWater == true)"/>
			<bind name="visible" value="deepWaterTorpedoes == true"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$Fullsize"/>
				<styleClass value="$MouseDisable"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<position value="absolute"/>
				</style>
				<bind name="visible" value="!(isRoot)"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="32px"/>
					<marginRight value="12px"/>
					<marginTop value="1px"/>
					<marginBottom value="3px"/>
				</style>
				<bind name="instance" value="'TorpedoAffectedShipsParamRow'; (deepWaterTorpedoes == true) ? { _torpedoId: torpedoes.params.torpedoes.ammoName, _isTooltip: true } : null"/>
			</block>
		</block>
		<block className="button_expand" type="native">
			<bind name="selected" value="state.active"/>
			<bind name="visible" value="expandable"/>
			<params>
				<param name="toggle" value="true"/>
				<param name="soundSet" value="dropmenu_button"/>
				<param name="focusable" value="false"/>
			</params>
			<style>
				<position value="absolute"/>
				<height value="24px"/>
				<width value="100%"/>
				<marginLeft value="8px"/>
			</style>
		</block>
	</block>
	<block className="ShipDescription">
		<styleClass value="$InfoBlockIndent"/>
		<block>
			<bind name="visible" value="_peculiarity == 'default' &amp;&amp; _needShowProjectYear == true"/>
			<style>
				<width value="100%"/>
				<marginTop value="-3px"/>
			</style>
			<block>
				<block type="text">
					<styleClass value="$TextSecondary"/>
					<bind name="text" value="(_isPaperShip ? tr('IDS_PROJECT_YEAR') : tr('IDS_RELEASE_YEAR')) + tr('IDS_COLON')"/>
				</block>
				<block type="text">
					<styleClass value="$TextSecondaryBold"/>
					<bind name="text" value="_shipNameIDS + '_YEAR'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<styleClass value="$AlignRight"/>
				<bind name="visible" value="_isPaperShip != true"/>
				<block type="text">
					<styleClass value="$TextSecondary"/>
					<bind name="text" value="tr('IDS_SHIPS_IN_SERIES') + tr('IDS_COLON')"/>
				</block>
				<block type="text">
					<styleClass value="$TextSecondaryBold"/>
					<bind name="text" value="_shipNameIDS + '_NUMBER'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block type="text">
			<bind name="style" value="'marginTop'; (_peculiarity == 'default') ? '3px' : '-2px' "/>
			<styleClass value="$TextSecondaryBold"/>
			<style>
				<width value="100%"/>
			</style>
			<bind name="text" value="_shipNameIDS + '_DESCR'"/>
		</block>
	</block>
	<block className="ShipParamsList">
		<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerParams"/>
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="viewParams.list; 'ShipInfoTabRow'; {secondLevelTooltip: secondLevelTooltip, viewParams: viewParams, _excursionOff: _excursionOff}"/>
	</block>
	<block className="ShipParamsListView">
		<style>
			<width value="100%"/>
		</style>
		<bind name="appear" value="'hideParams'; 0.45; 0.0; {alpha: 1.0, top: 0}; {alpha: 0.0, top: -10}"/>
		<bind name="appear" value="'showParams'; 0.3; 0.10; {alpha: 0.0, top: 10}; {alpha: 1.0, top: 0}"/>
		<bind name="repeat" value="viewParams.list; 'ShipInfoTabRow'; {secondLevelTooltip: secondLevelTooltip, viewParams: viewParams, _armourOff: _armourOff, _armorEnabled: _armorEnabled}"/>
	</block>
	<block className="ShipSilhouetteRightAligned">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; _shipID; 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<style>
			<width value="122px"/>
			<height value="22px"/>
		</style>
		<bind name="style" value="'right'; (shipInfo.subtype == ShipTypes.Destroyer)	? '-26px'
																		:	(shipInfo.subtype ==  ShipTypes.Cruiser)	? '-12px'
																														: '0px'"/>
		<bind name="style" value="'backgroundImage'; 'url:' + shipInfo.pathTinyIcon"/>
	</block>
	<block className="LabelComingSoon">
		<block>
			<style>
				<width value="100%"/>
				<height value="80px"/>
			</style>
			<block className="icon_issued" type="native">
				<style>
					<marginLeft value="150px"/>
					<marginTop value="40px"/>
				</style>
				<bind name="rotation" value="-3"/>
				<innerBind elementName="item.item" name="text" value="_showTestSampleLabel ? toUpperCase(tr('IDS_TEST_SAMPLE')) : toUpperCase(tr('IDS_UNAVAILABLE_TO_DISPLAY_SOON')) : "/>
				<bind name="gotoAndPlay!" value="'issued'"/>
			</block>
		</block>
	</block>
	<block className="TaskBattleStats">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameMode';	battleDataEntity.battleInfo.gameMode"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0.15; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
		<bind name="style" value="'width'; localWeatherEntity ? '1000px' : '500px'"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<styleClass value="$MiddleAligned"/>
		<block>
			<block>
				<bind name="instance" value="(gameModeId == GameMode.PVE) ? 'PVEBattleGoal' : 'PVPBattleGoal'; {}"/>
			</block>
			<block>
				<bind name="instance" value="'TasksList'; {}"/>
			</block>
			<bind name="watch" value="'bulletsCount';	gameModeId == GameMode.ANTI_STANDARD		? 2:
									gameModeId == GameMode.ATTACK_DEFENSE		? 5:
									gameModeId == GameMode.TEAM_BATTLE_ROYALE	? 5
																				: null "/>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="visible" value="bulletsCount"/>
				<bind name="instance" value="'GameModeRulesDescription'; bulletsCount ? {_bulletsCount: bulletsCount, _gameMode: gameMode} : null"/>
			</block>
			<block>
				<bind name="visible" value="gameModeId == GameMode.ESCAPE_TO_PORTAL"/>
				<style>
					<marginTop value="16"/>
					<width value="100%"/>
				</style>
				<block type="text">
					<style>
						<marginBottom value="16"/>
					</style>
					<styleClass value="$TextDefaultBold23NM"/>
					<bind name="text" value="'IDS_GAMEMODE_TEAM_BATTLE_ROYALE_RULES_HEADER'"/>
				</block>
				<bind name="repeat" value="3; 'GameModeRulesDescriptionWithIcons'; gameModeId == GameMode.ESCAPE_TO_PORTAL ? {} : null"/>
			</block>
		</block>
		<block>
			<style>
				<marginLeft value="50px"/>
				<width value="450px"/>
			</style>
			<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
			<bind name="instance" value="'LocalWeatherDescription'; localWeatherEntity ? {} : null"/>
		</block>
	</block>
	<block className="PowerupItem">
		<style>
			<marginBottom value="18px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'iconName'; 'icon_ship_modifier_' + powerupName "/>
		<block>
			<style>
				<width value="44px"/>
				<height value="44px"/>
				<marginLeft value="-8px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'symbol:' + iconName"/>
		</block>
		<block>
			<style>
				<marginLeft value="2px"/>
				<marginTop value="14px"/>
			</style>
			<block type="text">
				<style>
					<leading value="-3"/>
					<alpha value="0.85"/>
				</style>
				<styleClass value="$TextDefaultBold19NM"/>
				<bind name="text" value="tr(toUpperCase('IDS_SHIP_MODIFIER_PARAM_HEADER_' + powerupName))"/>
			</block>
			<block type="text">
				<style>
					<leading value="-3"/>
					<width value="300px"/>
					<alpha value="0.75"/>
					<marginTop value="6px"/>
				</style>
				<styleClass value="$TextDefaultNM"/>
				<bind name="text" value="tr(toUpperCase('IDS_SHIP_MODIFIER_PARAM_DESCR_' + powerupName))"/>
			</block>
		</block>
	</block>
	<block className="PVEBattleGoal">
		<style>
			<width value="500px"/>
			<marginBottom value="16px"/>
		</style>
		<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
		<bind name="watchDH" value="'chosenOperationId'; ['']; pveStateEntity.pveState.chosenOperation"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_PVE_OPERATION_GOAL'"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_GOAL')"/>
		</block>
	</block>
	<block className="PVPBattleGoal">
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'gameModeDescription';	battleDataEntity.battleInfo.gameModeDescription"/>
		<style>
			<width value="500px"/>
			<marginBottom value="16px"/>
		</style>
		<block type="text">
			<styleClass value="$TextDefaultBold23NM"/>
			<style>
				<width value="100%"/>
				<marginBottom value="12px"/>
			</style>
			<bind name="text" value="gameModeId == GameMode.TUTORIAL ? tr('IDS_YOUR_GOAL') : tr('IDS_TEAM_GOALS')"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="gameModeDescription"/>
		</block>
	</block>
	<block className="LocalWeatherDescription">
		<style>
			<width value="100%"/>
		</style>
		<bind name="firstEntityDH" value="'localWeatherEntity'; CC.localWeather"/>
		<bind name="watchDH" value="'gpName'; ['localWeatherEntity.localWeather.evChanged']; localWeatherEntity.localWeather.gpName"/>
		<bind name="watch" value="'weatherBulletsCount'; gpName == 'PCOW012_Night_Logic'			? 3 :
										gpName == 'PCOW013_1April_Hailstorm'	? 3 :
										gpName == 'PCOW014_1April_Cloudburst'	? 3 :
										gpName == 'PCOW015_1April_IceCrumbs'	? 0 :
										gpName == 'PCOW019_Fog_Logic'			? 3 :
										gpName == 'PCOW020_Snow_Logic'			? 3 :
										gpName == 'PCOW021_Downpour'			? 3 :
										gpName == 'PCOW023_Rain_Greece'			? 3
																				: 0"/>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_LOCAL_WEATHER_SHIP_PARAM_HEADER_' + gpName))"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginBottom value="14px"/>
				<leading value="-3"/>
				<alpha value="0.85"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="tr(toUpperCase('IDS_LOCAL_WEATHER_DESCRIPTION_' + gpName))"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.85"/>
			</style>
			<bind name="repeat" value="weatherBulletsCount; 'ListWithBulletsElement'; {_marginBottom: '12px', _bulletType: '-', _textClass: '$TextDefault19NM', _text: ('IDS_LOCAL_WEATHER_DESCRIPTION_ITEM_' + toUpperCase(gpName) + '_'), _bulletIndex: true}"/>
		</block>
	</block>
	<block className="SubmarineBattleDescription">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="'IDS_BATTLE_LOADING_SUBMARINE_INFO_HEADER'"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<alpha value="0.85"/>
			</style>
			<bind name="repeat" value="4; 'ListWithBulletsElement'; {_marginBottom: '12px', _textClass: '$TextDefault19NM', _text: 'IDS_BATTLE_LOADING_SUBMARINE_INFO_DESCRIPTION_', _bulletIndex: true}"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="substitute" value="6; null; tr('IDS_BATTLE_LOADING_SUBMARINE_DEEP_UP_TIP'); '_bg'"/>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="8px"/>
			</style>
			<styleClass value="$TextDefault19NM"/>
			<bind name="substitute" value="6; null; tr('IDS_BATTLE_LOADING_SUBMARINE_DEEP_DOWN_TIP'); '_bg'"/>
		</block>
	</block>
	<block className="TasksList">
		<style>
			<width value="500px"/>
		</style>
		<bind name="collectionDH" value="CC.task; 'primaryTasksCollection'; 'category.primary'"/>
		<bind name="collectionDH" value="CC.task; 'secondaryTasksCollection'; 'category.secondary'"/>
		<bind name="firstEntityDH" value="'battleDataEntity'; CC.battleData"/>
		<bind name="watch" value="'battleType';	battleDataEntity.battleInfo.battleType"/>
		<bind name="watch" value="'gameModeId';	battleDataEntity.battleInfo.gameModeId"/>
		<bind name="watch" value="'headerTextPrimary'; 	(gameModeId == GameMode.PVE) ? 'IDS_PRIMARYHEADER' 	: 'IDS_PVP_PERSONAL_TASK'"/>
		<bind name="watch" value="'headerTextSecondary'; (gameModeId == GameMode.PVE) ? 'IDS_SECONDARYHEADER' 	: 'IDS_PVP_PERSONAL_TASK'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="primaryTasksCollection.length &gt; 0"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="instance" value="'TasksHeader'; {_headerText: headerTextPrimary}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="12px"/>
				</style>
				<bind name="collectionRepeatDH" value="CC.task; 'TaskItemScenario'; 'category.primary'; {}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="visible" value="secondaryTasksCollection.length &gt; 0"/>
			<block>
				<style>
					<width value="100%"/>
					<marginBottom value="4px"/>
				</style>
				<bind name="instance" value="'TasksHeader'; {_headerText: headerTextSecondary}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="collectionRepeatDH" value="CC.task; 'TaskItemScenario'; 'category.secondary'; {}"/>
			</block>
		</block>
	</block>
	<block className="TasksHeader">
		<style>
			<width value="100%"/>
		</style>
		<block type="text">
			<style>
				<marginBottom value="12px"/>
				<width value="100%"/>
			</style>
			<styleClass value="$TextDefaultBold23NM"/>
			<bind name="text" value="_headerText"/>
		</block>
	</block>
	<block className="TaskItemScenario">
		<bind name="watchDH" value="'name'; []; $dataRef.ref.task ? $dataRef.ref.task.name : name"/>
		<bind name="watchDH" value="'type'; []; $dataRef.ref.task ? $dataRef.ref.task.progressType : type"/>
		<bind name="watchDH" value="'status'; ['$dataRef.ref.task.evStatusChanged']; $dataRef.ref.task ? $dataRef.ref.task.status : status"/>
		<bind name="dataRefDH" value="'progress'; '$dataRef.ref.progress'"/>
		<bind name="watchDH" value="'progressValue'; ['progress.evChanged']; $dataRef.ref.progress ? progress.value : progressValue"/>
		<bind name="watchDH" value="'progressMax'; ['progress.evChanged']; $dataRef.ref.progress ?  progress.max : progressMax"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
			<marginBottom value="12px"/>
		</style>
		<bind name="watch" value="'taskText'; '&lt;body&gt;' + tr('IDS_BATTLE_TASK_TEXT_' + name) + ((type != null &amp;&amp; type == 1)	? ('&lt;h3&gt; ('+ progressValue + '/' + progressMax + ')&lt;/h3&gt;&lt;/body&gt;')
																																: '&lt;/body&gt;')"/>
		<block>
			<style>
				<position value="absolute"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_task_status" type="native">
				<bind name="gotoAndStop!" value="status == 2		? 'success' :
								status == 0 ? 'not_started' :
								status == 1	? 'not_started'
																		: 'fail'"/>
			</block>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginLeft value="24px"/>
				<leading value="-3"/>
				<styleSheet value="h3{color: #9CBABA}"/>
			</style>
			<bind name="style" value="'alpha'; status == 3 || status == 2  ? 0.5 : 0.85"/>
			<styleClass value="$TextDefault19NM"/>
			<bind name="text" value="taskText"/>
		</block>
	</block>
	<block className="ListWithBullets">
		<style>
			<width value="100%"/>
		</style>
		<bind name="repeat" value="_bulletsArr; 'ListWithBulletsElement'; {_width: _width, _bulletType: _bulletType, _textClass: _textClass}"/>
	</block>
	<block className="ListWithBulletsElement">
		<bind name="visible" value="_text || ($value.length &gt; 0)"/>
		<bind name="watch" value="'bulletIndex'; _bulletIndex ? _bulletIndex : false"/>
		<bind name="style" value="'width'; _width ? _width : '100%'"/>
		<bind name="style" value="'marginBottom'; _marginBottom ? _marginBottom : '12px'"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="visible" value="_bulletType != 'none'"/>
				<style>
					<marginRight value="10px"/>
					<width value="100%f"/>
				</style>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<bind name="text" value="_bulletType ? _bulletType : '•'"/>
			</block>
			<block type="text">
				<style>
					<leading value="-3"/>
					<width value="100%"/>
				</style>
				<bind name="class" value=" _textClass ? _textClass : '$TextDefaultNM'"/>
				<bind name="text" value="_text	? bulletIndex == true	? _text + ($index + 1) 
														: _text
								: $value"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="PlayerAccount">
		<bind name="primaryEntityDH" value="'pageEntity'; CC.insetPage; LobbyConstants.PLAYER_PROFILE"/>
		<bind name="watchDH" value="'page'; ['pageEntity.insetPage.evUpdate']; pageEntity.insetPage.page"/>
		<bind name="watchDH" value="'pageData'; ['pageEntity.dataComponent.evDataChanged']; pageEntity.dataComponent.data"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="catch" value="'evAccountLevelingItemClicked'"/>
		<bind name="firstEntityDH" value="'accountLevelEntity'; CC.accountLevel"/>
		<bind name="watchDH" value="'curAccountLevel'; ['accountLevelEntity.accountLevel.evLevelChanged']; accountLevelEntity.accountLevel.level"/>
		<bind name="firstEntityDH" value="'accountsRewardEntity'; CC.accountLevelingRewards"/>
		<bind name="watchDH" value="'nextReward'; ['accountsRewardEntity.accountLevelingRewards.evNextRewardPointsChanged']; accountsRewardEntity.accountLevelingRewards.nextRewardPoints"/>
		<bind name="catch" value="'addedToStage'; {	carouselItemSelectedIndex: 	pageData.isPortBannerClicked 	? pageData.rewardTypeReason == 'feature'	? curAccountLevel
																								: pageData.rewardTypeReason == 'promo'	? -1*pageData.promoRewardBattles
																																						: (-1*nextReward)
																								: (curAccountLevel - 1),

									carouselScrollIndex: 	pageData.isPortBannerClicked 	? pageData.rewardTypeReason == 'feature'	? (curAccountLevel - 1)
																							: pageData.rewardTypeReason == 'promo'	? (pageData.promoRewardLevel - 1)
																																					: (curAccountLevel - 1)
																							: (curAccountLevel - 2),
									currentImageIdx: 1}"/>
		<styleClass value="$Fullsize"/>
		<style>
			<paddingLeft value="188px"/>
		</style>
		<block className="al_carousel_divider" type="native">
			<styleClass value="$MiddleAligned"/>
			<style>
				<width value="1280:868,1920:1052aw"/>
				<align value="middle"/>
				<position value="absolute"/>
				<top value="720:253,1080:352ah"/>
				<hitTest value="false"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<height value="300px"/>
					<alpha value="1.2"/>
					<hitTest value="false"/>
					<position value="absolute"/>
					<top value="2px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/AL_bg_info.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<style>
					<align value="middle"/>
					<marginTop value="720:60,1080:160ah"/>
					<marginBottom value="720:0,1080:90ah"/>
				</style>
				<block>
					<style>
						<width value="10px"/>
						<marginRight value="32px"/>
					</style>
					<block className="button_slide_left" type="native">
						<bind name="name" value="'buttonAccountCarouselLeft'"/>
						<params>
							<param name="focusable" value="false"/>
						</params>
						<bind name="enabled" value="ALCarouselCanScrollLeft"/>
						<bind name="event" value="'click'; scrollLeftByOneUnit"/>
					</block>
				</block>
				<block>
					<params>
						<param name="name" value="AccountCarouselMainBlock"/>
					</params>
					<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerAccountCarousel"/>
					<bind name="event" value="'profileCarousel.scrollOneUnitLeft'; scrollLeftByOneUnit"/>
					<bind name="event" value="'profileCarousel.scrollOneUnitRight'; scrollRightByOneUnit"/>
					<bind name="stageSize"/>
					<bind name="watch" value="'maxStageWidth'; stageWidth &lt; 1920 ? stageWidth : 1920"/>
					<bind name="watch" value="'widthOfItem'; math.round((maxStageWidth-1280)/(1920-1280)*(424-332)+332)"/>
					<style>
						<width value="1280:868,1920:1052aw"/>
						<height value="245px"/>
						<overflow value="scroll"/>
						<scrollArea value="ModernScrollAreaHorizontal"/>
						<scrollbarController value="lesta.unbound.style.UbScrollingControllerCarousel"/>
						<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
						<itemWidth value="1280:332,1920:424aw"/>
						<itemHeight value="164px"/>
						<backgroundColor value="0x01000000"/>
						<wheelScrollSpeed value="1280:332,1920:424aw"/>
						<generatorOffsetLeft value="332"/>
						<generatorOffsetRight value="332"/>
					</style>
					<bind name="event" value="'addedToStage'; setIndex; carouselScrollIndex"/>
					<bind name="catch" value="'evPromoRewardBannerClicked'"/>
					<bind name="dispatch" value="'evPromoRewardBannerClicked'; 'evDelayedPromoRewardBannerClicked'; {}; 2; 0.05"/>
					<bind name="event" value="'evDelayedPromoRewardBannerClicked'; scrollToIndex; carouselScrollIndex"/>
					<bind name="generatorDH" value="CC.accountLevelingStep; 'AccountLevellingProgressBar'; 'sorted'; {_carouselItemSelectedIndex: carouselItemSelectedIndex}"/>
					<bind name="scrollController" value="'ALCarousel'; widthOfItem; 1"/>
					<block>
						<style>
							<width value="1px"/>
							<height value="1px"/>
							<marginRight value="1280:-151,1920:-243aw"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="10px"/>
						<marginLeft value="32px"/>
					</style>
					<block className="button_slide_right" type="native">
						<bind name="name" value="'buttonAccountCarouselRight'"/>
						<params>
							<param name="focusable" value="false"/>
						</params>
						<bind name="enabled" value="ALCarouselCanScrollRight"/>
						<bind name="event" value="'click'; scrollRightByOneUnit"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
				<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
				<bind name="collectionDH" value="CC.accountLevelingStep; 'accountLevelingSteps'"/>
				<bind name="entityDH" value="'accountLevelStepEntity'; accountLevelingSteps[carouselItemSelectedIndex].id"/>
				<bind name="watchDH" value="'stepFeature';			['accountLevelStepEntity.accountLevelingStep.evFeaturesChanged'];
													accountLevelStepEntity.accountLevelingStep.features"/>
				<bind name="watchDH" value="'featureStepPoints';		['accountLevelStepEntity.accountLevelingStep.evThisStepPointsChanged'];
													accountLevelStepEntity.accountLevelingStep.thisStepPoints"/>
				<bind name="watch" value="'rewardStepPoints'; math.abs(carouselItemSelectedIndex)"/>
				<bind name="collectionDH" value="CC.accountPromoRewardBanner; 'promoRewardCollectionSorted'; 'upcoming.sorted'"/>
				<bind name="entityDH" value="'promoRewardEntity'; promoRewardCollectionSorted[0].id"/>
				<bind name="watchDH" value="'promoRewardBattles';	['promoRewardEntity.accountPromoRewardBanner.evChanged'];
													promoRewardEntity.accountPromoRewardBanner.battles"/>
				<bind name="watch" value="'isPromoReward'; promoRewardCollectionSorted.length &gt; 0"/>
				<bind name="watch" value="'isPromoRewardTaken'; promoRewardBattles &lt;= currentPoints"/>
				<bind name="firstEntityDH" value="'accountsRewardEntity'; CC.accountLevelingRewards"/>
				<bind name="watchDH" value="'rewardsDict';		['accountsRewardEntity.accountLevelingRewards.evRewardsDictChanged'];		
												accountsRewardEntity.accountLevelingRewards.rewardsDict[rewardStepPoints]"/>
				<bind name="watch" value="'isFeature'; carouselItemSelectedIndex &gt;= 0"/>
				<bind name="handleEventDH" value="'accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged'; 'currentPointsChanged'; {}; 2"/>
				<bind name="dispatch" value="'currentPointsChanged'; (isFeature || rewardsDict.length &gt; 0) ? null : 'evAccountLevelingItemClicked'; { carouselItemSelectedIndex: curAccountLevel - 1,
																																	 currentImageIdx: 1}; 2; 0.05"/>
				<bind name="watch" value="'galleryItemRendererParams';	isFeature 	?	[{	accountLevel: carouselItemSelectedIndex, 
																			stepFeature: stepFeature,
																			points: featureStepPoints}]
																		:	rewardsDict"/>
				<bind name="var" value="{ isHackedStep: false }"/>
				<bind name="changeDispatch" value="carouselItemSelectedIndex; 'selectedAccountStepChanged'; null; 2"/>
				<bind name="catch" value="'selectedAccountStepChanged'; {isHackedStep: true}"/>
				<bind name="dispatch" value="'selectedAccountStepChanged'; 'selectedAccountStepChangedDelayed'; {}; 2; 0.05"/>
				<bind name="catch" value="'selectedAccountStepChangedDelayed'; { isHackedStep: false }"/>
				<style>
					<marginLeft value="1280:70,1480:170aw"/>
				</style>
				<bind name="instance" value="'GalleryViewer';	isHackedStep ?	null :	{
																			_galleryItemRenderer: 'AccountLevellingStepInfo',
																			_galleryItemRendererParams: galleryItemRendererParams,
																			_galleryItemRendererImageIndicator: 'SelectedImageIndicatorAccountLeveling',
																			_galleryImageWidth: 844,
																			_galleryImageHeight: 265,
																			_galleryItemRendererImageIndicatorMarginLeft: 298,
																			_autoSwitchDelay: 8,
																			_currentImageIdx: currentImageIdx ? currentImageIdx : 1,
																			_arrowsDisabled: true
																		}"/>
			</block>
		</block>
		<bind name="watch" value="'isPromoBannerVisible'; (isPromoReward &amp;&amp; !isPromoRewardTaken)"/>
		<block>
			<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: 'IDS_MOVE_TO_THE_REWARD'}], _maxWidth: 300}"/>
			<style>
				<position value="absolute"/>
				<right value="20"/>
				<bottom value="46"/>
			</style>
			<bind name="instance" value="'PromoRewardBanner'; isPromoBannerVisible	? {	_carouselItemSelectedIndex: carouselItemSelectedIndex,
																		_isPortBanner: false,
																		_isFromPortPromoBanner: (pageData.isPortBannerClicked &amp;&amp; pageData.rewardTypeReason == 'promo') }
																	: null"/>
		</block>
	</block>
	<css name="$TextDefault12NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="12"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault13NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold13NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="13"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultNM">
		<fontFamily value="$WWSDefaultFont"/>
		<leading value="-3"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBoldNM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<marginText value="-3px|-3px|-6px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault17NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<marginText value="-3px|-4px|-7px|-6px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold17NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<marginText value="-3px|-3px|-7px|-6px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault19NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<marginText value="-3px|-3px|-7px|-5px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold19NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="19"/>
		<marginText value="-3px|-3px|-8px|-6px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault21NM">
		<fontFamily value="$WWSDefaultFont"/>
		<leading value="-4"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<marginText value="-3px|-3px|-8px|-7px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold21NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<marginText value="-3px|-3px|-8px|-7px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold23NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="23"/>
		<marginText value="-3px|-3px|-9px|-6px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault25NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<marginText value="-3px|-3px|-9px|-8px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold25NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="25"/>
		<marginText value="-3px|-3px|-9px|-8px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefault27NM">
		<fontFamily value="$WWSDefaultFont"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="27"/>
		<marginText value="-3px|-3px|-10px|-8px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold30NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="30"/>
		<marginText value="-3px|-4px|-11px|-8px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold36NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="36"/>
		<marginText value="-3px|-4px|-12px|-10px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold40NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="40"/>
		<marginText value="-3px|-4px|-13px|-10px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold46NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="46"/>
		<marginText value="-3px|-4px|-12px|-10px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold50NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="50"/>
		<marginText value="-3px|-4px|-15px|-13px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextDefaultBold60NM">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="60"/>
		<marginText value="-3px|-4px|-20px|-15px"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextWithoutGlow17NM">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="17"/>
		<marginText value="-3px|-4px|-7px|-6px"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextWithoutGlowBold23NM">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="23"/>
		<marginText value="-3px|-3px|-9px|-6px"/>
		<selectable value="false"/>
		<textColor value="0xFFFFFF"/>
	</css>
	<css name="$TextCarouselShipStatus">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="17"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF9933"/>
	</css>
	<block className="CarouselItem">
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="watchDH" value="'windowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.state"/>
		<bind name="watchDH" value="'notReadyWindowState'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.notReadyWindowState"/>
		<bind name="watchDH" value="'windowInset'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.inset"/>
		<bind name="watchDH" value="'windowInsetLabel'; ['trainingRoomEntity.trainingRoomWindowState.evUpdate']; trainingRoomEntity.trainingRoomWindowState.insetLabel"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'slimClientData'"/>
		<bind name="watch" value="'formationType'; !!trainingRoomEntity ? 'TRAINING_ROOM' : 'DIVISION'"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="dataRefDH" value="'shipEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'excludedMain'; ['shipEntity.mainShipFilter.evUpdate']; shipEntity.mainShipFilter.excluded"/>
		<bind name="watch" value="'excluded'; excludedMain"/>
		<bind name="watchDH" value="'isNeedRepair'; ['shipEntity.ownShip.evUpdateDockState']; shipEntity.ownShip.isNeedRepair"/>
		<bind name="watchDH" value="'isNeedShell'; ['shipEntity.ownShip.evUpdateDockState']; shipEntity.ownShip.isNeedShell"/>
		<bind name="watchDH" value="'isLocked'; ['shipEntity.ownShip.evUpdateLock']; shipEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation'; ['shipEntity.ownShip.evUpdateLock']; shipEntity.ownShip.isInFormation"/>
		<bind name="watchDH" value="'isDownloaded'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent.isDownloaded"/>
		<bind name="watchDH" value="'flagName'; ['shipEntity.ship.evUpdate']; shipEntity.ship.flagName"/>
		<bind name="watchDH" value="'shipType'; ['shipEntity.ship.evUpdate']; shipEntity.ship.shipType"/>
		<bind name="watchDH" value="'levelRome'; ['shipEntity.ship.evUpdate']; shipEntity.ship.levelRome"/>
		<bind name="watchDH" value="'fullName'; ['shipEntity.ship.evUpdate']; shipEntity.ship.fullName"/>
		<bind name="watchDH" value="'shipId'; []; shipEntity.ship.id"/>
		<bind name="name" value="'carouselItem' + fullName"/>
		<bind name="watch" value="'isSelected'; shipId == _selectedShipId"/>
		<bind name="feature" value="'17'; ''"/>
		<bind name="action" value="'click'; isDownloaded ? 'selectShip' : null; {shipId: shipId}"/>
		<style>
			<width value="216px"/>
		</style>
		<bind name="style" value="'height'; _isSmallCarouselView ? '63px' : '126px'"/>
		<block>
			<bind name="name" value="'carouselItem' + $index"/>
			<bind name="style" value="'alpha'; !excluded ? 1 : 0.3"/>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block className="BlurMapLow">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap5" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.2"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="dock_thumb_normal_9s" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="popup" value="'ShipExtendedTooltipUB2';
											{shipId: shipId,
											_needService: (isNeedRepair || isNeedShell),
											_isLocked: isLocked
											};
											
											1;{type:'lesta.unbound.bindings.popup.ReasonPopupSpacingComponent',params:{directionsPriority:['top'],reasonOffsetTop:10,}};{reason:{mouseOver:{action:'show',params:{duration:0.3,startProps:{alpha:0,x:0,y:10},finishProps:{alpha:1,x:0,y:0},delay:0.7}},mouseOut:{action:'hide',params:{duration:0.1,startProps:{alpha:1,x:0,y:0},finishProps:{alpha:0,x:0,y:-5}}},removedFromStage:{action:'hide',params:{duration:0.1,startProps:{alpha:1,x:0,y:0},finishProps:{alpha:0,x:0,y:-5}}},popup_opened:{action:'hideByPriority',params:{duration:0.1,startProps:{alpha:1,x:0,y:0},finishProps:{alpha:0,x:0,y:-5}}}},reasonScope:{onLostTop:{action:'hide',params:{duration:0.1,startProps:{alpha:1,x:0,y:0},finishProps:{alpha:0,x:0,y:-5}}}}}
											"/>
				<bind name="menu" value="'ShipTreeMenu'; { shipId: shipId, _disableShipActions: _disableShipActions }"/>
				<bind name="doubleClickEnabled" value="feature_17 != 'locked' ? true : false"/>
				<bind name="action" value="'doubleClick'; !_disableShipActions ? 'changeInset' : ''; { inset: LobbyConstants.SHIP_MODULES }"/>
				<bind name="soundSet" value="'carousel_item'"/>
				<bind name="selected" value="isSelected"/>
				<bind name="name" value="'carouselItem' + fullName + '_indicator'"/>
			</block>
			<block>
				<bind name="name" value="excluded ? 'excluded' : 'included'"/>
				<bind name="instance" value="'ShipCarouselSlotWrapper';
				{
					_isSmallCarouselView : _isSmallCarouselView,
					_data : {
						isNeedRepair: isNeedRepair,
						isNeedShell: isNeedShell,
						isLocked: isLocked,
						shipCountry: flagName,
						shipId: shipId,
						shipType: shipType,
						shipLevelRome: levelRome,
						rollOver: rollOver,
						isInFormation: isInFormation,
						_formationType: formationType,
						_selected: isSelected,
						_rollOver: rollOver,
						_mouseDown: mouseDown
					}
				}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!(isDownloaded)"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="action" value="'click'; 'exitGameAndContinueDownloading'"/>
			<bind name="tooltip" value="'MouseInstructionTooltip'; !(isDownloaded)	? { _mouseInstructions:		[{_type: 'warning', _instructionText: shipInfo.isEventLike	? 'IDS_ENTER_IN_FULL_VERSION_FOR_ANNOUNCE_SHIPS'
																																							: 'IDS_ENTER_IN_FULL_VERSION_FOR_SHIPS'},
																								 {_type: 'left', _instructionText: 'IDS_EXIT_AND_CONTINUE_DOWNLOADING_MOUSE_INSTRUCTION'}], 
																								  _maxWidth: 250 }
																	: null"/>
			<block>
				<bind name="transition" value="rollOver; 0.07; {alpha: 0.7}; {alpha: 1}"/>
				<style>
					<hitTest value="false"/>
					<width value="39px"/>
					<height value="39px"/>
				</style>
				<styleClass value="$MiddleAligned"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_download.png'"/>
			</block>
		</block>
	</block>
	<block className="ShipCarouselSlotWrapper">
		<bind name="child" value="_isSmallCarouselView; _data; 'ShipCarouselDefaultSlot'; 'ShipCarouselSmallSlot'"/>
	</block>
	<block className="ShipCarousel">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
		<bind name="watch" value="'rowsCount'; 	(!isSmallCarouselView)	? 1	:
								_fixedCarouselRows		? _fixedCarouselRows :
								curRowCountIndex == 0 	? 2 : 
								curRowCountIndex == 1 	? 3
														: 4"/>
		<bind name="watch" value="'carouselHeight'; !isSmallCarouselView	? 126 + 6
														: (rowsCount * 63) + 6"/>
		<style>
			<flow value="horizontal"/>
			<width value="100%"/>
			<height value="1px"/>
			<marginBottom value="-6px"/>
		</style>
		<bind name="style" value="'height'; carouselHeight +  'px'"/>
		<bind name="name" value="'carouselPlayerShips'"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxSlotsOnScreen'; isSmallCarouselView ? ((stageWidth - 58) / 214) / 2 : ((stageWidth - 58) / 214) "/>
		<block>
			<style>
				<width value="20px"/>
				<height value="100%"/>
			</style>
			<block className="button_slide_left" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="enabled" value="ShipsCarouselCanScrollLeft"/>
				<bind name="name" value="'buttonCarouselLeft'"/>
				<bind name="dispatch" value="'buttonClick'; 'ShipsCarouselScrollPrev'"/>
			</block>
		</block>
		<bind name="collectionDH" value="_shipFilterId; 'filteredCarouselShips'; 'filtered.sorted'"/>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<width value="100%f"/>
				<height value="100%"/>
				<overflow value="scroll"/>
				<scrollArea value="ModernScrollAreaHorizontal"/>
				<scrollbarController value="lesta.unbound.style.UbScrollingControllerTouch"/>
				<wheelScrollSpeed value="216"/>
				<layout value="lesta.unbound.layout.measure.CarouselLayout"/>
				<itemWidth value="216px"/>
				<itemHeight value="126px"/>
			</style>
			<bind name="style" value="'flow'; isSmallCarouselView ? 'vtile' : 'horizontal'"/>
			<bind name="style" value="'itemHeight'; isSmallCarouselView ? '63px' : '126px'"/>
			<bind name="name" value="'shipCarouseContaner'"/>
			<bind name="generatorDH" value="_shipFilterId; 'CarouselItem'; _isFilteredShipsHided ? 'filtered.sorted'
																				: 'sorted'; {	shipFilterId: _shipFilterId,
																								_selectedShipId: shipIdForModuleInset,
																								_isSmallCarouselView: isSmallCarouselView,
																								_disableShipActions: _disableShipActions}"/>
			<bind name="scrollController" value="'ShipsCarousel'; 216; rowsCount"/>
			<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerShipsCarousel; _shipFilterId; 'sorted'; 'ShipsCarousel'; _scrollToStart"/>
			<bind name="dispatch" value="'addedToStage'; 'ShipsCarouselScrollToSelected'"/>
			<block>
				<bind name="visible" value="(filteredCarouselShips.length == 0 &amp;&amp; _isFilteredShipsHided)"/>
				<block className="ShipCarouselNoCompatibleShips">
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
					<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CAROUSEL_NO_COMPATIBLE_SHIPS_TOOLTIP'}; 0"/>
					<block className="inner_panel" type="native">
						<styleClass value="$FullsizeAbsolute"/>
					</block>
					<block>
						<style>
							<width value="100%"/>
						</style>
						<styleClass value="$MiddleVAligned"/>
						<block type="text">
							<style>
								<width value="100%"/>
								<textAlign value="center"/>
								<marginRight value="8px"/>
								<marginLeft value="8px"/>
								<leading value="0"/>
							</style>
							<styleClass value="$TextDefaultBold17NM"/>
							<bind name="class" value="'$FontColorUnready'"/>
							<text value="IDS_CAROUSEL_NO_COMPATIBLE_SHIPS"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="_addShipSlotsBuyBlocks"/>
				<block className="ShipCarouselPurchaseShip">
					<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
					<bind name="watchDH" value="'accountSlotsNum'; ['resourceEntity.accountResource.evChangedSlotsNum']; resourceEntity.accountResource.slotsNum"/>
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
					<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
					<block className="inner_panel" type="native">
						<styleClass value="$Fullsize"/>
						<style>
							<position value="absolute"/>
						</style>
					</block>
					<block>
						<styleClass value="$MiddleAligned"/>
						<styleClass value="$MiddleVAligned"/>
						<block>
							<style>
								<width value="190px"/>
							</style>
							<block className="button_dock" type="native">
								<bind name="tooltip" value="'PurchaseShipTooltip'; {}; 1"/>
								<style>
									<width value="100%"/>
									<height value="30px"/>
								</style>
								<bind name="enabled" value="_enabled"/>
								<bind name="action" value="'buttonClick'; 'changeInset'; { inset: LobbyConstants.SHIP_RESEARCH_TREE}"/>
								<bind name="dispatch" value="'buttonClick'; 'hideCrew'"/>
								<block>
									<style>
										<marginTop value="8px"/>
										<hitTest value="false"/>
									</style>
									<styleClass value="$MiddleAligned"/>
									<block type="text">
										<styleClass value="$TextDefaultBold"/>
										<styleClass value="$MiddleVAligned"/>
										<text value="IDS_PURCHASE_SHIP_UPPER_CASE"/>
									</block>
									<style>
										<flow value="horizontal"/>
									</style>
								</block>
							</block>
						</block>
						<block>
							<bind name="visible" value="accountSlotsNum &gt; 0"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<hitTest value="false"/>
								<marginTop value="-6px"/>
							</style>
							<block type="text">
								<bind name="name" value="'ShipCarouselFreeSlots'"/>
								<styleClass value="$TextDefault"/>
								<bind name="class" value="'$FontColorBlueish'"/>
								<bind name="text" value="tr('IDS_FREE_SLOTS')  + ' ' + accountSlotsNum"/>
							</block>
						</block>
						<block>
							<bind name="visible" value="accountSlotsNum == 0"/>
							<styleClass value="$MiddleAligned"/>
							<style>
								<hitTest value="false"/>
								<marginTop value="-8px"/>
							</style>
							<block type="text">
								<styleClass value="$TextDefaultBold"/>
								<styleClass value="$FontColorUnready"/>
								<style>
									<maxWidth value="170"/>
									<textAlign value="center"/>
								</style>
								<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_NO_FREE_SLOTS')"/>
							</block>
						</block>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="_addShipSlotsBuyBlocks"/>
				<block className="ShipCarouselPurchaseShipSlot">
					<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'SLOT_COST'; 'slotPrice'"/>
					<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
					<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
					<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
					<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
					<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
					<block className="inner_panel" type="native">
						<styleClass value="$Fullsize"/>
						<style>
							<position value="absolute"/>
						</style>
					</block>
					<block>
						<styleClass value="$MiddleVAligned"/>
						<styleClass value="$MiddleAligned"/>
						<block>
							<style>
								<width value="190px"/>
							</style>
							<block className="button_dock" type="native">
								<bind name="tooltip" value="'PurchaseSlotTooltip'; {}; 1"/>
								<style>
									<width value="100%"/>
									<height value="30px"/>
								</style>
								<bind name="enabled" value="_enabled"/>
								<bind name="name" value="'buttonBuySlots'"/>
								<bind name="input"/>
								<block>
									<style>
										<marginTop value="8px"/>
									</style>
									<styleClass value="$MiddleAligned"/>
									<style>
										<mouseEnabled value="false"/>
										<mouseChildren value="false"/>
									</style>
									<block type="text">
										<styleClass value="$TextDefaultBold"/>
										<styleClass value="$MiddleVAligned"/>
										<text value="IDS_PURCHASE_SLOT_FOR_UPPER_CASE"/>
									</block>
									<style>
										<flow value="horizontal"/>
									</style>
								</block>
							</block>
						</block>
						<block>
							<styleClass value="$MiddleAligned"/>
							<style>
								<marginTop value="-6px"/>
							</style>
							<bind name="instance" value="'PriceTag'; { priceInfo: slotPrice.prices[0], _showDiscountTag:true}"/>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<height value="100%"/>
				<width value="20px"/>
			</style>
			<block className="button_slide_right" type="native">
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$MiddleAligned"/>
				<params>
					<param name="focusable" value="false"/>
				</params>
				<bind name="enabled" value="ShipsCarouselCanScrollRight"/>
				<bind name="name" value="'buttonCarouselRight'"/>
				<bind name="dispatch" value="'buttonClick'; 'ShipsCarouselScrollNext'"/>
			</block>
		</block>
	</block>
	<css name="$CarouselServiceBlock">
		<marginBottom value="3px"/>
		<height value="120px"/>
		<width value="204px"/>
		<marginLeft value="8px"/>
		<marginRight value="8px"/>
		<marginTop value="3px"/>
	</css>
	<css name="$CarouselServiceBlockSmall">
		<marginBottom value="3px"/>
		<height value="88px"/>
		<width value="204px"/>
		<marginLeft value="8px"/>
		<marginRight value="8px"/>
		<marginTop value="3px"/>
	</css>
	<css name="$CarouselServiceBlock3rows">
		<marginBottom value="3px"/>
		<height value="182px"/>
		<width value="204px"/>
		<marginLeft value="8px"/>
		<marginRight value="8px"/>
		<marginTop value="3px"/>
	</css>
	<css name="$CarouselServiceBlock4rows">
		<marginBottom value="3px"/>
		<height value="246px"/>
		<width value="204px"/>
		<marginLeft value="8px"/>
		<marginRight value="8px"/>
		<marginTop value="3px"/>
	</css>
	<css name="$ShipSlotBottomDarkPanel">
		<bottom value="0px"/>
		<height value="28px"/>
		<hitTest value="false"/>
		<width value="100%"/>
		<backgroundColor value="0xFF000000"/>
		<position value="absolute"/>
		<alpha value="0.3"/>
	</css>
	<block className="ShipCarouselPurchaseShip">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountSlotsNum'; ['resourceEntity.accountResource.evChangedSlotsNum']; resourceEntity.accountResource.slotsNum"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
		<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
		<block className="inner_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<block>
				<style>
					<width value="190px"/>
				</style>
				<block className="button_dock" type="native">
					<bind name="tooltip" value="'PurchaseShipTooltip'; {}; 1"/>
					<style>
						<width value="100%"/>
						<height value="30px"/>
					</style>
					<bind name="enabled" value="_enabled"/>
					<bind name="action" value="'buttonClick'; 'changeInset'; { inset: LobbyConstants.SHIP_RESEARCH_TREE}"/>
					<bind name="dispatch" value="'buttonClick'; 'hideCrew'"/>
					<block>
						<style>
							<marginTop value="8px"/>
							<hitTest value="false"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<block type="text">
							<styleClass value="$TextDefaultBold"/>
							<styleClass value="$MiddleVAligned"/>
							<text value="IDS_PURCHASE_SHIP_UPPER_CASE"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<bind name="visible" value="accountSlotsNum &gt; 0"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<hitTest value="false"/>
					<marginTop value="-6px"/>
				</style>
				<block type="text">
					<bind name="name" value="'ShipCarouselFreeSlots'"/>
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<bind name="text" value="tr('IDS_FREE_SLOTS')  + ' ' + accountSlotsNum"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="accountSlotsNum == 0"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<hitTest value="false"/>
					<marginTop value="-8px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold"/>
					<styleClass value="$FontColorUnready"/>
					<style>
						<maxWidth value="170"/>
						<textAlign value="center"/>
					</style>
					<bind name="substitute" value="5; {'[icon]': 'icon_warning_orange_bm'}; '[icon] ' + tr('IDS_NO_FREE_SLOTS')"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ShipCarouselNoCompatibleShips">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
		<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CAROUSEL_NO_COMPATIBLE_SHIPS_TOOLTIP'}; 0"/>
		<block className="inner_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block type="text">
				<style>
					<width value="100%"/>
					<textAlign value="center"/>
					<marginRight value="8px"/>
					<marginLeft value="8px"/>
					<leading value="0"/>
				</style>
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="class" value="'$FontColorUnready'"/>
				<text value="IDS_CAROUSEL_NO_COMPATIBLE_SHIPS"/>
			</block>
		</block>
	</block>
	<block className="ShipCarouselPurchaseShipSlot">
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'SLOT_COST'; 'slotPrice'"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'curRowCountIndex'; (userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
		<bind name="class" value="	!(isSmallCarouselView) 	? '$CarouselServiceBlock' :
					curRowCountIndex == 0 	? '$CarouselServiceBlock'		:
					curRowCountIndex == 1 	? '$CarouselServiceBlock3rows'	:
					curRowCountIndex == 2 	? '$CarouselServiceBlock4rows'
											: '$CarouselServiceBlock'"/>
		<block className="inner_panel" type="native">
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAligned"/>
			<block>
				<style>
					<width value="190px"/>
				</style>
				<block className="button_dock" type="native">
					<bind name="tooltip" value="'PurchaseSlotTooltip'; {}; 1"/>
					<style>
						<width value="100%"/>
						<height value="30px"/>
					</style>
					<bind name="enabled" value="_enabled"/>
					<bind name="name" value="'buttonBuySlots'"/>
					<bind name="input"/>
					<block>
						<style>
							<marginTop value="8px"/>
						</style>
						<styleClass value="$MiddleAligned"/>
						<style>
							<mouseEnabled value="false"/>
							<mouseChildren value="false"/>
						</style>
						<block type="text">
							<styleClass value="$TextDefaultBold"/>
							<styleClass value="$MiddleVAligned"/>
							<text value="IDS_PURCHASE_SLOT_FOR_UPPER_CASE"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="-6px"/>
				</style>
				<bind name="instance" value="'PriceTag'; { priceInfo: slotPrice.prices[0], _showDiscountTag:true}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipCarouselDefaultSlot">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<style>
			<width value="204px"/>
			<height value="120px"/>
		</style>
		<bind name="transition" value="_selected; 0.15; {width: 204, height: 120}; {width: 216, height: 126}"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="watchDH" value="'crewId';		['shipEntity.ownShip.evCrewChanged'];			shipEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'isPrimary';		['shipEntity.ownShip.evIsPrimaryChanged'];		shipEntity.ownShip.isPrimary"/>
		<bind name="watchDH" value="'costTotal';		['shipEntity.ownShip.evUpdateDockState'];		shipEntity.ownShip.costTotal"/>
		<bind name="watchDH" value="'timeRent';		['shipEntity.ownShip.evUpdateDockState'];		shipEntity.ownShip.timeRent"/>
		<bind name="watchDH" value="'expMultiply';	['shipEntity.ownShip.evExpMultiplyChanged'];	shipEntity.ownShip.expMultiply"/>
		<bind name="firstEntityDH" value="'enterBattleEntity'; CC.enterBattle"/>
		<bind name="watchDH" value="'selectedBattle'; ['enterBattleEntity.enterBattle.evBattleTypesChanged']; enterBattleEntity.enterBattle.selectedBattle"/>
		<bind name="watch" value="'freezeListPath'; shipEntity.ownShip.id + '_' + selectedBattle.type"/>
		<bind name="primaryEntityDH" value="'shipFreezeListEntity'; CC.freezeList; freezeListPath"/>
		<bind name="watchDH" value="'freezeListArr'; ['shipFreezeListEntity.freezeList.evUpdate']; shipFreezeListEntity.freezeList.items"/>
		<bind name="watch" value="'isShipFrozen'; (shipFreezeListEntity ? true : false)"/>
		<block className="thumb_hl_red" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<alpha value="1.2"/>
			</style>
			<bind name="selected" value="_selected"/>
			<bind name="visible" value="((isNeedRepair || isNeedShell || !shipInfoSlim.isDownloaded || isShipFrozen) ? true : false)"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<position value="absolute"/>
					<left value="2px"/>
					<top value="2px"/>
					<width value="196px"/>
					<height value="118px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; (isNeedRepair || isNeedShell || isLocked || (!shipInfoSlim.isDownloaded) || (crewId == 0) || isShipFrozen) ? 0.3 : 0.5"/>
				<bind name="transition" value="!_selected; 0.15; {width: 208, height: 126}; {width: 196, height: 118} "/>
				<bind name="instance" value="'NationFlagsBig'; {_width: '100%', _height: '100%', shipCountry: shipInfo.flagName}"/>
			</block>
			<block>
				<bind name="style" value="'alpha'; (isNeedRepair || isNeedShell || isLocked || (!shipInfoSlim.isDownloaded) || (crewId == 0) || isShipFrozen) ? 0.4 : 1"/>
				<style>
					<width value="204px"/>
					<height value="120px"/>
					<backgroundStretchX value="true"/>
					<backgroundStretchY value="true"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$MiddleAlignedAbsolutely"/>
				<styleClass value="$MiddleVAligned"/>
				<bind name="style" value="'backgroundImage'; 'url:' + shipInfo.pathPreview"/>
				<bind name="transition" value="_selected; 0.15; {width: 204, height: 120}; {width: 214, height: 126}"/>
			</block>
			<block>
				<bind name="tooltip" value="'SubTextTooltip'; {tooltipText: 'IDS_TOOLTIP_PRIMARY_SHIP', tooltipSubText: 'IDS_TOOLTIP_PRIMARY_SHIP_DESCRIPTION'}"/>
				<style>
					<position value="absolute"/>
					<right value="-1px"/>
					<top value="-1px"/>
				</style>
				<bind name="visible" value="isPrimary"/>
				<block className="icon_primary_ribbon" type="native"/>
			</block>
			<block>
				<bind name="visible" value="timeRent &gt; 0"/>
				<bind name="name" value="'timeRent_' + shipInfo.fullName"/>
				<style>
					<position value="absolute"/>
					<right value="3px"/>
					<top value="3px"/>
				</style>
				<bind name="instance" value="'RentTimer'; (timeRent &gt; 0)  ? {_timeRent: timeRent, _shipGroup: shipEntity.ship.group} : null"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'ShipSlotNameBackPanel'; {_selected: _selected, _rollOver: _rollOver}"/>
			</block>
			<block>
				<bind name="style" value="'alpha'; (isNeedRepair || isNeedShell || isLocked || !shipInfoSlim.isDownloaded || (crewId == 0) || isShipFrozen) ? 0.3 : 1"/>
				<styleClass value="$Fullsize"/>
				<style>
					<marginLeft value="8px"/>
					<marginTop value="4px"/>
					<marginRight value="8px"/>
					<marginBottom value="4px"/>
				</style>
				<block>
					<style>
						<height value="20px"/>
						<hitTest value="false"/>
						<left value="-2px"/>
					</style>
					<block>
						<style>
							<marginTop value="-3px"/>
							<marginLeft value="-4px"/>
						</style>
						<bind name="instance" value="'ShipIcon'; {_shipId: shipId}"/>
					</block>
					<block type="text">
						<styleClass value="$TextSecondaryBold"/>
						<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontColorGold' : '$FontColorWhite'"/>
						<style>
							<marginTop value="-1px"/>
							<marginLeft value="2px"/>
							<marginRight value="3px"/>
						</style>
						<bind name="text" value="shipLevelRome"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="-1px"/>
						<right value="0"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<style>
							<width value="128px"/>
							<textAlign value="right"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextDefaultBold"/>
						<bind name="class" value="'$LetterSpacingSmall'"/>
						<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontColorGold' : '$FontColorWhite'"/>
						<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
					</block>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="2px"/>
					</style>
					<bind name="watchDH" value="'bonusTagsVisible'; ['shipEntity.ship.evBonusTagsChanged']; (shipEntity.ship.bonusTags.length &gt; 0 || expMultiply &gt; 1)"/>
					<bind name="instance" value="'ShipBonusTags'; bonusTagsVisible	? {_shipEntityId: shipEntity.id}
																	: null"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(isAlterablePriceMenuVisible == false)"/>
			<bind name="name" value="'isLockedShip_' + shipInfo.fullName + '_' + isLocked"/>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ShipCarouselSlotStatus';	(isShipFrozen &amp;&amp; !(_rollOver))			? { _status:  toUpperCase(tr('IDS_SHIP_FROZEN_FOR_PVE')), isPositive: false, _small: true} :
														(isNeedRepair || isNeedShell) &amp;&amp; 
														!(_rollOver) &amp;&amp; !(_mouseDown) &amp;&amp; 
														crewId != 0								? { _status: toUpperCase(tr('IDS_NEED_SERVICE')), isPositive: false, _small: true} :
														isInFormation							? { _status: toUpperCase(tr('IDS_READY_TO_BATTLE_IN_' + toUpperCase(_formationType))), isPositive: true, _small: true } :
														isLocked								? { _status: toUpperCase(tr('IDS_IN_BATTLE')), isPositive: false, _small: true} :
														crewId == 0								? { _status: toUpperCase(tr('IDS_NO_CREW')), isPositive: false, _small: true}
																								: null "/>
			</block>
			<block>
				<bind name="name" value="isShipFrozen ? 'CarouselShipFreeze_' + shipInfo.fullName : ''"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="8px"/>
				</style>
				<bind name="instance" value="'CarouselShipFreeze'; (isShipFrozen &amp;&amp; !(_rollOver)) ? {_freezeListArr: freezeListArr} : null"/>
			</block>
		</block>
		<block className="ServiceUnfreezeButtons">
			<style>
				<width value="190px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
			<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
			<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
			<bind name="watch" value="'unFreezePriceIndex'; (userPrefs.unFreezePriceIndex == null) ? 0 : userPrefs.unFreezePriceIndex"/>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'CANCEL_BATTLE_LOCK_COOLDOWN_Cost'; 'pveCooldownCost'"/>
			<bind name="watch" value="'selectedPriceIndex'; (pveCooldownCost.prices.length &gt; 1 ? unFreezePriceIndex : 0)}"/>
			<bind name="catch" value="'selectedPriceChanged'"/>
			<bind name="dispatch" value="'selectedPriceChanged';'selectedPriceChangedDelayed'; {}; 2; 0.05"/>
			<bind name="action" value="'selectedPriceChangedDelayed'; 'setUserPref' ; {value: selectedPriceIndex, name: 'unFreezePriceIndex'}"/>
			<bind name="var" value="{isAlterablePriceMenuVisible: false}"/>
			<bind name="catch" value="'alterablePriceTagMenuVisibleChanged'"/>
			<bind name="watch" value="'isUnfreezeButtonVisible'; (isAlterablePriceMenuVisible || _rollOver) &amp;&amp; isShipFrozen"/>
			<bind name="watch" value="'isServiceButtonVisible';	(isAlterablePriceMenuVisible || _rollOver) &amp;&amp; !(isShipFrozen) &amp;&amp;
											(isNeedRepair || isNeedShell) &amp;&amp; crewId != 0"/>
			<bind name="fade" value="isServiceButtonVisible || isUnfreezeButtonVisible; 0.15; {alpha: 0, top: -10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2; 0.1"/>
			<bind name="instance" value="'DockButtonCostMedium'; isServiceButtonVisible 	? 	{	_label: 'IDS_SERVICE_C', _tooltipText: 'IDS_SERVICE_C', _prices: [{finalPrice: costTotal, currency: 'credits'}],
																			_action: 'serveShip', _actionParams: {shipId : shipEntity.ownShip.id}, _selectedPriceIndex: 0, _deficitLabel: 'IDS_SERVICE_COST'} :
											isUnfreezeButtonVisible	?	{	_label: 'IDS_UNFREEZE_FOR_PVE_BTN',
																			_deficitLabel: 'IDS_PVE_UNFREEZE_COST',
																			_tooltipText: 'IDS_UNFREEZE_COST_TOOLTIP',
																			_prices: pveCooldownCost.prices,
																			_selectedPriceIndex: selectedPriceIndex,
																			_request: 'openUnfreezeShipWindow',
																			_requestParams: {shipId: shipEntity.ownShip.id, battleType: selectedBattle.type}
																		}
																	:	null"/>
		</block>
	</block>
	<block className="ShipCarouselSmallSlot">
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<bind name="watchDH" value="'upgradableShipInfo'; ['shipEntity.upgradableShipInfo.evUpdate']; shipEntity.upgradableShipInfo"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="watchDH" value="'crewId';		['shipEntity.ownShip.evCrewChanged'];			shipEntity.ownShip.crewId"/>
		<bind name="watchDH" value="'isPrimary';		['shipEntity.ownShip.evIsPrimaryChanged'];		shipEntity.ownShip.isPrimary"/>
		<bind name="watchDH" value="'costTotal';		['shipEntity.ownShip.evUpdateDockState'];		shipEntity.ownShip.costTotal"/>
		<bind name="watchDH" value="'timeRent';		['shipEntity.ownShip.evUpdateDockState'];		shipEntity.ownShip.timeRent"/>
		<bind name="watchDH" value="'expMultiply';	['shipEntity.ownShip.evExpMultiplyChanged'];	shipEntity.ownShip.expMultiply"/>
		<bind name="firstEntityDH" value="'enterBattleEntity'; CC.enterBattle"/>
		<bind name="watchDH" value="'selectedBattle'; ['enterBattleEntity.enterBattle.evBattleTypesChanged']; enterBattleEntity.enterBattle.selectedBattle"/>
		<bind name="watch" value="'freezeListPath'; shipEntity.ownShip.id + '_' + selectedBattle.type"/>
		<bind name="primaryEntityDH" value="'shipFreezeListEntity'; CC.freezeList; freezeListPath"/>
		<bind name="watchDH" value="'freezeListArr'; ['shipFreezeListEntity.freezeList.evUpdate']; shipFreezeListEntity.freezeList.items"/>
		<bind name="watch" value="'isShipFrozen'; (shipFreezeListEntity ? true : false)"/>
		<style>
			<width value="204px"/>
			<height value="56px"/>
		</style>
		<bind name="transition" value="_selected; 0.15; {width: 204, height: 56}; {width: 216, height: 60}"/>
		<block className="thumb_hl_red" type="native">
			<bind name="visible" value="((isNeedRepair || isNeedShell || !shipInfoSlim.isDownloaded || isShipFrozen) ? true : false)"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
				<alpha value="1.2"/>
			</style>
			<bind name="selected" value="_selected"/>
		</block>
		<block>
			<styleClass value="$Fullsize"/>
			<block>
				<style>
					<position value="absolute"/>
					<alpha value="0.6"/>
					<top value="2px"/>
					<width value="95px"/>
					<height value="56px"/>
					<hitTest value="false"/>
				</style>
				<bind name="style" value="'alpha'; ((isNeedRepair || isNeedShell || isLocked || (crewId == 0) || !shipInfoSlim.isDownloaded || isShipFrozen) ? 0.4 : 0.6)"/>
				<bind name="transition" value="!_selected; 0.15; {width: 99, height: 60}; {width: 95, height: 56}"/>
				<bind name="instance" value="'NationFlagsSmall'; {_width: '100%', _height: '100%', shipCountry: shipCountry}"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="instance" value="'ShipSlotNameBackPanel'; {_selected: _selected, _rollOver: _rollOver}"/>
			</block>
			<block>
				<bind name="style" value="'alpha'; (isNeedRepair || isNeedShell || isLocked || (crewId == 0) || !shipInfoSlim.isDownloaded || isShipFrozen) ? 0.4 : 1"/>
				<style>
					<width value="100%"/>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginTop value="4px"/>
					<marginRight value="8px"/>
					<marginBottom value="4px"/>
					<marginBottom value="4px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<height value="20px"/>
						<marginTop value="2px"/>
						<hitTest value="false"/>
					</style>
					<block>
						<style>
							<marginTop value="-2px"/>
							<marginLeft value="-4px"/>
						</style>
						<bind name="instance" value="'ShipIcon'; {_shipId: shipId}"/>
					</block>
					<block type="text">
						<styleClass value="$TextSecondaryBold"/>
						<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontColorGold' : '$FontColorWhite'"/>
						<style>
							<marginLeft value="2px"/>
							<marginRight value="3px"/>
							<width value="40px"/>
						</style>
						<bind name="text" value="shipLevelRome"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<right value="0px"/>
						<hitTest value="false"/>
					</style>
					<bind name="instance" value="'ShipSilhouetteRightAligned'; {_shipID: shipInfo.id}"/>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="-1px"/>
						<right value="0"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<style>
							<width value="115px"/>
							<textAlign value="right"/>
							<multiline value="false"/>
						</style>
						<styleClass value="$TextDefaultBold"/>
						<bind name="class" value="'$LetterSpacingSmall'"/>
						<bind name="class" value="shipInfo.isFarming || shipInfo.uiSpecial ? '$FontColorGold' : '$FontColorWhite'"/>
						<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS))"/>
					</block>
				</block>
				<block>
					<style>
						<position value="absolute"/>
						<bottom value="2px"/>
					</style>
					<bind name="watchDH" value="'bonusTagsVisible'; ['shipEntity.ship.evBonusTagsChanged']; (shipEntity.ship.bonusTags.length &gt; 0 || expMultiply &gt; 1)"/>
					<bind name="instance" value="'ShipBonusTags'; bonusTagsVisible	? {_shipEntityId: shipEntity.id}
																	: null"/>
				</block>
			</block>
			<block>
				<bind name="tooltip" value="'SubTextTooltip'; {tooltipText: 'IDS_TOOLTIP_PRIMARY_SHIP', tooltipSubText: 'IDS_TOOLTIP_PRIMARY_SHIP_DESCRIPTION'}"/>
				<style>
					<position value="absolute"/>
					<right value="-1px"/>
					<top value="-1px"/>
				</style>
				<bind name="visible" value="isPrimary"/>
				<block className="icon_primary_ribbon" type="native"/>
			</block>
			<block>
				<bind name="visible" value="(timeRent &gt; 0)"/>
				<bind name="name" value="'timeRent_' + shipInfo.fullName"/>
				<style>
					<position value="absolute"/>
					<right value="3px"/>
					<top value="3px"/>
				</style>
				<bind name="instance" value="'RentTimer'; (timeRent &gt; 0) ? {_timeRent: timeRent} : null"/>
			</block>
		</block>
		<block>
			<bind name="name" value="'isLockedShip_' + shipInfo.fullName + '_' + isLocked"/>
			<bind name="visible" value="(isAlterablePriceMenuVisible == false)"/>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<hitTest value="false"/>
			</style>
			<block>
				<styleClass value="$MiddleAligned"/>
				<bind name="instance" value="'ShipCarouselSlotStatus';	(isShipFrozen &amp;&amp; !(_rollOver))		? { _status:  toUpperCase(tr('IDS_SHIP_FROZEN_FOR_PVE')), isPositive: false, _small: true} :
														(isNeedRepair || isNeedShell) &amp;&amp; 
														!(_rollOver) &amp;&amp; !(_mouseDown) &amp;&amp; 
														crewId != 0							? { _status: toUpperCase(tr('IDS_NEED_SERVICE')), isPositive: false, _small: true} :
														isInFormation						? { _status: toUpperCase(tr('IDS_READY_TO_BATTLE_IN_' + toUpperCase(_formationType))), isPositive: true, _small: true } :
														isLocked							? { _status: toUpperCase(tr('IDS_IN_BATTLE')), isPositive: false, _small: true} :
														crewId == 0							? { _status: toUpperCase(tr('IDS_NO_CREW')), isPositive: false, _small: true}
																							: null "/>
			</block>
			<block>
				<bind name="name" value="isShipFrozen ? 'CarouselShipFreeze_' + shipInfo.fullName : ''"/>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="8px"/>
				</style>
				<bind name="instance" value="'CarouselShipFreeze'; (isShipFrozen &amp;&amp; !(_rollOver)) ? {_freezeListArr: freezeListArr, _small: true} : null"/>
			</block>
		</block>
		<block className="ServiceUnfreezeButtons">
			<style>
				<width value="190px"/>
			</style>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
			<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
			<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
			<bind name="watch" value="'unFreezePriceIndex'; (userPrefs.unFreezePriceIndex == null) ? 0 : userPrefs.unFreezePriceIndex"/>
			<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'CANCEL_BATTLE_LOCK_COOLDOWN_Cost'; 'pveCooldownCost'"/>
			<bind name="watch" value="'selectedPriceIndex'; (pveCooldownCost.prices.length &gt; 1 ? unFreezePriceIndex : 0)}"/>
			<bind name="catch" value="'selectedPriceChanged'"/>
			<bind name="dispatch" value="'selectedPriceChanged';'selectedPriceChangedDelayed'; {}; 2; 0.05"/>
			<bind name="action" value="'selectedPriceChangedDelayed'; 'setUserPref' ; {value: selectedPriceIndex, name: 'unFreezePriceIndex'}"/>
			<bind name="var" value="{isAlterablePriceMenuVisible: false}"/>
			<bind name="catch" value="'alterablePriceTagMenuVisibleChanged'"/>
			<bind name="watch" value="'isUnfreezeButtonVisible'; (isAlterablePriceMenuVisible || _rollOver) &amp;&amp; isShipFrozen"/>
			<bind name="watch" value="'isServiceButtonVisible';	(isAlterablePriceMenuVisible || _rollOver) &amp;&amp; !(isShipFrozen) &amp;&amp;
											(isNeedRepair || isNeedShell) &amp;&amp; crewId != 0"/>
			<bind name="fade" value="isServiceButtonVisible || isUnfreezeButtonVisible; 0.15; {alpha: 0, top: -10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2; 0.1"/>
			<bind name="instance" value="'DockButtonCostMedium'; isServiceButtonVisible 	? 	{	_label: 'IDS_SERVICE_C', _tooltipText: 'IDS_SERVICE_C', _prices: [{finalPrice: costTotal, currency: 'credits'}],
																			_action: 'serveShip', _actionParams: {shipId : shipEntity.ownShip.id}, _selectedPriceIndex: 0, _deficitLabel: 'IDS_SERVICE_COST'} :
											isUnfreezeButtonVisible	?	{	_label: 'IDS_UNFREEZE_FOR_PVE_BTN',
																			_deficitLabel: 'IDS_PVE_UNFREEZE_COST',
																			_tooltipText: 'IDS_UNFREEZE_COST_TOOLTIP',
																			_prices: pveCooldownCost.prices,
																			_selectedPriceIndex: selectedPriceIndex,
																			_request: 'openUnfreezeShipWindow',
																			_requestParams: {shipId: shipEntity.ownShip.id, battleType: selectedBattle.type}
																		}
																	:	null"/>
		</block>
	</block>
	<block className="ServiceUnfreezeButtons">
		<style>
			<width value="190px"/>
		</style>
		<styleClass value="$MiddleAlignedAbsolutely"/>
		<styleClass value="$MiddleVAligned"/>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'unFreezePriceIndex'; (userPrefs.unFreezePriceIndex == null) ? 0 : userPrefs.unFreezePriceIndex"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'CANCEL_BATTLE_LOCK_COOLDOWN_Cost'; 'pveCooldownCost'"/>
		<bind name="watch" value="'selectedPriceIndex'; (pveCooldownCost.prices.length &gt; 1 ? unFreezePriceIndex : 0)}"/>
		<bind name="catch" value="'selectedPriceChanged'"/>
		<bind name="dispatch" value="'selectedPriceChanged';'selectedPriceChangedDelayed'; {}; 2; 0.05"/>
		<bind name="action" value="'selectedPriceChangedDelayed'; 'setUserPref' ; {value: selectedPriceIndex, name: 'unFreezePriceIndex'}"/>
		<bind name="var" value="{isAlterablePriceMenuVisible: false}"/>
		<bind name="catch" value="'alterablePriceTagMenuVisibleChanged'"/>
		<bind name="watch" value="'isUnfreezeButtonVisible'; (isAlterablePriceMenuVisible || _rollOver) &amp;&amp; isShipFrozen"/>
		<bind name="watch" value="'isServiceButtonVisible';	(isAlterablePriceMenuVisible || _rollOver) &amp;&amp; !(isShipFrozen) &amp;&amp;
											(isNeedRepair || isNeedShell) &amp;&amp; crewId != 0"/>
		<bind name="fade" value="isServiceButtonVisible || isUnfreezeButtonVisible; 0.15; {alpha: 0, top: -10}; {alpha: 1, top: 0}; {alpha: 0, top: -10}; 2; 0.1"/>
		<bind name="instance" value="'DockButtonCostMedium'; isServiceButtonVisible 	? 	{	_label: 'IDS_SERVICE_C', _tooltipText: 'IDS_SERVICE_C', _prices: [{finalPrice: costTotal, currency: 'credits'}],
																			_action: 'serveShip', _actionParams: {shipId : shipEntity.ownShip.id}, _selectedPriceIndex: 0, _deficitLabel: 'IDS_SERVICE_COST'} :
											isUnfreezeButtonVisible	?	{	_label: 'IDS_UNFREEZE_FOR_PVE_BTN',
																			_deficitLabel: 'IDS_PVE_UNFREEZE_COST',
																			_tooltipText: 'IDS_UNFREEZE_COST_TOOLTIP',
																			_prices: pveCooldownCost.prices,
																			_selectedPriceIndex: selectedPriceIndex,
																			_request: 'openUnfreezeShipWindow',
																			_requestParams: {shipId: shipEntity.ownShip.id, battleType: selectedBattle.type}
																		}
																	:	null"/>
	</block>
	<block className="CarouselShipFreeze">
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; 2"/>
		<bind name="repeat" value="_freezeListArr; 'CarouselShipFreezeRenderer'; {_small: _small}"/>
	</block>
	<block className="CarouselShipFreezeRenderer">
		<bind name="entityDH" value="'shipFreezeEntity'; $value"/>
		<block type="text">
			<styleClass value="$TextDefaultBold17NM"/>
			<styleClass value="$FontColorUnready"/>
			<bind name="countdown" value="shipFreezeEntity.shipFreeze.freezeEnd; 'freezeTimer'; 'hh:mm:ss'"/>
			<bind name="pureText" value="freezeTimer"/>
		</block>
	</block>
	<block className="RentTimer">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="appear" value="'addedToStage'; 0.1; 0.1; {alpha: 0}; {alpha: 1}; 0"/>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isRentOver'; (serverTime &gt; _timeRent)"/>
		<bind name="watch" value="'daysTimeRent';	_rentDuration 									? _rentDuration :
									(((_timeRent - serverTime) / 86400) &gt;= 1)		? (((_timeRent - serverTime) - ((_timeRent - serverTime) % 86400)) / 86400)
																					: 0"/>
		<bind name="watch" value="'secondsToHours';	((_timeRent - serverTime) % 86400)"/>
		<bind name="watch" value="'hoursTimeRent'; 	((secondsToHours / 3600) &gt; 1)	? ((secondsToHours - (secondsToHours % 3600)) / 3600) :
									((secondsToHours / 3600) &gt; 0)	? 1
																	: 0"/>
		<bind name="watch" value="'minutesTimeRent'; ((secondsToHours / 60) &gt; 1)	? ((secondsToHours - (secondsToHours % 60)) / 60) :
									((secondsToHours / 60) &gt; 0)	? 1
																: 0"/>
		<bind name="countdown" value="_timeRent; 'fullTimeRent'; 'hh:mm:ss'"/>
		<bind name="timeFormat" value="_rentUntil; 'dd.MM.yy'; 'formattedRentTill'; true"/>
		<bind name="watch" value="'isClanRent'; _shipGroup == 'clan'"/>
		<bind name="watch" value="'textColorClass'; isClanRent ? '$None' : '$FontColorGolden'"/>
		<bind name="tooltip" value="	isClanRent 	? 'CvcRentTimerTooltip' : 'RentTimerTooltip'; { _timeRent: _timeRent, _isRentOver: isRentOver }"/>
		<style>
			<flow value="horizontal"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<bind name="visible" value="!(isRentOver) || _rentDuration"/>
			<bind name="transition" value="rollOver || !(isClanRent) || (isClanRent &amp;&amp; daysTimeRent &lt; 2) || _forceShow; 0.07; {alpha: 0, left: 20}; {alpha: 1, left: 0}; {alpha: 0, left: 20}"/>
			<block>
				<bind name="visible" value="(daysTimeRent != 0)"/>
				<style>
					<marginRight value="2px"/>
					<marginTop value="-2px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold"/>
					<styleClass value="$FontColorGolden"/>
					<bind name="text" value="daysTimeRent"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="-2px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<styleClass value="$FontColorGolden"/>
					<bind name="pluralText" value="'IDS_PL_DAY_FULL_ACC'; daysTimeRent"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="visible" value="((daysTimeRent &lt; 2) &amp;&amp; (daysTimeRent != 0) &amp;&amp; (hoursTimeRent != 0))"/>
				<style>
					<marginRight value="2px"/>
					<marginLeft value="-2px"/>
					<marginTop value="-2px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold"/>
					<styleClass value="$FontColorGolden"/>
					<bind name="text" value="hoursTimeRent"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="-2px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<styleClass value="$FontColorGolden"/>
					<bind name="pluralText" value="'IDS_PL_HOUR_FULL_ACC'; hoursTimeRent"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block type="text">
				<bind name="visible" value="(daysTimeRent == 0)"/>
				<style>
					<width value="58px"/>
					<marginRight value="-2px"/>
					<marginTop value="-2px"/>
				</style>
				<styleClass value="$TextDefaultBold"/>
				<styleClass value="$FontColorGolden"/>
				<bind name="text" value="_rentUntil ? formattedRentTill : fullTimeRent"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<width value="21px"/>
				<height value="21px"/>
			</style>
			<bind name="style" value="'backgroundImage'; (daysTimeRent == 0) ? 'url:../service_kit/icons/icon_rent_orange.png'
															: 'url:../service_kit/icons/icon_rent_white.png'"/>
		</block>
	</block>
	<block className="ShipCarouselSlotStatus">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'dockDefaultValues'; 'dockInitData,dockUpdateData'"/>
		<bind name="visible" value="!(dockDefaultValues.goToBattleState)"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; 2"/>
		<block type="text">
			<style>
				<maxWidth value="180"/>
				<textAlign value="center"/>
				<leading value="-3"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$MiddleVAligned"/>
			<styleClass value="$TextCarouselShipStatus"/>
			<bind name="class" value="_small ? '$FontSizeDefault' : '$None'"/>
			<bind name="class" value="isPositive ? '$FontColorComparePositive' : '$None'"/>
			<bind name="text" value="_status"/>
		</block>
	</block>
	<block className="CarouselNaturalIndicator">
		<block>
			<block type="text">
				<styleClass value="$TextSmallWhite"/>
				<bind name="text" value="_label"/>
			</block>
			<block>
				<bind name="instance" value="'PriceTag'; { priceInfo: _priceInfo, _showDiscountTag: true, _small: true}"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<style>
				<marginTop value="-4px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<bind name="instance" value="'GoldDeficitNano';	(_priceInfo.currency == 'gold')		?	{ _goldDeficit: _deficit } : null"/>
			<bind name="instance" value="'CRDeficitNano';	(_priceInfo.currency == 'credits')	?	{ _creditsDeficit: _deficit } : null"/>
		</block>
	</block>
	<block className="DockButtonCostMedium">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountResource';	['resourceEntity.accountResource.evChangedGold, resourceEntity.accountResource.credits']; resourceEntity.accountResource"/>
		<bind name="watch" value="'priceIndex'; (_prices.length &gt; 1 ? _selectedPriceIndex : 0)"/>
		<bind name="watch" value="'priceDeficit'; 	_prices[priceIndex].finalPrice -
									accountResource[_prices[priceIndex].currency]"/>
		<styleClass value="$MiddleVAligned"/>
		<styleClass value="$MiddleAligned"/>
		<bind name="watch" value="'isButtonEnabled'; (_prices.length &gt; 1 || priceDeficit &lt;= 0)"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<block className="button_dock" type="native">
				<style>
					<marginBottom value="-8px"/>
					<marginLeft value="-16px"/>
					<marginRight value="-16px"/>
					<marginTop value="-8px"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="enabled" value="isButtonEnabled"/>
				<bind name="style" value="'hitTest'; isButtonEnabled"/>
				<bind name="event" value="'buttonClick'; _method ? _method : null"/>
				<bind name="request" value="'buttonClick'; _request ? _request : null; _request ? _requestParams : null"/>
				<bind name="action" value="'buttonClick'; _action ? _action : null; _actionParams"/>
			</block>
			<bind name="watch" value="'isDeficitLabel'; (_prices.length == 1 &amp;&amp; priceDeficit &gt; 0)"/>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<block type="text">
					<style>
						<alpha value="0.9"/>
					</style>
					<bind name="class" value="(isDeficitLabel ? '$TextDefaultNM': '$TextDefaultBoldNM')"/>
					<styleClass value="$TextDefaultBoldNM"/>
					<bind name="text" value="isDeficitLabel ? _deficitLabel : _label"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$MiddleAligned"/>
			<bind name="style" value="'marginTop'; isDeficitLabel ? '0px' : '4px'"/>
			<style>
				<marginBottom value="-9px"/>
			</style>
			<bind name="instance" value="'AlterablePriceTag'; {	_tooltipText: _tooltipText,
												_prices: _prices, _showDiscountTag: true,
												_selectedPriceIndex: priceIndex}"/>
		</block>
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'isSmallCarouselView'; (userPrefs.isSmallCarouselView == null) ? false : userPrefs.isSmallCarouselView"/>
		<block>
			<bind name="visible" value="_prices.length == 1"/>
			<styleClass value="$MiddleAligned"/>
			<style>
				<hitTest value="false"/>
				<marginBottom value="-3px"/>
			</style>
			<bind name="instance" value="'PriceDeficit'; priceDeficit &gt; 0 ? { priceInfo: _prices[priceIndex], _deficit: priceDeficit} : null"/>
		</block>
	</block>
	<block className="CvcRentTimerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="timeFormat" value="_timeRent; 'hh:mm dd.MM.yyyy'; 'formattedRentTime'; true"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginBottom value="16px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
				<leading value="-1"/>
			</style>
			<styleClass value="$TextDefaultBold17NM"/>
			<bind name="text" value="'IDS_TOOLTIP_CVC_RENT_SHIP'"/>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="12px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
				<marginBottom value="16px"/>
				<leading value="1"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="_isRentOver ? 'IDS_TOOLTIP_CVC_RENT_SHIP_CHANGE_SOON'
								: subst('IDS_TOOLTIP_CVC_RENT_SHIP_TIME_CHANGE', [], {time_date: formattedRentTime})"/>
		</block>
	</block>
	<block className="RentTimerTooltip">
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="320px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'secondsUntil'; _timeRent - serverTime - 1"/>
		<bind name="watch" value="'seconds'; secondsUntil &gt; 0 ? secondsUntil : 0"/>
		<bind name="watch" value="'minutes'; (seconds - (seconds % 60)) / 60"/>
		<bind name="watch" value="'hours'; (seconds - (seconds % 3600)) / 3600"/>
		<bind name="watch" value="'days'; (seconds - (seconds % 86400)) / 86400"/>
		<bind name="watch" value="'tooltipText'; tr('IDS_TOOLTIP_RENT_SHIP') +
								(days != 0						? ' ' + days + ' ' + subst('IDS_PL_DAY_FULL_ACC', [], {}, days) : '') +
								(hours != 0	&amp;&amp; days == 0		? ' ' + hours + ' ' + subst('IDS_PL_HOUR_FULL', [], {}, hours) : '') + 
								(minutes != 0 &amp;&amp; hours == 0 	? ' ' + minutes + ' ' + subst('IDS_PL_MINUTE_FULL_ACC', [], {}, minutes) : '') + 
								(seconds != 0 &amp;&amp; minutes == 0 	? ' ' + seconds + ' ' + subst('IDS_PL_SECOND_FULL', [], {}, seconds) 
																: '')"/>
		<block type="text">
			<style>
				<width value="100%"/>
				<marginTop value="16px"/>
				<marginLeft value="16px"/>
				<marginRight value="16px"/>
				<marginBottom value="16px"/>
				<leading value="1"/>
			</style>
			<styleClass value="$TextDefault17NM"/>
			<bind name="text" value="tooltipText"/>
		</block>
	</block>
	<block className="PeculiarityFiltersContent">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$InfoBlockIndent"/>
			<block type="text">
				<styleClass value="$TextDefaultBold17NM"/>
				<bind name="text" value="'IDS_ADDITIONAL_CONTENT'"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<bind name="watch" value="'categoryArray'; [{category: 'event'}, {category: 'historical'}, {category: 'author'}]"/>
		<bind name="repeat" value="categoryArray; 'PeculiarityFiltersCategory'; {}"/>
	</block>
	<block className="PeculiarityFiltersCategory">
		<bind name="tooltip" value="'PeculiarityFiltersCategorySubMenu'; {_category: category}; TooltipBehaviour.contextSubmenuNoClickHide"/>
		<style>
			<width value="100%"/>
		</style>
		<block className="dock_submenu_item" type="native">
			<styleClass value="$ContextMenuListItem"/>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<styleClass value="$MiddleVAligned"/>
				<block type="text">
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="'IDS_SHIP_FILTER_' + toUpperCase(category)"/>
				</block>
			</block>
			<block className="button_expand_h" type="native">
				<style>
					<position value="absolute"/>
					<right value="12px"/>
					<hitTest value="false"/>
				</style>
				<styleClass value="$MiddleVAligned"/>
			</block>
		</block>
	</block>
	<block className="PeculiarityFiltersCategorySubMenu">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$LeftSubMenuBehaviour"/>
		<style>
			<width value="300px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<bind name="collectionDH" value="CC.peculiarityEye; 'peculiaritiesEyeCategoryTypes'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'peculiaritiesEyeCategoryTypes'+'ROOT'; 'peculiaritiesEyeCategoryTypes'; {'filter': $entity.peculiarityEye.category == _category}; []"/>
		<bind name="repeat" value="peculiaritiesEyeCategoryTypes; 'PeculiarityFilterItem'; {}"/>
	</block>
	<block className="PeculiarityFilterItem">
		<bind name="entityDH" value="'peculiarityEyeEntity'; id"/>
		<bind name="watchDH" value="'ids'; []; peculiarityEyeEntity.peculiarityEye.ids"/>
		<bind name="watchDH" value="'value'; []; peculiarityEyeEntity.peculiarityEye.value"/>
		<bind name="watchDH" value="'enabled'; ['peculiarityEyeEntity.peculiarityEye.evEnabledChanged']; peculiarityEyeEntity.peculiarityEye.enabled"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'operationsAccountLocked'; ['resourceEntity.accountResource.evOperationsLockChanged']; resourceEntity.accountResource.operationsLocked"/>
		<bind name="clickSplit"/>
		<style>
			<width value="300px"/>
		</style>
		<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: enabled ? tr(ids + '_TAKE_OFF_SKIN_TOOLTIP') : tr(ids + '_SET_SKIN_TOOLTIP')}"/>
		<bind name="action" value="'left_click'; 'ServerUIDataUSS.setPecularity'; { pecId: value }"/>
		<bind name="name" value="'CarouselCheckBoxEye_pecularity_' + ids"/>
		<block className="dock_submenu_item" type="native">
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<style>
						<maxWidth value="250"/>
					</style>
					<styleClass value="$TextDefaultNM"/>
					<bind name="text" value="ids"/>
				</block>
			</block>
			<block className="icon_eye_visible" type="native">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<right value="12px"/>
					<hitTest value="false"/>
				</style>
				<bind name="enabled" value="!operationsAccountLocked"/>
				<bind name="selected" value="enabled"/>
			</block>
		</block>
	</block>
	<block className="ShipSlotNameBackPanel">
		<styleClass value="$ShipSlotBottomDarkPanel"/>
		<bind name="style" value="'margin'; (_selected || _rollOver) ? '1px' : '0px'"/>
		<bind name="style" value="'bottom'; (_selected || _rollOver) ? '2px' : '0px'"/>
		<bind name="style" value="'height'; (_selected || _rollOver)? '26px': '27px'"/>
	</block>
	<block className="AccountLevelingItemUnavailable">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="19px"/>
				<height value="19px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'marginRight'; _iconMarginRight ? _iconMarginRight : 12"/>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/icons/icon_status_lock.png'"/>
		</block>
		<block type="text">
			<bind name="class" value="_class ? _class : '$TextDefault17NM'"/>
			<style>
				<width value="100%"/>
				<leading value="-3"/>
			</style>
			<bind name="text" value="subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: _battlesToStep}, _battlesToStep)"/>
		</block>
	</block>
	<block className="AccountLevelingItemAbused">
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="class" value="_iconClass ? _iconClass :'$MiddleVAligned'"/>
			<style>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'backgroundImage'; _isSmallIcon	? 'url:../service_kit/icons/icon_warning_red.png'
														: 'url:../service_kit/icons/icon_status_warning.png'"/>
			<bind name="style" value="'width'; _isSmallIcon ? '15px' : '22px'"/>
			<bind name="style" value="'height'; _isSmallIcon ? '13px' : '19px'"/>
		</block>
		<block type="text">
			<bind name="class" value="_class ? _class : '$TextDefault17NM'"/>
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<textColor value="0xFF6600"/>
			</style>
			<bind name="style" value="'marginLeft'; _isSmallIcon ? '8px' : 'SX8px'"/>
			<bind name="text" value="_abuseText ? _abuseText : 'IDS_ACCOUNT_PROGRESS_ABUSED'"/>
		</block>
	</block>
	<block className="TimeLeftIconAndTextLine">
		<bind name="serverTime" value="'serverTime'"/>
		<bind name="watch" value="'isTimeRunningOut'; _dueDate - serverTime &lt; 86400"/>
		<bind name="timeFormat" value="_dueDate; 'dd.MM.yy'; 'formattedDueDatePromoReward'; true"/>
		<style>
			<width value="100%"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha'; isTimeRunningOut	? '1' : '0.7'"/>
		<block>
			<style>
				<width value="19px"/>
				<height value="19px"/>
				<backgroundSize value="cover"/>
			</style>
			<bind name="style" value="'marginRight'; _iconMarginRight ? _iconMarginRight : 12"/>
			<bind name="style" value="'backgroundImage'; isTimeRunningOut	? 'url:../service_kit/icons/icon_status_due_date_orange.png'
															: 'url:../service_kit/icons/icon_status_due_date_white.png'"/>
		</block>
		<block type="text">
			<bind name="class" value="_class ? _class : '$TextDefault17NM'"/>
			<style>
				<width value="100%"/>
				<leading value="-3"/>
				<marginTop value="3px"/>
			</style>
			<bind name="style" value="'textColor'; isTimeRunningOut ? 0xFFFF9933 : '0xFFFFFF'"/>
			<bind name="text" value="subst(_substTextIDS, [], { _date: formattedDueDatePromoReward })"/>
		</block>
	</block>
	<block className="IconAlItem">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImage'; _imageURL"/>
	</block>
	<block className="IconAlDataItem">
		<style>
			<backgroundSize value="cover"/>
		</style>
		<bind name="style" value="'width'; _iconSize"/>
		<bind name="style" value="'height'; _iconSize"/>
		<bind name="style" value="'backgroundImageData'; _imageData"/>
	</block>
	<block className="BoomAnimation">
		<styleClass value="$Fullsize"/>
		<block className="lesta.controls.video.VideoResourcePlayer" type="native">
			<styleClass value="$Fullsize"/>
			<params>
				<param name="keepAspectRatio" value="false"/>
			</params>
			<bind name="volume" value="0"/>
			<bind name="repeatCount" value="1"/>
			<bind name="play!" value="'./gui/video/Movie43.usm'"/>
		</block>
	</block>
	<block className="BGAnimation">
		<styleClass value="$Fullsize"/>
		<block className="lesta.controls.video.VideoResourcePlayer" type="native">
			<styleClass value="$Fullsize"/>
			<params>
				<param name="keepAspectRatio" value="false"/>
			</params>
			<bind name="volume" value="0"/>
			<bind name="play!" value="'./gui/video/Movie43bg.usm'"/>
		</block>
	</block>
	<block className="AccountLevellingStepInfo">
		<bind name="child" value="_galleryItemRendererParams[_index].type	? _galleryItemRendererParams[_index].type
															: 'feature';
				{	_galleryItemRendererParams: _galleryItemRendererParams, _index: _index};{	promo:	'AccountLevellingPromoRewardStepInfo',
																								common:	'AccountLevellingCommonRewardStepInfo',
																								feature: 'AccountLevellingFeatureStepInfo'}"/>
	</block>
	<block className="AccountLevellingFeatureStepInfo">
		<bind name="watch" value="'accountLevel'; _galleryItemRendererParams[_index].accountLevel + 1"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep';	_galleryItemRendererParams[_index].points - currentPoints"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; accountLevelInfo.abuseStatus == 2"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; _galleryItemRendererParams[_index].stepFeature"/>
		<bind name="watchDH" value="'headerText';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.title"/>
		<bind name="watchDH" value="'subHeaderText';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.text"/>
		<bind name="watchDH" value="'iconPath';		['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watch" value="'imageUrl'; battlesToStep &gt; 0 ? 'url:' + iconPath + '_locked_big.png' :  'url:' + iconPath + '_big.png'"/>
		<bind name="primaryEntityDH" value="'splitRunTestVoicePromptEntity'; CC.splitRunTest; 'Voice_Prompt_Research'"/>
		<bind name="watchDH" value="'voicePromptResearchData'; ['splitRunTestVoicePromptEntity.splitRunTest.evDataChanged']; splitRunTestVoicePromptEntity.splitRunTest.data"/>
		<bind name="watch" value="'hasVoicePrompt'; voicePromptResearchData.hasVoicePrompt"/>
		<bind name="var" value="{stepType: 'feature'}"/>
		<bind name="watch" value="'buttonRequest'; 'openModalWindowLevelInfo'"/>
		<bind name="watch" value="'buttonRequestParams'; {	battles: battlesToStep,
											_stepFeature: _galleryItemRendererParams[_index].stepFeature,
											accountLevel: accountLevel }"/>
		<block className="AccountLevellingStepInfoLayout">
			<bind name="appear" value="'addedToStage'; 0.23; 0.07; {alpha: 0}; {alpha: 1}; 1"/>
			<style>
				<width value="844px"/>
				<height value="256px"/>
				<flow value="horizontal"/>
			</style>
			<block>
				<style>
					<width value="256px"/>
					<height value="100%"/>
				</style>
				<bind name="child" value="stepType ? stepType : 'no_item';	{ 	_imageURL: imageUrl,
															_imageData: imageData,
															_iconSize: '256px',
															}; {feature:		'IconAlItem',
																commonReward:	'IconAlItem',
																promoReward:	'IconAlDataItem',
																no_item:		'EmptyItem'
																}"/>
			</block>
			<block>
				<bind name="visible" value="battlesToStep &gt; 0 &amp;&amp; stepType != 'promoReward'"/>
				<style>
					<width value="60px"/>
					<height value="60px"/>
					<position value="absolute"/>
					<left value="98px"/>
					<top value="98px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%"/>
					<marginTop value="32"/>
					<marginLeft value="48px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold30NM"/>
					<style>
						<leading value="-6"/>
						<maxWidth value="540"/>
						<marginTop value="12px"/>
					</style>
					<bind name="style" value="'alpha'; battlesToStep &gt; 0 ? 0.7 : 0.9"/>
					<bind name="text" value="headerText"/>
				</block>
				<block>
					<bind name="visible" value="(stepType == 'feature') &amp;&amp; hasVoicePrompt"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<width value="100%"/>
							<leading value="-3"/>
							<alpha value="0.7"/>
						</style>
						<bind name="text" value="subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: accountLevel})"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="battlesToStep &gt; 0"/>
					<bind name="tooltip" value="'AbuseStatusProfileTooltip'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {} : null"/>
					<style>
						<width value="100%"/>
						<alpha value="0.7"/>
						<marginTop value="16px"/>
					</style>
					<bind name="instance" value="'AccountLevelingItemAbused'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {_isSmallIcon: true} : null"/>
					<bind name="instance" value="'AccountLevelingItemUnavailable'; (battlesToStep &gt; 0) &amp;&amp; !isAbuseStatusConfirmed ? {_battlesToStep: battlesToStep} : null"/>
				</block>
				<block>
					<bind name="visible" value="isTimedPromoReward ? true : false"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<bind name="instance" value="'TimeLeftIconAndTextLine'; isTimedPromoReward ? { _dueDate: promoRewardDueDate, _substTextIDS: 'IDS_PROMO_REWARD_DAYS_LEFT'} : null"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<maxWidth value="500"/>
						<alpha value="0.7"/>
						<marginTop value="24px"/>
					</style>
					<bind name="text" value="subHeaderText"/>
				</block>
				<block>
					<bind name="tooltip" value="'MouseInstructionTooltip'; {	_mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO'}],
														_maxWidth: 300}"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PRMP_DETAILS_BUTTON', 
												_request: buttonRequest, 
												_requestParams: buttonRequestParams
											}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="AccountLevellingPromoRewardStepInfo">
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep';	_galleryItemRendererParams[_index].points - currentPoints"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; accountLevelInfo.abuseStatus == 2"/>
		<bind name="entityDH" value="'promoRewardEntity'; _galleryItemRendererParams[_index].promoId"/>
		<bind name="watchDH" value="'headerText';			['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'fullDescription';		['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.fullDescription"/>
		<bind name="watchDH" value="'subHeaderText';			['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.shortDescription"/>
		<bind name="watchDH" value="'promoRewardImageBig';	['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.imageBig"/>
		<bind name="watchDH" value="'promoRewardDueDate';	['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.expirationTime"/>
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; promoRewardImageBig"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="watch" value="'isTimedPromoReward'; promoRewardDueDate &gt; 1"/>
		<bind name="entityDH" value="'rewardEntity';		_galleryItemRendererParams[_index].rewardId"/>
		<bind name="var" value="{stepType: 'promoReward'}"/>
		<bind name="watch" value="'buttonRequest'; 'openModalWindowRewardInfo'"/>
		<bind name="watch" value="'buttonRequestParams'; {	battles: battlesToStep,
											rewards: rewardEntity.rewardsContainer.rewardIds,
											headerText: headerText,
											subHeaderText: fullDescription,
											dueDate: isTimedPromoReward ? promoRewardDueDate : ''}"/>
		<block className="AccountLevellingStepInfoLayout">
			<bind name="appear" value="'addedToStage'; 0.23; 0.07; {alpha: 0}; {alpha: 1}; 1"/>
			<style>
				<width value="844px"/>
				<height value="256px"/>
				<flow value="horizontal"/>
			</style>
			<block>
				<style>
					<width value="256px"/>
					<height value="100%"/>
				</style>
				<bind name="child" value="stepType ? stepType : 'no_item';	{ 	_imageURL: imageUrl,
															_imageData: imageData,
															_iconSize: '256px',
															}; {feature:		'IconAlItem',
																commonReward:	'IconAlItem',
																promoReward:	'IconAlDataItem',
																no_item:		'EmptyItem'
																}"/>
			</block>
			<block>
				<bind name="visible" value="battlesToStep &gt; 0 &amp;&amp; stepType != 'promoReward'"/>
				<style>
					<width value="60px"/>
					<height value="60px"/>
					<position value="absolute"/>
					<left value="98px"/>
					<top value="98px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%"/>
					<marginTop value="32"/>
					<marginLeft value="48px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold30NM"/>
					<style>
						<leading value="-6"/>
						<maxWidth value="540"/>
						<marginTop value="12px"/>
					</style>
					<bind name="style" value="'alpha'; battlesToStep &gt; 0 ? 0.7 : 0.9"/>
					<bind name="text" value="headerText"/>
				</block>
				<block>
					<bind name="visible" value="(stepType == 'feature') &amp;&amp; hasVoicePrompt"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<width value="100%"/>
							<leading value="-3"/>
							<alpha value="0.7"/>
						</style>
						<bind name="text" value="subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: accountLevel})"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="battlesToStep &gt; 0"/>
					<bind name="tooltip" value="'AbuseStatusProfileTooltip'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {} : null"/>
					<style>
						<width value="100%"/>
						<alpha value="0.7"/>
						<marginTop value="16px"/>
					</style>
					<bind name="instance" value="'AccountLevelingItemAbused'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {_isSmallIcon: true} : null"/>
					<bind name="instance" value="'AccountLevelingItemUnavailable'; (battlesToStep &gt; 0) &amp;&amp; !isAbuseStatusConfirmed ? {_battlesToStep: battlesToStep} : null"/>
				</block>
				<block>
					<bind name="visible" value="isTimedPromoReward ? true : false"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<bind name="instance" value="'TimeLeftIconAndTextLine'; isTimedPromoReward ? { _dueDate: promoRewardDueDate, _substTextIDS: 'IDS_PROMO_REWARD_DAYS_LEFT'} : null"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<maxWidth value="500"/>
						<alpha value="0.7"/>
						<marginTop value="24px"/>
					</style>
					<bind name="text" value="subHeaderText"/>
				</block>
				<block>
					<bind name="tooltip" value="'MouseInstructionTooltip'; {	_mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO'}],
														_maxWidth: 300}"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PRMP_DETAILS_BUTTON', 
												_request: buttonRequest, 
												_requestParams: buttonRequestParams
											}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="AccountLevellingCommonRewardStepInfo">
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep';	_galleryItemRendererParams[_index].points - currentPoints"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; accountLevelInfo.abuseStatus == 2"/>
		<bind name="entityDH" value="'rewardEntity';		_galleryItemRendererParams[_index].rewardId"/>
		<bind name="watch" value="'isSimilarRewards';	rewardEntity.rewardsContainer.subtype &amp;&amp; rewardEntity.rewardsContainer.rewardIds.length &gt; 1"/>
		<bind name="watch" value="'isSingleRewardType';	rewardEntity.rewardsContainer.rewardIds.length == 1"/>
		<bind name="watch" value="'rewardType';			rewardEntity.rewardComponent.type"/>
		<bind name="watch" value="'rewardAmountFormatted'; rewardEntity.rewardComponent.subtype == 'premium' ? rewardEntity.rewardComponent.params.textFeature
																							: format(rewardEntity.rewardComponent.amount)"/>
		<bind name="watch" value="'rewardIconPath';	isSimilarRewards				? toLowerCase(rewardEntity.rewardComponent.subtype + '_set') :
									isSingleRewardType				?
										rewardType == 	'Exterior' 		? toLowerCase(exteriorConfig.type) :
										rewardType == 	'Resource'		? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'ResourceCoeff'	? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'Exchange'		? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'Lootbox'		? 'lootbox'
																		: toLowerCase(rewardEntity.rewardComponent.type)
																	: 'multiple'"/>
		<bind name="watch" value="'imageUrl'; battlesToStep &gt; 0 ? 'url:../accountLevel/rewards/icon_reward_' + rewardIconPath + '_locked_big.png' :  'url:../accountLevel/rewards/icon_reward_' + rewardIconPath + '_big.png'"/>
		<bind name="watch" value="'rewardHeaderTextWithAmount';	isSimilarRewards			? toUpperCase('IDS_REWARDS_SET_' + rewardEntity.rewardComponent.subtype) :
												isSingleRewardType			?
													rewardType == 	'Ship' 			? 'IDS_SHIP' :
													rewardType == 	'Crew' 			? 'IDS_CREW' :
													rewardType == 	'Exterior' 		? exteriorConfig.type == ExteriorTypes.ENSIGN 	? toUpperCase('IDS_' + exteriorConfig.type + '_TITLE') 
																																	: subst(toUpperCase('IDS_PL_' + exteriorConfig.type + '_TITLE'), [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Ability'		? subst('IDS_PL_ABILITY_TITLE', [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Modernization'	? subst('IDS_PL_MODERNIZATION_TITLE', [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Resource'		? 	rewardEntity.rewardComponent.subtype == 'credits' ||
																						rewardEntity.rewardComponent.subtype == 'gold' ||
																						rewardEntity.rewardComponent.subtype == 'slots' ||
																						rewardEntity.rewardComponent.subtype == 'barCapacity'		? subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
																						rewardEntity.rewardComponent.subtype == 'wows_premium' ||    
																						rewardEntity.rewardComponent.subtype == 'premium'			? subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  rewardEntity.rewardComponent.params.text})
																																					: subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'ResourceCoeff'	? toUpperCase('IDS_REWARD_' + rewardEntity.rewardComponent.subtype + '_TITLE') :
													rewardType == 	'Exchange'		? toUpperCase('IDS_PRMP_ITEM_' + rewardEntity.rewardComponent.subtype) :
													rewardType == 	'Lootbox'		? subst(toUpperCase('IDS_PL_LOOTBOX_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'DogTag'		?  toUpperCase('IDS_DOGTAG_' + rewardEntity.rewardComponent.name + '_NAME') :
													rewardType == 	'Collection'	?  toUpperCase('IDS_' + rewardEntity.rewardComponent.name)
																					: 'IDS_REWARDS_SET'
																			: 'IDS_REWARDS_SET'"/>
		<bind name="watch" value="'headerText';	rewardHeaderTextWithAmount"/>
		<bind name="watch" value="'rewardSubheaderText';	isSimilarRewards				? toUpperCase('IDS_REWARDS_SET_' + rewardEntity.rewardComponent.subtype + '_DESCRIPTION') :
										isSingleRewardType				?
											rewardType == 	'Ship' 			? tr(toUpperCase(shipInfo.nameIDS + '_DESCR')) :
											rewardType == 	'Crew' 			? tr(toUpperCase(rewardEntity.rewardComponent.params.firstNameIDS + '_DESCR')) :
											rewardType == 	'Exterior' 		? (exteriorConfig.type != ExteriorTypes.CAMOUFLAGE) ? tr(toUpperCase('IDS_' + exteriorConfig.name + '_DESCRIPTION')) 
																																: '' :
											rewardType == 	'Ability'		? 'IDS_CONSUMABLES' :
											rewardType == 	'Modernization'	? tr(toUpperCase('IDS_MODERNIZATION_' + rewardEntity.rewardComponent.params.item.type)) :
											rewardType == 	'Lootbox'		? 'IDS_LOOTBOX_DESCRIPTION' :
											rewardType == 	'DogTag'		? subtype == unique ? tr(toUpperCase('IDS_DOGTAG_COMPONENT_TOOLTIP_CATEGORY_' + 'unique'))
																								: tr(toUpperCase('IDS_DOGTAG_COMPONENT_TOOLTIP_CATEGORY_' + _categoryId)) :
											rewardType == 	'Collection'	? tr(toUpperCase('IDS_' + rewardEntity.rewardComponent.name + '_DESCRIPTION'))
																			: tr(toUpperCase('IDS_' + rewardEntity.rewardComponent.subtype + '_DESCRIPTION'))
																		: 'IDS_REWARDS_SET_DESCRIPTION'"/>
		<bind name="watch" value="'subHeaderText';	rewardSubheaderText"/>
		<bind name="watch" value="'rewardHeaderText';	isSimilarRewards			? 'IDS_REWARDS_SET_' + toUpperCase(rewardEntity.rewardComponent.subtype) :
										isSingleRewardType			?
											rewardType == 	'Ship' 			? 'IDS_SHIP' :
											rewardType == 	'Crew' 			? 'IDS_CREW' :
											rewardType == 	'Exterior' 		? toUpperCase('IDS_' +  exteriorConfig.type + '_TITLE') :
											rewardType == 	'Resource'		? toUpperCase('IDS_REWARD_' + rewardEntity.rewardComponent.subtype + '_TITLE') :
											rewardType == 	'ResourceCoeff'	? toUpperCase('IDS_REWARD_' + rewardEntity.rewardComponent.subtype + '_TITLE') :
											rewardType == 	'Lootbox'		? 'IDS_LOOTBOX_TITLE' :
											rewardType == 	'DogTag'		? toUpperCase('IDS_DOGTAG_' + rewardEntity.rewardComponent.name + '_NAME') :
											rewardType == 	'Exchange'		? toUpperCase('IDS_PRMP_ITEM_' + rewardEntity.rewardComponent.subtype + '_TITLE') :
											rewardType == 	'Collection'	? toUpperCase('IDS_' + rewardEntity.rewardComponent.name)
																			: toUpperCase(rewardEntity.rewardComponent.type + '_TITLE')
																	: 'IDS_REWARDS_SET'"/>
		<bind name="watch" value="'modalWindowHeaderText';	rewardHeaderText"/>
		<bind name="var" value="{stepType: 'commonReward'}"/>
		<bind name="watch" value="'buttonRequest'; 'openModalWindowRewardInfo'"/>
		<bind name="watch" value="'buttonRequestParams'; {	battles: battlesToStep,
											rewards: rewardEntity.rewardsContainer.rewardIds,
											headerText: modalWindowHeaderText,
											subHeaderText: subHeaderText}"/>
		<block className="AccountLevellingStepInfoLayout">
			<bind name="appear" value="'addedToStage'; 0.23; 0.07; {alpha: 0}; {alpha: 1}; 1"/>
			<style>
				<width value="844px"/>
				<height value="256px"/>
				<flow value="horizontal"/>
			</style>
			<block>
				<style>
					<width value="256px"/>
					<height value="100%"/>
				</style>
				<bind name="child" value="stepType ? stepType : 'no_item';	{ 	_imageURL: imageUrl,
															_imageData: imageData,
															_iconSize: '256px',
															}; {feature:		'IconAlItem',
																commonReward:	'IconAlItem',
																promoReward:	'IconAlDataItem',
																no_item:		'EmptyItem'
																}"/>
			</block>
			<block>
				<bind name="visible" value="battlesToStep &gt; 0 &amp;&amp; stepType != 'promoReward'"/>
				<style>
					<width value="60px"/>
					<height value="60px"/>
					<position value="absolute"/>
					<left value="98px"/>
					<top value="98px"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
					<backgroundSize value="fill"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<height value="100%"/>
					<marginTop value="32"/>
					<marginLeft value="48px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefaultBold30NM"/>
					<style>
						<leading value="-6"/>
						<maxWidth value="540"/>
						<marginTop value="12px"/>
					</style>
					<bind name="style" value="'alpha'; battlesToStep &gt; 0 ? 0.7 : 0.9"/>
					<bind name="text" value="headerText"/>
				</block>
				<block>
					<bind name="visible" value="(stepType == 'feature') &amp;&amp; hasVoicePrompt"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault17NM"/>
						<style>
							<width value="100%"/>
							<leading value="-3"/>
							<alpha value="0.7"/>
						</style>
						<bind name="text" value="subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: accountLevel})"/>
					</block>
				</block>
				<block>
					<bind name="visible" value="battlesToStep &gt; 0"/>
					<bind name="tooltip" value="'AbuseStatusProfileTooltip'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {} : null"/>
					<style>
						<width value="100%"/>
						<alpha value="0.7"/>
						<marginTop value="16px"/>
					</style>
					<bind name="instance" value="'AccountLevelingItemAbused'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {_isSmallIcon: true} : null"/>
					<bind name="instance" value="'AccountLevelingItemUnavailable'; (battlesToStep &gt; 0) &amp;&amp; !isAbuseStatusConfirmed ? {_battlesToStep: battlesToStep} : null"/>
				</block>
				<block>
					<bind name="visible" value="isTimedPromoReward ? true : false"/>
					<style>
						<width value="100%"/>
						<marginTop value="12px"/>
					</style>
					<bind name="instance" value="'TimeLeftIconAndTextLine'; isTimedPromoReward ? { _dueDate: promoRewardDueDate, _substTextIDS: 'IDS_PROMO_REWARD_DAYS_LEFT'} : null"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault19NM"/>
					<style>
						<maxWidth value="500"/>
						<alpha value="0.7"/>
						<marginTop value="24px"/>
					</style>
					<bind name="text" value="subHeaderText"/>
				</block>
				<block>
					<bind name="tooltip" value="'MouseInstructionTooltip'; {	_mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO'}],
														_maxWidth: 300}"/>
					<style>
						<marginTop value="32px"/>
					</style>
					<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PRMP_DETAILS_BUTTON', 
												_request: buttonRequest, 
												_requestParams: buttonRequestParams
											}"/>
				</block>
			</block>
		</block>
	</block>
	<block className="AccountLevellingStepInfoLayout">
		<bind name="appear" value="'addedToStage'; 0.23; 0.07; {alpha: 0}; {alpha: 1}; 1"/>
		<style>
			<width value="844px"/>
			<height value="256px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="256px"/>
				<height value="100%"/>
			</style>
			<bind name="child" value="stepType ? stepType : 'no_item';	{ 	_imageURL: imageUrl,
															_imageData: imageData,
															_iconSize: '256px',
															}; {feature:		'IconAlItem',
																commonReward:	'IconAlItem',
																promoReward:	'IconAlDataItem',
																no_item:		'EmptyItem'
																}"/>
		</block>
		<block>
			<bind name="visible" value="battlesToStep &gt; 0 &amp;&amp; stepType != 'promoReward'"/>
			<style>
				<width value="60px"/>
				<height value="60px"/>
				<position value="absolute"/>
				<left value="98px"/>
				<top value="98px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
				<backgroundSize value="fill"/>
			</style>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<height value="100%"/>
				<marginTop value="32"/>
				<marginLeft value="48px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultBold30NM"/>
				<style>
					<leading value="-6"/>
					<maxWidth value="540"/>
					<marginTop value="12px"/>
				</style>
				<bind name="style" value="'alpha'; battlesToStep &gt; 0 ? 0.7 : 0.9"/>
				<bind name="text" value="headerText"/>
			</block>
			<block>
				<bind name="visible" value="(stepType == 'feature') &amp;&amp; hasVoicePrompt"/>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault17NM"/>
					<style>
						<width value="100%"/>
						<leading value="-3"/>
						<alpha value="0.7"/>
					</style>
					<bind name="text" value="subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: accountLevel})"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="battlesToStep &gt; 0"/>
				<bind name="tooltip" value="'AbuseStatusProfileTooltip'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {} : null"/>
				<style>
					<width value="100%"/>
					<alpha value="0.7"/>
					<marginTop value="16px"/>
				</style>
				<bind name="instance" value="'AccountLevelingItemAbused'; (battlesToStep &gt; 0) &amp;&amp; isAbuseStatusConfirmed ? {_isSmallIcon: true} : null"/>
				<bind name="instance" value="'AccountLevelingItemUnavailable'; (battlesToStep &gt; 0) &amp;&amp; !isAbuseStatusConfirmed ? {_battlesToStep: battlesToStep} : null"/>
			</block>
			<block>
				<bind name="visible" value="isTimedPromoReward ? true : false"/>
				<style>
					<width value="100%"/>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'TimeLeftIconAndTextLine'; isTimedPromoReward ? { _dueDate: promoRewardDueDate, _substTextIDS: 'IDS_PROMO_REWARD_DAYS_LEFT'} : null"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault19NM"/>
				<style>
					<maxWidth value="500"/>
					<alpha value="0.7"/>
					<marginTop value="24px"/>
				</style>
				<bind name="text" value="subHeaderText"/>
			</block>
			<block>
				<bind name="tooltip" value="'MouseInstructionTooltip'; {	_mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO'}],
														_maxWidth: 300}"/>
				<style>
					<marginTop value="32px"/>
				</style>
				<bind name="instance" value="'DefaultButton'; {	_width: '140px',
												_enabled: true,
												_isTransactionBtn: true,
												_label: 'IDS_PRMP_DETAILS_BUTTON', 
												_request: buttonRequest, 
												_requestParams: buttonRequestParams
											}"/>
			</block>
		</block>
	</block>
	<block className="AbuseStatusProfileTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'abuseData'; {	status: 		accountLevelInfo.abuseStatus,
								components: 	accountLevelInfo.abuseComponents,
								battlesToClean: accountLevelInfo.battlesForStatusClean}"/>
		<styleClass value="$DefaultInstantTooltipBehaviour"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<style>
			<width value="340px"/>
			<hitTest value="false"/>
		</style>
		<bind name="watch" value="'abuseStatusStr';	abuseData.status == 0	? 'NORMAL' :
									abuseData.status == 1	? 'SUSPECT'
																				: 'CONFIRMED'"/>
		<bind name="watch" value="'headerStr';	tr('IDS_ABUSE_STATUS_' + abuseStatusStr)"/>
		<bind name="watch" value="'abuseComponents'; abuseData.status != 0	? abuseData.components[AbuseStatus.SUSPECT]
																				: []"/>
		<bind name="watch" value="'headerClass'; (abuseData.status == 1)	? '$FontColorTeamkiller' :
								(abuseData.status == 2)	? '$FontColorCompareNegative'
																				: '$FontColorWhite'"/>
		<block>
			<style>
				<width value="100%"/>
				<margin value="12px"/>
			</style>
			<block type="text">
				<styleClass value="$MiddleVAligned"/>
				<style>
					<width value="100%"/>
					<leading value="-3"/>
				</style>
				<styleClass value="$TextHeaderBold"/>
				<bind name="class" value="headerClass"/>
				<bind name="text" value="headerStr"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<alpha value="1.4"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="12px"/>
					<marginTop value="8px"/>
					<marginRight value="12px"/>
					<marginBottom value="8px"/>
				</style>
				<bind name="repeat" value="abuseComponents; 'AbuseReasonMessage'; {}"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginTop value="-2px"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<marginLeft value="12px"/>
				<marginTop value="8px"/>
				<marginRight value="12px"/>
				<marginBottom value="8px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
					<leading value="-1"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="tr('IDS_ABUSE_STATUS_' + toUpperCase(abuseStatusStr) + '_PUNISHMENT')"/>
			</block>
			<block type="text">
				<bind name="visible" value="abuseData.status == 1"/>
				<style>
					<width value="100%"/>
					<marginTop value="4px"/>
					<marginBottom value="2px"/>
					<leading value="-1"/>
				</style>
				<styleClass value="$TextDefault"/>
				<text value="IDS_ABUSE_STATUS_SUSPECT_INFO"/>
			</block>
		</block>
		<block className="HorizontalDivider">
			<styleClass value="$PxHorizontalCorrection"/>
			<style>
				<width value="100%"/>
				<height value="3px"/>
			</style>
			<block className="divider_h" type="native">
				<styleClass value="$Fullsize"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<alpha value="1.4"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<marginLeft value="12px"/>
					<marginTop value="8px"/>
					<marginRight value="12px"/>
					<marginBottom value="12px"/>
				</style>
				<block type="text">
					<style>
						<width value="100%"/>
						<leading value="-2"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="text" value="tr('IDS_ABUSE_' + toUpperCase(abuseStatusStr) + '_STATUS_CLEAN')"/>
				</block>
				<block type="text">
					<style>
						<marginLeft value="10px"/>
					</style>
					<styleClass value="$TextDefaultBold"/>
					<bind name="text" value="abuseData.battlesToClean"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="visible" value="_mouseInstructionText.length &gt; 0"/>
			<block>
				<style>
					<width value="100%"/>
					<marginTop value="-2px"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'MouseInstruction';  _mouseInstructionText.length &gt; 0 ? {_type: 'left', _instructionText: _mouseInstructionText, _maxWidth: 300	} : null"/>
			</block>
		</block>
		<block className="notification_frame_teamkiller" type="native">
			<bind name="visible" value="abuseData.status == 1"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block className="notification_frame" type="native">
			<bind name="visible" value="abuseData.status == 2"/>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
	</block>
	<block className="AccountLevelingLevelIconItem">
		<bind name="primaryEntityDH" value="'splitRunTestVoicePromptEntity'; CC.splitRunTest; 'Voice_Prompt_Research'"/>
		<bind name="watchDH" value="'voicePromptResearchData'; ['splitRunTestVoicePromptEntity.splitRunTest.evDataChanged']; splitRunTestVoicePromptEntity.splitRunTest.data"/>
		<bind name="watch" value="'hasVoicePrompt'; voicePromptResearchData.hasVoicePrompt"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'accountLevel'; _index + 1"/>
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'accountStepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged'];
										accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'stepFeature';	['accountLevelingStepEntity.accountLevelingStep.evFeaturesChanged'];
									accountLevelingStepEntity.accountLevelingStep.features"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeature"/>
		<bind name="watchDH" value="'iconFeaturePath';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watch" value="'featureUrl'; isLocked	? 'url:' + iconFeaturePath + '_locked.png'
										: 'url:' + iconFeaturePath + '.png'"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep'; accountStepPoints - currentPoints"/>
		<bind name="watch" value="'ALIndex'; _index + 1"/>
		<bind name="watch" value="'isLocked'; battlesToStep &gt; 0"/>
		<bind name="soundSet" value="'default_button'"/>
		<style>
			<height value="224px"/>
			<width value="164px"/>
		</style>
		<bind name="var" value="{ 
		ctRollOver: {
			redMultiplier: 1,
			greenMultiplier: 1,
			blueMultiplier: 1,
			alphaMultiplier: 1,
			redOffset: 15,
			greenOffset: 15,
			blueOffset: 15,
			alphaOffset: 0
		}
	}"/>
		<block>
			<bind name="visible" value="!isLocked"/>
			<style>
				<position value="absolute"/>
				<height value="164px"/>
				<width value="164px"/>
				<backgroundSize value="fill"/>
				<hitTest value="false"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/unlock_shadow.png"/>
			</style>
			<bind name="transition" value="_isSelect; 0.07; {alpha: 0.6, scaleX: 0.8, scaleY: 0.8, top: 16, left: 16}; {alpha: 0.8, scaleX: 1, scaleY: 1, top: 0, left: 0}"/>
		</block>
		<block>
			<style>
				<height value="164px"/>
				<width value="164px"/>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="_isSelect  &amp;&amp; !isLocked; 0.07; {top: 0}; {top: -4}"/>
			<bind name="colorTransform" value="	rollOver &amp;&amp; !_isSelect	? ctRollOver
														: {}"/>
			<bind name="instance" value="'IconAlItem'; 	{_iconSize: '164px',
										_imageURL: featureUrl}"/>
		</block>
		<block>
			<bind name="visible" value="isLocked"/>
			<style>
				<width value="60px"/>
				<height value="60px"/>
				<position value="absolute"/>
				<top value="52px"/>
				<left value="52px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingBigLockIcon.png"/>
				<backgroundSize value="fill"/>
			</style>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<left value="31px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'bottom'; hasVoicePrompt ? '5px' : '18px'"/>
			<block>
				<bind name="instance" value="'ALCarouselPointer'; { _isSelect: _isSelect }"/>
			</block>
			<block>
				<styleClass value="$MiddleAligned"/>
				<style>
					<marginTop value="12px"/>
				</style>
				<bind name="instance" value="'ALCarouselLevelNumberItem'; hasVoicePrompt ? {_isSelect: _isSelect, _accessLevel: ALIndex} : null"/>
			</block>
		</block>
		<block>
			<style>
				<height value="164px"/>
				<width value="140px"/>
				<position value="absolute"/>
				<left value="12px"/>
				<backgroundColor value="0x01000000"/>
			</style>
		</block>
	</block>
	<block className="AccountProgressReward">
		<bind name="firstEntityDH" value="'accountsRewardEntity'; CC.accountLevelingRewards"/>
		<bind name="watchDH" value="'rewardsDict';	['accountsRewardEntity.accountLevelingRewards.evRewardsDictChanged'];	accountsRewardEntity.accountLevelingRewards.rewardsDict[_thisRewardStepPoints]"/>
		<bind name="indexOf" value="rewardsDict; indexOfPromoReward; { 'type': 'promo' }"/>
		<bind name="watch" value="'isPromo'; indexOfPromoReward &gt; -1"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'isUnlocked'; currentProgressPoints &gt;= _thisRewardStepPoints"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="var" value="{rewardIconSize: 32}"/>
		<bind name="watch" value="'isPromoTooCloseToCommonReward'; isPromo &amp;&amp; _minDistanceToNearestReward &gt; 0 &amp;&amp; _minDistanceToNearestReward &lt; rewardIconSize"/>
		<bind name="soundSet" value="'default_button'"/>
		<block>
			<style>
				<position value="absolute"/>
				<top value="27px"/>
				<width value="1px"/>
				<height value="6px"/>
				<backgroundRepeatY value="true"/>
				<alpha value="0.5"/>
			</style>
			<bind name="style" value="'height'; isPromoTooCloseToCommonReward ? '42px' : '6px'"/>
			<bind name="style" value="'backgroundImage'; 'url:../accountLevel/progressBarIcons/accountLevelingRewardVerticalDottedLine.png'"/>
		</block>
		<block>
			<bind name="tooltip" value="'RewardALTooltip'; {_rewardIndex: _thisRewardStepPoints, _isSelect: _isSelect}"/>
			<bind name="dispatch" value="'click'; 'evAccountLevelingItemClicked'; 	{carouselItemSelectedIndex: -1*_thisRewardStepPoints,
																	 currentImageIdx: currentImageIdx}"/>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<style>
				<backgroundColor value="0x01000000"/>
			</style>
			<bind name="style" value="'width'; rewardIconSize + 'px'"/>
			<bind name="style" value="'height'; rewardIconSize + 'px'"/>
			<bind name="style" value="'top'; isPromoTooCloseToCommonReward ? '70px' : '35px'"/>
			<bind name="watch" value="'backgroundURL'; 'url:../accountLevel/progressBarIcons/icon_'	+ (isPromo ? 'promoreward' : 'reward')
																					+ (isUnlocked ? '' : '_locked')
																					+ '.png'"/>
			<block>
				<styleClass value="$Fullsize"/>
				<bind name="watch" value="'bgOpacity';	_isSelect	? 1 :
										mouseDown 	? 0.6 :
										rollOver	? 0.7
													: 0.6"/>
				<bind name="style" value="'backgroundImage'; backgroundURL"/>
				<bind name="style" value="'alpha'; bgOpacity"/>
			</block>
		</block>
	</block>
	<block className="AccountLevellingProgressBar">
		<bind name="dataRefDH" value="'accountLevelingStepEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'accountLastStep'; ['accountLevelingStepEntity.accountLevelingStep.evIsLastStepChanged']; accountLevelingStepEntity.accountLevelingStep.isLastStep"/>
		<bind name="watch" value="'isSelect'; _carouselItemSelectedIndex == $index"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<width value="20px"/>
				<height value="1px"/>
			</style>
		</block>
		<block>
			<bind name="stageSize"/>
			<block>
				<bind name="tooltip" value="'FeatureALTooltip'; {_featureEntityId: accountLevelingStepEntity.id, _isSelect: isSelect, _index: $index}"/>
				<bind name="dispatch" value="'click'; 'evAccountLevelingItemClicked'; 	{ carouselItemSelectedIndex: $index,
																		  currentImageIdx: 1}"/>
				<bind name="instance" value="'AccountLevelingLevelIconItem'; {	_accountLevelingStepEntityID: accountLevelingStepEntity.id,
																_index: $index,
																_isSelect: isSelect}"/>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="71px"/>
			</style>
			<bind name="instance" value="'AccountLevelingProgressItem'; !accountLastStep ? {	_accountLevelingStepEntityID: accountLevelingStepEntity.id,
																			_carouselItemSelectedIndex: _carouselItemSelectedIndex} : null"/>
		</block>
	</block>
	<block className="AccountLevelingProgressItem">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'accountStepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'accountNextStepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evNextStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.nextStepPoints"/>
		<bind name="watch" value="'isProgressBarWithSteps'; accountNextStepPoints - accountStepPoints &lt; 16"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'maxStageWidth'; stageWidth &lt; 1920 ? stageWidth : 1920"/>
		<bind name="watch" value="'widthOfItem'; math.round((maxStageWidth-1280)/(1920-1280)*(424-332)+332)"/>
		<bind name="watch" value="'widthOfImg'; 164"/>
		<bind name="watch" value="'padding'; 0"/>
		<bind name="watch" value="'wholeWidth'; widthOfItem - widthOfImg - padding*2"/>
		<bind name="style" value="'width'; widthOfItem - widthOfImg + 'px'"/>
		<bind name="style" value="'paddingLeft'; padding + 'px'"/>
		<bind name="style" value="'paddingRight'; padding + 'px'"/>
		<bind name="child" value="isProgressBarWithSteps ? 0 : 1; {	_wholeWidth: wholeWidth,
													_carouselItemSelectedIndex: _carouselItemSelectedIndex,
													_accountLevelingStepEntityID: _accountLevelingStepEntityID};	'AccountStepsProgressWithRewards';
																													'AccountLineProgressWithRewards'"/>
	</block>
	<block className="AccountLineProgressWithRewards">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints';		['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'nextStepPoints';	['accountLevelingStepEntity.accountLevelingStep.evNextStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.nextStepPoints"/>
		<bind name="watchDH" value="'rewardsList';		['accountLevelingStepEntity.accountLevelingStep.evRewardsListChanged']; accountLevelingStepEntity.accountLevelingStep.rewardsList"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'isWithRewards'; rewardsList.length &gt; 0"/>
		<bind name="watch" value="'countRewards'; isWithRewards ? rewardsList.length : 0"/>
		<bind name="watch" value="'countSteps'; nextStepPoints - stepPoints"/>
		<bind name="watch" value="'widthStep'; (_wholeWidth-1)/countSteps"/>
		<style>
			<align value="center"/>
			<width value="100%"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<style>
				<height value="100%"/>
			</style>
			<block>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<position value="absolute"/>
					<height value="1px"/>
					<width value="100%"/>
					<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressRepeaterBG.png"/>
					<backgroundRepeatX value="true"/>
				</style>
			</block>
			<bind name="repeat" value="countRewards; 'LineProgressAndReward'; {	_widthProgressBarStep: widthStep,
																_carouselItemSelectedIndex: _carouselItemSelectedIndex,
																_accountLevelingStepEntityID: _accountLevelingStepEntityID}"/>
			<bind name="instance" value="'LineProgress'; rewardsList[rewardsList.length-1] == nextStepPoints ? null : {_startStepPoints: isWithRewards ? rewardsList[rewardsList.length-1] : stepPoints, _finishStepPoints: nextStepPoints, _currentProgressPoints: currentProgressPoints, _widthStep:widthStep}"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="LineProgressAndReward">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints';		['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'rewardsList';		['accountLevelingStepEntity.accountLevelingStep.evRewardsListChanged']; accountLevelingStepEntity.accountLevelingStep.rewardsList"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'previousStep'; $index == 0 ? stepPoints : rewardsList[$index-1]"/>
		<bind name="watch" value="'thisRewardStepPoints'; rewardsList[$index]"/>
		<bind name="watch" value="'deltaDistanceToPreviousStep'; $index == 0 					? 0 : thisRewardStepPoints - rewardsList[$index-1]"/>
		<bind name="watch" value="'deltaDistanceToNextStep'; $index == rewardsList.length - 1	? 0 : rewardsList[$index+1] - thisRewardStepPoints"/>
		<bind name="watch" value="'minDistanceToNearestReward';	deltaDistanceToPreviousStep == 0	? deltaDistanceToNextStep*_widthProgressBarStep :
												deltaDistanceToNextStep == 0 		? deltaDistanceToPreviousStep*_widthProgressBarStep
																					: math.min(deltaDistanceToNextStep, deltaDistanceToPreviousStep)*_widthProgressBarStep"/>
		<style>
			<flow value="horizontal"/>
			<height value="100%"/>
		</style>
		<bind name="instance" value="'LineProgress'; {_startStepPoints: previousStep, _finishStepPoints: thisRewardStepPoints, _currentProgressPoints: currentProgressPoints, _widthStep: _widthProgressBarStep}"/>
		<block>
			<styleClass value="$MiddleVAlignedAbsolutely"/>
			<style>
				<right value="0px"/>
				<width value="1px"/>
				<height value="27px"/>
			</style>
			<bind name="instance" value="'AccountProgressReward'; {	_thisRewardStepPoints: thisRewardStepPoints,
													_isSelect: (_carouselItemSelectedIndex == -1*thisRewardStepPoints),
													_minDistanceToNearestReward: minDistanceToNearestReward}"/>
		</block>
	</block>
	<block className="LineProgress">
		<style>
			<flow value="horizontal"/>
			<align value="middle"/>
			<height value="100%"/>
		</style>
		<block>
			<bind name="style" value="'width'; math.round((_finishStepPoints - _startStepPoints) * _widthStep) - 1 + 'px'"/>
			<style>
				<height value="100%"/>
				<paddingTop value="2px"/>
				<paddingBottom value="2px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressBorderBG.png"/>
				<backgroundRepeatX value="true"/>
			</style>
			<block>
				<style>
					<height value="100%"/>
					<backgroundColor value="0xFFFFCC66"/>
				</style>
				<bind name="style" value="'width'; 	_currentProgressPoints &gt;= _finishStepPoints 	? '100%' :
									_currentProgressPoints &gt; _startStepPoints		? math.round((_currentProgressPoints - _startStepPoints) * _widthStep) + 'px'
																					: '0px'"/>
			</block>
		</block>
		<block>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
	</block>
	<block className="AccountStepsProgressWithRewards">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'nextStepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evNextStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.nextStepPoints"/>
		<style>
			<align value="center"/>
			<width value="100%"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="watch" value="'stepsCount'; nextStepPoints - stepPoints"/>
		<bind name="watch" value="'progressBarItemWidth'; math.round(_wholeWidth/stepsCount))"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleAlignedAbsolutely"/>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<height value="1px"/>
				<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressRepeaterBG.png"/>
				<backgroundRepeatX value="true"/>
			</style>
			<bind name="style" value="'width'; progressBarItemWidth*stepsCount + 1 + 'px'"/>
		</block>
		<bind name="repeat" value="stepsCount; 'AccountProgressStep'; {	_progressBarItemWidth: progressBarItemWidth,
														_carouselItemSelectedIndex: _carouselItemSelectedIndex,
														_accountLevelingStepEntityID: _accountLevelingStepEntityID}"/>
	</block>
	<block className="AccountProgressStep">
		<bind name="entityDH" value="'accountLevelingStepEntity'; _accountLevelingStepEntityID"/>
		<bind name="watchDH" value="'stepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'rewardsList'; ['accountLevelingStepEntity.accountLevelingStep.evRewardsListChanged']; accountLevelingStepEntity.accountLevelingStep.rewardsList"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'isUnlocked'; $index &lt; currentProgressPoints - stepPoints"/>
		<style>
			<height value="100%"/>
			<marginRight value="1px"/>
			<paddingTop value="2px"/>
			<paddingBottom value="2px"/>
			<backgroundImage value="url:../accountLevel/progressBarIcons/accountLevelingProgressBorderBG.png"/>
			<backgroundRepeatX value="true"/>
		</style>
		<bind name="style" value="'width'; _progressBarItemWidth - 1 + 'px'"/>
		<block>
			<bind name="visible" value="isUnlocked"/>
			<styleClass value="$Fullsize"/>
			<style>
				<backgroundColor value="0xFFFFCC66"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="-1px"/>
				<width value="1px"/>
				<height value="27px"/>
				<backgroundColor value="0xffffffff"/>
				<alpha value="0.5"/>
			</style>
		</block>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<style>
				<position value="absolute"/>
				<right value="-1px"/>
				<width value="1px"/>
				<height value="27px"/>
			</style>
			<bind name="watch" value="'thisStepPoints'; stepPoints + $index + 1"/>
			<bind name="watch" value="'indexInRewardsArr'; indexOf(thisStepPoints, rewardsList)"/>
			<bind name="watch" value="'deltaDistanceToPreviousStep'; indexInRewardsArr == -1 || indexInRewardsArr == 0						? 0 : thisStepPoints - rewardsList[indexInRewardsArr-1]"/>
			<bind name="watch" value="'deltaDistanceToNextStep'; indexInRewardsArr == -1 || indexInRewardsArr == rewardsList.length - 1		? 0 : rewardsList[indexInRewardsArr+1] - thisStepPoints"/>
			<bind name="watch" value="'minDistanceToNearestReward';	deltaDistanceToPreviousStep == 0	? deltaDistanceToNextStep*_progressBarItemWidth :
													deltaDistanceToNextStep == 0 		? deltaDistanceToPreviousStep*_progressBarItemWidth
																						: math.min(deltaDistanceToNextStep, deltaDistanceToPreviousStep)*_progressBarItemWidth"/>
			<bind name="instance" value="'AccountProgressReward'; (indexInRewardsArr &gt; -1)	? {	_thisRewardStepPoints: thisStepPoints,
																				_isSelect: (thisStepPoints == -1*_carouselItemSelectedIndex),
																				_minDistanceToNearestReward: minDistanceToNearestReward}
																			: null"/>
		</block>
	</block>
	<block className="ALCarouselPointer">
		<style>
			<width value="102px"/>
			<height value="11px"/>
			<backgroundSize value="fill"/>
		</style>
		<bind name="style" value="'backgroundImage'; 'url:../accountLevel/progressBarIcons/carousel_pointer_up.png'"/>
		<block>
			<bind name="transition" value="_isSelect; 0.07; {alpha: 0, scaleY:0, top: 11}; {alpha: 1, scaleY:1, top: 0}"/>
			<style>
				<position value="absolute"/>
				<width value="102px"/>
				<height value="11px"/>
				<backgroundSize value="fill"/>
			</style>
			<bind name="style" value="'backgroundImage';	'url:../accountLevel/progressBarIcons/carousel_pointer_toggle.png'"/>
		</block>
	</block>
	<block className="ALCarouselLevelNumberItem">
		<bind name="transition" value="_isSelect; 0.07; {alpha: 0.7}; {alpha: 1}; {alpha: 0.7}"/>
		<block type="text">
			<styleClass value="$TextDefaultBold19NM"/>
			<bind name="text" value="_accessLevel"/>
		</block>
	</block>
	<block className="RewardALTooltip">
		<bind name="collectionDH" value="CC.accountPromoRewardBanner; 'promoRewardCollection';  'byBattles.' + _rewardIndex"/>
		<bind name="entityDH" value="'promoRewardEntity'; promoRewardCollection[0].id"/>
		<bind name="watchDH" value="'promoRewardDueDate'; ['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.expirationTime"/>
		<bind name="watchDH" value="'promoRewardTitle'; ['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.title"/>
		<bind name="watchDH" value="'promoRewardImageSmall';		['promoRewardEntity.accountPromoRewardBanner.evChanged']; promoRewardEntity.accountPromoRewardBanner.imageSmall"/>
		<bind name="primaryEntityDH" value="'imageEntity'; CC.byteArrayData; promoRewardImageSmall"/>
		<bind name="watchDH" value="'imageData'; ['imageEntity.byteArrayData.evChanged']; imageEntity.byteArrayData.data"/>
		<bind name="watch" value="'isTimelessPromoReward'; !promoRewardDueDate || promoRewardDueDate &lt; 1"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; accountLevelInfo.abuseStatus == 2"/>
		<bind name="firstEntityDH" value="'accountLevelingRewardsEntity'; CC.accountLevelingRewards"/>
		<bind name="watchDH" value="'rewardsDict'; ['accountLevelingRewardsEntity.accountLevelingRewards.evRewardsDictChanged']; accountLevelingRewardsEntity.accountLevelingRewards.rewardsDict"/>
		<bind name="watch" value="'rewardEntityId'; rewardsDict[_rewardIndex][0].rewardId"/>
		<bind name="entityDH" value="'rewardEntity'; rewardEntityId"/>
		<bind name="watchDH" value="'rewardIds'; []; rewardEntity.rewardsContainer.rewardIds"/>
		<bind name="indexOf" value="rewardsDict[_rewardIndex]; indexOfPromoReward; { 'type': 'promo' }"/>
		<bind name="watch" value="'isPromoReward'; indexOfPromoReward &gt; -1"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep'; _rewardIndex - currentProgressPoints"/>
		<bind name="watch" value="'isSimilarRewards';	rewardEntity.rewardsContainer.subtype &amp;&amp; rewardEntity.rewardsContainer.rewardIds.length &gt; 1"/>
		<bind name="watch" value="'isSingleRewardType';	rewardEntity.rewardsContainer.rewardIds.length == 1"/>
		<bind name="watch" value="'rewardType'; rewardEntity.rewardComponent.type"/>
		<bind name="primaryEntityDH" value="'splitRunTestVoicePromptEntity'; CC.splitRunTest; 'Voice_Prompt_Research'"/>
		<bind name="watchDH" value="'voicePromptResearchData'; ['splitRunTestVoicePromptEntity.splitRunTest.evDataChanged']; splitRunTestVoicePromptEntity.splitRunTest.data"/>
		<bind name="watch" value="'hasVoicePrompt'; voicePromptResearchData.hasVoicePrompt"/>
		<bind name="watch" value="'rewardAlStatusIcon'; battlesToStep &lt; 1 	? SC.Ui_styles.UNIFIED_STATUS.CHECK :
									isAbuseStatusConfirmed 	? SC.Ui_styles.UNIFIED_STATUS.WARNING
															: SC.Ui_styles.UNIFIED_STATUS.LOCK"/>
		<bind name="watch" value="'rewardAlStatusText'; 	battlesToStep &lt; 1 		? hasVoicePrompt ? 	'IDS_AVAILABLE_ACCESS_LEVEL' :
																					'IDS_AVAILABLE_FEATURE' :
										isAbuseStatusConfirmed 	? 'IDS_ACCOUNT_PROGRESS_ABUSED'
																: subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: battlesToStep}, battlesToStep)"/>
		<bind name="watch" value="'rewardIconPath';	isSimilarRewards				? toLowerCase(rewardEntity.rewardComponent.subtype + '_set') :
									isSingleRewardType				?
										rewardType == 	'Exterior' 		? toLowerCase(exteriorConfig.type) :
										rewardType == 	'Resource'		? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'ResourceCoeff'	? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'Exchange'		? toLowerCase(rewardEntity.rewardComponent.subtype) :
										rewardType == 	'Lootbox'		? 'lootbox'
																		: toLowerCase(rewardEntity.rewardComponent.type)
																	: 'multiple'"/>
		<bind name="watch" value="'rewardHeaderTextWithAmount';	isSimilarRewards			? toUpperCase('IDS_REWARDS_SET_' + rewardEntity.rewardComponent.subtype) :
												isSingleRewardType			?
													rewardType == 	'Ship' 			? 'IDS_SHIP' :
													rewardType == 	'Crew' 			? 'IDS_CREW' :
													rewardType == 	'Exterior' 		? exteriorConfig.type == ExteriorTypes.ENSIGN 	? toUpperCase('IDS_' + exteriorConfig.type + '_TITLE') 
																																	: subst(toUpperCase('IDS_PL_' + exteriorConfig.type + '_TITLE'), [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Ability'		? subst('IDS_PL_ABILITY_TITLE', [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Modernization'	? subst('IDS_PL_MODERNIZATION_TITLE', [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'Resource'		? 	rewardEntity.rewardComponent.subtype == 'credits' ||
																						rewardEntity.rewardComponent.subtype == 'gold' ||
																						rewardEntity.rewardComponent.subtype == 'slots' ||
																						rewardEntity.rewardComponent.subtype == 'barCapacity'		? subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
																						rewardEntity.rewardComponent.subtype == 'wows_premium' ||    
																						rewardEntity.rewardComponent.subtype == 'premium'			? subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  rewardEntity.rewardComponent.params.text})
																																					: subst(toUpperCase('IDS_REWARDS_PL_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount:  format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'ResourceCoeff'	? toUpperCase('IDS_REWARD_' + rewardEntity.rewardComponent.subtype + '_TITLE') :
													rewardType == 	'Exchange'		? toUpperCase('IDS_PRMP_ITEM_' + rewardEntity.rewardComponent.subtype) :
													rewardType == 	'Lootbox'		? subst(toUpperCase('IDS_PL_LOOTBOX_' + rewardEntity.rewardComponent.subtype + '_TITLE'), [], {_amount: format(rewardEntity.rewardComponent.amount, -1)}, rewardEntity.rewardComponent.amount) :
													rewardType == 	'DogTag'		?  toUpperCase('IDS_DOGTAG_' + rewardEntity.rewardComponent.name + '_NAME') :
													rewardType == 	'Collection'	?  toUpperCase('IDS_' + rewardEntity.rewardComponent.name)
																					: 'IDS_REWARDS_SET'
																			: 'IDS_REWARDS_SET'"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="360px"/>
		</style>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="12px"/>
				<paddingLeft value="12px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block>
					<bind name="instance" value="'IconAlDataItem'; isPromoReward ? {_iconSize: '80px', _imageData: imageData} : null"/>
					<bind name="instance" value="'IconAlItem'; !isPromoReward ? {_iconSize: '80px', _imageURL: 'url:../accountLevel/rewards/icon_reward_' + rewardIconPath + '_small.png'} : null"/>
				</block>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<width value="100%"/>
						<marginLeft value="12"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefaultBold19NM"/>
						<style>
							<leading value="-4"/>
							<width value="100%"/>
							<alpha value="0.9"/>
						</style>
						<bind name="text" value="isPromoReward ? promoRewardTitle : rewardHeaderTextWithAmount"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; { 	_unifiedStatus: rewardAlStatusIcon,
														_text: rewardAlStatusText}"/>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; (!isTimelessPromoReward &amp;&amp; isPromoReward) ? {	_dueDateTimeStamp: promoRewardDueDate,
																									_substTextIDS: 'IDS_PROMO_REWARD_DAYS_LEFT' } : null"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!_isSelect"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemMouseInstruction'; !_isSelect ? { _type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO' } : null"/>
			</block>
		</block>
	</block>
	<block className="FeatureALTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watch" value="'isAbuseStatusConfirmed'; accountLevelInfo.abuseStatus == 2"/>
		<bind name="entityDH" value="'accountLevelingStepEntity'; _featureEntityId"/>
		<bind name="watchDH" value="'accountStepPoints'; ['accountLevelingStepEntity.accountLevelingStep.evThisStepPointsChanged']; accountLevelingStepEntity.accountLevelingStep.thisStepPoints"/>
		<bind name="watchDH" value="'stepFeature'; ['accountLevelingStepEntity.accountLevelingStep.evFeaturesChanged'];	accountLevelingStepEntity.accountLevelingStep.features"/>
		<bind name="primaryEntityDH" value="'featureEntity'; CC.accountFeature; stepFeature"/>
		<bind name="watchDH" value="'iconFeaturePath';	['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.iconPath"/>
		<bind name="watchDH" value="'titleFeature';		['featureEntity.accountFeature.evStateChanged']; featureEntity.accountFeature.title"/>
		<bind name="firstEntityDH" value="'accountLevelPointsEntity'; CC.accountLevelPoints"/>
		<bind name="watchDH" value="'currentProgressPoints'; ['accountLevelPointsEntity.accountLevelPoints.evCurrentLevelPointsChanged']; accountLevelPointsEntity.accountLevelPoints.currentLevelPoints"/>
		<bind name="watch" value="'battlesToStep'; accountStepPoints - currentProgressPoints"/>
		<bind name="watch" value="'accountLevel'; _index + 1"/>
		<bind name="primaryEntityDH" value="'splitRunTestVoicePromptEntity'; CC.splitRunTest; 'Voice_Prompt_Research'"/>
		<bind name="watchDH" value="'voicePromptResearchData'; ['splitRunTestVoicePromptEntity.splitRunTest.evDataChanged']; splitRunTestVoicePromptEntity.splitRunTest.data"/>
		<bind name="watch" value="'hasVoicePrompt'; voicePromptResearchData.hasVoicePrompt"/>
		<bind name="watch" value="'featureAlStatusIcon'; battlesToStep &lt; 1 		? SC.Ui_styles.UNIFIED_STATUS.CHECK :
										isAbuseStatusConfirmed 	? SC.Ui_styles.UNIFIED_STATUS.WARNING
																: SC.Ui_styles.UNIFIED_STATUS.LOCK"/>
		<bind name="watch" value="'featureAlStatusText'; battlesToStep &lt; 1 		? hasVoicePrompt ? 	'IDS_AVAILABLE_ACCESS_LEVEL' :
																					'IDS_AVAILABLE_FEATURE' :
										isAbuseStatusConfirmed 	? 'IDS_ACCOUNT_PROGRESS_ABUSED'
																: subst('IDS_BATTLES_TO_NEXT_STEP', [], {battles: battlesToStep}, battlesToStep)"/>
		<bind name="watch" value="'subheaderText'; hasVoicePrompt ? subst('IDS_PROFILE_ACCOUNT_LEVEL', [], {_accountLevel: accountLevel}) : null"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="360px"/>
		</style>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<margin value="-1px"/>
			</style>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block className="contrast_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="optionData.contrast"/>
			</block>
			<block className="hint_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<paddingRight value="12px"/>
				<paddingLeft value="12px"/>
				<paddingBottom value="12px"/>
				<paddingTop value="12px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemHeaderWithIconAndText'; {	_imageWidth: '80px',
																_imageHeight: '80px',
																_imageUrl: 'url:' + iconFeaturePath + '_small.png',
																_headerText: titleFeature,
																_subheaderText: subheaderText
																}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="true"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemStatusLine'; { _unifiedStatus: featureAlStatusIcon,
													_text: featureAlStatusText}"/>
			</block>
			<block className="TooltipSystemHorizontalDivider">
				<bind name="visible" value="!_isSelect"/>
				<style>
					<width value="100%"/>
					<height value="2px"/>
					<marginTop value="12px"/>
					<marginBottom value="12px"/>
					<marginRight value="-12px"/>
					<marginLeft value="-12px"/>
					<backgroundSize value="fill"/>
					<backgroundImage value="url:../service_kit/dividers/divider_h.png"/>
				</style>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'TooltipSystemMouseInstruction'; !_isSelect ? { _type: 'left', _instructionText: 'IDS_HINT_LEFT_CLICK_FOR_FURTHER_INFO' } : null"/>
			</block>
		</block>
	</block>
	<css name="$TextModernizationCostCr">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xEEEEEE"/>
	</css>
	<css name="$TextModernizationCostGold">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0xFFCC66"/>
	</css>
	<css name="$TextModernizationCostDeficit">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="15"/>
		<selectable value="false"/>
		<textColor value="0x08222a"/>
	</css>
	<block className="ModernizationSlotInfotip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';	['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isInFormation"/>
		<bind name="action" value="'Tooltip.selfOpened'; 'tipTargetOpened'; {elementName: 'ModernizationSlotInfotip'}"/>
		<styleClass value="$VerticalInfotipBehaviourCenter"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="-13px"/>
				<marginRight value="-13px"/>
				<marginTop value="-9px"/>
				<marginBottom value="-18px"/>
			</style>
		</block>
		<block className="dock_panel_pin" type="native">
			<bind name="gotoAndStop!" value="'up'"/>
			<params>
				<param name="name" value="pinTop"/>
			</params>
			<style>
				<position value="absolute"/>
				<top value="-10px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="350px"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="list; 'ModernizationSlotInfotipItem'"/>
			</block>
			<block>
				<bind name="visible" value="!(isLocked || isInFormation)"/>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefault"/>
					<bind name="class" value="'$FontColorStrongBlueish'"/>
					<text value="IDS_CHOOSE_MODERNIZATION"/>
				</block>
			</block>
			<block>
				<bind name="visible" value="!!(isLocked || isInFormation)"/>
				<styleClass value="$InfoBlockIndent"/>
				<block className="icon_warning_orange" type="native">
					<style>
						<marginTop value="4px"/>
					</style>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<style>
						<maxWidth value="300"/>
					</style>
					<bind name="class" value="'$FontColorUnready'"/>
					<bind name="text" value="isInFormation				? (divisionEntranceData.divisionType == 'party')	? 'IDS_SET_UNREADY_PARTY_FIRST_TO_BUY_MODERNIZATION'
																											: 'IDS_SET_UNREADY_DIVISION_FIRST_TO_BUY_MODERNIZATION'
														 : 'IDS_LEAVE_BATTLE_FIRST_TO_BUY_MODERNIZATION'"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="dock_panel_pin" type="native">
				<bind name="gotoAndStop!" value="'down'"/>
				<params>
					<param name="name" value="pinBottom"/>
				</params>
				<style>
					<position value="absolute"/>
					<bottom value="-9"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ModernizationEmptySlotTooltip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionEntranceData'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'isInFormation';	['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isInFormation"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<styleClass value="$MouseDisable"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMapCustom">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<hitTest value="false"/>
			</style>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="mc_blurmap3" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$Fullsize"/>
				<bind name="blurMap" value="0"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="350px"/>
				<marginTop value="9px"/>
			</style>
			<bind name="repeat" value="list; 'ModernizationSlotInfotipItem'; {_showInTooltip: true}"/>
		</block>
		<block>
			<bind name="visible" value="!(isLocked || isInFormation)"/>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'MouseInstruction'; { _type: 'left', _instructionText: 'IDS_TOOLTIP_EMPTY_SLOT', _maxWidth: 300 }"/>
		</block>
		<block>
			<bind name="visible" value="(isLocked || isInFormation)"/>
			<styleClass value="$InfoBlockIndent"/>
			<block className="icon_warning_orange" type="native">
				<style>
					<marginTop value="4px"/>
				</style>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<style>
					<maxWidth value="300"/>
				</style>
				<bind name="class" value="'$FontColorUnready'"/>
				<bind name="text" value="isInFormation				? (divisionEntranceData.divisionType == 'party')	? 'IDS_SET_UNREADY_PARTY_FIRST_TO_BUY_MODERNIZATION'
																										: 'IDS_SET_UNREADY_DIVISION_FIRST_TO_BUY_MODERNIZATION'
													 : 'IDS_LEAVE_BATTLE_FIRST_TO_BUY_MODERNIZATION'"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="ModernizationSlotInfotipItem">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];		shipOwnEntity.ownShip.isLocked"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'MODS_COST_Demontage'; 'unmountPrice'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + modNumericId; 'priceInfoSet'"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_INFO + 'SELL_COEF'; 'sellCoef'"/>
		<bind name="var" value="{unmountCost:unmountPrice.prices[0].finalPrice}"/>
		<bind name="catch" value="'selectedPriceChanged'"/>
		<bind name="var" value="{ selectedPriceIndex: 0 }"/>
		<bind name="watch" value="'validSelectedPriceIndex'; selectedPriceIndex &gt;= priceInfoSet.prices.length ? 0 : selectedPriceIndex"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="name" value="title"/>
		<style>
			<width value="100%"/>
			<height value="70px"/>
		</style>
		<block>
			<bind name="tooltip" value="'ModernizationTooltip'; {installed:installed, iconPath: iconPath, title: title, _attributesPositive: attributesPositive, _attributesNegative: attributesNegative,
												_attributesNeutral: attributesNeutral, numInStorage:numInStorage, tooltiptype: 0, priceInfoSet: priceInfoSet, _modId: modId, 
												type:type, description: description}; 0"/>
			<styleClass value="$Fullsize"/>
			<block>
				<bind name="request" value="'click'; !isLocked ? 'modernizationClicked' : null; {modId:modId, slotId:slotId, selectedCurrency: priceInfoSet.prices[validSelectedPriceIndex].currencyID, selectedPriceIndex: validSelectedPriceIndex}"/>
				<styleClass value="$Fullsize"/>
				<block className="dock_submenu_item" type="native">
					<bind name="menu" value="'SelectUnmountTypeInfotip'; !isLocked					? {sellCoef: sellCoef, numInStorage:numInStorage, installed:installed, modId:modId, slotId:slotId, _unmountPriceInfo: unmountPrice.prices[0], purchasePriceInfo: priceInfoSet.prices[validSelectedPriceIndex], selectedPriceIndex: validSelectedPriceIndex }
																					: null; null; 'selectUnmountTypeInfotipVisible'"/>
					<bind name="selected" value="(installed || selectUnmountTypeInfotipVisible)"/>
					<styleClass value="$Fullsize"/>
					<params>
						<param name="soundSet" value="dropmenu_button"/>
					</params>
					<bind name="action" value="'rollOver'; 'ServerUIDataUSS.setModernizationSeen'; { modId: modId }"/>
				</block>
			</block>
			<block>
				<styleClass value="$Fullsize"/>
				<style>
					<position value="absolute"/>
					<marginTop value="10px"/>
				</style>
				<block>
					<style>
						<width value="70px"/>
						<marginTop value="-6px"/>
						<hitTest value="false"/>
					</style>
					<block>
						<bind name="style" value="'backgroundImage'; 'url:' + iconPath"/>
						<styleClass value="$MiddleAligned"/>
						<style>
							<width value="60px"/>
							<height value="60px"/>
							<backgroundStretchX value="true"/>
							<backgroundStretchY value="true"/>
							<hitTest value="false"/>
						</style>
					</block>
				</block>
				<block>
					<bind name="class" value="isLocked ? '$MouseDisable' : '$MouseEnable'"/>
					<style>
						<width value="100%"/>
					</style>
					<block>
						<style>
							<width value="150px"/>
							<marginTop value="-5px"/>
						</style>
						<block type="text">
							<style>
								<width value="100%"/>
								<leading value="-2"/>
								<hitTest value="false"/>
							</style>
							<styleClass value="$TextDefaultBold"/>
							<bind name="text" value="'IDS_TITLE_' + toUpperCase(title)"/>
							<bind name="class" value="installed ? '$FontColorGolden' : '$FontColorWhite'"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="class" value="isLocked ? '$MouseDisable' : '$MouseEnable'"/>
			<styleClass value="$Fullsize"/>
			<style>
				<position value="absolute"/>
				<right value="10px"/>
			</style>
			<block>
				<style>
					<right value="0px"/>
					<marginTop value="6px"/>
					<width value="24px"/>
					<height value="24px"/>
				</style>
				<bind name="visible" value="installed &amp;&amp; rollOver &amp;&amp; !isLocked"/>
				<bind name="request" value="'click'; 'actionTypeChanged'; {flag:2, slotId:slotId, modId:modId, selectedCurrency:priceInfoSet.prices[validSelectedPriceIndex].currencyID, selectedPriceIndex: validSelectedPriceIndex}"/>
				<block className="button_cross" type="native">
					<bind name="name" value="'ButtonUnmount'"/>
					<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: 'IDS_INSTRUCTION_MODERNIZATION_UNMOUNT'}], _maxWidth: 250 }"/>
					<params>
						<param name="soundSet" value="dropmenu_button"/>
					</params>
				</block>
			</block>
			<block>
				<bind name="name" value="'installed_' + title"/>
				<style>
					<right value="6px"/>
					<marginTop value="12px"/>
				</style>
				<block className="icon_check" type="native"/>
				<bind name="visible" value="(installed &amp;&amp; !rollOver) || (isLocked &amp;&amp; installed)"/>
			</block>
			<block>
				<bind name="name" value="'bought_' + title"/>
				<bind name="visible" value="numInStorage &gt; 0 &amp;&amp; !installed"/>
				<style>
					<right value="0px"/>
					<marginTop value="6px"/>
					<hitTest value="false"/>
				</style>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<text value="IDS_IN_WAREHOUSE"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<bind name="text" value="numInStorage"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<bind name="class" value="$parent.isLocked ? '$MouseDisable' : '$MouseEnable'"/>
			<bind name="visible" value="!installed &amp;&amp; (numInStorage == 0) &amp;&amp; !(_showInTooltip)"/>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
				<marginTop value="5px"/>
			</style>
			<block>
				<style>
					<right value="0"/>
				</style>
				<bind name="instance" value="'AlterablePriceTag'; {_prices: priceInfoSet.prices, _showDiscountTag: true, _selectedPriceIndex: validSelectedPriceIndex}"/>
			</block>
		</block>
		<block>
			<style>
				<position value="absolute"/>
				<right value="12px"/>
				<marginTop value="6px"/>
			</style>
			<bind name="visible" value="!installed &amp;&amp; (numInStorage == 0) &amp;&amp; _showInTooltip"/>
			<block>
				<style>
					<right value="0px"/>
				</style>
				<bind name="visible" value="priceInfoSet.prices[0].finalPrice &gt; 0"/>
				<bind name="instance" value="'PriceTag'; { priceInfo:priceInfoSet.prices[0], _showDiscountTag:true}"/>
			</block>
			<block>
				<style>
					<marginTop value="3px"/>
				</style>
				<block type="text">
					<style>
						<marginRight value="3px"/>
					</style>
					<bind name="visible" value="(priceInfoSet.prices.length &gt; 1) &amp;&amp; (priceInfoSet.prices[1].finalPrice &gt; 0)"/>
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<text value="IDS_OR"/>
				</block>
				<block>
					<bind name="visible" value="(priceInfoSet.prices.length &gt; 1) &amp;&amp; (priceInfoSet.prices[1].finalPrice &gt; 0)"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="instance" value="'PriceTag'; { priceInfo:priceInfoSet.prices[1], _showDiscountTag:true }"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
		<block>
			<style>
				<width value="100%"/>
				<bottom value="0px"/>
				<position value="absolute"/>
			</style>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
	</block>
	<block className="ModernizationTooltip">
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="watchDH" value="'isLocked';			['shipOwnEntity.ownShip.evUpdateLock'];			shipOwnEntity.ownShip.isLocked"/>
		<bind name="watchDH" value="'_playerShipParams';	['shipOwnEntity.ownShip.evShipParamsUpdate'];	shipOwnEntity.ownShip.params"/>
		<bind name="changeDispatch" value="shipId + _modId; 'evCompareChanged'"/>
		<bind name="dispatch" value="'Tooltip.selfOpened'; 'evCompareChanged'"/>
		<bind name="action" value="'evCompareChanged'; 'getShipWithUpgrade'; {id: _modId, type : 'modernization', shipId: shipId}"/>
		<bind name="primaryEntityDH" value="'compareItemEntity'; CC.compareItem; 'modernization_' + _modId"/>
		<bind name="watchDH" value="'modernizationCompare'; ['compareItemEntity.compareItem.evUpdate']; compareItemEntity.dataComponent.data"/>
		<styleClass value="$DefaultTooltipBehaviour"/>
		<style>
			<width value="340px"/>
		</style>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
					<paddingTop value="8px"/>
					<paddingBottom value="8px"/>
					<paddingLeft value="6px"/>
					<paddingRight value="6px"/>
				</style>
				<block>
					<bind name="style" value="'backgroundImage'; 'url:' + iconPath"/>
					<style>
						<width value="60px"/>
						<height value="60px"/>
						<backgroundStretchX value="true"/>
						<backgroundStretchY value="true"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="6px"/>
						<marginTop value="-1px"/>
					</style>
					<block type="text">
						<styleClass value="$TextHeaderBold"/>
						<style>
							<width value="100%"/>
							<leading value="-5"/>
						</style>
						<bind name="text" value="'IDS_TITLE_' + toUpperCase(title)"/>
						<bind name="class" value="installed ? '$FontColorGolden' : '$FontColorWhite'"/>
					</block>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<style>
							<width value="100%"/>
							<marginTop value="-4px"/>
						</style>
						<bind name="class" value="installed ? '$FontColorGolden' : '$FontColorWhite'"/>
						<bind name="text" value="'IDS_MODERNIZATION_' + toUpperCase(type)"/>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<bind name="visible" value="(numInStorage &gt; 0) &amp;&amp; !(installed)"/>
					<style>
						<width value="100%"/>
					</style>
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<bind name="text" value="tr('IDS_IN_WAREHOUSE') + ' ' + numInStorage"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="2px"/>
					</style>
					<bind name="visible" value="installed"/>
					<block className="icon_check" type="native">
						<styleClass value="$MiddleVAligned"/>
					</block>
					<block type="text">
						<style>
							<marginLeft value="4px"/>
						</style>
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="class" value="'$FontColorGolden'"/>
						<text value="IDS_MODERNIZATION_IS_INSTALLED"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<bind name="visible" value="numInStorage == 0 &amp;&amp; !(installed)"/>
					<block>
						<bind name="visible" value="priceInfoSet.prices[0].finalPrice &gt; 0"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'PriceTagWithLabel'; { priceInfo:priceInfoSet.prices[0], _showDiscountTag:true, _label: 'IDS_PURCHASE_COST'}"/>
					</block>
					<block type="text">
						<bind name="visible" value="(priceInfoSet.prices.length &gt; 1) &amp;&amp; (priceInfoSet.prices[1].finalPrice &gt; 0)"/>
						<styleClass value="$TextDefault"/>
						<styleClass value="$MiddleVAligned"/>
						<text value="IDS_OR"/>
					</block>
					<block>
						<bind name="visible" value="(priceInfoSet.prices.length &gt; 1) &amp;&amp; (priceInfoSet.prices[1].finalPrice &gt; 0)"/>
						<styleClass value="$MiddleVAligned"/>
						<bind name="instance" value="'PriceTag'; { priceInfo:priceInfoSet.prices[1], _showDiscountTag:true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<styleClass value="$InfoBlockIndent"/>
				<block type="text">
					<style>
						<maxWidth value="315"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="'IDS_DESC_' + toUpperCase(description)"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$Fullsize"/>
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<position value="absolute"/>
					</style>
				</block>
				<block>
					<style>
						<width value="100%"/>
						<paddingTop value="16px"/>
						<paddingLeft value="12px"/>
						<paddingRight value="12px"/>
					</style>
					<bind name="instance" value="'ParamsModifierList'; { _attributesPositive: _attributesPositive,
														_attributesNegative: _attributesNegative,
														_attributesNeutral:	_attributesNeutral}"/>
				</block>
			</block>
			<block className="HorizontalDivider">
				<styleClass value="$PxHorizontalCorrection"/>
				<style>
					<width value="100%"/>
					<height value="3px"/>
				</style>
				<block className="divider_h" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
			<block>
				<bind name="controller" value="lesta.dialogs.dock.controllers.ControllerParams; 0; null; 'tooltipShipParams'; _playerShipParams; modernizationCompare; 1; 0; null; 1; 1; 0"/>
				<style>
					<width value="100%"/>
				</style>
				<bind name="instance" value="'ParamsAfterMount'; !installed &amp;&amp; viewParams.hasDiff ? { _viewParams: 	viewParams,
																									_title: 'IDS_AFTER_MOUNT'}
																								 	: null"/>
			</block>
			<block>
				<bind name="visible" value="!isLocked &amp;&amp; (tooltiptype!='modalWindow')"/>
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$InfoBlockIndent"/>
				<bind name="instance" value="'MouseInstruction'; !installed &amp;&amp; numInStorage == 0 ? { _type: 'left', _instructionText: 'IDS_INSTRUCTION_MODERNIZATION_PURCHASE_AND_INSTALL', _maxWidth: '270'} :
												installed &amp;&amp; tooltiptype == 0	? { _type: 'right', _instructionText: 'IDS_INSTRUCTION_MODERNIZATION_INSTALLED_ITEM', _maxWidth: '270'} :
												installed &amp;&amp; tooltiptype == 1	? { _type: 'left', _instructionText: 'IDS_TOOLTIP_EMPTY_SLOT', _maxWidth: '270'} :
												!installed &amp;&amp; numInStorage &gt; 0	? { _type: 'left', _instructionText: 'IDS_INSTRUCTION_MODERNIZATION_INSTALL', _maxWidth: '270'}
																				: null"/>
			</block>
		</block>
	</block>
	<block className="SelectUnmountTypeInfotip">
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource.credits"/>
		<bind name="watch" value="'curCurrencyResource'; ((_unmountPriceInfo.currency == 'gold') ? accountGold : accountCredits)"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<styleClass value="$ContextMenuDimentions"/>
		<block className="DeclareBlurLayer">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<block className="transparentPixel" type="native">
				<bind name="blurLayer" value="0"/>
			</block>
			<style>
				<position value="absolute"/>
			</style>
		</block>
		<block className="BlurMap">
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<style>
				<hitTest value="false"/>
			</style>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="mc_blurmap_medium" type="native">
				<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="blurMap" value="0"/>
			</block>
			<block className="inner_panel" type="native">
				<style>
					<alpha value="0.5"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
		</block>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.contrast"/>
		</block>
		<block className="hint_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<bind name="visible" value="installed"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="dock_submenu_item" type="native">
				<bind name="name" value="'RemoveInSelectUnmountTypeInfotip'"/>
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<bind name="request" value="'click'; 'actionTypeChanged'; {flag:2, modId:modId, slotId:slotId, selectedCurrency: purchasePriceInfo.currencyID, selectedPriceIndex: selectedPriceIndex }"/>
				<styleClass value="$ContextMenuListItem"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<hitTest value="false"/>
						<right value="6px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<text value="IDS_UNMOUNT"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { 	priceInfo: _unmountPriceInfo, 
													_showDiscountTag: true, 
													_deficit: _unmountPriceInfo.finalPrice - curCurrencyResource}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block className="dock_submenu_item" type="native">
				<bind name="name" value="'DestroyInSelectUnmountTypeInfotip'"/>
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<bind name="request" value="'click'; 'actionTypeChanged'; {flag:8, slotId:slotId, modId:modId, selectedCurrency: purchasePriceInfo.currencyID, selectedPriceIndex: selectedPriceIndex }"/>
				<styleClass value="$ContextMenuListItem"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<hitTest value="false"/>
						<right value="6px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<style>
							<hitTest value="false"/>
						</style>
						<text value="IDS_SELL"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { priceInfo:  {finalPrice: (purchasePriceInfo.finalPrice) * (sellCoef.prices[0].finalPrice), currency: 'credits'}}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="!installed"/>
			<style>
				<width value="100%"/>
			</style>
			<block className="dock_submenu_item" type="native">
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<bind name="request" value="'click'; 'actionTypeChanged'; {flag:1, slotId:slotId, modId:modId, selectedCurrency: purchasePriceInfo.currencyID, selectedPriceIndex: selectedPriceIndex }"/>
				<styleClass value="$ContextMenuListItem"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<hitTest value="false"/>
						<right value="6px"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<text value="IDS_INSTALL"/>
					</block>
					<block>
						<bind name="visible" value="numInStorage == 0"/>
						<bind name="instance" value="'PriceTag'; { priceInfo: purchasePriceInfo, _showDiscountTag:true }"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="SelectModarnizationActionInfotip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<bind name="firstEntityDH" value="'resourceEntity'; CC.accountResource"/>
		<bind name="watchDH" value="'accountGold';		['resourceEntity.accountResource.evChangedGold'];	resourceEntity.accountResource.gold"/>
		<bind name="watchDH" value="'accountCredits';	['resourceEntity.accountResource.evChangedCredit'];	resourceEntity.accountResource.credits"/>
		<bind name="watch" value="'curCurrencyResource'; ((unmountPrice.prices[0].currency == 'gold') ? accountGold : accountCredits)"/>
		<bind name="controller" value="lesta.dialogs.controllers.CollectionController; 'pricesAll'; PriceInfoSet.OP_BUY + 'MODS_COST_Demontage'; 'unmountPrice'"/>
		<bind name="var" value="{unmountCost: unmountPrice.prices[0].finalPrice}"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="-9px"/>
				<marginRight value="-14px"/>
				<marginBottom value="-19px"/>
				<marginLeft value="-14px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="168px"/>
			</style>
			<block className="dock_submenu_item" type="native">
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<bind name="dispatch" value="'click'; 'unmountTypeChanged'; {unmountFlag: LobbyConstants.MODERNIZATION_UNSET}"/>
				<bind name="selected" value="$parent.unmountFlag == LobbyConstants.MODERNIZATION_UNSET"/>
				<style>
					<width value="100%"/>
					<height value="24px"/>
				</style>
				<block>
					<style>
						<right value="2px"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<bind name="class" value="$parent.unmountFlag == LobbyConstants.MODERNIZATION_UNSET ? '$Bold' : '$None'"/>
						<text value="IDS_UNMOUNT"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; { 	priceInfo: unmountPrice.prices[0], _showDiscountTag: true, 
													_deficit: unmountPrice.prices[0].finalPrice - curCurrencyResource}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
				</style>
				<block className="HorizontalDivider">
					<styleClass value="$PxHorizontalCorrection"/>
					<style>
						<width value="100%"/>
						<height value="3px"/>
					</style>
					<block className="divider_h" type="native">
						<styleClass value="$Fullsize"/>
					</block>
				</block>
			</block>
			<block className="dock_submenu_item" type="native">
				<params>
					<param name="soundSet" value="dropmenu_button"/>
				</params>
				<bind name="dispatch" value="'click'; 'unmountTypeChanged'; {unmountFlag: LobbyConstants.MODERNIZATION_SELL}"/>
				<bind name="selected" value="$parent.unmountFlag == LobbyConstants.MODERNIZATION_SELL"/>
				<style>
					<width value="100%"/>
					<height value="24px"/>
				</style>
				<block>
					<bind name="visible" value="action == 0"/>
					<style>
						<right value="4px"/>
						<hitTest value="false"/>
					</style>
					<block type="text">
						<styleClass value="$TextDefault"/>
						<bind name="class" value="$parent.unmountFlag == LobbyConstants.MODERNIZATION_SELL ? '$Bold' : '$None'"/>
						<text value="IDS_SELL"/>
					</block>
					<block>
						<bind name="instance" value="'PriceTag'; {priceInfo: {finalPrice: sellCost, currency: 'credits'}}"/>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
			</block>
		</block>
	</block>
	<block className="ModernizationsParams">
		<bind name="controller" value="lesta.unbound.core.UbController"/>
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
				<marginBottom value="6px"/>
			</style>
			<block type="text">
				<style>
					<width value="100%"/>
				</style>
				<styleClass value="$TextDefault"/>
				<bind name="text" value="percent &gt; 0 ? '+' + percent + '%' + ' ' + ids
									: percent &lt; 0 	? percent + '%' + ' '+ ids
													: percent == 0 ? ids
																	: ' '"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CarouselFilters">
		<bind name="stageSize"/>
		<bind name="watch" value="'isFourRowsEnabled'; (stageHeight != null) ? (stageHeight &gt; (720 + 160)) : true"/>
		<bind name="watch" value="'isThreeRowsEnabled'; (stageHeight != null) ? (stageHeight &gt; (720 + 88)) : true"/>
		<bind name="watch" value="'curCarouselRows';	(userPrefs.curRowCountIndex == null)															? 0 :
									(userPrefs.curRowCountIndex == 2 &amp;&amp; isFourRowsEnabled)											? 2 :
									((userPrefs.curRowCountIndex == 2 || userPrefs.curRowCountIndex == 1) &amp;&amp; isThreeRowsEnabled)	? 1
																																	: 0"/>
		<bind name="action" value="'carouselRowsCountChangedByStageHeight'; 'setUserPref' ; {value : curCarouselRows, name: 'curRowCountIndex'}"/>
		<bind name="changeDispatch" value="curCarouselRows; 'carouselRowsCountChangedByStageHeight'"/>
		<bind name="feature" value="13;''"/>
		<bind name="action" value="(feature_13 == 'locked') ? 'addedToStage' : '';  'setFilterValue'; {type: 'special', field: 'IDS_WITH_COMMANDER', value: false, ident: 0 }"/>
		<bind name="action" value="(feature_13 == 'locked') ? 'addedToStage' : '';  'setFilterValue'; {type: 'special', field: 'IDS_WITHOUT_COMMANDER', value: false, ident: 0 }"/>
		<style>
			<marginLeft value="7px"/>
			<height value="30px"/>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="name" value="'CarouselFiltersButton'"/>
			<block className="button_carousel_filters" type="native">
				<bind name="tooltip" value="'CarouselFiltersInfotip'; {	_isSmallCarouselView: isSmallCarouselView,
														_isFilteredShipsHided: isFilteredShipsHided}; TooltipBehaviour.verticalInfotipSwitch; null; 'carouselFiltersInfotipIsVIsible'"/>
				<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: 'IDS_TOOLTIP_CAROUSEL_FILTERS'}], _maxWidth: 240 }"/>
				<bind name="selected" value="carouselFiltersInfotipIsVIsible"/>
			</block>
		</block>
		<bind name="catch" value="'shipNameFIlterInfotipSelectedChanged'"/>
		<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
		<bind name="watchDH" value="'selectedFilters'; ['panelEntity.shipRestrictions.evUpdate']; panelEntity.shipRestrictions.selectedFilters"/>
		<block>
			<style>
				<height value="32px"/>
				<marginTop value="-4px"/>
				<marginRight value="12px"/>
				<marginLeft value="4px"/>
			</style>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
			<bind name="firstEntityDH" value="'enterBattleEntity'; CC.enterBattle"/>
			<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
			<bind name="watchDH" value="'selectedBattle'; ['enterBattleEntity.enterBattle.evBattleTypesChanged']; enterBattleEntity.enterBattle.selectedBattle"/>
			<block>
				<block className="HasTrainingRoomRestrictions">
					<bind name="watchDH" value="'shipRestrictions' ; ['trainingRoomEntity.shipRestrictions.evUpdate']; trainingRoomEntity.shipRestrictions.selectedFilters"/>
					<bind name="watchDH" value="'shipsCount' ; ['trainingRoomEntity.divisionRestrictions.evUpdate']; trainingRoomEntity.divisionRestrictions.shipsCount"/>
					<bind name="watchDH" value="'typesCount' ; ['trainingRoomEntity.divisionRestrictions.evUpdate']; trainingRoomEntity.divisionRestrictions.typesCount"/>
					<bind name="primaryEntityDH" value="'defaultRestrictionsEntity'; CC.battleType; BattleTypes.TRAINING_BATTLE"/>
					<bind name="watchDH" value="'defaultTypesCount' ; ['defaultRestrictionsEntity.divisionRestrictions.evUpdate']; defaultRestrictionsEntity.divisionRestrictions.typesCount"/>
					<bind name="collectionDH" value="CC.shipFilterItem; 'idsfilters'+'ROOT'"/>
					<bind name="collectionDesign" value="'DES_'+'idsfilters'+'ROOT'; 'idsfilters'; {'filter':$entity.shipFilterItem.type == 'shipId' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
					<bind name="collectionDH" value="CC.shipFilterItem; 'levelfilters'+'ROOT'"/>
					<bind name="collectionDesign" value="'DES_'+'levelfilters'+'ROOT'; 'levelfilters'; {'filter':$entity.shipFilterItem.type == 'level' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
					<bind name="collectionDH" value="CC.shipFilterItem; 'nationfilters'+'ROOT'"/>
					<bind name="collectionDesign" value="'DES_'+'nationfilters'+'ROOT'; 'nationfilters'; {'filter':$entity.shipFilterItem.type == 'nation' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
					<bind name="collectionFields" value="levelfilters; ['shipFilterItem.field']"/>
					<bind name="contains" value="typesCount; $item[1] == -1; 'isAnyShipTypeNotAllowed'"/>
					<bind name="watch" value="'isCarriersRestricted'; typesCount[ShipTypes.AircraftCarrier] &amp;&amp; typesCount[ShipTypes.AircraftCarrier][1] != defaultTypesCount[ShipTypes.AircraftCarrier][1]"/>
					<bind name="watch" value="'isBattleShipsRestricted'; typesCount[ShipTypes.BattleShip] &amp;&amp; typesCount[ShipTypes.BattleShip][1] != defaultTypesCount[ShipTypes.BattleShip][1]"/>
					<bind name="watch" value="'isCruisersRestricted'; typesCount[ShipTypes.Cruiser] &amp;&amp; typesCount[ShipTypes.Cruiser][1] != defaultTypesCount[ShipTypes.Cruiser][1]"/>
					<bind name="watch" value="'isDestroyersRestricted'; typesCount[ShipTypes.Destroyer] &amp;&amp; typesCount[ShipTypes.Destroyer][1] != defaultTypesCount[ShipTypes.Destroyer][1]"/>
					<bind name="watch" value="'isAnyShipTypeRestricted'; isCarriersRestricted || isBattleShipsRestricted || isCruisersRestricted || isDestroyersRestricted"/>
					<bind name="watch" value="'hasTrainingRoomRestrictions'; (idsfilters.length &gt; 0)			||
												(shipTypefilters.length &gt; 0)	||
												(levelfilters.length &gt; 0)		||
												(nationfilters.length &gt; 0)		||
												isShipFilterRestrictionsVisible"/>
					<bind name="watch" value="'isShipFilterRestrictionsVisible'; isAnyShipTypeRestricted &amp;&amp; isAnyShipTypeNotAllowed"/>
				</block>
				<bind name="watch" value="'pveFilterVisible'; selectedBattle.type == BattleTypes.PVE_BATTLE"/>
				<bind name="watch" value="'trainingFilterVisible'; trainingRoomEntity &amp;&amp; hasTrainingRoomRestrictions"/>
				<bind name="watch" value="'rankedFilterVisible'; selectedBattle.type == BattleTypes.RANKED_BATTLE"/>
				<bind name="watch" value="'eventFilterVisible'; selectedBattle.type == BattleTypes.EVENT_BATTLE"/>
				<bind name="watch" value="'clanFilterVisible'; selectedBattle.type == BattleTypes.CLAN_BATTLE"/>
				<bind name="watch" value="'battleTypeFilterVisible'; pveFilterVisible || trainingFilterVisible || rankedFilterVisible ||
													eventFilterVisible || clanFilterVisible"/>
				<bind name="instance" value="'AppliedHardSystemFilter'; battleTypeFilterVisible ? {}	: null"/>
			</block>
			<block>
				<bind name="instance" value="'AppliedFilterText'; {shipNameFilterInfotipSelected: shipNameFilterInfotipSelected, _panelEntityId: panelEntity.id}"/>
				<bind name="instance" value="'AppliedFilter'; {_filterType: 'level', _panelEntityId: panelEntity.id}"/>
				<bind name="instance" value="'AppliedFilter'; {_filterType: 'shipType', _panelEntityId: panelEntity.id}"/>
				<bind name="instance" value="'AppliedFilter'; {_filterType: 'nation', _panelEntityId: panelEntity.id}"/>
				<bind name="instance" value="'AppliedFilter'; {_filterType: 'special', _panelEntityId: panelEntity.id}"/>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<bind name="instance" value="'ResetAllFilters'; selectedFilters.length &gt; 0 ? {} : null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CarouselFiltersInfotip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'selectedFilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'selectedFilters'+'ROOT'; 'selectedFilters'; {'filter':isIn($entity.id, panelEntity.shipRestrictions.selectedFilters)}; []"/>
		<styleClass value="$VerticalInfotipBehaviourCenterUpper"/>
		<bind name="dispatch" value="'carouselRowsCountChanged'; 'Tooltip.Place'; {}; 2; 0.15"/>
		<bind name="dispatch" value="'carouselViewChanged'; 'Tooltip.Place'; {}; 2; 0.15"/>
		<bind name="name" value="CarouselFiltersInfotipClip"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="8px"/>
				<marginRight value="13px"/>
				<marginTop value="9px"/>
				<marginBottom value="11px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="-6px"/>
				<marginLeft value="-6px"/>
				<position value="absolute"/>
			</style>
		</block>
		<block>
			<style>
				<marginLeft value="9px"/>
				<marginRight value="13px"/>
				<marginTop value="10px"/>
			</style>
			<bind name="var" value="{isSearchingShipByName: false}"/>
			<bind name="catch" value="'searchShipButtonClicked'; {isSearchingShipByName: true}"/>
			<bind name="catch" value="'closeSearchField'; {isSearchingShipByName: false}"/>
			<bind name="catch" value="'TextInputWithCancel.shipSearchCancelled'; {isSearchingShipByName: false, inputStr: ''}"/>
			<bind name="watch" value="'shipSearchStringValue'; searchStr ? searchStr : false"/>
			<bind name="dispatch" value="'Tooltip.selfOpened'; shipSearchStringValue ? 'searchShipButtonClicked' : 'closeSearchField'"/>
			<bind name="dispatch" value="'Tooltip.selfClosed'; shipSearchStringValue ? null : 'closeSearchField'"/>
			<block>
				<style>
					<height value="34px"/>
					<width value="100%"/>
					<position value="absolute"/>
				</style>
				<block type="text">
					<style>
						<marginLeft value="12px"/>
						<marginTop value="3px"/>
					</style>
					<styleClass value="$TextHeaderBold"/>
					<bind name="class" value="'$FontColorBlueish'"/>
					<text value="IDS_FILTERS"/>
				</block>
				<block>
					<style>
						<marginTop value="1px"/>
						<marginLeft value="6px"/>
					</style>
					<bind name="instance" value="'ResetAllFilters'; selectedFilters.length &gt; 0 ? {} : null"/>
				</block>
				<block className="button_search" type="native">
					<style>
						<right value="12px"/>
						<marginTop value="6px"/>
						<position value="absolute"/>
					</style>
					<bind name="visible" value="!(isSearchingShipByName)"/>
					<bind name="dispatch" value="'buttonClick';'searchShipButtonClicked'"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_HINT_SEARCH_SHIP_BY_NAME'}"/>
				</block>
				<block>
					<bind name="visible" value="isSearchingShipByName"/>
					<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
					<bind name="watchDH" value="'searchStr'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.searchString"/>
					<style>
						<width value="284px"/>
						<position value="absolute"/>
						<top value="15px"/>
						<right value="0"/>
					</style>
					<bind name="instance" value="'TextInputWithCancelCustom'; isSearchingShipByName	?	{	onEnterEvent: 'startShipSearch',
																						onCancelEvent: 'shipSearchCancelled',
																						onInputStrChangedEvent: 'inputStrChanged',
																						_onEnterTooltipText: 'IDS_HINT_FIND',
																						_closeButtonTooltipText: 'IDS_HINT_RESET_FILTER',
																						_defaultInputValue: searchStr,
																						_maxChars: 20,
																						_tfWidth: '250px'}
																				: null"/>
					<bind name="watch" value="'strForSearch'; inputStr"/>
					<bind name="catch" value="'TextInputWithCancel.inputStrChanged'"/>
					<bind name="changeDispatch" value="strForSearch; 'strForChanged'"/>
					<bind name="action" value="'strForChanged'; 'setSearchString' ; {value: strForSearch}"/>
				</block>
				<block>
					<style>
						<bottom value="0px"/>
						<position value="absolute"/>
						<width value="100%"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<style>
					<marginTop value="34px"/>
					<marginBottom value="80px"/>
				</style>
				<block className="inner_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
				<block>
					<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
					<bind name="instance" value="'FilterBlock'; {_title: 'IDS_LEVEL', _filterType: 'level', needDivider: false, _panelEntityId: panelEntity.id, _ident: 0, _inCarousel: true}"/>
					<bind name="instance" value="'FilterBlock'; {_title: 'IDS_CLASS', _filterType: 'shipType', needDivider: true, _panelEntityId: panelEntity.id, _ident: 0, _inCarousel: true}"/>
					<bind name="instance" value="'FilterBlock'; {_title: 'IDS_NATION', _filterType: 'nation', needDivider: true, _panelEntityId: panelEntity.id, _ident: 0, _inCarousel: true}"/>
					<bind name="instance" value="'FilterBlock'; {_title: 'IDS_SPECIAL', _filterType: 'special', needDivider: true, _panelEntityId: panelEntity.id, _ident: 0, _inCarousel: true}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<bottom value="-1px"/>
						<position value="absolute"/>
						<width value="100%"/>
					</style>
					<block className="HorizontalDivider">
						<styleClass value="$PxHorizontalCorrection"/>
						<style>
							<width value="100%"/>
							<height value="3px"/>
						</style>
						<block className="divider_h" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
			</block>
			<block>
				<style>
					<width value="100%"/>
					<position value="absolute"/>
					<bottom value="0px"/>
				</style>
				<block>
					<style>
						<width value="100%"/>
						<marginLeft value="14px"/>
						<marginBottom value="2px"/>
					</style>
					<block>
						<style>
							<marginTop value="7px"/>
						</style>
						<bind name="name" value="'SmallCarouselView'"/>
						<bind name="tooltip" value="'SimpleTooltip'; {tooltipText:	(_isSmallCarouselView ?	'IDS_HINT_CHECKBOX_DISABLE_SMALL_VIEW' :
																							'IDS_HINT_CHECKBOX_ENABLE_SMALL_VIEW')}"/>
						<bind name="instance" value="'CheckBox'; {switchProperty: _isSmallCarouselView, label: 'IDS_SMALL_CAROUSEL_VIEW'}"/>
						<bind name="dispatch" value="'left_click'; 'carouselViewChanged'"/>
						<bind name="clickSplit"/>
					</block>
					<block>
						<bind name="style" value="'hitTest'; _isSmallCarouselView == true ? true : false"/>
						<bind name="transition" value="_isSmallCarouselView == true; 0.1; {alpha: 0}; {alpha: 1}"/>
						<bind name="instance" value="'CarouselRowsChooser'; {}"/>
					</block>
					<block>
						<style>
							<right value="14px"/>
							<position value="absolute"/>
						</style>
						<block type="text">
							<style>
								<marginTop value="4px"/>
							</style>
							<styleClass value="$TextHeaderBold"/>
							<bind name="class" value="'$FontColorBlueish'"/>
							<bind name="text" value="tr('IDS_SORTING_TYPE')+tr('IDS_COLON')"/>
						</block>
						<block>
							<bind name="name" value="'CarouselOrdering'"/>
							<style>
								<marginLeft value="2px"/>
								<marginTop value="3px"/>
							</style>
							<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
							<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
							<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
							<bind name="watchDH" value="'_direction'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.reverse"/>
							<bind name="watchDH" value="'_curItemIndex'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.sortFieldIndex"/>
							<bind name="watchDH" value="'shipSorter'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.sortFields"/>
							<bind name="catch" value="'ItemChooser.shipsSortSelected'"/>
							<bind name="instance" value="'ItemChooser'; {	_items: [shipSorter[0].ids, shipSorter[1].ids, shipSorter[2].ids, shipSorter[3].ids], curIndex: _curItemIndex, curDirection: _direction,
															_choosedItemRenderer: 'BluishTextChoosedItemRenderer', _listItemRenderer: 'TextListItemRenderer',
															onItemSelectedEvent: 'shipsSortSelected', _itemChooserTooltipText: 'IDS_HINT_SHIP_CAROUSEL_SORT'}"/>
							<bind name="changeDispatch" value="_curItemIndex; 'shipSortChanged'"/>
							<bind name="changeDispatch" value="_direction; 'shipSortChanged'"/>
							<bind name="action" value="'shipSortChanged'; 'setSortOrder'; {sortFieldIndex: _curItemIndex, reverse: _direction}"/>
						</block>
						<style>
							<flow value="horizontal"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<marginLeft value="14px"/>
						<marginBottom value="13px"/>
					</style>
					<bind name="name" value="'HideFilteredShips'"/>
					<bind name="tooltip" value="'SimpleTooltip'; {tooltipText:	(_isFilteredShipsHided	?	'IDS_TURN_OFF_HIDE_FILTERED_SHIPS'
																						:	'IDS_TURN_ON_HIDE_FILTERED_SHIPS')}"/>
					<bind name="instance" value="'CheckBox'; {switchProperty: _isFilteredShipsHided, label: 'IDS_HIDE_FILTERED_SHIPS'}"/>
					<bind name="dispatch" value="'left_click'; 'carouselHideFilteredChanged'"/>
					<bind name="clickSplit"/>
				</block>
			</block>
		</block>
		<block className="dock_panel_pin" type="native">
			<style>
				<marginLeft value="10px"/>
				<marginBottom value="3px"/>
				<alpha value="0.5"/>
			</style>
			<bind name="gotoAndStop!" value="'down'"/>
		</block>
	</block>
	<block className="TextInputWithCancelCustom">
		<styleClass value="$Fullsize"/>
		<bind name="var" value="{textInput: ''}"/>
		<bind name="catch" value="'removedFromStage'; {textInput: ''}"/>
		<bind name="changeDispatch" value="_defaultInputValue; 'setDefaultValue'"/>
		<bind name="catch" value="'setDefaultValue'; {textInput: _defaultInputValue}"/>
		<block>
			<styleClass value="$MiddleVAligned"/>
			<block className="text_input_caps_enter" type="native">
				<bind name="tooltip" value="'SimpleTooltip'; _tooltipText ? {tooltipText: _tooltipText} : null"/>
				<bind name="style" value="'width'; _tfWidth ? _tfWidth : '270px'"/>
				<params>
					<param name="actAsButton" value="true"/>
				</params>
				<bind name="maxChars" value="_maxChars ? _maxChars : 32"/>
				<bind name="defaultText" value="defaultText"/>
				<bind name="focus" value="0; true"/>
				<bind name="restrict" value="restrict"/>
				<bind name="text" value="textInput"/>
				<bind name="sync" value="'text'; 'change'; textInput"/>
				<bind name="dispatch" value="'change'; 'TextInputWithCancel.'+ onInputStrChangedEvent; {inputStr: textInput}"/>
				<bind name="dispatch" value="'textInputEnter'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
				<block className="button_dock" type="native">
					<bind name="tooltip" value="'SimpleTooltip'; _onEnterTooltipText ? {tooltipText: _onEnterTooltipText} : null"/>
					<styleClass value="$TextInputEnterButton"/>
					<bind name="enabled" value="textInput"/>
					<bind name="dispatch" value="'buttonClick'; 'TextInputWithCancel.' + onEnterEvent; {inputStr: textInput}"/>
				</block>
			</block>
			<block className="button_close" type="native">
				<bind name="tooltip" value="'SimpleTooltip'; _closeButtonTooltipText ? {tooltipText: _closeButtonTooltipText} : null"/>
				<styleClass value="$MiddleVAligned"/>
				<style>
					<marginLeft value="6px"/>
				</style>
				<bind name="dispatch" value="'buttonClick'; 'TextInputWithCancel.' + onCancelEvent"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
	</block>
	<block className="CarouselRowsChooser">
		<bind name="collectionDH" value="CC.userPrefs; 'userPrefsCollection'"/>
		<bind name="entityDH" value="'userPrefsEntity'; userPrefsCollection[0].id"/>
		<bind name="watchDH" value="'userPrefs'; ['userPrefsEntity.userPrefs.evUserPrefsChanged']; userPrefsEntity.userPrefs.userPrefs"/>
		<bind name="watch" value="'_curItemIndex';	(userPrefs.curRowCountIndex == null) ? 0 : userPrefs.curRowCountIndex"/>
		<bind name="action" value="'carouselRowsCountChanged'; 'setUserPref' ; {value : _curItemIndex, name: 'curRowCountIndex'}"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<bind name="name" value="'CarouselRows'"/>
			<style>
				<marginLeft value="2px"/>
				<marginRight value="6px"/>
				<marginTop value="3px"/>
			</style>
			<bind name="catch" value="'ItemChooser.carouselRowsSelected'"/>
			<bind name="instance" value="'ItemChooser'; {	_items: ['2', '3', '4'], curIndex: _curItemIndex, _dropDownWidth: '50px',
											_choosedItemRenderer: 'BluishTextChoosedItemRenderer', _listItemRenderer: 'CarouselShipRowsListItemRenderer',
											onItemSelectedEvent: 'carouselRowsSelected', _itemChooserTooltipText: 'IDS_HINT_ROWS_IN_CAROUSEL'}"/>
			<bind name="changeDispatch" value="_curItemIndex; 'carouselRowsCountChanged'"/>
		</block>
	</block>
	<block className="CarouselAppliedFilterInfotip">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<bind name="class" value="(_arrow == 'top') ? '$ReplaysInfotipFilter' : '$VerticalInfotipBehaviourCenterUpper'"/>
		<bind name="name" value="'CarouselAppliedFilterInfotip'"/>
		<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
		<block className="dock_panel_pin" type="native">
			<bind name="visible" value="_arrow == 'top'"/>
			<bind name="gotoAndStop!" value="'up'"/>
			<params>
				<param name="name" value="pinTop"/>
			</params>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="8px"/>
				<marginRight value="13px"/>
				<marginTop value="9px"/>
				<marginBottom value="11px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="-6px"/>
				<marginLeft value="-6px"/>
			</style>
		</block>
		<block>
			<style>
				<marginLeft value="9px"/>
				<marginRight value="13px"/>
				<marginTop value="10px"/>
			</style>
			<bind name="instance" value="'FilterBlock'; {_title: _title, _filterType: _filterType, needDivider: false, _panelEntityId: panelEntity.id, _ident: 0, _inCarousel: true}"/>
		</block>
		<block className="dock_panel_pin" type="native">
			<bind name="style" value="'alpha'; _arrow != 'top' ? '0.5' : '0'"/>
			<style>
				<marginBottom value="3px"/>
			</style>
			<bind name="gotoAndStop!" value="'down'"/>
			<params>
				<param name="name" value="pinBottom"/>
			</params>
		</block>
	</block>
	<block className="CarouselAppliedFilterShipNameInfotip">
		<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
		<bind name="watchDH" value="'searchStr'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.searchString"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$VerticalInfotipBehaviourCenterUpper"/>
		<bind name="name" value="'CarouselAppliedFilterShipNameInfotip'"/>
		<style>
			<width value="305px"/>
			<height value="65px"/>
		</style>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginLeft value="8px"/>
				<marginRight value="13px"/>
				<marginTop value="9px"/>
				<marginBottom value="11px"/>
			</style>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMapCustom">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="mc_blurmap3" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block className="dock_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginBottom value="-6px"/>
				<marginLeft value="-6px"/>
			</style>
		</block>
		<block>
			<style>
				<width value="284px"/>
				<height value="40px"/>
				<marginTop value="11px"/>
				<right value="6px"/>
			</style>
			<bind name="instance" value="'TextInputWithCancelCustom'; {	onEnterEvent: 'startShipSearch',
													onCancelEvent: 'shipSearchCancelled',
													onInputStrChangedEvent: 'inputStrChanged',													
													_onEnterTooltipText: 'IDS_HINT_FIND',
													_closeButtonTooltipText: 'IDS_HINT_RESET_FILTER',
													_defaultInputValue: searchStr,
													_maxChars: 20,
													_tfWidth: '250px'}"/>
			<bind name="watch" value="'strForSearch'; inputStr"/>
			<bind name="catch" value="'TextInputWithCancel.inputStrChanged'"/>
			<bind name="changeDispatch" value="strForSearch; 'strForChanged'"/>
			<bind name="catch" value="'TextInputWithCancel.shipSearchCancelled'; {inputStr: ''}"/>
			<bind name="action" value="'strForChanged'; 'setSearchString' ; {value: strForSearch}"/>
			<bind name="dispatch" value="'TextInputWithCancel.shipSearchCancelled'; 'Tooltip.Close'; {}; false; 0.1"/>
		</block>
		<block className="dock_panel_pin" type="native">
			<style>
				<position value="absolute"/>
				<bottom value="3px"/>
				<alpha value="0.5"/>
			</style>
			<bind name="gotoAndStop!" value="'down'"/>
			<params>
				<param name="name" value="pinBottom"/>
			</params>
		</block>
	</block>
	<block className="FilterBlock">
		<bind name="collectionDH" value="CC.shipFilterItem; 'filters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'filters'+'ROOT'; 'filters'; {'filter':$entity.shipFilterItem.type == _filterType}; []"/>
		<block type="text">
			<style>
				<marginTop value="5px"/>
				<marginBottom value="8px"/>
			</style>
			<styleClass value="$MiddleAligned"/>
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="_title"/>
		</block>
		<block>
			<bind name="name" value="'FilterBlockValues'"/>
			<style>
				<flow value="vtile"/>
				<height value="155px"/>
				<marginLeft value="30px"/>
				<marginRight value="6px"/>
			</style>
			<bind name="repeat" value="filters; 'FilterItem'; {_panelEntityId: _panelEntityId, _ident: _ident, _tooltipPrefix: _tooltipPrefix, _inCarousel: _inCarousel}"/>
		</block>
		<block>
			<bind name="visible" value="needDivider == true"/>
			<style>
				<height value="100%"/>
				<position value="absolute"/>
			</style>
			<block className="divider_v" type="native">
				<style>
					<height value="100%"/>
				</style>
			</block>
		</block>
	</block>
	<block className="FilterItem">
		<bind name="entityDH" value="'entity'; id"/>
		<bind name="entityDH" value="'panelEntity'; _panelEntityId"/>
		<bind name="watchDH" value="'_value'; ['panelEntity.shipRestrictions.evUpdate']; isIn(entity.id, panelEntity.shipRestrictions.selectedFilters)"/>
		<bind name="watchDH" value="'_enabledFilters'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.enabledFilters"/>
		<bind name="watchDH" value="'_filterType'; ['entity.shipFilterItem.evUpdate']; entity.shipFilterItem.type"/>
		<bind name="watchDH" value="'_field'; ['entity.shipFilterItem.evUpdate']; entity.shipFilterItem.field"/>
		<bind name="watch" value="'_enabled'; isIn(id, _enabledFilters)"/>
		<bind name="instance" value="(_filterType == 'level')	? 'ShipLevelCheckBox'	:
                    (_filterType == 'shipType')	? 'ShipClassCheckBox'	:
                    (_filterType == 'nation')	? (_field != 'Events' ? 'ShipNationCheckBox' : 'EmptyItem') :
                    (_filterType == 'special')	? 'ShipSpecialCheckBox'
                                          		: 'FilterCheckBox'; {_filterType: _filterType, value: _value, field: _field, _ident: _ident, _tooltipPrefix: _tooltipPrefix, _disabled: _inCarousel ? ! _enabled : false}"/>
	</block>
	<block className="FilterCheckBox">
		<style>
			<marginRight value="44px"/>
			<marginBottom value="8px"/>
		</style>
		<bind name="instance" value="'CheckBox'; {switchProperty: value, label: field, _maxTfWidth: 150, _disabled: _disabled}"/>
		<bind name="action" value="'left_click'; 'setFilterValue' ; {type: _filterType, field: field, value: !value, ident: _ident}"/>
		<bind name="clickSplit"/>
	</block>
	<block className="ShipLevelCheckBox">
		<bind name="name" value="'CarouselCheckBox_' + _filterType + '_' + field"/>
		<style>
			<marginBottom value="8px"/>
			<width value="80px"/>
		</style>
		<bind name="action" value="'left_click'; _disabled ? null : 'setFilterValue' ; {type: _filterType, field: field, value: !value, ident: _ident}"/>
		<bind name="clickSplit"/>
		<bind name="watch" value="'tooltipPrefix'; _tooltipPrefix ? _tooltipPrefix : 'IDS_'"/>
		<bind name="tooltip" value="'SimpleTooltip'; _disabled			? null
														: { tooltipText: subst(tooltipPrefix + 'HINT_CHECKBOX_FILTER_LEVEL', [], {level: field})}"/>
		<bind name="tooltip" value="'SimpleWarningTooltip'; _disabled 	? { _text: subst('IDS_HINT_CHECKBOX_FILTER_LEVEL_NOT_AVAILABLE', [], {level: field})}
														: null"/>
		<bind name="instance" value="'CheckBox'; {switchProperty: !!(value), label: ShipLevels.RLEVELS[field], _maxTfWidth: 150, _disabled: _disabled}"/>
	</block>
	<block className="ShipClassCheckBox">
		<bind name="visible" value="field != ShipTypes.Submarine"/>
		<bind name="name" value="'CarouselCheckBox_' + _filterType + '_' + field"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="action" value="'left_click'; _disabled ? null : 'setFilterValue' ; {type: _filterType, field: field, value: !value, ident: _ident}"/>
		<bind name="clickSplit"/>
		<bind name="watch" value="'tooltipPrefix'; _tooltipPrefix ? _tooltipPrefix : 'IDS_'"/>
		<bind name="tooltip" value="'SimpleTooltip';			isEnabled	? { tooltipText: toUpperCase(tooltipPrefix + 'HINT_CHECKBOX_FILTER_CLASS_' + field)}
														: null"/>
		<bind name="tooltip" value="'SimpleWarningTooltip';	isEnabled	? null
														: { _text: tr(toUpperCase('IDS_HINT_CHECKBOX_FILTER_CLASS_NOT_AVAILABLE_' + field))}"/>
		<bind name="style" value="'alpha'; isEnabled ? 1 : 0.7"/>
		<style>
			<marginBottom value="8px"/>
			<width value="80px"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<block className="checkbox_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="!!(value)"/>
			<bind name="enabled" value="isEnabled"/>
		</block>
		<block>
			<style>
				<marginTop value="5px"/>
				<hitTest value="false"/>
			</style>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown &amp;&amp; isEnabled; 0.07; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; 2"/>
			<bind name="style" value="'marginLeft'; 	field == ShipTypes.Submarine 	? '29px' :
									field == ShipTypes.Destroyer 	? '24px'
																	: '27px'"/>
			<block className="icon_ship" type="native">
				<bind name="style" value="'alpha'; isEnabled ? 1 : 0.4"/>
				<bind name="gotoAndStop!" value="field"/>
			</block>
		</block>
	</block>
	<block className="ShipNationCheckBox">
		<bind name="name" value="'CarouselCheckBox_' + _filterType + '_' + field"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="action" value="'left_click'; _disabled ? null : 'setFilterValue' ; {type: _filterType, field: field, value: !value, ident: _ident}"/>
		<bind name="clickSplit"/>
		<bind name="watch" value="'tooltipPrefix'; _tooltipPrefix ? _tooltipPrefix : 'IDS_'"/>
		<bind name="tooltip" value="'SimpleTooltip';			isEnabled	? { tooltipText: tr(toUpperCase(tooltipPrefix + 'HINT_CHECKBOX_FILTER_NATION_' + field))}
														: null"/>
		<bind name="tooltip" value="'SimpleWarningTooltip';	isEnabled	? null
														: { _text: tr(toUpperCase('IDS_HINT_CHECKBOX_FILTER_NATION_NOT_AVAILABLE_' + field))}"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="style" value="'alpha'; isEnabled ? 1 : 0.7"/>
		<style>
			<marginBottom value="8px"/>
			<width value="80px"/>
			<flow value="horizontal"/>
		</style>
		<block className="checkbox_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="!!(value)"/>
			<bind name="enabled" value="isEnabled"/>
		</block>
		<block>
			<style>
				<marginLeft value="27px"/>
				<hitTest value="false"/>
			</style>
			<bind name="style" value="'alpha'; isEnabled ? 1 : 0.4"/>
			<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) &amp;&amp; isEnabled; 0.07; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; 2"/>
			<bind name="instance" value="'NationFlagsTiny'; {shipCountry: field}"/>
		</block>
	</block>
	<block className="ShipSpecialCheckBox">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; field == 'IDS_RANKED_BATTLES' ? 'rankedBattlesSeason' : null"/>
		<bind name="collectionDH" value="CC.clubsCommon; 'clubsCommonCollection'"/>
		<bind name="entityDH" value="'clubsCommonEntity'; clubsCommonCollection[0].id"/>
		<bind name="watchDH" value="'clubBattlesSeasonId'; ['clubsCommonEntity.clubsCommon.evRulesChanged']; clubsCommonEntity.clubsCommon.seasonId"/>
		<bind name="watchDH" value="'clubBattlesSeasonStage'; ['clubsCommonEntity.clubsCommon.evRulesChanged']; clubsCommonEntity.clubsCommon.stage"/>
		<bind name="collectionDH" value="CC.ownShip; 'shipsWithSnowflakes'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'shipsWithSnowflakes'+'ROOT'; 'shipsWithSnowflakes'; {'filter':$entity.ownShip.bonusTags.length &gt; 0}; []"/>
		<bind name="name" value="'CarouselCheckBox_' + _filterType + '_' + field"/>
		<bind name="feature" value="13; ''"/>
		<bind name="feature" value="16; ''"/>
		<bind name="feature" value="19; ''"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="watch" value="'isVisible';	(field == 'IDS_RANKED_BATTLES'		&amp;&amp;	(feature_16 == 'locked' || rankedBattlesSeason.denyReason &amp; RBDeny.NO_SEASON))			? false :
								(field == 'IDS_CLUB_BATTLES'		&amp;&amp;	(feature_19 == 'locked' || clubBattlesSeasonId &lt;= 0 || clubBattlesSeasonStage != 2))	? false :
								((field == 'IDS_WITH_COMMANDER'		||	field == 'IDS_WITHOUT_COMMANDER') &amp;&amp; feature_13 == 'locked')							? false :
								((field == 'IDS_SNOWFLAKES_FILTER' 	|| field == 'IDS_PARAGON_BONUS')	&amp;&amp; _disabled)												? false
																																								: true"/>
		<bind name="watch" value="'tooltipTextType'; ((field == 'IDS_SELECTED_BY_USER')	? 'SELECTED_BY_USER'	:
									(field == 'IDS_FILTER_PREMIUM')		? 'PREMIUM'				:
									(field == 'IDS_WITH_COMMANDER')		? 'WITH_COMMANDER'		:
									(field == 'IDS_WITHOUT_COMMANDER')	? 'WITHOUT_COMMANDER'	:
									(field == 'IDS_FILTER_ELITE')		? 'ELITE'				:
									(field == 'IDS_FILTER_SPECIAL') 	? 'SPECIAL'				:
									(field == 'IDS_FILTER_NOT_ELITE')	? 'NOT_ELITE'			:
									(field == 'IDS_RANKED_BATTLES')		? 'RANKED'				:
									(field == 'IDS_PVE_BATTLES')		? 'PVE'					:
									(field == 'IDS_CLUB_BATTLES')		? 'CLUB'				:
									(field == 'IDS_PROMO_FILTER')		? 'SHARE'				:
									(field == 'IDS_PARAGON_BONUS')		? 'PARAGON_BONUS'		:
									(field == 'IDS_SNOWFLAKES_FILTER')	? 'SNOWFLAKES'
																		: 'UNKNOWN')}"/>
		<bind name="tooltip" value="'SimpleTooltip';			isEnabled	? { tooltipText: tr('IDS_HINT_CHECKBOX_FILTER_' + tooltipTextType)}
														: null"/>
		<bind name="tooltip" value="'SimpleWarningTooltip';	isEnabled	? null
														: { _text: tr('IDS_HINT_CHECKBOX_FILTER_NOT_AVAILABLE_' + tooltipTextType)}"/>
		<bind name="action" value="'left_click'; isEnabled ? 'setFilterValue' : null; {type: _filterType, field: field, value: !value, ident: _ident}"/>
		<bind name="clickSplit"/>
		<bind name="visible" value="isVisible"/>
		<style>
			<marginBottom value="8px"/>
			<width value="80px"/>
			<height value="21px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'alpha'; isEnabled ? 1 : 0.7"/>
		<block className="checkbox_no_label" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="selected" value="!!(value)"/>
			<bind name="enabled" value="isEnabled"/>
		</block>
		<block>
			<bind name="style" value="'alpha'; isEnabled ? 1 : 0.4"/>
			<bind name="transition" value="rollOver &amp;&amp; !mouseDown &amp;&amp; isEnabled; 0.15; {alpha: 0.8}; {alpha: 1}; {alpha: 0.8}; 2"/>
			<style>
				<marginTop value="-2px"/>
				<marginLeft value="27px"/>
				<hitTest value="false"/>
			</style>
			<bind name="child" value="field; {_isCheckBox: true}; {	IDS_SELECTED_BY_USER: 'PrimaryIcon',
													IDS_FILTER_NOT_ELITE: 'NotEliteIcon',
													IDS_FILTER_ELITE: 'EliteIcon',
													IDS_FILTER_PREMIUM: 'PremiumIcon',
													IDS_FILTER_SPECIAL: 'SpecialIcon',
													IDS_RANKED_BATTLES: 'RankedIcon',
													IDS_PVE_BATTLES	: 'PVEIcon',
													IDS_CLUB_BATTLES: 'ClubIcon',
													IDS_PROMO_FILTER: 'ShareIcon',
													IDS_WITH_COMMANDER: 'WithCrewIcon',
													IDS_WITHOUT_COMMANDER: 'WithoutCrewIcon',
													IDS_PARAGON_BONUS: 'ParagonBonusTagIcon',
													IDS_SNOWFLAKES_FILTER: 'SnowflakesIcon'
													}"/>
		</block>
	</block>
	<block className="AppliedHardSystemFilter">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesSeason'"/>
		<bind name="firstEntityDH" value="'enterBattleEntity'; CC.enterBattle"/>
		<bind name="watchDH" value="'selectedBattle'; ['enterBattleEntity.enterBattle.evBattleTypesChanged']; enterBattleEntity.enterBattle.selectedBattle"/>
		<bind name="primaryEntityDH" value="'selectedBattleTypeEntity'; CC.battleType; selectedBattle.type"/>
		<bind name="firstEntityDH" value="'pveStateEntity'; CC.pveState"/>
		<bind name="watchDH" value="'chosenOperationId'; ['pveStateEntity.pveState.evStateUpdated']; pveStateEntity.pveState.chosenOperation"/>
		<bind name="primaryEntityDH" value="'operationEntity'; CC.operation; chosenOperationId"/>
		<bind name="watchDH" value="'operationType';	['operationEntity.operation.evStatusChanged']; operationEntity.operation.type"/>
		<bind name="watchDH" value="'operationIsHard'; []; operationEntity.operation.isHard"/>
		<bind name="firstEntityDH" value="'trainingRoomEntity'; CC.trainingRoomWindowState"/>
		<bind name="primaryEntityDH" value="'defaultRestrictionsEntity'; CC.battleType; BattleTypes.TRAINING_BATTLE"/>
		<bind name="primaryEntityDH" value="'rankedRestrictionsEntity'; CC.shipRestrictions; 7"/>
		<bind name="watch" value="'pveDifficultyPostfix'; operationIsHard ? '_hard' : ''"/>
		<bind name="watch" value="'pveIconLabel'; (operationType == 'event' ? 'PVEBattle_event' : 'PVEBattle') + pveDifficultyPostfix"/>
		<bind name="firstEntityDH" value="'currentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="firstEntityDH" value="'currentEventStateEntity'; CC.selectedEventBattle"/>
		<bind name="watchDH" value="'currentEventId'; ['currentEventStateEntity.eventBattleState.evChanged']; currentEventStateEntity.eventBattleState.eventId"/>
		<bind name="primaryEntityDH" value="'eventBattleParamsEntity'; CC.eventBattleParams; currentEventId"/>
		<bind name="firstEntityDH" value="'clanCurrentSeasonEntity'; CC.clanBattleSeason; 'current'"/>
		<bind name="watchDH" value="'isBrawl'; ['clanCurrentSeasonEntity.clanBattleSeason.evChanged']; clanCurrentSeasonEntity.clanBattleSeason.isBrawl"/>
		<bind name="watch" value="'restrictionsEntityId';	selectedBattle.type == BattleTypes.PVE_BATTLE 		? 	operationEntity.id :
											selectedBattle.type == BattleTypes.TRAINING_BATTLE	?	trainingRoomEntity.id :
											selectedBattle.type == BattleTypes.RANKED_BATTLE	?	rankedRestrictionsEntity.id :
											selectedBattle.type == BattleTypes.CLAN_BATTLE		?	currentSeasonEntity.id :
											selectedBattle.type == BattleTypes.EVENT_BATTLE		?	eventBattleParamsEntity.id
																								:	selectedBattleTypeEntity.id"/>
		<bind name="watch" value="'filterIcons';	selectedBattle.type == BattleTypes.PVE_BATTLE 		? 	pveIconLabel :
								selectedBattle.type == BattleTypes.TRAINING_BATTLE	?	'training_room':
								selectedBattle.type == BattleTypes.RANKED_BATTLE	?	(rankedBattlesSeason.isJuniorSeason == true) 	? 'rank_junior' 
																																		: 'rank' :
								selectedBattle.type == BattleTypes.EVENT_BATTLE		?	'event' :
								selectedBattle.type == BattleTypes.CLAN_BATTLE		?	isBrawl ? 'brawl'
																								: 'club'
																					:	'no_icon'"/>
		<bind name="watch" value="'filterText';	selectedBattle.type == BattleTypes.PVE_BATTLE		? tr('IDS_' + toUpperCase(operationEntity.operation.gpName) + '_NAME') :
								selectedBattle.type == BattleTypes.TRAINING_BATTLE	? 'IDS_CUSTOM_ROOM' :
								selectedBattle.type == BattleTypes.RANKED_BATTLE 	? 'IDS_RANKED_BATTLES' :
								selectedBattle.type == BattleTypes.CLAN_BATTLE 		? isBrawl ? 'IDS_CLAN_BRAWL'
																							  : 'IDS_CLANBATTLE' :
								selectedBattle.type == BattleTypes.EVENT_BATTLE 	? 'IDS_EVENTBATTLE'
																					: 'UNKNOWN_BATTLE_TYPE'"/>
		<style>
			<height value="30px"/>
			<flow value="horizontal"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; 2"/>
		<bind name="tooltip" value="'SimpleTooltip'; selectedBattle.type != BattleTypes.CLAN_BATTLE	? {tooltipText: tr(toUpperCase('IDS_CAROUSEL_' + selectedBattle.type + '_FILTER'))}
																					: null"/>
		<block className="button_dock_bg" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="gotoAndStop!" value="'down'"/>
		</block>
		<block className="icon_filters" type="native">
			<styleClass value="$MiddleVAligned"/>
			<style>
				<marginLeft value="4px"/>
			</style>
			<bind name="gotoAndStop!" value="filterIcons"/>
		</block>
		<block type="text">
			<style>
				<marginTop value="2px"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="filterText"/>
		</block>
		<block>
			<style>
				<marginLeft value="16px"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<bind name="instance" value="'ShipRestrictions'; 
			selectedBattle.type == BattleTypes.TRAINING_BATTLE 	? {	_restrictionsEntityId: restrictionsEntityId, 
																	_defaultRestrictionsEntityId: defaultRestrictionsEntity.id }
																: { _restrictionsEntityId: restrictionsEntityId }"/>
		</block>
	</block>
	<css name="$HugeFilterMargins">
		<marginLeft value="8px"/>
		<marginRight value="8px"/>
	</css>
	<css name="$TinyFilterMargins">
		<marginLeft value="4px"/>
		<marginRight value="4px"/>
	</css>
	<block className="AppliedFilter">
		<bind name="visible" value="selectedItems.length &gt; 0"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="entityDH" value="'panelEntity'; _panelEntityId"/>
		<bind name="watchDH" value="'selectedFilters'; ['panelEntity.shipRestrictions.evUpdate']; panelEntity.shipRestrictions.selectedFilters"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'selectedItems'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'selectedItems'+'ROOT'; 'selectedItems'; {'filter':isIn($entity.id, selectedFilters) &amp;&amp; ($entity.shipFilterItem.type == _filterType)}; []"/>
		<bind name="collectionFields" value="selectedItems; ['shipFilterItem.field']"/>
		<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0.7}; {alpha: 1}"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 0.7, top: 0}; 2"/>
		<style>
			<height value="30px"/>
		</style>
		<block className="button_dock_bg" type="native">
			<bind name="gotoAndStop!" value="'down'"/>
			<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || (mouseDown)) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0}; {alpha: 0.7}"/>
			<style>
				<height value="100%"/>
			</style>
			<bind name="tooltip" value="'CarouselAppliedFilterInfotip';	_filterType == 'level' 		? {_title: 'IDS_LEVEL', _filterType: _filterType, _arrow: _arrow} :
														_filterType == 'shipType'	? {_title: 'IDS_CLASS', _filterType: _filterType, _arrow: _arrow} :
														_filterType == 'nation' 	? {_title: 'IDS_NATION', _filterType: _filterType, _arrow: _arrow} :
														_filterType == 'special'	? {_title: 'IDS_SPECIAL', _filterType: _filterType, _arrow: _arrow}
																					: null; TooltipBehaviour.verticalInfotip; null; 'appliedFiltersInfotipSelected'"/>
			<bind name="tooltip" value="'CarouselAppliedFilterShipNameInfotip'; (_filterType == 'shipName')	? {}
																							: null;	 TooltipBehaviour.verticalInfotip; null; 'shipNameFIlterInfotipSelected'"/>
			<bind name="tooltip" value="'MouseInstructionTooltip'; (_filterType != 'shipName') ? { _mouseInstructions: [{_type: 'left', _instructionText: tr('IDS_CAROUSEL_APPLIED_FILTER_HINT_'+toUpperCase(_filterType))}], _maxWidth: 240 }
																				: null"/>
			<bind name="changeDispatch" value="shipNameFilterInfotipSelected; 'shipNameFIlterInfotipSelectedChanged';{shipNameFilterInfotipSelected: shipNameFilterInfotipSelected}"/>
			<block>
				<style>
					<height value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="class" value="_disableReset ? '$TinyFilterMargins' : '$HugeFilterMargins'"/>
				<block>
					<bind name="visible" value="_filterType == 'level'"/>
					<style>
						<hitTest value="false"/>
						<marginTop value="1px"/>
					</style>
					<bind name="repeat" value="reduceAppliedValues(selectedItems_shipFilterItem_field); 'ShipLevelRome'"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="visible" value="_filterType != 'level'"/>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="repeat" value="selectedItems;	(_filterType == 'shipName')	? 'CarouselSortingText' :
												(_filterType == 'shipType')	? 'ShipTypeIcon' :
												(_filterType == 'nation')	? 'TinyNationFlag' :
												(_filterType == 'special')	? 'SpecialSortingIcon'
																			: 'CarouselSortingText'"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<height value="100%"/>
					</style>
					<bind name="visible" value="_needDivider == true"/>
					<block className="VerticalDivider">
						<style>
							<height value="100%"/>
							<width value="3px"/>
						</style>
						<block className="divider_v" type="native">
							<styleClass value="$Fullsize"/>
						</block>
					</block>
				</block>
				<block>
					<bind name="visible" value="_disableReset != true"/>
					<style>
						<height value="100%"/>
						<width value="12px"/>
					</style>
					<block>
						<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || mouseDown) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0}; {alpha: 0.7}"/>
						<bind name="action" value="'click'; 'resetFilterType' ; {type: _filterType, ident: 0}"/>
						<block className="button_close" type="native">
							<style>
								<marginRight value="1px"/>
								<marginTop value="8px"/>
							</style>
							<bind name="name" value="'CarouselFilterClose_' + _filterType"/>
							<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_HINT_RESET_FILTER'}"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="AppliedFilterText">
		<bind name="visible" value="searchStr.length &gt; 0"/>
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<bind name="entityDH" value="'panelEntity'; _panelEntityId"/>
		<bind name="watchDH" value="'searchStr'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.searchString"/>
		<bind name="transition" value="(rollOver &amp;&amp; !mouseDown) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0.7}; {alpha: 1}"/>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 0.7, top: 0}; 2"/>
		<style>
			<height value="30px"/>
		</style>
		<block className="button_dock_bg" type="native">
			<bind name="gotoAndStop!" value="'down'"/>
			<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || (mouseDown)) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0}; {alpha: 0.7}"/>
			<style>
				<height value="100%"/>
			</style>
			<bind name="tooltip" value="'CarouselAppliedFilterShipNameInfotip'; {};	 TooltipBehaviour.verticalInfotip; null; 'shipNameFIlterInfotipSelected'"/>
			<bind name="changeDispatch" value="shipNameFilterInfotipSelected; 'shipNameFIlterInfotipSelectedChanged';{shipNameFilterInfotipSelected: shipNameFilterInfotipSelected}"/>
			<block>
				<style>
					<height value="100%"/>
					<marginTop value="1px"/>
				</style>
				<bind name="class" value="'$HugeFilterMargins'"/>
				<block>
					<styleClass value="$MiddleVAligned"/>
					<style>
						<hitTest value="false"/>
					</style>
					<bind name="instance" value="'CarouselSortingText'; {}"/>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<style>
						<height value="100%"/>
						<width value="12px"/>
					</style>
					<block>
						<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || mouseDown) || appliedFiltersInfotipSelected || shipNameFilterInfotipSelected; 0.15; {alpha: 0}; {alpha: 0.7}"/>
						<bind name="action" value="'click'; 'setSearchString' ; {value:''}"/>
						<block className="button_close" type="native">
							<style>
								<marginRight value="1px"/>
								<marginTop value="8px"/>
							</style>
							<bind name="name" value="'CarouselFilterClose_' + _filterType"/>
							<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_HINT_RESET_FILTER'}"/>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ResetAllFilters">
		<bind name="controller" value="lesta.unbound.controls.UbInteractiveController"/>
		<style>
			<height value="30px"/>
			<marginRight value="4px"/>
		</style>
		<bind name="appear" value="'addedToStage'; 0.15; 0; {alpha: 0, top: 10}; {alpha: 1, top: 0}; 2"/>
		<bind name="action" value="'click'; 'resetAllFilters'; {ident: 0}"/>
		<bind name="tooltip" value="'MouseInstructionTooltip'; { _mouseInstructions: [{_type: 'left', _instructionText: 'IDS_HINT_RESET_ALL_FILTERS'}], _maxWidth: 250}"/>
		<bind name="soundSet" value="'resetallfilters_item'"/>
		<block className="button_dock_bg" type="native">
			<bind name="gotoAndStop!" value="'down'"/>
			<style>
				<height value="100%"/>
			</style>
			<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || (mouseDown)); 0.15; {alpha: 0}; {alpha: 0.7}"/>
			<block>
				<style>
					<height value="100%"/>
					<marginLeft value="8px"/>
					<marginRight value="8px"/>
				</style>
				<bind name="transition" value="rollOver &amp;&amp; !mouseDown; 0.15; {alpha: 0.7}; {alpha: 1}"/>
				<block type="text">
					<style>
						<marginTop value="2px"/>
					</style>
					<styleClass value="$TextHeaderBigDefault"/>
					<bind name="text" value="'IDS_RESET_ALL_FILTERS'"/>
				</block>
				<block>
					<bind name="transition" value="((rollOver &amp;&amp; !mouseDown) || mouseDown); 0.15; {alpha: 0}; {alpha: 0.7}"/>
					<style>
						<marginLeft value="2px"/>
						<marginRight value="1px"/>
						<marginTop value="10px"/>
						<hitTest value="false"/>
					</style>
					<block className="button_close" type="native"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ShipLevelRome">
		<style>
			<marginRight value="2px"/>
		</style>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="ShipLevels.RLEVELS[$value]"/>
		</block>
	</block>
	<block className="CarouselSortingText">
		<bind name="firstEntityDH" value="'panelEntity'; CC.filterPanelComponent"/>
		<bind name="watchDH" value="'searchStr'; ['panelEntity.filterPanelComponent.evUpdate']; panelEntity.filterPanelComponent.searchString"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<block>
			<style>
				<hitTest value="false"/>
				<marginTop value="2px"/>
				<marginRight value="1px"/>
			</style>
			<block className="button_search" type="native"/>
		</block>
		<block type="text">
			<style>
				<marginRight value="4px"/>
				<marginTop value="-1px"/>
			</style>
			<styleClass value="$TextHeaderBigDefault"/>
			<bind name="text" value="searchStr"/>
		</block>
	</block>
	<block className="ShipTypeIcon">
		<bind name="dataRefDH" value="'filterEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'_field'; ['filterEntity.shipFilterItem.evUpdate']; filterEntity.shipFilterItem.field"/>
		<block>
			<style>
				<marginRight value="4px"/>
			</style>
			<block className="icon_ship" type="native">
				<bind name="gotoAndStop!" value="_field"/>
			</block>
		</block>
	</block>
	<block className="TinyNationFlag">
		<bind name="dataRefDH" value="'filterEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'_field'; ['filterEntity.shipFilterItem.evUpdate']; filterEntity.shipFilterItem.field"/>
		<block>
			<style>
				<marginRight value="2px"/>
			</style>
			<bind name="instance" value="'NationFlagsTiny'; {shipCountry: _field}"/>
		</block>
	</block>
	<block className="SpecialSortingIcon">
		<bind name="dataRefDH" value="'filterEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'_field'; ['filterEntity.shipFilterItem.evUpdate']; filterEntity.shipFilterItem.field"/>
		<style>
			<marginLeft value="-2px"/>
		</style>
		<bind name="child" value="_field; {}; {	IDS_SELECTED_BY_USER: 'PrimaryIcon',
								IDS_FILTER_NOT_ELITE: 'NotEliteIcon',
								IDS_FILTER_ELITE: 'EliteIcon',
								IDS_FILTER_PREMIUM: 'PremiumIcon',
								IDS_FILTER_SPECIAL: 'SpecialIcon',
								IDS_RANKED_BATTLES: 'RankedIcon',
								IDS_PVE_BATTLES: 'PVEIcon', 
								IDS_CLUB_BATTLES: 'ClubIcon',
								IDS_PROMO_FILTER: 'ShareIcon',
								IDS_WITH_COMMANDER: 'WithCrewIcon',
								IDS_WITHOUT_COMMANDER: 'WithoutCrewIcon',
								IDS_PARAGON_BONUS: 'ParagonBonusTagIcon',
                                IDS_SNOWFLAKES_FILTER: 'SnowflakesIcon'
								}"/>
	</block>
	<block className="ParagonBonusTagIcon">
		<style>
			<height value="21px"/>
			<width value="39px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="39px"/>
				<width value="39px"/>
				<top value="-9px"/>
				<left value="-2px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_paragon.png'"/>
		</block>
	</block>
	<block className="NotEliteIcon">
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'default'"/>
		</block>
	</block>
	<block className="EliteIcon">
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'elite'"/>
		</block>
	</block>
	<block className="PrimaryIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '0px': '1px'"/>
		<style>
			<marginTop value="1px"/>
		</style>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'primary'"/>
		</block>
	</block>
	<block className="WithCrewIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '1px': '2px'"/>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'withCrew'"/>
		</block>
	</block>
	<block className="WithoutCrewIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '0px': '1px'"/>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'withoutCrew'"/>
		</block>
	</block>
	<block className="PremiumIcon">
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'premium'"/>
		</block>
	</block>
	<block className="SpecialIcon">
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'special'"/>
		</block>
	</block>
	<block className="ShareIcon">
		<style>
			<height value="21px"/>
			<width value="39px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="39px"/>
				<width value="39px"/>
				<top value="-9px"/>
				<left value="-2px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_exp.png'"/>
		</block>
	</block>
	<block className="SnowflakesIcon">
		<style>
			<height value="21px"/>
			<width value="39px"/>
			<backgroundColor value="0x01000000"/>
		</style>
		<block>
			<style>
				<position value="absolute"/>
				<hitTest value="false"/>
				<height value="39px"/>
				<width value="39px"/>
				<top value="-9px"/>
				<left value="-2px"/>
			</style>
			<bind name="style" value="'backgroundImage'; 'url:../service_kit/bonus_tags/bonus_snowflake.png'"/>
		</block>
	</block>
	<block className="RankedIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '0px': '1px'"/>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'rank'"/>
		</block>
	</block>
	<block className="PVEIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '0px': '1px'"/>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'pve'"/>
		</block>
	</block>
	<block className="ClubIcon">
		<bind name="style" value="'marginTop'; _isCheckBox ? '0px': '1px'"/>
		<style>
			<marginTop value="1px"/>
		</style>
		<block className="icon_filters" type="native">
			<bind name="gotoAndStop!" value="'club'"/>
		</block>
	</block>
	<block className="CarouselShipRowsListItemRenderer">
		<styleClass value="$ContextMenuListItem"/>
		<bind name="var" value="{_toLowerCase: true}"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'isFourRowsEnabled'; (stageHeight &gt; (720 + 160))"/>
		<bind name="watch" value="'isThreeRowsEnabled'; (stageHeight &gt; (720 + 88))"/>
		<bind name="watch" value="'isEnabled';	($index == 0)							? true :
								(isThreeRowsEnabled &amp;&amp; ($index == 1))	? true :
								(isFourRowsEnabled &amp;&amp; ($index == 2))	? true
																		: false"/>
		<style>
			<backgroundColor value="0x01000000"/>
		</style>
		<bind name="tooltip" value="'SimpleWarningTooltip'; isEnabled ? null : {_text: tr('IDS_NOT_ENABLED_ON_LOW_RESOLUTION')}"/>
		<block>
			<styleClass value="$Fullsize"/>
			<bind name="style" value="'alpha'; isEnabled ? 1 : 0.5"/>
			<bind name="style" value="'hitTest'; isEnabled"/>
			<block className="MenuItemWithSelection">
				<styleClass value="$Fullsize"/>
				<bind name="name" value="$value"/>
				<block className="dock_submenu_item" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="selected" value="(_curItemIndex == $index)"/>
				</block>
				<block type="text">
					<styleClass value="$TextDefault"/>
					<styleClass value="$MiddleVAligned"/>
					<styleClass value="$ContextMenuListItemContent"/>
					<bind name="class" value="(_curItemIndex == $index) == true ? '$Bold' : '$None'"/>
					<bind name="text" value="(_toLowerCase ? toLowerCase(tr($value))
											: (tr($value)))"/>
				</block>
			</block>
			<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 	($index == 0)	? tr('IDS_SHOW_TWO_ROWS_IN_CAROUSEL') :
														($index == 1)	? tr('IDS_SHOW_THREE_ROWS_IN_CAROUSEL') :
														($index == 2)	? tr('IDS_SHOW_FOUR_ROWS_IN_CAROUSEL')
																		: ''}"/>
			<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
			<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
		</block>
	</block>
	<block className="HasTrainingRoomRestrictions">
		<bind name="watchDH" value="'shipRestrictions' ; ['trainingRoomEntity.shipRestrictions.evUpdate']; trainingRoomEntity.shipRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'shipsCount' ; ['trainingRoomEntity.divisionRestrictions.evUpdate']; trainingRoomEntity.divisionRestrictions.shipsCount"/>
		<bind name="watchDH" value="'typesCount' ; ['trainingRoomEntity.divisionRestrictions.evUpdate']; trainingRoomEntity.divisionRestrictions.typesCount"/>
		<bind name="primaryEntityDH" value="'defaultRestrictionsEntity'; CC.battleType; BattleTypes.TRAINING_BATTLE"/>
		<bind name="watchDH" value="'defaultTypesCount' ; ['defaultRestrictionsEntity.divisionRestrictions.evUpdate']; defaultRestrictionsEntity.divisionRestrictions.typesCount"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'idsfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'idsfilters'+'ROOT'; 'idsfilters'; {'filter':$entity.shipFilterItem.type == 'shipId' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'levelfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'levelfilters'+'ROOT'; 'levelfilters'; {'filter':$entity.shipFilterItem.type == 'level' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'nationfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'nationfilters'+'ROOT'; 'nationfilters'; {'filter':$entity.shipFilterItem.type == 'nation' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionFields" value="levelfilters; ['shipFilterItem.field']"/>
		<bind name="contains" value="typesCount; $item[1] == -1; 'isAnyShipTypeNotAllowed'"/>
		<bind name="watch" value="'isCarriersRestricted'; typesCount[ShipTypes.AircraftCarrier] &amp;&amp; typesCount[ShipTypes.AircraftCarrier][1] != defaultTypesCount[ShipTypes.AircraftCarrier][1]"/>
		<bind name="watch" value="'isBattleShipsRestricted'; typesCount[ShipTypes.BattleShip] &amp;&amp; typesCount[ShipTypes.BattleShip][1] != defaultTypesCount[ShipTypes.BattleShip][1]"/>
		<bind name="watch" value="'isCruisersRestricted'; typesCount[ShipTypes.Cruiser] &amp;&amp; typesCount[ShipTypes.Cruiser][1] != defaultTypesCount[ShipTypes.Cruiser][1]"/>
		<bind name="watch" value="'isDestroyersRestricted'; typesCount[ShipTypes.Destroyer] &amp;&amp; typesCount[ShipTypes.Destroyer][1] != defaultTypesCount[ShipTypes.Destroyer][1]"/>
		<bind name="watch" value="'isAnyShipTypeRestricted'; isCarriersRestricted || isBattleShipsRestricted || isCruisersRestricted || isDestroyersRestricted"/>
		<bind name="watch" value="'hasTrainingRoomRestrictions'; (idsfilters.length &gt; 0)			||
												(shipTypefilters.length &gt; 0)	||
												(levelfilters.length &gt; 0)		||
												(nationfilters.length &gt; 0)		||
												isShipFilterRestrictionsVisible"/>
		<bind name="watch" value="'isShipFilterRestrictionsVisible'; isAnyShipTypeRestricted &amp;&amp; isAnyShipTypeNotAllowed"/>
	</block>
	<block className="ParamsModifierItem">
		<style>
			<width value="100%"/>
			<marginBottom value="16px"/>
		</style>
		<bind name="style" value="'paddingTop'; (_shrinkHeight == true) ? '-8px' : '0'"/>
		<bind name="watch" value="'textColor';	category == 'positive'	? 0xFF4CE8AA :
								category == 'negative'	? 0xFFFF6600
														: 0xFFFFFFFF"/>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<leading value="-3"/>
					<alpha value="0.8"/>
					<width value="100%"/>
				</style>
				<bind name="text" value="attributeIDS"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="12px"/>
				</style>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="substitute" value="5;	{	'[battleship]'	: 'battleship_small_own',
										'[aircarrier]'	: 'carrier_small_own',
										'[destroyer]'	: 'destroyer_small_own',
										'[submarine]'	: 'submarine_small_own'
									}; measuredValue"/>
			</block>
			<block type="text">
				<bind name="class" value="_fontClass ? _fontClass : '$TextDefaultNM'"/>
				<style>
					<marginLeft value="4px"/>
				</style>
				<bind name="style" value="'alpha'; category == 'positive' ? 0.65 : 0.8"/>
				<bind name="style" value="'textColor'; textColor"/>
				<bind name="text" value="measure"/>
			</block>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="_dottedDivider ? true : false"/>
			<style>
				<width value="100%"/>
				<marginTop value="1px"/>
				<alpha value="0.5"/>
			</style>
			<block className="DottedLine">
				<style>
					<backgroundImage value="symbol:dotted_line"/>
					<backgroundRepeatX value="true"/>
					<width value="100%"/>
					<height value="1px"/>
					<alpha value="0.5"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ParamsModifierList">
		<style>
			<width value="100%"/>
		</style>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesPositive; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNegative; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass}"/>
		</block>
		<block>
			<style>
				<width value="100%"/>
			</style>
			<bind name="repeat" value="_attributesNeutral; 'ParamsModifierItem'; {_shrinkHeight: _shrinkHeight, _dottedDivider: _dottedDivider, _fontClass: _fontClass}"/>
		</block>
	</block>
	<css name="$TextDockBig">
		<fontFamily value="$WWSDefaultFontBold"/>
		<mouseEnabled value="false"/>
		<mouseChildren value="false"/>
		<fontSize value="21"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<block className="ItemChooser">
		<bind name="watch" value="'_curItemIndex'; curIndex"/>
		<bind name="watch" value="'_direction'; curDirection"/>
		<bind name="watch" value="'isEnabled'; _disabled != true"/>
		<bind name="name" value="_name"/>
		<bind name="var" value="{_lastItemIndex: curIndex}"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="catch" value="('ItemChooserInnerEvent.' + onItemSelectedEvent)"/>
		<block type="text">
			<bind name="name" value="_items[curIndex]"/>
		</block>
		<bind name="catch" value="('ItemChooserInnerEventDublicate.' + onItemSelectedEvent); {	_direction: (_curItemIndex==_lastItemIndex) ? !_direction : false,
																			_lastItemIndex: _curItemIndex}"/>
		<bind name="dispatch" value="('ItemChooserInnerEventDublicate.' + onItemSelectedEvent); ('ItemChooser.'+onItemSelectedEvent); {_curItemIndex: _curItemIndex, _direction: _direction}; false; 0.001"/>
		<bind name="tooltip" value="_customDropdown ? _customDropdown : 'ItemChooserDropdown';
											_items.length &gt; 1 	? {	_items: _items, _listItemRenderer: _listItemRenderer, _listItemRendererData: _listItemRendererData, _onItemSelectedEvent: onItemSelectedEvent,
																	_curItemIndex: _curItemIndex, _maxDropDownHeight: _maxDropDownHeight, _dropDownWidth: _dropDownWidth, _showHint: _showHint, _text: _text}
																: null;
											TooltipBehaviour.verticalInfoWidget; null; 'dropdownChooserListIsVisible'"/>
		<bind name="var" value="{ _tooltipData: !_itemChooserTooltipText || (_items.length &lt;= 1) ? null : { tooltipText: _itemChooserTooltipText } }"/>
		<bind name="tooltip" value="'SimpleTooltip'; _tooltipData"/>
		<bind name="style" value="'hitTest'; _items.length &gt; 1 &amp;&amp; isEnabled"/>
		<bind name="watch" value="'isItemNavigateVisible'; (_items.length &gt; 1 &amp;&amp; isEnabled)"/>
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="style" value="'marginRight'; isItemNavigateVisible ? '-8px' : '0px'"/>
		<block className="button_dock" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<style>
				<marginTop value="1px"/>
				<marginBottom value="1px"/>
			</style>
			<params>
				<param name="soundSet" value="dropmenu_button"/>
			</params>
			<bind name="enabled" value="_items.length &gt; 1"/>
			<bind name="selected" value="dropdownChooserListIsVisible"/>
		</block>
		<block>
			<bind name="style" value="'width'; _width ? '100%f' : 'auto'"/>
			<bind name="instance" value="_choosedItemRenderer; {_item: _items[curIndex], _choosedItemRendererParams: _choosedItemRendererParams}"/>
		</block>
		<block>
			<bind name="visible" value="isItemNavigateVisible"/>
			<style>
				<marginLeft value="5px"/>
				<marginRight value="4px"/>
				<hitTest value="false"/>
			</style>
			<styleClass value="$MiddleVAligned"/>
			<block className="icon_navigate" type="native">
				<bind name="gotoAndStop!" value="'down'"/>
			</block>
		</block>
	</block>
	<block className="ItemChooserDropdown">
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'shipOverview'"/>
		<bind name="transition" value="shipOverview.enabled; shipOverview.enabled ? 0.4 : 0.25; {alpha: 1}; {alpha: 0}; {alpha: 1}; 2; !(shipOverview.enabled) &amp;&amp; !(inPort) ? 0.15 : 0.5"/>
		<bind name="style" value="'hitTest'; !(shipOverview.enabled)"/>
		<styleClass value="$DefaultMenuBehaviour"/>
		<bind name="style" value="'width'; _dropDownWidth ? _dropDownWidth : '180px'"/>
		<block className="MenuBg">
			<styleClass value="$FullsizeAbsolute"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block className="BlurMap">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<style>
					<hitTest value="false"/>
				</style>
				<styleClass value="$FullsizeAbsolute"/>
				<block className="mc_blurmap_medium" type="native">
					<bind name="appear" value="'startShow'; 0.3; 0; {alpha: 0}; {alpha: 1}"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$FullsizeAbsolute"/>
					<bind name="blurMap" value="0"/>
				</block>
				<block className="inner_panel" type="native">
					<style>
						<alpha value="0.5"/>
					</style>
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
			<block className="contrast_panel" type="native">
				<bind name="visible" value="optionData.contrast &amp;&amp; !(true)"/>
				<styleClass value="$FullsizeAbsolute"/>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="!(true)"/>
				<block className="hint_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
				</block>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="visible" value="true"/>
				<block className="dock_panel" type="native">
					<styleClass value="$FullsizeAbsolute"/>
					<style>
						<marginBottom value="-19px"/>
						<marginRight value="-14px"/>
						<marginLeft value="-14px"/>
						<marginTop value="-9px"/>
					</style>
				</block>
			</block>
		</block>
		<block>
			<style>
				<backgroundColor value="0x01000000"/>
				<hitTest value="false"/>
			</style>
			<params>
				<param name="name" value="ItemChooserDropdown"/>
			</params>
			<styleClass value="$FullsizeAbsolute"/>
		</block>
		<block>
			<styleClass value="$DefaultScrollBar"/>
			<bind name="style" value="'maxHeight'; _maxDropDownHeight ? _maxDropDownHeight : 220"/>
			<style>
				<width value="100%"/>
				<overflow value="scroll"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="repeat" value="_items; _listItemRenderer; {_onItemSelectedEvent: _onItemSelectedEvent, _curItemIndex: _curItemIndex, _listItemRendererData: _listItemRendererData}"/>
			</block>
		</block>
		<block>
			<bind name="visible" value="!(rankedBattlesSeason.denyReason &amp; RBDeny.NO_SEASON) &amp;&amp; (_showHint == true)"/>
			<styleClass value="$InfoBlockIndent"/>
			<bind name="instance" value="'StatusLineWithIcon'; { _text: _text, _maxWidth: 140}"/>
		</block>
	</block>
	<block className="BluishTextChoosedItemRenderer">
		<style>
			<height value="32px"/>
		</style>
		<block type="text">
			<style>
				<hitTest value="false"/>
				<marginLeft value="4px"/>
				<marginTop value="1px"/>
			</style>
			<styleClass value="$TextHeaderBold"/>
			<bind name="class" value="'$FontColorBlueish'"/>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="LowerCaseTextListItemRenderer">
		<styleClass value="$ContextMenuListItem"/>
		<bind name="var" value="{_toLowerCase: true}"/>
		<block className="MenuItemWithSelection">
			<styleClass value="$Fullsize"/>
			<bind name="name" value="$value"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="selected" value="(_curItemIndex == $index)"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="class" value="(_curItemIndex == $index) == true ? '$Bold' : '$None'"/>
				<bind name="text" value="(_toLowerCase ? toLowerCase(tr($value))
											: (tr($value)))"/>
			</block>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>
	<block className="LargeTextChoosedItemRenderer">
		<style>
			<height value="35px"/>
		</style>
		<block type="text">
			<style>
				<hitTest value="false"/>
				<marginLeft value="4px"/>
				<marginTop value="1px"/>
			</style>
			<styleClass value="$TextDockBig"/>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="TextListItemRenderer">
		<styleClass value="$ContextMenuListItem"/>
		<block className="MenuItemWithSelection">
			<styleClass value="$Fullsize"/>
			<bind name="name" value="$value"/>
			<block className="dock_submenu_item" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<bind name="selected" value="(_curItemIndex == $index)"/>
			</block>
			<block type="text">
				<styleClass value="$TextDefault"/>
				<styleClass value="$MiddleVAligned"/>
				<styleClass value="$ContextMenuListItemContent"/>
				<bind name="class" value="(_curItemIndex == $index) == true ? '$Bold' : '$None'"/>
				<bind name="text" value="(_toLowerCase ? toLowerCase(tr($value))
											: (tr($value)))"/>
			</block>
		</block>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEvent.' + _onItemSelectedEvent); {_curItemIndex: $index}"/>
		<bind name="dispatch" value="'click'; ('ItemChooserInnerEventDublicate.' + _onItemSelectedEvent)"/>
	</block>
	<block className="TextChoosedItemRenderer">
		<style>
			<height value="33px"/>
		</style>
		<bind name="style" value="'width'; _choosedItemRendererParams.width ? _choosedItemRendererParams.width : 'auto'"/>
		<block type="text">
			<style>
				<hitTest value="false"/>
				<marginLeft value="5px"/>
				<marginTop value="4px"/>
			</style>
			<bind name="class" value="_choosedItemRendererParams.fontClass ? _choosedItemRendererParams.fontClass : '$TextDockBig'"/>
			<bind name="text" value="(tr(_item))"/>
		</block>
	</block>
	<block className="ShipRestrictions">
		<style>
			<height value="21px"/>
			<flow value="horizontal"/>
			<marginRight value="4px"/>
		</style>
		<bind name="style" value="'flow'; _flow ? _flow : 'horizontal'"/>
		<bind name="style" value="'width'; _width ? _width : 'auto'"/>
		<bind name="entityDH" value="'restrictionsEntity'; _restrictionsEntityId"/>
		<bind name="watchDH" value="'shipRestrictions' ; ['restrictionsEntity.shipRestrictions.evUpdate']; restrictionsEntity.shipRestrictions.selectedFilters"/>
		<bind name="watchDH" value="'shipsCount' ; ['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.shipsCount"/>
		<bind name="watchDH" value="'typesCount' ; ['restrictionsEntity.divisionRestrictions.evUpdate']; restrictionsEntity.divisionRestrictions.typesCount"/>
		<bind name="entityDH" value="'defaultRestrictionsEntity'; _defaultRestrictionsEntityId"/>
		<bind name="watchDH" value="'defaultTypesCount' ; ['defaultRestrictionsEntity.divisionRestrictions.evUpdate']; defaultRestrictionsEntity.divisionRestrictions.typesCount"/>
		<bind name="watch" value="'isAllShipTypesAllowed'; 	shipTypefilters.length == ShipTypes.AVAILABLE_TYPES.length"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'idsfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'idsfilters'+'ROOT'; 'idsfilters'; {'filter':$entity.shipFilterItem.type == 'shipId' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'shipTypefilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'shipTypefilters'+'ROOT'; 'shipTypefilters'; {'filter':$entity.shipFilterItem.type == 'shipType' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'levelfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'levelfilters'+'ROOT'; 'levelfilters'; {'filter':$entity.shipFilterItem.type == 'level' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionDH" value="CC.shipFilterItem; 'nationfilters'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'nationfilters'+'ROOT'; 'nationfilters'; {'filter':$entity.shipFilterItem.type == 'nation' &amp;&amp; isIn($entity.id, shipRestrictions)}; []"/>
		<bind name="collectionFields" value="levelfilters; ['shipFilterItem.field']"/>
		<bind name="contains" value="typesCount; $item[1] == -1; 'isAnyShipTypeNotAllowed'"/>
		<bind name="watch" value="'isCarriersRestricted'; typesCount[ShipTypes.AircraftCarrier] &amp;&amp; typesCount[ShipTypes.AircraftCarrier][1] != (defaultRestrictionsEntity ? defaultTypesCount[ShipTypes.AircraftCarrier][1] : 0)"/>
		<bind name="watch" value="'isBattleShipsRestricted'; typesCount[ShipTypes.BattleShip] &amp;&amp; typesCount[ShipTypes.BattleShip][1] != (defaultRestrictionsEntity ? defaultTypesCount[ShipTypes.BattleShip][1] : 0)"/>
		<bind name="watch" value="'isCruisersRestricted'; typesCount[ShipTypes.Cruiser] &amp;&amp; typesCount[ShipTypes.Cruiser][1] != (defaultRestrictionsEntity ? defaultTypesCount[ShipTypes.Cruiser][1] : 0)"/>
		<bind name="watch" value="'isDestroyersRestricted'; typesCount[ShipTypes.Destroyer] &amp;&amp; typesCount[ShipTypes.Destroyer][1] != (defaultRestrictionsEntity ? defaultTypesCount[ShipTypes.Destroyer][1] : 0)"/>
		<bind name="watch" value="'isSubmarinesRestricted'; typesCount[ShipTypes.Submarine] &amp;&amp; typesCount[ShipTypes.Submarine][1] != (defaultRestrictionsEntity ? defaultTypesCount[ShipTypes.Submarine][1] : 0)"/>
		<bind name="watch" value="'isAnyShipTypeRestricted'; isCarriersRestricted || isBattleShipsRestricted || isCruisersRestricted || isDestroyersRestricted || isSubmarinesRestricted"/>
		<bind name="watch" value="'hasRestrictions'; (idsfilters.length &gt; 0)			||
									(shipTypefilters.length &gt; 0)	||
									(levelfilters.length &gt; 0)		||
									(nationfilters.length &gt; 0)		||
									(isAnyShipTypeRestricted)"/>
		<bind name="watch" value="'shipTypeFiltersEnabled'; shipTypefilters.length &gt; 0"/>
		<bind name="watch" value="'isShipFilterRestrictionsVisible'; isAnyShipTypeRestricted &amp;&amp; (isAnyShipTypeNotAllowed || _withShipTypeCounters) &amp;&amp; !(shipTypeFiltersEnabled)"/>
		<block>
			<bind name="visible" value="(idsfilters.length &gt; 0)"/>
			<style>
				<marginRight value="4px"/>
				<marginTop value="-2px"/>
			</style>
			<bind name="repeat" value="idsfilters; 'ConcreteShipRestriction'; (idsfilters.length &gt; 0)	? {_concreteShipsLength: idsfilters.length}
																						: null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="	(idsfilters.length &gt; 0)					&amp;&amp;
						(
							(levelfilters.length &gt; 0) 			|| 
							(nationfilters.length &gt; 0)			||
							(isAnyShipTypeRestricted == true)
						)"/>
			<style>
				<height value="21px"/>
				<marginRight value="4px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<style>
				<marginTop value="-3px"/>
			</style>
			<bind name="visible" value="(levelfilters.length &gt; 0)"/>
			<bind name="repeat" value="reduceAppliedValues(levelfilters_shipFilterItem_field); 'ShipLevelRome'"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="	(levelfilters.length &gt; 0)				&amp;&amp;
						(
							(shipTypeFiltersEnabled)			||
                        	(nationfilters.length &gt; 0)			||
							(isShipFilterRestrictionsVisible)
						)"/>
			<style>
				<height value="21px"/>
				<marginRight value="4px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(isShipFilterRestrictionsVisible)"/>
			<style>
				<alpha value="0.9"/>
				<marginTop value="5px"/>
			</style>
			<bind name="instance" value="'ShipFilterRestrictions'; isShipFilterRestrictionsVisible ? {_filters: typesCount, _withShipTypeCounters: _withShipTypeCounters} : null"/>
		</block>
		<block>
			<bind name="visible" value="isShipFilterRestrictionsVisible &amp;&amp; ((shipTypeFiltersEnabled) &amp;&amp; !(isAllShipTypesAllowed))"/>
			<style>
				<height value="21px"/>
				<marginRight value="4px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(shipTypeFiltersEnabled) &amp;&amp; !(isAllShipTypesAllowed)"/>
			<style>
				<marginRight value="4px"/>
			</style>
			<bind name="repeat" value="shipTypefilters; 'IconShipClasses'; (shipTypefilters.length &gt; 0)	? {_shipTypefiltersLength: shipTypefilters.length}
																						: null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="	(nationfilters.length &gt; 0) &amp;&amp; ((shipTypeFiltersEnabled) &amp;&amp; !(isAllShipTypesAllowed))"/>
			<style>
				<height value="21px"/>
				<marginRight value="4px"/>
			</style>
			<block className="VerticalDivider">
				<style>
					<height value="100%"/>
					<width value="3px"/>
				</style>
				<block className="divider_v" type="native">
					<styleClass value="$Fullsize"/>
				</block>
			</block>
		</block>
		<block>
			<bind name="visible" value="(nationfilters.length &gt; 0)"/>
			<style>
				<marginRight value="4px"/>
			</style>
			<bind name="repeat" value="nationfilters; 'ShipNationsRestriction'; (nationfilters.length &gt; 0)	? {_shipNationsLength: nationfilters.length}
																							: null"/>
			<style>
				<flow value="horizontal"/>
			</style>
		</block>
		<block>
			<bind name="visible" value="!hasRestrictions &amp;&amp; _noRestrictionsText"/>
			<style>
				<alpha value="0.9"/>
				<marginRight value="4px"/>
			</style>
			<block type="text">
				<styleClass value="$TextDefaultWhite"/>
				<bind name="text" value="_noRestrictionsText"/>
			</block>
		</block>
	</block>
	<block className="ShipFilterRestrictions">
		<style>
			<flow value="horizontal"/>
		</style>
		<bind name="instance" value="'ShipFilterRestriction'; {_shipType: ShipTypes.Destroyer,		_filter: _filters[ShipTypes.Destroyer],			_withShipTypeCounters: _withShipTypeCounters}"/>
		<bind name="instance" value="'ShipFilterRestriction'; {_shipType: ShipTypes.Cruiser,			_filter: _filters[ShipTypes.Cruiser],			_withShipTypeCounters: _withShipTypeCounters}"/>
		<bind name="instance" value="'ShipFilterRestriction'; {_shipType: ShipTypes.BattleShip,		_filter: _filters[ShipTypes.BattleShip],		_withShipTypeCounters: _withShipTypeCounters}"/>
		<bind name="instance" value="'ShipFilterRestriction'; {_shipType: ShipTypes.AircraftCarrier,	_filter: _filters[ShipTypes.AircraftCarrier],	_withShipTypeCounters: _withShipTypeCounters}"/>
	</block>
	<block className="ShipFilterRestriction">
		<bind name="visible" value="(_filter[1] != -1)"/>
		<style>
			<flow value="horizontal"/>
			<marginRight value="4px"/>
		</style>
		<bind name="collectionDH" value="CC.shipFilterItem; 'typeFilter'+'ROOT'"/>
		<bind name="collectionDesign" value="'DES_'+'typeFilter'+'ROOT'; 'typeFilter'; {'filter':$entity.shipFilterItem.type == 'shipType' &amp;&amp; $entity.shipFilterItem.field == _shipType}; []"/>
		<bind name="style" value="'marginLeft'; (_shipType == ShipTypes.Destroyer) ? '-3px' : '0px'"/>
		<block className="icon_ship" type="native">
			<style>
				<marginRight value="2px"/>
			</style>
			<bind name="gotoAndStop!" value="_shipType"/>
		</block>
		<block>
			<bind name="visible" value="((_filter[1] &gt; 0 || _filter[1] == -1) &amp;&amp; _withShipTypeCounters)"/>
			<block type="text">
				<styleClass value="$TextDefaultNM"/>
				<bind name="class" value="'$Bold'"/>
				<bind name="text" value="((_filter[0] == _filter[1]) ? _filter[0]
													: (_filter[0] + '-' + _filter[1]))"/>
			</block>
		</block>
	</block>
	<block className="ShipNationsRestriction">
		<bind name="entityDH" value="'filterEntity'; id"/>
		<bind name="style" value="'marginRight'; ($index &lt; _shipNationsLength - 1) ? '4px' : '0px'"/>
		<bind name="instance" value="'NationFlagsTiny'; {shipCountry: filterEntity.shipFilterItem.field}"/>
	</block>
	<block className="ConcreteShipRestriction">
		<bind name="style" value="'marginRight'; ($index &lt; _concreteShipsLength) ? '4px' : '0px'"/>
		<bind name="dataRefDH" value="'filterEntity'; '$dataRef.ref'"/>
		<bind name="watchDH" value="'shipId'; ['filterEntity.shipFilterItem.evUpdate']; filterEntity.shipFilterItem.field"/>
		<bind name="primaryEntityDH" value="'shipEntity'; CC.ship; Number(shipId); 'evUpdate'"/>
		<bind name="watchDH" value="'shipInfo'; ['shipEntity.ship.evUpdate', 'shipEntity.ship.evCurrentSkinChanged']; shipEntity.ship"/>
		<bind name="watchDH" value="'shipInfo' + 'Slim'; ['shipEntity.slimClientComponent.evUpdate']; shipEntity.slimClientComponent"/>
		<block type="text">
			<styleClass value="$TextHeaderBigDefault"/>
			<style>
				<marginLeft value="-4px"/>
				<marginRight value="-4px"/>
			</style>
			<bind name="text" value="toUpperCase(tr(shipInfo.nameIDS)) + (($index &lt; _concreteShipsLength - 1) ? ', ' : '')"/>
		</block>
	</block>
	<block className="IconShipClasses">
		<bind name="style" value="'marginRight'; ($index &lt; _shipTypefiltersLength - 1) ? '4px' : '0px'"/>
		<bind name="entityDH" value="'filterEntity'; id"/>
		<block className="icon_ship" type="native">
			<style>
				<marginTop value="6px"/>
			</style>
			<bind name="gotoAndStop!" value="filterEntity.shipFilterItem.field"/>
		</block>
	</block>
	<css name="$ResultsHeader">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFontBold"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0x9CBABA"/>
	</css>
	<css name="$ResultsWarning">
		<mouseChildren value="false"/>
		<mouseEnabled value="false"/>
		<fontFamily value="$WWSDefaultFont"/>
		<fontSize value="25"/>
		<dropShadowFilter value="1 90 0x08222a 0.5 2.0 2.0 1.0 2"/>
		<selectable value="false"/>
		<textColor value="0xFF9933"/>
	</css>
	<block className="TabBarResults">
		<block className="tab_bar_bg" type="native">
			<style>
				<height value="29px"/>
			</style>
			<block>
				<bind name="class" value="allDisabled ? '$MouseDisable' : '$None'"/>
				<bind name="style" value="'alpha'; allDisabled ? 0.5 : 1"/>
				<style>
					<marginLeft value="2px"/>
					<marginRight value="2px"/>
				</style>
				<block>
					<block>
						<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTabPBS_0', 
														_width: '210px', 
														_selected: inset == 0,
														_dispatch: 'changeResultScreenInset', _dispatchParams: {inset: 0, _searchState: 0}, 
														_label: 'IDS_BATTLE_STATS_PERSONAL_REPORT', 
														_index: 0, 
														_paragraphText: 'IDS_TOOLTIP_BATTLE_STATS_PERSONAL_REPORT', _isInBattle: false}"/>
					</block>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<marginTop value="2px"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<block>
						<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTabPBS_1', 
														_width: '210px', 
														_selected: inset == 1,
														_dispatch: 'changeResultScreenInset', _dispatchParams: {inset: 1, _searchState: 0}, 
														_label: 'IDS_BATTLE_STATS_TEAM_REPORT', 
														_index: 1, 
														_paragraphText: 'IDS_TOOLTIP_BATTLE_STATS_TEAM_REPORT', _isInBattle: false}"/>
					</block>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<marginTop value="2px"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<block>
						<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTabPBS_2', 
													_width: '210px', 
													_selected: inset == 2,
													_dispatch: 'changeResultScreenInset', _dispatchParams: {inset: 2, _searchState: 0}, 
													_label: 'IDS_BATTLE_STATS_DETAILED_REPORT', 
													_index: 2, 
													_paragraphText: 'IDS_TOOLTIP_BATTLE_STATS_DETAILED_REPORT', _isInBattle: false}"/>
					</block>
					<block className="divider_v" type="native">
						<style>
							<height value="25px"/>
							<marginTop value="2px"/>
						</style>
					</block>
					<style>
						<flow value="horizontal"/>
					</style>
				</block>
				<block>
					<bind name="instance" value="'MainTabButton'; 	{_name: 'itemTabPBS_3', 
													_width: '210px', 
													_selected: inset == 3,
													_dispatch: 'changeResultScreenInset', _dispatchParams: {inset: 3, _searchState: 0}, 
													_label: 'IDS_BATTLE_STATS_CREDITS_AND_EXP', 
													_index: 3, 
													_paragraphText: 'IDS_TOOLTIP_BATTLE_STATS_CREDITS_AND_EXP', _isInBattle: false}"/>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
		</block>
	</block>
	<block className="ResultsScreen">
		<bind name="controller" value="lesta.dialogs.results_screen.controllers.ControllerResultsScreen"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'divisionData'"/>
		<bind name="firstEntityDH" value="'dockEntity'; CC.dockDataMarker"/>
		<bind name="watchDH" value="'shipId'; ['dockEntity.shipSelection.evShipUpdate']; dockEntity.shipSelection.currentShipId"/>
		<bind name="watchDH" value="'shipIdForModuleInset'; ['dockEntity.shipSelection.evShipViewUpdate']; dockEntity.shipSelection.currentShipIdForModuleInset"/>
		<bind name="firstEntityDH" value="'selfPlayerEntity'; CC.accountSelf"/>
		<bind name="watchDH" value="'selfPlayerDbId'; 		[]; selfPlayerEntity.accountSimple.dbId"/>
		<bind name="watchDH" value="'selfPlayerName'; 		['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.name"/>
		<bind name="watchDH" value="'selfPlayerNickName'; 	['selfPlayerEntity.accountName.evChanged']; selfPlayerEntity.accountName.nickName"/>
		<bind name="primaryEntityDH" value="'shipOwnEntity'; CC.ownShip; shipId"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
		<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'accountLevelInfo'"/>
		<bind name="watchDH" value="'isShipReady';		['shipOwnEntity.ownShip.evIsReadyChanged']; shipOwnEntity.ownShip.isReady"/>
		<bind name="var" value="{inset: 0}"/>
		<bind name="watch" value="'validTabIndex'; game_data.isSpectator ? 1 : inset"/>
		<bind name="catch" value="'changeResultScreenInset'"/>
		<styleClass value="$Fullsize"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="optionData.blurEnabled"/>
			<bind name="appear" value="'startShow'; 0.3; 0.8; {alpha: 0}; {alpha: 0.8}"/>
			<block className="DeclareBlurLayer">
				<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'optionData'"/>
				<bind name="visible" value="optionData.blurEnabled"/>
				<block className="transparentPixel" type="native">
					<bind name="blurLayer" value="0"/>
				</block>
				<style>
					<position value="absolute"/>
				</style>
			</block>
			<block>
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<hitTest value="false"/>
				</style>
				<block className="blurmap_low" type="native">
					<bind name="appear" value="'startShow'; 2.0; 0; {alpha: 0}; {alpha: 0.8}; 2"/>
					<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1}; {alpha: 0}"/>
					<styleClass value="$Fullsize"/>
					<bind name="blurMap" value="0"/>
				</block>
			</block>
		</block>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="appear" value="'startShow'; 0.5; 0.8; {alpha: 0}; {alpha: 1.5}"/>
			<block className="inner_panel" type="native">
				<styleClass value="$FullsizeAbsolute"/>
				<style>
					<alpha value="1.6"/>
				</style>
			</block>
		</block>
		<block className="contrast_panel" type="native">
			<styleClass value="$FullsizeAbsolute"/>
			<bind name="visible" value="((optionData.contrast) &amp;&amp; (validTabIndex != 0))"/>
		</block>
		<bind name="watch" value="'battleType'; 	(game_data.battle_mode_id == 1)	? BattleTypes.TRAINING_BATTLE :
								(game_data.battle_mode_id == 2) ? BattleTypes.COOPERATIVE_BATTLE :
								(game_data.battle_mode_id == 4) ? BattleTypes.RANKED_BATTLE :
								(game_data.battle_mode_id == 5) ? BattleTypes.CLUB_BATTLE :
								(game_data.battle_mode_id == 6) ? BattleTypes.PVE_BATTLE :
								(game_data.battle_mode_id == 8) ? BattleTypes.CLAN_BATTLE :
								(game_data.battle_mode_id == 9) ? BattleTypes.EVENT_BATTLE
																: BattleTypes.RANDOM_BATTLE"/>
		<bind name="stageSize"/>
		<bind name="watch" value="'PBSWidth'; 1077 + (stageWidth - 1280)*0.536"/>
		<bind name="watch" value="'PBSHeight'; 630 + (stageHeight - 720)*0.3"/>
		<block>
			<styleClass value="$MiddleAligned"/>
			<style>
				<height value="100%"/>
				<width value="1280:1077,1920:1420aw"/>
			</style>
			<block>
				<style>
					<width value="100%"/>
				</style>
				<bind name="style" value="'marginTop'; 0 + (stageHeight - 720) * 0.16"/>
				<bind name="visible" value="game_data.battle_mode_id != 3"/>
				<bind name="appear" value="'startShow'; 0.3; 1.4; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
				<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
				<block>
					<styleClass value="$MiddleAligned"/>
					<bind name="instance" value="'TabBarResults'; game_data.isSpectator ? null : {inset: validTabIndex}"/>
				</block>
				<block>
					<style>
						<width value="100%"/>
					</style>
					<block className="ModalWindowCloseIcon">
						<style>
							<position value="absolute"/>
							<right value="-60px"/>
							<top value="7px"/>
							<flow value="horizontal"/>
						</style>
						<bind name="name" value="'btn_cancel'"/>
						<bind name="input"/>
						<bind name="tooltip" value="'SimpleTooltip'; {tooltipText: 'IDS_CLOSE'}; 0"/>
						<block>
							<styleClass value="$MiddleVAligned"/>
							<style>
								<backgroundColor value="0x01000000"/>
							</style>
							<bind name="dispatch" value="'mouseOver'; 'overEscapeButton'"/>
							<bind name="dispatch" value="'mouseOut'; 'upEscapeButton'"/>
							<bind name="dispatch" value="'mouseDown'; 'downEscapeButton'"/>
							<block>
								<bind name="soundSet" value="'default_button'"/>
								<bind name="catch" value="'overEscapeButton'; {EscapeButtonOverAlpha: 1}"/>
								<bind name="catch" value="'upEscapeButton'; {EscapeButtonOverAlpha: 0.8}"/>
								<bind name="catch" value="'downEscapeButton'; {EscapeButtonOverAlpha: 0.4}"/>
								<style>
									<alpha value="0.8"/>
								</style>
								<bind name="style" value="'alpha'; EscapeButtonOverAlpha"/>
								<bind name="instance" value="'HotkeyWithText'; {_text: 'ESC'}"/>
							</block>
							<block>
								<style>
									<marginTop value="3px"/>
								</style>
								<block className="button_close" type="native">
									<bind name="catch" value="'overEscapeButton'; {CrossButtonStates: 'over'}"/>
									<bind name="catch" value="'upEscapeButton'; {CrossButtonStates: 'up'}"/>
									<bind name="catch" value="'downEscapeButton'; {CrossButtonStates: 'down'}"/>
									<params>
										<param name="focusable" value="false"/>
									</params>
									<bind name="gotoAndPlay!" value="CrossButtonStates"/>
								</block>
							</block>
							<style>
								<flow value="horizontal"/>
							</style>
						</block>
					</block>
				</block>
				<style>
					<flow value="horizontal"/>
				</style>
			</block>
			<block>
				<bind name="appear" value="'startHide'; 0.15; 0; {alpha: 1, top: 0}; {alpha: 0, top: -10}"/>
				<style>
					<width value="100%"/>
					<height value="720:630,1080:738ah"/>
				</style>
				<bind name="style" value="'marginTop'; 10 + (stageHeight - 720) * 0.2"/>
				<bind name="child" value="validTabIndex; {	_data:	{team_results: team_results, received_damage: received_damage, given_damage: given_damage,
											personal: personal, game_data: game_data, credits_experience: credits_experience,
											resultText: resultText, commentText: commentText, _PBSWidth: PBSWidth, _PBSHeight: PBSHeight}};
											'PersonalResultSection'; 'TeamResultSection'; 'DetailedReportSection'; 'EconomicsSection'"/>
			</block>
			<block>
				<bind name="style" value="'bottom'; 10 + (stageHeight - 720) * 0.15"/>
				<style>
					<position value="absolute"/>
					<width value="100%"/>
				</style>
				<block>
					<bind name="name" value="'BottomTabBarButtonDebriefing'"/>
					<styleClass value="$MiddleAligned"/>
					<bind name="appear" value="'startShow'; 0.3; 2.0; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<block className="button_default" type="native">
						<bind name="event" value="'buttonClick'; close"/>
						<params>
							<param name="autoSize" value="center"/>
							<param name="label" value="IDS_BATTLE_STATS_BACK_TO_DOCK"/>
						</params>
						<bind name="focus" value="1; true"/>
					</block>
				</block>
				<block>
					<bind name="appear" value="'startShow'; 0.3; 2.2; {alpha: 0, top: 5}; {alpha: 1, top: 0}"/>
					<bind name="appear" value="'startHide'; 0.8; 0; {alpha: 1}; {alpha: 0}"/>
					<bind name="controller" value="lesta.dialogs.controllers.EntitySingletonController; 'rankedBattlesStats'"/>
					<bind name="watch" value="'isFirstRankInRankedBattle'; battleType == BattleTypes.RANKED_BATTLE &amp;&amp; rankedBattlesStats.rank == 1"/>
					<bind name="visible" value="	accountLevelInfo.accountLevel &gt;= 5 &amp;&amp;
								(accountLevelInfo.abuseStatus != 2 || battleType == BattleTypes.COOPERATIVE_BATTLE) &amp;&amp;
								!isFirstRankInRankedBattle &amp;&amp;
								!accountLevelInfo.hasParentControlRestriction &amp;&amp;
								!!canGoToBattleAgain &amp;&amp;
								!!isShipReady &amp;&amp;
								!(divisionData.divisionExist) &amp;&amp;
								(battleType != BattleTypes.CLAN_BATTLE) &amp;&amp;
								(battleType != BattleTypes.TRAINING_BATTLE) &amp;&amp;
								(battleType != BattleTypes.PVE_BATTLE) &amp;&amp;
								(battleType != BattleTypes.EVENT_BATTLE)"/>
					<bind name="name" value="'ButtonDebriefingStartRandom'"/>
					<style>
						<position value="absolute"/>
						<right value="15px"/>
					</style>
					<block className="button_special" type="native">
						<bind name="tooltip" value="'StartBattleTooltip'; {_shipID: shipId, _battleType: battleType, _instructionType: 'left'}"/>
						<bind name="action" value="'buttonClick'; 'reenterBalancer'"/>
						<params>
							<param name="label" value="IDS_AGAIN"/>
							<param name="autoSize" value="center"/>
						</params>
						<bind name="focus" value="2; false"/>
					</block>
				</block>
			</block>
		</block>
		<bind name="primaryEntityDH" value="'selfPlayerVoiceChatEntity'; CC.playerVoiceState; selfPlayerName"/>
		<bind name="watchDH" value="'selfPlayerVoiceChatIsSpeaking'; ['selfPlayerVoiceChatEntity.playerVoiceState.evIsSpeakingChanged']; selfPlayerVoiceChatEntity.playerVoiceState.isSpeaking"/>
		<block>
			<styleClass value="$FullsizeAbsolute"/>
			<styleClass value="$BottomMenu"/>
			<block>
				<style>
					<marginLeft value="10px"/>
					<marginTop value="4px"/>
					<width value="19px"/>
					<height value="17px"/>
				</style>
				<bind name="instance" value="'VoiceChatOutgoingIcon'; {_isSpeaking: selfPlayerVoiceChatIsSpeaking}"/>
			</block>
		</block>
	</block>
</ui>
